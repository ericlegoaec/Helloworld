/* VimeoPlayer - v3.1.23 - 2018-08-15 - https://player.vimeo.com/NOTICE.txt */
var VimeoPlayer = function() {
    "use strict";
    var s = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};

    function e(e) {
        return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e
    }

    function t(e, t) {
        return e(t = {
            exports: {}
        }, t.exports), t.exports
    }
    var i, n, r, o, I = t(function(i) {
            ! function(e, t, n) {
                t[e] = t[e] || n(), i.exports && (i.exports = t[e])
            }("Promise", s, function() {
                var t, a, n, e = Object.prototype.toString,
                    i = "undefined" != typeof setImmediate ? function(e) {
                        return setImmediate(e)
                    } : setTimeout;
                try {
                    Object.defineProperty({}, "x", {}), t = function(e, t, n, i) {
                        return Object.defineProperty(e, t, {
                            value: n,
                            writable: !0,
                            configurable: !1 !== i
                        })
                    }
                } catch (e) {
                    t = function(e, t, n) {
                        return e[t] = n, e
                    }
                }

                function o(e, t) {
                    n.add(e, t), a || (a = i(n.drain))
                }

                function s(e) {
                    var t, n = typeof e;
                    return null == e || "object" != n && "function" != n || (t = e.then), "function" == typeof t && t
                }

                function u() {
                    for (var e = 0; e < this.chain.length; e++) r(this, 1 === this.state ? this.chain[e].success : this.chain[e].failure, this.chain[e]);
                    this.chain.length = 0
                }

                function r(e, t, n) {
                    var i, r;
                    try {
                        !1 === t ? n.reject(e.msg) : (i = !0 === t ? e.msg : t.call(void 0, e.msg)) === n.promise ? n.reject(TypeError("Promise-chain cycle")) : (r = s(i)) ? r.call(i, n.resolve, n.reject) : n.resolve(i)
                    } catch (e) {
                        n.reject(e)
                    }
                }

                function c(e) {
                    var t = this;
                    t.triggered || (t.triggered = !0, t.def && (t = t.def), t.msg = e, t.state = 2, 0 < t.chain.length && o(u, t))
                }

                function l(e, n, i, r) {
                    for (var t = 0; t < n.length; t++) ! function(t) {
                        e.resolve(n[t]).then(function(e) {
                            i(t, e)
                        }, r)
                    }(t)
                }

                function d(e) {
                    this.def = e, this.triggered = !1
                }

                function f(e) {
                    this.promise = e, this.state = 0, this.triggered = !1, this.chain = [], this.msg = void 0
                }

                function h(e) {
                    if ("function" != typeof e) throw TypeError("Not a function");
                    if (0 !== this.__NPO__) throw TypeError("Not a promise");
                    this.__NPO__ = 1;
                    var i = new f(this);
                    this.then = function(e, t) {
                        var n = {
                            success: "function" != typeof e || e,
                            failure: "function" == typeof t && t
                        };
                        return n.promise = new this.constructor(function(e, t) {
                            if ("function" != typeof e || "function" != typeof t) throw TypeError("Not a function");
                            n.resolve = e, n.reject = t
                        }), i.chain.push(n), 0 !== i.state && o(u, i), n.promise
                    }, this.catch = function(e) {
                        return this.then(void 0, e)
                    };
                    try {
                        e.call(void 0, function(e) {
                            (function e(n) {
                                var i, r = this;
                                if (!r.triggered) {
                                    r.triggered = !0, r.def && (r = r.def);
                                    try {
                                        (i = s(n)) ? o(function() {
                                            var t = new d(r);
                                            try {
                                                i.call(n, function() {
                                                    e.apply(t, arguments)
                                                }, function() {
                                                    c.apply(t, arguments)
                                                })
                                            } catch (e) {
                                                c.call(t, e)
                                            }
                                        }): (r.msg = n, r.state = 1, 0 < r.chain.length && o(u, r))
                                    } catch (e) {
                                        c.call(new d(r), e)
                                    }
                                }
                            }).call(i, e)
                        }, function(e) {
                            c.call(i, e)
                        })
                    } catch (e) {
                        c.call(i, e)
                    }
                }
                n = function() {
                    var n, i, r;

                    function o(e, t) {
                        this.fn = e, this.self = t, this.next = void 0
                    }
                    return {
                        add: function(e, t) {
                            r = new o(e, t), i ? i.next = r : n = r, i = r, r = void 0
                        },
                        drain: function() {
                            var e = n;
                            for (n = i = a = void 0; e;) e.fn.call(e.self), e = e.next
                        }
                    }
                }();
                var v = t({}, "constructor", h, !1);
                return t(h.prototype = v, "__NPO__", 0, !1), t(h, "resolve", function(n) {
                    return n && "object" == typeof n && 1 === n.__NPO__ ? n : new this(function(e, t) {
                        if ("function" != typeof e || "function" != typeof t) throw TypeError("Not a function");
                        e(n)
                    })
                }), t(h, "reject", function(n) {
                    return new this(function(e, t) {
                        if ("function" != typeof e || "function" != typeof t) throw TypeError("Not a function");
                        t(n)
                    })
                }), t(h, "all", function(t) {
                    var a = this;
                    return "[object Array]" != e.call(t) ? a.reject(TypeError("Not an array")) : 0 === t.length ? a.resolve([]) : new a(function(n, e) {
                        if ("function" != typeof n || "function" != typeof e) throw TypeError("Not a function");
                        var i = t.length,
                            r = Array(i),
                            o = 0;
                        l(a, t, function(e, t) {
                            r[e] = t, ++o === i && n(r)
                        }, e)
                    })
                }), t(h, "race", function(t) {
                    var i = this;
                    return "[object Array]" != e.call(t) ? i.reject(TypeError("Not an array")) : new i(function(n, e) {
                        if ("function" != typeof n || "function" != typeof e) throw TypeError("Not a function");
                        l(i, t, function(e, t) {
                            n(t)
                        }, e)
                    })
                }), h
            })
        }),
        a = {
            object: !0,
            symbol: !0
        },
        u = function(e) {
            return null != e
        },
        c = Object.keys,
        l = function() {
            try {
                return !0
            } catch (e) {
                return !1
            }
        }() ? Object.keys : function(e) {
            return c(u(e) ? Object(e) : e)
        },
        d = Math.max,
        f = function() {
            var e, t = Object.assign;
            return "function" == typeof t && (t(e = {
                foo: "raz"
            }, {
                bar: "dwa"
            }, {
                trzy: "trzy"
            }), e.foo + e.bar + e.trzy === "razdwatrzy")
        }() ? Object.assign : function(t, n) {
            var i, e, r, o = d(arguments.length, 2);
            for (t = Object(function(e) {
                    if (!u(e)) throw new TypeError("Cannot use null or undefined");
                    return e
                }(t)), r = function(e) {
                    try {
                        t[e] = n[e]
                    } catch (e) {
                        i || (i = e)
                    }
                }, e = 1; e < o; ++e) n = arguments[e], l(n).forEach(r);
            if (void 0 !== i) throw i;
            return t
        },
        h = Array.prototype.forEach,
        v = Object.create,
        p = function(e) {
            var t = v(null);
            return h.call(arguments, function(e) {
                u(e) && function(e, t) {
                    var n;
                    for (n in e) t[n] = e[n]
                }(Object(e), t)
            }), t
        },
        m = function(e) {
            return "function" == typeof e
        },
        g = "razdwatrzy",
        y = String.prototype.indexOf,
        _ = "function" == typeof g.contains && !0 === g.contains("dwa") && !1 === g.contains("foo") ? String.prototype.contains : function(e) {
            return -1 < y.call(this, e, arguments[1])
        },
        b = t(function(e) {
            (e.exports = function(e, t) {
                var n, i, r, o, a;
                return arguments.length < 2 || "string" != typeof e ? (o = t, t = e, e = null) : o = arguments[2], null == e ? (n = r = !0, i = !1) : (n = _.call(e, "c"), i = _.call(e, "e"), r = _.call(e, "w")), a = {
                    value: t,
                    configurable: n,
                    enumerable: i,
                    writable: r
                }, o ? f(p(o), a) : a
            }).gs = function(e, t, n) {
                var i, r, o, a;
                return "string" != typeof e ? (o = n, n = t, t = e, e = null) : o = arguments[3], null == t ? t = void 0 : m(t) ? null == n ? n = void 0 : m(n) || (o = n, n = void 0) : (o = t, t = n = void 0), null == e ? r = !(i = !0) : (i = _.call(e, "c"), r = _.call(e, "e")), a = {
                    get: t,
                    set: n,
                    configurable: i,
                    enumerable: r
                }, o ? f(p(o), a) : a
            }
        }),
        w = function(e) {
            if (! function(e) {
                    return !!e && ("symbol" == typeof e || !!e.constructor && "Symbol" === e.constructor.name && "Symbol" === e[e.constructor.toStringTag])
                }(e)) throw new TypeError(e + " is not a symbol");
            return e
        },
        E = Object.create,
        S = Object.defineProperties,
        k = Object.defineProperty,
        T = Object.prototype,
        A = E(null);
    if ("function" == typeof Symbol) {
        i = Symbol;
        try {
            String(i()), o = !0
        } catch (e) {}
    }
    var P = function() {
        var r = E(null);
        return function(e) {
            for (var t, n, i = 0; r[e + (i || "")];) ++i;
            return r[e += i || ""] = !0, k(T, t = "@@" + e, b.gs(null, function(e) {
                n || (n = !0, k(this, t, b(e)), n = !1)
            })), t
        }
    }();
    r = function(e) {
        if (this instanceof r) throw new TypeError("TypeError: Symbol is not a constructor");
        return n(e)
    };
    var C = n = function e(t) {
        var n;
        if (this instanceof e) throw new TypeError("TypeError: Symbol is not a constructor");
        return o ? i(t) : (n = E(r.prototype), t = void 0 === t ? "" : String(t), S(n, {
            __description__: b("", t),
            __name__: b("", P(t))
        }))
    };
    S(n, {
        for: b(function(e) {
            return A[e] ? A[e] : A[e] = n(String(e))
        }),
        keyFor: b(function(e) {
            var t;
            for (t in w(e), A)
                if (A[t] === e) return t
        }),
        hasInstance: b("", i && i.hasInstance || n("hasInstance")),
        isConcatSpreadable: b("", i && i.isConcatSpreadable || n("isConcatSpreadable")),
        iterator: b("", i && i.iterator || n("iterator")),
        match: b("", i && i.match || n("match")),
        replace: b("", i && i.replace || n("replace")),
        search: b("", i && i.search || n("search")),
        species: b("", i && i.species || n("species")),
        split: b("", i && i.split || n("split")),
        toPrimitive: b("", i && i.toPrimitive || n("toPrimitive")),
        toStringTag: b("", i && i.toStringTag || n("toStringTag")),
        unscopables: b("", i && i.unscopables || n("unscopables"))
    }), S(r.prototype, {
        constructor: b(n),
        toString: b("", function() {
            return this.__name__
        })
    }), S(n.prototype, {
        toString: b(function() {
            return "Symbol (" + w(this).__description__ + ")"
        }),
        valueOf: b(function() {
            return w(this)
        })
    }), k(n.prototype, n.toPrimitive, b("", function() {
        var e = w(this);
        return "symbol" == typeof e ? e : e.toString()
    })), k(n.prototype, n.toStringTag, b("c", "Symbol")), k(r.prototype, n.toStringTag, b("c", n.prototype[n.toStringTag])), k(r.prototype, n.toPrimitive, b("c", n.prototype[n.toPrimitive]));
    var Kn = "function" == typeof Symbol && a[typeof Symbol.iterator] && a[typeof Symbol.toPrimitive] && a[typeof Symbol.toStringTag] ? Symbol : C,
        x = window.Array.from,
        L = [1];
    "function" == typeof x && x(L) === L && (x = !1);
    var ke = x || function(e) {
            return [].slice.call(e, 0)
        },
        M = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e
        } : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        },
        O = function(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        },
        R = function() {
            function i(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(e, t, n) {
                return t && i(e.prototype, t), n && i(e, n), e
            }
        }(),
        D = function(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n, e
        },
        N = Object.assign || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = arguments[t];
                for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
            }
            return e
        },
        Te = function() {
            return function(e, t) {
                if (Array.isArray(e)) return e;
                if (Symbol.iterator in Object(e)) return function(e, t) {
                    var n = [],
                        i = !0,
                        r = !1,
                        o = void 0;
                    try {
                        for (var a, s = e[Symbol.iterator](); !(i = (a = s.next()).done) && (n.push(a.value), !t || n.length !== t); i = !0);
                    } catch (e) {
                        r = !0, o = e
                    } finally {
                        try {
                            !i && s.return && s.return()
                        } finally {
                            if (r) throw o
                        }
                    }
                    return n
                }(e, t);
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }
        }(),
        Ae = window.WeakMap || function() {
            var i = Object.defineProperty,
                e = Date.now() % 1e9,
                t = function() {
                    this.name = "__st" + (1e9 * Math.random() >>> 0) + e++ + "__"
                };
            return t.prototype.set = function(e, t) {
                if ("object" !== (void 0 === e ? "undefined" : M(e)) && "function" != typeof e) throw new TypeError("Invalid value used as weak map key");
                var n = e[this.name];
                return n && n[0] === e ? n[1] = t : i(e, this.name, {
                    value: [e, t],
                    writable: !0
                }), this
            }, t.prototype.get = function(e) {
                var t;
                return (t = e[this.name]) && t[0] === e ? t[1] : void 0
            }, t.prototype.delete = function(e) {
                var t = e[this.name];
                return !(!t || t[0] !== e) && (t[0] = t[1] = void 0, !0)
            }, t.prototype.has = function(e) {
                var t = e[this.name];
                return !!t && t[0] === e
            }, t
        }();
    "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self && self;

    function F(e, t) {
        return e(t = {
            exports: {}
        }, t.exports), t.exports
    }
    var B = F(function(e, t) {
        e.exports = function(u) {
            var c = {};
            return (u = u || {}).eventNames = function() {
                return Object.keys(c)
            }, u.on = function(e, t) {
                for (var n = 0, i = (e = [].concat(e)).length; n < i; n++) {
                    var r = e[n];
                    if (!r) throw new Error("Tried to listen for an undefined event.");
                    c[r] || (c[r] = []), c[r].push(t)
                }
                return u
            }, u.once = function(e, t) {
                function n() {
                    t.apply(u.off(e, n), arguments)
                }
                return n.handler = t, u.on(e, n)
            }, u.off = function(e, t) {
                if (!e) return c = {}, u;
                for (var n = 0, i = (e = [].concat(e)).length; n < i; n++) {
                    var r = e[n];
                    if (r in c)
                        if (t) {
                            var o = c[r].indexOf(t);
                            if (-1 === o)
                                for (var a = 0, s = c[r].length; a < s; a++)
                                    if (c[r][a].handler === t) {
                                        o = n;
                                        break
                                    }
                            if (-1 === o) return u;
                            c[r].splice(o, 1)
                        } else delete c[r]
                }
                return u
            }, u.fire = function(e) {
                if (!e) throw new Error("Tried to fire an undefined event.");
                if (e in c)
                    for (var t = c[e].slice(0), n = 0, i = t.length; n < i; n++) t[n].apply(u, t.slice.call(arguments, 1));
                return u
            }, u
        }
    });

    function q(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function U(e, t) {
        for (var n = 0; n < t.length; n++) {
            var i = t[n];
            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
        }
    }

    function j(e, t, n) {
        return t && U(e.prototype, t), n && U(e, n), e
    }

    function V(e, t, n) {
        return t in e ? Object.defineProperty(e, t, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
        }) : e[t] = n, e
    }

    function H() {
        return (H = Object.assign || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = arguments[t];
                for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
            }
            return e
        }).apply(this, arguments)
    }

    function W(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                writable: !0,
                configurable: !0
            }
        }), t && G(e, t)
    }

    function z(e) {
        return (z = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
            return e.__proto__ || Object.getPrototypeOf(e)
        })(e)
    }

    function G(e, t) {
        return (G = Object.setPrototypeOf || function(e, t) {
            return e.__proto__ = t, e
        })(e, t)
    }

    function Y(e) {
        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return e
    }

    function K(e, t) {
        return !t || "object" !== (void 0 === t ? "undefined" : M(t)) && "function" != typeof t ? Y(e) : t
    }

    function X(e, t) {
        for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = z(e)););
        return e
    }

    function $(e, t, n) {
        return ($ = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(e, t, n) {
            var i = X(e, t);
            if (i) {
                var r = Object.getOwnPropertyDescriptor(i, t);
                return r.get ? r.get.call(n) : r.value
            }
        })(e, t, n || e)
    }

    function J(e, t, n, i) {
        return (J = "undefined" != typeof Reflect && Reflect.set ? Reflect.set : function(e, t, n, i) {
            var r, o = X(e, t);
            if (o) {
                if ((r = Object.getOwnPropertyDescriptor(o, t)).set) return r.set.call(i, n), !0;
                if (!r.writable) return !1
            }
            if (r = Object.getOwnPropertyDescriptor(i, t)) {
                if (!r.writable) return !1;
                r.value = n, Object.defineProperty(i, t, r)
            } else V(i, t, n);
            return !0
        })(e, t, n, i)
    }

    function Q(e, t, n, i, r) {
        if (!J(e, t, n, i || e) && r) throw new Error("failed to set property");
        return n
    }

    function Z(e) {
        return function(e) {
            if (Array.isArray(e)) {
                for (var t = 0, n = new Array(e.length); t < e.length; t++) n[t] = e[t];
                return n
            }
        }(e) || function(e) {
            if (Kn.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return ke(e)
        }(e) || function() {
            throw new TypeError("Invalid attempt to spread non-iterable instance")
        }()
    }
    var ee = F(function(e, t) {
            e.exports = function(u) {
                var c = {};
                return (u = u || {}).on = function(e, t) {
                    for (var n = 0, i = (e = [].concat(e)).length; n < i; n++) {
                        var r = e[n];
                        if (!r) throw new Error("Tried to listen for an undefined event.");
                        c[r] || (c[r] = []), c[r].push(t)
                    }
                    return u
                }, u.once = function(e, t) {
                    function n() {
                        t.apply(u.off(e, n), arguments)
                    }
                    return n.handler = t, u.on(e, n)
                }, u.off = function(e, t) {
                    for (var n = 0, i = (e = [].concat(e)).length; n < i; n++) {
                        var r = e[n];
                        if (!r) throw new Error("Tried to remove an undefined event.");
                        if (r in c) {
                            var o = c[r].indexOf(t);
                            if (-1 === o) {
                                for (var a = 0, s = c[r].length; a < s; a++)
                                    if (c[r][a].handler === t) {
                                        o = n;
                                        break
                                    }
                                if (-1 === o) return u
                            }
                            c[r].splice(o, 1)
                        }
                    }
                    return u
                }, u.fire = function(e) {
                    if (!e) throw new Error("Tried to fire an undefined event.");
                    if (e in c)
                        for (var t = c[e].slice(0), n = 0, i = t.length; n < i; n++) t[n].apply(u, t.slice.call(arguments, 1));
                    return u
                }, u
            }
        }),
        te = function() {
            function t(e) {
                q(this, t), this._available = !1, this._active = !1, this._video = e, ee(this)
            }
            return j(t, null, [{
                key: "displayName",
                get: function() {
                    return "ExternalDisplay"
                }
            }, {
                key: "supported",
                get: function() {
                    return !1
                }
            }, {
                key: "supportedVideoTypes",
                get: function() {
                    return []
                }
            }]), j(t, [{
                key: "showPicker",
                value: function() {}
            }, {
                key: "getFile",
                value: function() {
                    var e = this.constructor.displayName.replace("ExternalDisplay", "");
                    if (this._video.externalDisplayFiles[e]) return this._video.externalDisplayFiles[e];
                    var n = this.constructor.supportedVideoTypes,
                        t = this._video.files.filter(function(e) {
                            return -1 !== n.indexOf(e.mime)
                        }).sort(function(e, t) {
                            return e.mime === t.mime ? e.priority - t.priority : n.indexOf(e.mime) - n.indexOf(t.mime)
                        });
                    if (!t.length) throw new Error("No files available for " + this.constructor.displayName + " external display.");
                    return t[0]
                }
            }, {
                key: "active",
                get: function() {
                    return this._active
                }
            }, {
                key: "available",
                get: function() {
                    return this._available
                }
            }, {
                key: "element",
                get: function() {
                    return document.createElement("div")
                }
            }]), t
        }(),
        Pe = {
            ABORT: "abort",
            CAN_PLAY: "canplay",
            CAN_PLAY_THROUGH: "canplaythrough",
            DURATION_CHANGE: "durationchange",
            EMPTIED: "emptied",
            ENDED: "ended",
            ERROR: "error",
            LOADED_DATA: "loadeddata",
            LOADED_METADATA: "loadedmetadata",
            LOAD_START: "loadstart",
            PAUSE: "pause",
            PLAY: "play",
            PLAYING: "playing",
            PROGRESS: "progress",
            RATE_CHANGE: "ratechange",
            SEEKED: "seeked",
            SEEKING: "seeking",
            STALLED: "stalled",
            SUSPEND: "suspend",
            TIME_UPDATE: "timeupdate",
            VOLUME_CHANGE: "volumechange",
            WAITING: "waiting",
            WEBKIT_BEGIN_FULLSCREEN: "webkitbeginfullscreen",
            WEBKIT_END_FULLSCREEN: "webkitendfullscreen",
            WEBKIT_PRESENTATION_MODE_CHANGED: "webkitpresentationmodechanged"
        },
        ne = {
            AVAILABLE: "externaldisplayavailable",
            UNAVAILABLE: "externaldisplayunavailable",
            ACTIVATED: "externaldisplayactivated",
            DEACTIVATED: "externaldisplaydeactivated"
        },
        ie = {
            AIRPLAY_AVAILABLE: "available",
            AIRPLAY_UNAVAILABLE: "unavailable",
            AIRPLAY_ACTIVATED: "activated",
            AIRPLAY_DEACTIVATED: "deactivated"
        },
        Ce = {
            SCANNER_CHANGE: "scannerchange",
            SCANNER_ERROR: "scannererror",
            FILE_ERROR: "fileerror",
            FILE_SRC_UPDATE: "filesrcupdate",
            DOWNLOAD_END: "downloadend",
            DOWNLOAD_ERROR: "downloaderror",
            DRM_AUTH_FAILURE: "drmauthfailure",
            DRM_AUTH_SUCCESS: "drmauthsuccess",
            DRM_FAILURE: "drmfailure",
            EME_UNSUPPORTED: "emeunsupported",
            CURRENT_FILE_CHANGE: "currentfilechange",
            MEDIA_URL_EXPIRED: "mediaurlexpired",
            STREAM_CHANGE: "streamchange",
            STREAM_BUFFER_START: "streambufferstart",
            STREAM_BUFFER_END: "streambufferend",
            DROPPED_FRAMES: "droppedframes",
            BANDWIDTH: "bandwidth",
            STREAM_TARGET_CHANGE: "streamtargetchange",
            PRESENTATION_MODE_CHANGE: "presentationmodechange",
            CUE_POINT: "cuepoint",
            BUFFER_OCCUPANCY: "bufferoccupancy",
            MANIFEST_TIMEOUT: "manifesttimeout",
            MANIFEST_LOADED: "manifestloaded",
            TEXT_SRC_UPDATE: "texttracksrcupdate",
            AV_DURATION_MISMATCH: "avdurationmismatch"
        },
        xe = {
            EVENT_PENDING: "liveeventpending",
            EVENT_ACTIVE: "liveeventactive",
            EVENT_STARTING: "liveeventstarting",
            EVENT_STARTED: "liveeventstarted",
            EVENT_ENDED: "liveeventended",
            ARCHIVE_STARTED: "livearchivestarted",
            ARCHIVE_DONE: "livearchivedone",
            ARCHIVE_ERROR: "livearchiveerror",
            STREAM_ONLINE: "livestreamonline",
            STREAM_OFFLINE: "livestreamoffline",
            REPRESENTATIONS_AVAILABLE: "liverepresentationsavailable"
        },
        re = {
            CAMERA_UPDATE: "cameraupdate",
            MOTION_START: "motionstart",
            MOTION_END: "motionend",
            SPATIAL_UNSUPPORTED: "spatialunsupported"
        },
        oe = {
            MEDIASESSION_PLAY: "mediasessionplay",
            MEDIASESSION_PAUSE: "mediasessionpause",
            MEDIASESSION_SEEK_FORWARD: "mediasessionseekforward",
            MEDIASESSION_SEEK_BACKWARD: "mediasessionseekbackward"
        },
        ae = H({}, Pe, ne, ie, Ce, re, xe, oe),
        AirPlayExternalDisplay = function(e) {
            function AirPlayExternalDisplay(e) {
                var t;
                return q(this, AirPlayExternalDisplay), (t = K(this, z(AirPlayExternalDisplay).call(this, e)))._videoElement = document.createElement("video"), t._videoElement.setAttribute("data-airplay", ""), t._videoElement.setAttribute("x-webkit-airplay", "allow"), t.addVideoEventListeners(), t
            }
            return W(AirPlayExternalDisplay, te), j(AirPlayExternalDisplay, null, [{
                key: "displayName",
                get: function() {
                    return "AirPlayExternalDisplay"
                }
            }, {
                key: "supported",
                get: function() {
                    return "WebKitPlaybackTargetAvailabilityEvent" in window
                }
            }, {
                key: "supportedVideoTypes",
                get: function() {
                    return ["application/vnd.apple.mpegurl", "video/mp4"]
                }
            }]), j(AirPlayExternalDisplay, [{
                key: "addVideoEventListeners",
                value: function(e) {
                    var t = this;
                    void 0 === e && (e = this._videoElement), e.addEventListener(Pe.LOADED_METADATA, function(e) {
                        t.fire(Pe.LOADED_METADATA, e)
                    }), e.addEventListener("webkitplaybacktargetavailabilitychanged", function(e) {
                        switch (e.availability) {
                            case "available":
                                t._available || (t._available = !0, t.fire(ie.AIRPLAY_AVAILABLE));
                                break;
                            case "not-available":
                                t._available && (t._available = !1, t.fire(ie.AIRPLAY_UNAVAILABLE))
                        }
                    }), e.addEventListener("webkitcurrentplaybacktargetiswirelesschanged", function(e) {
                        if (e.target.webkitCurrentPlaybackTargetIsWireless) return t._active = !0, void t.fire(ie.AIRPLAY_ACTIVATED);
                        t._active = !1, t.fire(ie.AIRPLAY_DEACTIVATED)
                    })
                }
            }, {
                key: "showPicker",
                value: function() {
                    var e = this;
                    this._videoElement.webkitShowPlaybackTargetPicker(), this.loadMetadata().then(function() {
                        return e._videoElement.webkitShowPlaybackTargetPicker()
                    }).catch(function() {})
                }
            }, {
                key: "loadMetadata",
                value: function() {
                    var n = this;
                    return 1 <= this._videoElement.readyState ? I.resolve() : new I(function(e, t) {
                        n._videoElement.addEventListener(Pe.LOADED_METADATA, function() {
                            e()
                        }), n._videoElement.src = n.getFile().src
                    })
                }
            }, {
                key: "element",
                get: function() {
                    return this._videoElement
                },
                set: function(e) {
                    if (!(e instanceof HTMLVideoElement)) throw new TypeError("The element for AirPlay must be a <video>.");
                    e !== this._videoElement && (this.addVideoEventListeners(e), this._videoElement = e, this._videoElement.setAttribute("x-webkit-airplay", "allow"))
                }
            }]), AirPlayExternalDisplay
        }();
    Array.prototype.find || Object.defineProperty(Array.prototype, "find", {
        value: function(e) {
            for (var t = Object(this), n = t.length >>> 0, i = arguments[1], r = 0; r < n;) {
                var o = t[r];
                if (e.call(i, o, r, t)) return o;
                r++
            }
        }
    });
    var se = navigator.userAgent.toLowerCase();

    function ue(e) {
        e = e.toLowerCase();
        var t = new RegExp(e).test(se);
        return "safari" === e ? t && new RegExp("version").test(se) : t
    }

    function ce(e) {
        var t = document.createElement("div"),
            n = e.charAt(0).toUpperCase() + e.slice(1),
            i = (e + " " + ["Webkit", "Moz", "O", "ms"].join(n + " ") + n).split(" ");
        for (var r in i) {
            var o = i[r];
            if (void 0 !== t.style[o]) return o
        }
        return e
    }
    var le = !!ue("android") && (parseFloat(se.replace(/^.* android (\d+)\.(\d+).*$/, "$1.$2")) || !0),
        de = window.devicePixelRatio || 1,
        fe = !(!ue("windows phone") && !ue("iemobile")) && (parseFloat(se.replace(/^.* windows phone (os )?(\d+)\.(\d+).*$/, "$2.$3")) || !0),
        he = !!ue("msie") && parseFloat(se.replace(/^.*msie (\d+).*$/, "$1")),
        ve = !!ue("trident") && parseFloat(se.replace(/^.*trident\/(\d+)\.(\d+).*$/, "$1.$2")) + 4,
        pe = !!(ue("ipad;") || ue("iphone;") || ue("ipod touch;")) && parseFloat(se.replace(/^.* os (\d+)_(\d+).*$/, "$1.$2"));

    function me() {
        if (!ue("safari")) return [];
        var e = se.split(" ").find(function(e) {
            return /version\//.test(e)
        });
        return e ? e.replace("version/", "").split(".").map(function(e) {
            return parseInt(e, 10)
        }) : []
    }
    var ge = ue("safari") && ue("apple") && !ue("chrome") && !ue("android") && 11 == me()[0],
        ye = {
            airPlay: "WebKitPlaybackTargetAvailabilityEvent" in window,
            android: le,
            hasAutoplayPolicy: le || pe || ge || 66 <= function() {
                if (!ue("chrome")) return [];
                var e = se.split(" ").find(function(e) {
                    return pe ? /CriOS\//.test(e) : /chrome\//.test(e)
                });
                return e ? e.replace("chrome/", "").split(".").map(function(e) {
                    return parseInt(e, 10)
                }) : []
            }()[0],
            iOS: pe,
            mobileAndroid: le && ue("mobile"),
            browser: {
                bb10: ue("bb10"),
                chrome: ue("chrome"),
                firefox: ue("firefox"),
                ie: he || ve,
                edge: ue("edge"),
                opera: ue("opera"),
                safari: ue("safari") && ue("apple") && !ue("chrome") && !ue("android")
            },
            devicePixelRatio: de,
            flash: function() {
                var e = navigator,
                    t = !1,
                    n = [0, 0, 0],
                    i = null,
                    r = "Shockwave Flash",
                    o = "application/x-shockwave-flash";
                if (void 0 !== e.plugins && "object" === M(e.plugins[r])) !(i = e.plugins[r].description) || void 0 !== e.mimeTypes && e.mimeTypes[o] && !e.mimeTypes[o].enabledPlugin || (t = !0, i = i.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), n[0] = parseInt(i.replace(/^(.*)\..*$/, "$1"), 10), n[1] = parseInt(i.replace(/^.*\.(.*)\s.*$/, "$1"), 10), n[2] = /[a-zA-Z]/.test(i) ? parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0);
                else if (void 0 !== window.ActiveXObject) try {
                    var a = new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
                    a && (i = a.GetVariable("$version")) && (t = !0, i = i.split(" ")[1].split(","), n = [parseInt(i[0], 10), parseInt(i[1], 10), parseInt(i[2], 10)])
                } catch (e) {}
                return {
                    installed: t,
                    version: n.join("."),
                    major: n[0],
                    minor: n[1],
                    revision: n[2]
                }
            }(),
            iPhone: ue("iphone;") || ue("ipod touch;") || ue("ipod;"),
            iPad: ue("ipad;"),
            iPadNonRetina: ue("ipad;") && de < 2,
            mac: ue("mac os"),
            pointerEvents: window.navigator.pointerEnabled || window.navigator.msPointerEnabled || !1,
            svg: !!document.createElementNS && !!document.createElementNS("http://www.w3.org/2000/svg", "svg").createSVGRect,
            touch: "ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch || ue("windows phone") || 1 < window.navigator.maxTouchPoints || window.navigator.msMaxTouchPoints || !1,
            transformProperty: ce("transform"),
            transitionProperty: ce("transition"),
            windowsPhone: fe
        },
        _e = /mac os x 10_13/.test(se),
        be = ye.iOS && /os 11/.test(se),
        we = ye.iPhone && 812 === window.screen.availHeight && 375 === window.screen.availWidth,
        Ee = ye.iPad && (1024 === window.screen.availHeight && 1366 === window.screen.availWidth || 1112 === window.screen.availHeight && 834 === window.screen.availWidth);
    ye.hevc = !!(ge && _e || ge && be) || "undefined" != typeof MediaSource && MediaSource.isTypeSupported('video/mp4; codecs="hvc1"'), ye.hdr = ge && be && (we || Ee), ye.vp9hdr = (window.matchMedia("(color-gamut: p3)").matches || window.matchMedia("(color-gamut: rec2020)").matches) && 48 <= screen.colorDepth && (MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.00"') || MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.01"') || MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.00"') || MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.01"')), ye.spatialPlayback = !(ye.iOS || ye.iPad || ye.browser.ie) && (!ue("safari") || 11 < me()[0] || 11 == me()[0] && (1 < me()[2] || 0 < me()[1])), ye.stereoscopic = ye.spatialPlayback && ye.mobileAndroid;
    var TelecineError = function TelecineError(e, t) {
        q(this, TelecineError), this.name = e, this.message = t, Object.freeze(this)
    };

    function Se(t, n, i) {
        var r;
        try {
            document.removeChild({})
        } catch (e) {
            r = Object.create(Object.getPrototypeOf(e), {
                name: {
                    value: n,
                    configurable: !0,
                    writable: !0
                },
                code: {
                    value: t,
                    configurable: !0,
                    writable: !0
                },
                message: {
                    value: i,
                    configurable: !0,
                    writable: !0
                },
                toString: {
                    value: function() {
                        return n + ": DOM Exception " + t
                    },
                    configurable: !0,
                    writable: !0
                }
            })
        }
        return Object.freeze(r)
    }
    var Le = /Firefox/.test(navigator.userAgent),
        Oe = /i(Phone|Pad|Pod touch);/.test(navigator.userAgent),
        Re = /Android/.test(navigator.userAgent),
        Ie = {
            firefox: Le,
            iOS: Oe,
            android: Re,
            androidMobile: Re && /mobile/.test(navigator.userAgent.toLowerCase()),
            chrome: function() {
                var e = navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\./);
                return !!e && {
                    major: e[1],
                    minor: e[2]
                }
            }()
        };
    var Me = function(e) {
        for (var t = 0, n = this.length; t < n; t++)
            if (this[t].id === "" + e) return this[t];
        return null
    };

    function De(e) {
        return void 0 === e && (e = []), e.item = function(e) {
            return this[e]
        }, e.getTrackById = Me, e
    }

    function Ne() {
        return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function(e) {
            return (e ^ (16 * Math.random() >> e) / 4).toString(16)
        })
    }

    function Fe(e) {
        return function(e) {
            for (var t = window.atob(e), n = t.length, i = new Uint8Array(n), r = 0; r < n; r++) i[r] = t.charCodeAt(r);
            return i
        }(e).buffer
    }

    function Be(e) {
        return setTimeout(e, 0)
    }

    function qe(e, t, n, i) {
        var r = 0,
            o = 0,
            a = e,
            s = t,
            u = n / i;
        return u <= a / s ? r = (u * (o = s)).toFixed(2) : o = ((r = a) / u).toFixed(2), {
            width: r,
            height: o,
            left: Math.max((a - r) / 2, 0),
            top: Math.max((s - o) / 2, 0)
        }
    }

    function Ue(e) {
        var t = /^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/.exec(e),
            n = 0;
        if (void 0 !== t[8] && (n += t[8]), void 0 !== t[7] && (n += 60 * t[7]), void 0 !== t[6] && (n += 3600 * t[6]), void 0 !== t[5] && (n += 86400 * t[5]), void 0 !== t[4] && (n += 604800 * t[4]), void 0 !== t[3] && (n += 2628e3 * t[3]), void 0 !== t[2] && (n += 3154e4 * t[2]), 0 !== n) return n
    }

    function je(e) {
        var t = [document.fullscreenElement, document.webkitFullscreenElement, document.webkitCurrentFullScreenElement, document.mozFullScreenElement, document.msFullscreenElement].find(function(e) {
            return void 0 !== e
        });
        return void 0 !== t ? !!t : e.webkitDisplayingFullscreen
    }

    function Ve(r, o) {
        return void 0 === o && (o = !1), new I(function(t, n) {
            var i = new XMLHttpRequest;
            i.open("GET", r, !0), i.onload = function() {
                if (200 !== i.status && n("Failed to load JSON url: " + r + " " + i.status), o) {
                    var e;
                    try {
                        e = JSON.parse(i.response)
                    } catch (e) {
                        n("Failed to parse JSON url: " + e + " " + r + " " + i.response)
                    }
                    t(e)
                } else t(i)
            }, i.onerror = function() {
                n("Failed to load JSON url: " + r)
            }, i.send()
        })
    }
    var He = function(e, t) {
        if (!e || void 0 === e[t]) throw Se(1, "INDEX_SIZE_ERR");
        return e[t]
    };

    function We(t, n) {
        var e;
        return void 0 === t && (t = []), void 0 === n && (n = []), Object.freeze(((e = {
            get length() {
                return t.length
            },
            start: function(e) {
                return He(t, e)
            },
            end: function(e) {
                return He(n, e)
            }
        })[Kn.iterator] = function() {
            return function(e, t) {
                var n, i = 0;
                return (n = {})[Kn.iterator] = function() {
                    return this
                }, n.next = function() {
                    return i < e.length ? {
                        done: !1,
                        value: t ? [e[i], t[i++]] : e[i++]
                    } : {
                        done: !0
                    }
                }, n
            }(t, n)
        }, e))
    }
    We.from = function(e) {
        if (!(e instanceof TimeRanges)) throw new TypeError("Can only create a TelecineTimeRange from a TimeRanges object.");
        for (var t = [], n = [], i = 0, r = e.length; i < r; i++) t.push(e.start(i)), n.push(e.end(i));
        return We(t, n)
    };
    var ze = function() {
            function i(e, t) {
                var n = this;
                void 0 === t && (t = {}), q(this, i), this._element = e, this._options = t, this._telecineVideo = null, this._currentFile = null, this._externalDisplays = [], ee(this), this.on("play", function() {
                    return n._initMediaSession()
                })
            }
            return j(i, null, [{
                key: "displayName",
                get: function() {
                    return "Scanner"
                }
            }, {
                key: "supported",
                get: function() {
                    return !1
                }
            }, {
                key: "supportedVideoTypes",
                get: function() {
                    return []
                }
            }, {
                key: "supportedAudioTypes",
                get: function() {
                    return []
                }
            }, {
                key: "supportedExternalDisplays",
                get: function() {
                    return []
                }
            }, {
                key: "supportsSettingVolume",
                get: function() {
                    return !0
                }
            }, {
                key: "supportsTextTracks",
                get: function() {
                    return !1
                }
            }, {
                key: "supportsPlaybackRate",
                get: function() {
                    return !1
                }
            }]), j(i, [{
                key: "deactivate",
                value: function() {
                    this._telecineVideo && (this._telecineVideo.off("filesrcupdate"), this._telecineVideo.off("texttracksrcupdate"))
                }
            }, {
                key: "reactivate",
                value: function() {}
            }, {
                key: "play",
                value: function() {
                    return I.reject(new TelecineError("NotImplemented", "The scanner must implement the play method."))
                }
            }, {
                key: "pause",
                value: function() {
                    throw new TelecineError("NotImplemented", "The scanner must implement the pause method.")
                }
            }, {
                key: "addTextTrack",
                value: function(e) {
                    return this
                }
            }, {
                key: "removeTextTrack",
                value: function(e) {
                    return this
                }
            }, {
                key: "getCuesForTrack",
                value: function(e) {
                    return []
                }
            }, {
                key: "getActiveCuesForTrack",
                value: function(e) {
                    return []
                }
            }, {
                key: "setModeForTrack",
                value: function(e, t) {
                    return this
                }
            }, {
                key: "setSrcForTrack",
                value: function(e, t) {
                    return this
                }
            }, {
                key: "addCuePoint",
                value: function(e, t) {
                    throw void 0 === t && (t = {}), new TelecineError("CuePointsNotSupported", "Cue points are not supported in this scanner.")
                }
            }, {
                key: "removeCuePoint",
                value: function(e) {
                    return !1
                }
            }, {
                key: "removeAllCuePoints",
                value: function() {
                    return !1
                }
            }, {
                key: "showExternalDisplayPicker",
                value: function(t) {
                    if (!this._externalDisplays.length) throw new TelecineError("ExternalDisplayUnvailable", "No external displays are available.");
                    if (t) {
                        var e = this._externalDisplays.filter(function(e) {
                            return e.constructor.displayName.replace("ExternalDisplay", "") === t
                        })[0];
                        if (!e) throw new TelecineError("InvalidExternalDisplay", "The specified external display is not available.");
                        e.showPicker()
                    } else this._externalDisplays[0].showPicker()
                }
            }, {
                key: "initDrm",
                value: function() {
                    return !1
                }
            }, {
                key: "_pickFile",
                value: function() {
                    return this._files.length < 1 ? null : this._files.slice(0).sort(function(e, t) {
                        return e.priority - t.priority
                    })[0]
                }
            }, {
                key: "_updateCurrentFile",
                value: function() {
                    var e = this._pickFile();
                    e ? this.currentFile = e : this.fire(Ce.SCANNER_ERROR, {
                        reason: "all files failed"
                    })
                }
            }, {
                key: "_switchToNextFile",
                value: function() {
                    var e = this._files.indexOf(this._currentFile);
                    this._files.splice(e, 1), this._updateCurrentFile()
                }
            }, {
                key: "_initMediaSession",
                value: function() {
                    var e = this;
                    if ("mediaSession" in navigator) {
                        var t = {
                            title: this._telecineVideo.title,
                            artist: this._telecineVideo.subtitle,
                            artwork: []
                        };
                        this._telecineVideo.metadata.thumbnail && t.artwork.push({
                            src: this._telecineVideo.metadata.thumbnail
                        }), navigator.mediaSession.metadata = new MediaMetadata(t), "function" == typeof navigator.mediaSession.setActionHandler && (navigator.mediaSession.setActionHandler("play", function() {
                            e.play(), e.fire(oe.MEDIASESSION_PLAY)
                        }), navigator.mediaSession.setActionHandler("pause", function() {
                            e.pause(), e.fire(oe.MEDIASESSION_PAUSE)
                        }), navigator.mediaSession.setActionHandler("seekforward", function() {
                            e.currentTime = Math.min(e.duration, e.currentTime + 10), e.fire(oe.MEDIASESSION_SEEK_FORWARD)
                        }), navigator.mediaSession.setActionHandler("seekbackward", function() {
                            e.currentTime = Math.max(0, e.currentTime - 10), e.fire(oe.MEDIASESSION_SEEK_BACKWARD)
                        }))
                    }
                }
            }, {
                key: "buffered",
                get: function() {
                    return We()
                }
            }, {
                key: "cuePoints",
                get: function() {
                    return []
                }
            }, {
                key: "currentFile",
                get: function() {
                    return this._currentFile
                },
                set: function(e) {
                    this._currentFile = e, this.fire(Ce.CURRENT_FILE_CHANGE, e)
                }
            }, {
                key: "currentTime",
                get: function() {
                    return 0
                },
                set: function(e) {}
            }, {
                key: "duration",
                get: function() {
                    return NaN
                }
            }, {
                key: "ended",
                get: function() {
                    return !1
                }
            }, {
                key: "externalDisplayAvailable",
                get: function() {
                    return this._externalDisplays.some(function(e) {
                        return e.available
                    })
                }
            }, {
                key: "externalDisplayActive",
                get: function() {
                    return this._externalDisplays.some(function(e) {
                        return e.active
                    })
                }
            }, {
                key: "loop",
                get: function() {
                    return !1
                },
                set: function(e) {}
            }, {
                key: "isLowerProfileAvailable",
                get: function() {
                    return null
                }
            }, {
                key: "muted",
                get: function() {
                    return !1
                },
                set: function(e) {}
            }, {
                key: "playsinline",
                get: function() {
                    return !1
                },
                set: function(e) {}
            }, {
                key: "paused",
                get: function() {
                    return !0
                }
            }, {
                key: "defaultPlaybackRate",
                get: function() {
                    return 1
                },
                set: function(e) {}
            }, {
                key: "playbackRate",
                get: function() {
                    return 1
                },
                set: function(e) {}
            }, {
                key: "preload",
                get: function() {
                    return "none"
                },
                set: function(e) {}
            }, {
                key: "presentationMode",
                get: function() {
                    return "inline"
                },
                set: function(e) {
                    if (-1 === this.supportedPresentationModes.indexOf(e)) throw new TelecineError("InvalidPresentationMode", "The " + e + " presentation mode is not supported.")
                }
            }, {
                key: "supportedPresentationModes",
                get: function() {
                    return ["inline"]
                }
            }, {
                key: "video",
                get: function() {
                    return this._telecineVideo
                },
                set: function(i) {
                    var r = this;
                    if (this.reactivate(), this._telecineVideo !== i) {
                        if (this._telecineVideo && (this._telecineVideo.off("filesrcupdate"), this._telecineVideo.off("texttracksrcupdate")), this.removeAllCuePoints(), this._telecineVideo = i, this._files = i.files.filter(function(e) {
                                return -1 !== r.constructor.supportedVideoTypes.indexOf(e.mime)
                            }), this._telecineVideo.on("filesrcupdate", function(e) {
                                e === r._currentFile && r._updateCurrentFile()
                            }), this._telecineVideo.on("texttracksrcupdate", function(e) {
                                r.video.currentScanner && r.video.currentScanner.setSrcForTrack(e, e.src)
                            }), this._options.externalDisplays && this._options.externalDisplays.length) {
                            this._externalDisplays = [];
                            var e = this.constructor.supportedExternalDisplays;
                            Array.isArray(e) || (e = []);
                            var t = e.map(function(e) {
                                return e.displayName
                            });
                            this._options.externalDisplays.filter(function(e) {
                                return e.supported && -1 !== t.indexOf(e.displayName)
                            }).forEach(function(e) {
                                var t = new e(i),
                                    n = e.displayName.replace("ExternalDisplay", "");
                                t.on(Pe.LOADED_METADATA, function(e) {
                                    return r.fire(Pe.LOADED_METADATA, e)
                                }), t.on("available", function() {
                                    return r.fire(ne.AVAILABLE, {
                                        type: n
                                    })
                                }), t.on("unavailable", function() {
                                    return r.fire(ne.UNAVAILABLE, {
                                        type: n
                                    })
                                }), t.on("activated", function() {
                                    "function" == typeof r.onexternaldisplayactivated && r.onexternaldisplayactivated(t), r.fire(ne.ACTIVATED, {
                                        type: n
                                    })
                                }), t.on("deactivated", function() {
                                    "function" == typeof r.onexternaldisplaydeactivated && r.onexternaldisplaydeactivated(t), r.fire(ne.DEACTIVATED, {
                                        type: n
                                    })
                                }), r._externalDisplays.push(t)
                            })
                        }
                        this._updateCurrentFile()
                    }
                }
            }, {
                key: "videoWidth",
                get: function() {
                    return 0
                }
            }, {
                key: "videoHeight",
                get: function() {
                    return 0
                }
            }, {
                key: "volume",
                get: function() {
                    return 1
                },
                set: function(e) {}
            }]), i
        }(),
        Ge = new Ae,
        Ye = function() {
            function r(e, t) {
                void 0 === t && (t = {}), q(this, r);
                var n = parseFloat(e);
                if (isNaN(n)) throw new TypeError("Time must be a number.");
                if (n < 0) throw new TypeError("Time must be a positive number.");
                this.time = e, this.data = t, this.id = Ne();
                try {
                    var i = "undefined" == typeof VTTCue ? TextTrackCue : VTTCue;
                    this.vttCue = new i(e, e + .25, JSON.stringify(t)), this.vttCue.id = this.id
                } catch (e) {
                    throw new TelecineError("CuePointsNotSupported", "Cue points are not supported in this browser.")
                }
                Ge.set(this.vttCue, this), Object.freeze(this)
            }
            return j(r, null, [{
                key: "fromVTTCue",
                value: function(e) {
                    if (Ge.has(e)) return Ge.get(e);
                    var t = {};
                    try {
                        t = JSON.parse(e.text)
                    } catch (e) {}
                    return new r(e.startTime, t)
                }
            }]), r
        }(),
        Ke = document.createElement("video"),
        Xe = {
            "application/vnd.apple.mpegurl": "application/vnd.apple.mpegurl",
            "video/mp4": 'video/mp4; codecs="avc1.64001E"',
            "video/webm": 'video/webm; codecs="vp8, vorbis"',
            "video/x-flv": 'video/x-flv; codecs="vp6"'
        },
        $e = function() {
            var e = "undefined" == typeof TextTrack ? {} : TextTrack;
            return {
                disabled: "DISABLED" in e ? e.DISABLED : "disabled",
                hidden: "HIDDEN" in e ? e.HIDDEN : "hidden",
                showing: "SHOWING" in e ? e.SHOWING : "showing"
            }
        }(),
        Je = function() {
            var e = document.createElement("track");
            return "track" in e && "oncuechange" in e.track
        }(),
        Qe = new Ae,
        Ze = function(e) {
            function s(e, t) {
                var n;
                void 0 === t && (t = {}), q(this, s), n = K(this, z(s).call(this, e, t));
                var i = e.querySelector("video");
                return i || ((i = document.createElement("video")).preload = "none", n._element.appendChild(i)), n._video = i, t.htmlScanner && t.htmlScanner.controls && (n._video.controls = !0), n._boundHandleVideoEvent = n.handleVideoEvent.bind(Y(Y(n))), n.addVideoEventListeners(), n._paused = !0, n._preload = "none", n._externalDisplayActivated = !1, n._inFullscreen = !1, n
            }
            return W(s, ze), j(s, null, [{
                key: "displayName",
                get: function() {
                    return "HTMLScanner"
                }
            }, {
                key: "supported",
                get: function() {
                    return 0 < s.supportedVideoTypes.length
                }
            }, {
                key: "supportedVideoTypes",
                get: function() {
                    var e = [];
                    if ("function" != typeof Ke.canPlayType) return e;
                    for (var t in Xe) {
                        var n = Xe[t];
                        ye.android && "application/vnd.apple.mpegurl" === t || (ye.android && !ye.mobileAndroid && "video/mp4" === t && ye.android instanceof String ? 3 < parseInt(ye.android.split(".")[0], 10) && e.push(t) : Ke.canPlayType(n).replace(/^no$/, "") && e.push(t))
                    }
                    return e
                }
            }, {
                key: "supportedExternalDisplays",
                get: function() {
                    return [AirPlayExternalDisplay]
                }
            }, {
                key: "supportsSettingVolume",
                get: function() {
                    if (ye.android) return !1;
                    var e = Ke.volume;
                    return Ke.volume = .5 * e, Ke.volume !== e
                }
            }, {
                key: "supportsTextTracks",
                get: function() {
                    return void 0 !== Ke.textTracks && Ke.textTracks instanceof TextTrackList
                }
            }, {
                key: "supportsPlaybackRate",
                get: function() {
                    if (ye.android && Ie.chrome && Ie.chrome.major < 52) return !1;
                    var e = Ke.playbackRate;
                    Ke.playbackRate = .5 * e;
                    var t = e !== Ke.playbackRate;
                    return Ke.playbackRate = e, t
                }
            }]), j(s, [{
                key: "deactivate",
                value: function() {
                    $(z(s.prototype), "deactivate", this).call(this), this.removeVideoEventListeners(), this.removeSnapshot(), this._video.style.display = "none"
                }
            }, {
                key: "reactivate",
                value: function() {
                    $(z(s.prototype), "reactivate", this).call(this), this.addVideoEventListeners(), this._video.style.display = ""
                }
            }, {
                key: "addVideoEventListeners",
                value: function(n) {
                    var i = this;
                    void 0 === n && (n = this._video), Object.keys(Pe).forEach(function(e) {
                        var t = Pe[e];
                        n.addEventListener(t, i._boundHandleVideoEvent)
                    })
                }
            }, {
                key: "removeVideoEventListeners",
                value: function(n) {
                    var i = this;
                    void 0 === n && (n = this._video), Object.keys(Pe).forEach(function(e) {
                        var t = Pe[e];
                        n.removeEventListener(t, i._boundHandleVideoEvent)
                    })
                }
            }, {
                key: "play",
                value: function() {
                    var n = this;
                    this._video.preload = "", this._paused = !1;
                    var e = this._video.play();
                    return void 0 !== e && (e = e.catch(function(e) {
                        n.fire(Pe.ERROR, new TelecineError(e.name, e.message))
                    })), new I(function(e, t) {
                        n._video.addEventListener("playing", e)
                    })
                }
            }, {
                key: "pause",
                value: function() {
                    this._paused = !0, this._video.pause()
                }
            }, {
                key: "addTextTrack",
                value: function(i) {
                    var t = this,
                        r = document.createElement("track");
                    r.id = "telecine-track-" + i.id, r.src = i.src, r.kind = i.kind, r.srclang = i.language, r.label = i.label, r.addEventListener("cuechange", function() {
                        return i.dispatchEvent("cuechange")
                    }), this._video.addEventListener("timeupdate", function() {
                        je(t._video) && (i.mode = r.track.mode)
                    });
                    var n = function() {
                            var e = Ie.iOS && je(t._video);
                            !i._modeHasBeenSet || e ? i.mode = r.track.mode : r.track.mode = $e[i.mode]
                        },
                        o = [];
                    if (r.addEventListener("load", n), ["loadeddata", "seeking"].forEach(function(e) {
                            t._video.addEventListener(e, n), o.push([e, n])
                        }), i._modeHasBeenSet && (r.track.mode = $e[i.mode]), !Je) {
                        var a = [],
                            e = function() {
                                var e = r.track;
                                if (e && "disabled" !== $e[e.mode]) {
                                    if (a.length !== e.activeCues.length) return i.dispatchEvent("cuechange"), void(a = ke(e.activeCues));
                                    for (var t = 0, n = e.activeCues.length; t < n; t++)
                                        if (e.activeCues[t].startTime !== a[t].startTime) return i.dispatchEvent("cuechange"), void(a = ke(e.activeCues))
                                }
                            };
                        this._video.addEventListener("timeupdate", e), o.push(["timeupdate", e])
                    }
                    return Be(function() {
                        return t._video.appendChild(r)
                    }), Qe.set(i, o), $(z(s.prototype), "addTextTrack", this).call(this, i)
                }
            }, {
                key: "removeTextTrack",
                value: function(e) {
                    var i = this,
                        t = this._video.querySelector("#telecine-track-" + e.id);
                    t && this._video.removeChild(t);
                    var n = Qe.get(e);
                    return Array.isArray(n) && n.forEach(function(e) {
                        var t = e[0],
                            n = e[1];
                        i._video.removeEventListener(t, n)
                    }), $(z(s.prototype), "removeTextTrack", this).call(this, e)
                }
            }, {
                key: "getCuesForTrack",
                value: function(e) {
                    var t = this.getTrackById("telecine-track-" + e.id);
                    return t ? ke(t.cues) : $(z(s.prototype), "getCuesForTrack", this).call(this, e)
                }
            }, {
                key: "getActiveCuesForTrack",
                value: function(e) {
                    var t = this.getTrackById("telecine-track-" + e.id);
                    return t ? ke(t.activeCues) : $(z(s.prototype), "getActiveCuesForTrack", this).call(this, e)
                }
            }, {
                key: "setModeForTrack",
                value: function(e, t) {
                    var n = this.getTrackById("telecine-track-" + e.id);
                    return n && n.mode !== $e[t] && (n.mode = $e[t], Je || "disabled" === t || e.dispatchEvent("cuechange")), $(z(s.prototype), "setModeForTrack", this).call(this, e, t)
                }
            }, {
                key: "setSrcForTrack",
                value: function(e, t) {
                    var n = this._video.querySelector("#telecine-track-" + e.id);
                    return n && null === n.track.cues && (n.src = t), $(z(s.prototype), "setSrcForTrack", this).call(this, e, t)
                }
            }, {
                key: "addCuePoint",
                value: function(e, t) {
                    var n = this;
                    if (void 0 === t && (t = {}), this._cuePointTrack || (this._cuePointTrack = this._video.addTextTrack("metadata"), this._cuePointTrack.mode = "hidden", this._cuePointTrack.addEventListener("cuechange", function(e) {
                            Z(e.target.activeCues).forEach(function(e) {
                                n.fire(Ce.CUE_POINT, Ye.fromVTTCue(e))
                            })
                        })), e = parseFloat(e), isNaN(e)) throw new TypeError("Time must be a number.");
                    if (e < 0 || e >= this.duration) throw new TypeError("Time must be a positive number less than the duration of the video.");
                    var i = new Ye(e, t);
                    return this._cuePointTrack.addCue(i.vttCue), i
                }
            }, {
                key: "removeCuePoint",
                value: function(e) {
                    if (!e) throw new TelecineError("InvalidCuePoint", "The specified cue point is not valid.");
                    return this._cuePointTrack.removeCue(e.vttCue), !0
                }
            }, {
                key: "removeAllCuePoints",
                value: function() {
                    var t = this;
                    return this._cuePointTrack && this._cuePointTrack.length && Z(this._cuePointTrack.cues).forEach(function(e) {
                        t._cuePointTrack.removeCue(e)
                    }), !0
                }
            }, {
                key: "onerror",
                value: function() {
                    if (!this._video.error) return !1;
                    switch (this._video.error.code) {
                        case this._video.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
                            return this.fire(Pe.ERROR, new TelecineError("MediaSrcNotSupportedError", "The media was not suitable.")), this._switchToNextFile(), !1;
                        case this._video.error.MEDIA_ERR_DECODE:
                            return this.fire(Pe.ERROR, new TelecineError("MediaDecodeError", "The media could not be decoded.")), this._switchToNextFile(), !1;
                        case this._video.error.MEDIA_ERR_NETWORK:
                            return this.fire(Pe.ERROR, new TelecineError("MediaNetworkError", "A network error ocurred while fetching the media.")), !1;
                        case this._video.error.MEDIA_ERR_ABORTED:
                            return this.fire(Pe.ERROR, new TelecineError("MediaAbortedError", "The user agent aborted the fetching of the media.")), !1;
                        default:
                            return this.fire(Pe.ERROR, new TelecineError("MediaUnknownError", "An unknown error occurred.")), !1
                    }
                }
            }, {
                key: "onplay",
                value: function() {
                    ("picture-in-picture" === this.presentationMode || "fullscreen" === this.presentationMode || this._inFullscreen) && (this._paused = !1)
                }
            }, {
                key: "onpause",
                value: function() {
                    ("picture-in-picture" === this.presentationMode || "fullscreen" === this.presentationMode || this._inFullscreen) && (this._paused = !0)
                }
            }, {
                key: "onended",
                value: function() {
                    if (this._paused = !0, this._video.paused || this._video.pause(), this.currentTime < this._video.duration) return !1
                }
            }, {
                key: "onwaiting",
                value: function() {
                    return !1
                }
            }, {
                key: "onwebkitbeginfullscreen",
                value: function() {
                    this._inFullscreen = !0
                }
            }, {
                key: "onwebkitendfullscreen",
                value: function() {
                    this._inFullscreen = !1, this._video.paused && (this._paused = !0)
                }
            }, {
                key: "onwebkitpresentationmodechanged",
                value: function() {
                    switch (this._video.webkitPresentationMode) {
                        case "picture-in-picture":
                            this._video.controls = !0;
                            break;
                        case "inline":
                            this._options.htmlScanner && this._options.htmlScanner.controls || (this._video.controls = !1)
                    }
                    this.fire(Ce.PRESENTATION_MODE_CHANGE, this._video.webkitPresentationMode)
                }
            }, {
                key: "shouldHandleVideoEvent",
                value: function(e) {
                    return !0
                }
            }, {
                key: "handleVideoEvent",
                value: function(e) {
                    e.target === this._video && !1 !== this.shouldHandleVideoEvent(e) && ("function" == typeof this["on" + e.type] && !1 === this["on" + e.type](e) || this.fire(e.type))
                }
            }, {
                key: "swapVideo",
                value: function(e, t) {
                    var n = e.paused;
                    this.removeVideoEventListeners(e), e.parentElement.replaceChild(t, e), e.pause(), t.currentTime = e.currentTime, n || t.play(), this.addVideoEventListeners(t), this._video = t
                }
            }, {
                key: "onexternaldisplayactivated",
                value: function(e) {
                    this._externalDisplayActivated || (this._video !== e.element && (this._originalVideo = this._video, this.swapVideo(this._video, e.element)), this._externalDisplayActivated = !0)
                }
            }, {
                key: "onexternaldisplaydeactivated",
                value: function(e) {
                    this._externalDisplayActivated && (this._originalVideo && (this.swapVideo(e.element, this._originalVideo), this._originalVideo = null), this._externalDisplayActivated = !1)
                }
            }, {
                key: "setVideoSrc",
                value: function(e) {
                    this._video.src = e
                }
            }, {
                key: "canSeekTo",
                value: function(e) {
                    var t = this.duration;
                    if (t && t < e && (e = t), 0 < this._video.seekable.length)
                        for (var n = 0, i = this._video.seekable.length; n < i; n++)
                            if (this._video.seekable.start(n) <= e && this._video.seekable.end(n) >= e) return !0;
                    return !1
                }
            }, {
                key: "seekToTime",
                value: function(i) {
                    var r = this;
                    return this.canSeekTo(i) ? (this._video.currentTime = i, I.resolve(this._video.currentTime)) : new I(function(e, t) {
                        var n = function n() {
                            r.canSeekTo(i) && (Object.keys(Pe).forEach(function(e) {
                                var t = Pe[e];
                                r._video.removeEventListener(t, n)
                            }), r._video.currentTime = i, e(r._video.currentTime))
                        };
                        Object.keys(Pe).forEach(function(e) {
                            var t = Pe[e];
                            r._video.addEventListener(t, n)
                        })
                    })
                }
            }, {
                key: "takeSnapshot",
                value: function() {
                    var e = this._element.querySelector("[telecine-snapshot]");
                    e || ((e = document.createElement("canvas")).setAttribute("telecine-snapshot", ""), this._element.appendChild(e)), e.setAttribute("width", this._element.clientWidth + "px"), e.setAttribute("height", this._element.clientHeight + "px"), e.style.display = "";
                    var t = qe(this._video.clientWidth, this._video.clientHeight, this._video.videoWidth, this._video.videoHeight),
                        n = t.width,
                        i = t.height,
                        r = t.left,
                        o = t.top;
                    e.style.cssText = "position:absolute;width:" + n + "px;height:" + i + "px;left:" + r + "px;top:" + o + "px";
                    var a = e.getContext("2d");
                    0 < e.width && 0 < e.height && a.drawImage(this._video, 0, 0, e.width, e.height)
                }
            }, {
                key: "removeSnapshot",
                value: function() {
                    var e = this._element.querySelector("[telecine-snapshot]");
                    e && (e.style.display = "none")
                }
            }, {
                key: "getTrackById",
                value: function(e) {
                    if ("function" == typeof this._video.textTracks.getTrackById) return this._video.textTracks.getTrackById(e);
                    var t = document.getElementById(e);
                    return t ? t.track : null
                }
            }, {
                key: "initDrm",
                value: function() {
                    var e = this._telecineVideo.drmHandler;
                    e && e.init(this)
                }
            }, {
                key: "buffered",
                get: function() {
                    return We.from(this._video.buffered)
                }
            }, {
                key: "cuePoints",
                get: function() {
                    return this._cuePointTrack ? Z(this._cuePointTrack.cues).map(function(e) {
                        return Ye.fromVTTCue(e)
                    }) : $(z(s.prototype), "cuePoints", this)
                }
            }, {
                key: "currentFile",
                get: function() {
                    return $(z(s.prototype), "currentFile", this)
                },
                set: function(e) {
                    var t = this,
                        n = !this._video.paused,
                        i = this.currentTime,
                        r = !this._currentFile || e.video.id !== this._currentFile.video.id;
                    if (r || this.takeSnapshot(), this._currentFile = e, r && (this._video.preload = this._preload), this.constructor === s && 0 < this._video.readyState && (this._video.currentTime = 0), (Ie.iOS || ye.android) && this._currentFile.video.title) {
                        var o = this._currentFile.video.title;
                        this._currentFile.video.subtitle && (o = o + " " + this._currentFile.video.subtitle), this._video.setAttribute("title", o)
                    } else this._video.removeAttribute("title");
                    this.setVideoSrc(this._currentFile.src, r), this.fire(Ce.CURRENT_FILE_CHANGE, e), this.constructor !== s || r ? n && this.play() : (this.seekToTime(i).then(function(e) {
                        return n && t.play(), e
                    }).catch(function() {}), this.once("canplay", function() {
                        return t.removeSnapshot()
                    }), this.once("playing", function() {
                        return t.removeSnapshot()
                    }))
                }
            }, {
                key: "currentTime",
                get: function() {
                    return this._video.currentTime
                },
                set: function(e) {
                    this.seekToTime(e)
                }
            }, {
                key: "duration",
                get: function() {
                    return this._video.duration
                }
            }, {
                key: "ended",
                get: function() {
                    return this._video.ended
                }
            }, {
                key: "loop",
                get: function() {
                    return this._video.loop
                },
                set: function(e) {
                    this._video.loop = e
                }
            }, {
                key: "muted",
                get: function() {
                    return this._video.muted
                },
                set: function(e) {
                    this._video.muted = e
                }
            }, {
                key: "playsinline",
                get: function() {
                    return this._video.playsinline
                },
                set: function(e) {
                    (this._video.playsinline = e) ? this._video.setAttribute("playsinline", ""): this._video.removeAttribute("playsinline")
                }
            }, {
                key: "paused",
                get: function() {
                    return this._paused
                }
            }, {
                key: "defaultPlaybackRate",
                get: function() {
                    return this._video.defaultPlaybackRate
                },
                set: function(e) {
                    this._video.defaultPlaybackRate = e
                }
            }, {
                key: "playbackRate",
                get: function() {
                    return this._video.playbackRate
                },
                set: function(e) {
                    this._video.playbackRate = e
                }
            }, {
                key: "preload",
                get: function() {
                    return this._preload
                },
                set: function(e) {
                    this._video.preload = e, this._preload = e
                }
            }, {
                key: "presentationMode",
                get: function() {
                    return this._video.webkitPresentationMode ? this._video.webkitPresentationMode : $(z(s.prototype), "presentationMode", this)
                },
                set: function(e) {
                    Q(z(s.prototype), "presentationMode", e, this, !0), "function" == typeof this._video.webkitSetPresentationMode && this._video.webkitSetPresentationMode(e)
                }
            }, {
                key: "supportedPresentationModes",
                get: function() {
                    var e = $(z(s.prototype), "supportedPresentationModes", this);
                    return "function" == typeof this._video.webkitSupportsPresentationMode && this._video.webkitSupportsPresentationMode("picture-in-picture") && e.push("picture-in-picture"), e
                }
            }, {
                key: "video",
                get: function() {
                    return this._telecineVideo
                },
                set: function(e) {
                    var t = this;
                    Q(z(s.prototype), "video", e, this, !0), Ie.iOS && this._externalDisplays.forEach(function(e) {
                        "AirPlay" === e.constructor.displayName && (e.element = t._video)
                    }), this.initDrm()
                }
            }, {
                key: "videoWidth",
                get: function() {
                    return this._video.videoWidth
                }
            }, {
                key: "videoHeight",
                get: function() {
                    return this._video.videoHeight
                }
            }, {
                key: "volume",
                get: function() {
                    return this._video.volume
                },
                set: function(e) {
                    this._video.volume = e
                }
            }, {
                key: "readyState",
                get: function() {
                    return this._video.readyState
                }
            }]), s
        }();

    function et(e, t) {
        if (void 0 === t && (t = []), 0 === e.length) return 0;
        for (var n = 0, i = 0, r = 0; r < e.length; r++) {
            var o = t[r] || 1;
            i += o, n += e[r] * o
        }
        return n / i
    }

    function tt(e) {
        e.sort(function(e, t) {
            return e - t
        });
        var t = Math.floor(e.length / 2);
        return e.length % 2 ? e[t] : (e[t - 1] + e[t]) / 2
    }
    var nt = [],
        it = [],
        rt = [],
        ot = [],
        at = function() {
            function m(e) {
                var t = void 0 === e ? {} : e,
                    n = t.retryCount,
                    i = void 0 === n ? 3 : n,
                    r = t.parallel,
                    o = void 0 === r ? 1 : r,
                    a = t.includeWithSpeeds,
                    s = void 0 === a || a;
                q(this, m), this._queue = [], this._activeXhrRequests = new Set, this._retries = new Ae, this._retryCount = i, this._running = !1, this._processingQueue = !1, this._parallel = o, this._includeWithSpeeds = s, this._transmuxer = null, this._initialize()
            }
            return j(m, null, [{
                key: "getPercentileSpeed",
                value: function(e, t) {
                    return void 0 === e && (e = 5), void 0 === t && (t = .8),
                        function(e, t) {
                            if (e.sort(), 0 === e.length) return 0;
                            if (t <= 0) return e[0];
                            if (1 <= t) return e[e.length - 1];
                            var n = e.length * t,
                                i = Math.floor(n),
                                r = i + 1,
                                o = n % 1;
                            return r >= e.length ? e[i] : e[i] * (1 - o) + e[r] * o
                        }(nt.slice(-e), t)
                }
            }, {
                key: "getAverageSpeed",
                value: function(e, t) {
                    return void 0 === e && (e = 5), void 0 === t && (t = []), et(nt.slice(-e), t)
                }
            }, {
                key: "getMedianSpeed",
                value: function(e) {
                    return void 0 === e && (e = 5), tt(nt.slice(-e))
                }
            }, {
                key: "getResponseSpeeds",
                value: function() {
                    return nt
                }
            }, {
                key: "getProgressSpeeds",
                value: function() {
                    return ot
                }
            }, {
                key: "getAverageBitrate",
                value: function(e) {
                    void 0 === e && (e = 1 / 0);
                    for (var t = m.getTime() - e, n = [], i = [], r = ot.length - 1; 0 <= r; r--) {
                        var o = ot[r];
                        if (o.startTime < t) break;
                        n.push(o.bitrate)
                    }
                    for (var a = 0; n.length > a; a++) i.push(n.length - a);
                    return et(n, i)
                }
            }, {
                key: "getFailedSegments",
                value: function() {
                    return it
                }
            }, {
                key: "getSuccessfulSegments",
                value: function() {
                    return rt
                }
            }, {
                key: "getTime",
                value: function() {
                    return "undefined" != typeof performance ? performance.now() : (new Date).getTime()
                }
            }, {
                key: "calculateExponentialBackoff",
                value: function(e) {
                    return 500 * Math.pow(2, e) + Math.round(1e3 * Math.random())
                }
            }]), j(m, [{
                key: "add",
                value: function(e, t, n) {
                    return this._addSegmentToQueue(e, t, n), this._running && !this._processingQueue && this._processQueue(), this
                }
            }, {
                key: "start",
                value: function() {
                    return this._running || (this._running = !0, this._processQueue()), this
                }
            }, {
                key: "stop",
                value: function() {
                    return this._running = !1, this
                }
            }, {
                key: "abort",
                value: function(t) {
                    var n = this;
                    void 0 === t && (t = null), this._queue.filter(function(e) {
                        return !t || t === e[0].stream
                    }).forEach(function(e) {
                        var t = n._getSegmentInfoFromData(e)[3];
                        n.fire("downloadabort", t)
                    }), this._queue = this._queue.filter(function(e) {
                        return t && t !== e[0].stream
                    }), this._activeXhrRequests.forEach(function(e) {
                        t && t !== e.stream || e.abort()
                    })
                }
            }, {
                key: "_insertAtPosition",
                value: function(e, t) {
                    for (var n = 0; n < this._queue.length; n++) {
                        if (this._queue[n][0].priority > e.priority) break
                    }
                    this._queue.splice(n, 0, [e, t])
                }
            }, {
                key: "_initializeMux",
                value: function() {
                    return new I(function(e, t) {
                        window.muxjs ? e() : document.getElementById("muxjs").onload = function() {
                            e()
                        }
                    })
                }
            }, {
                key: "_initialize",
                value: function() {
                    var e = this;
                    this._pendingFetchMap = new Ae, ee(this), window.addEventListener("online", function() {
                        e.start()
                    }), window.addEventListener("offline", function() {
                        e.stop(), e.abort()
                    })
                }
            }, {
                key: "_addSegmentToQueue",
                value: function(e, t, n) {
                    e.hasOwnProperty("priority") ? this._insertAtPosition(e, t) : this._queue[n ? "unshift" : "push"]([e, t])
                }
            }, {
                key: "_processQueue",
                value: function() {
                    if (this._running) {
                        this._processingQueue = !0;
                        for (var e = this._parallel - this._activeXhrRequests.size, t = 0; t < e; t++) this._fetchOne()
                    }
                }
            }, {
                key: "_retry",
                value: function(e, t, n) {
                    var i = this,
                        r = t[0],
                        o = t[1];
                    if (this._retries.get(r) || this._retries.set(r, 0), this._retries.set(r, this._retries.get(r) + 1), this._retries.get(r) > this._retryCount) this._handleDownloadError(n, e.status, e.data.url, e.data.duration);
                    else {
                        var a = m.calculateExponentialBackoff(this._retries.get(r));
                        setTimeout(function() {
                            i.add(r, o, !0)
                        }, a)
                    }
                }
            }, {
                key: "_handleXHRResponse",
                value: function(e, t, n, i) {
                    var r = this;
                    if (500 <= e.status && e.status < 600) this._retry(e, t, n);
                    else if (400 <= e.status && e.status < 500) this._handleDownloadError(n, e.status, e.data.url, e.data.duration);
                    else if (this.fire("downloadend", n, {
                            headers: function(e) {
                                return e ? e.split("\n").reduce(function(e, t) {
                                    var n = t.indexOf(":"),
                                        i = t.substring(0, n),
                                        r = t.substring(n + 1);
                                    return void 0 !== i && void 0 !== r && (e[i.trim().toLowerCase()] = r.trim()), e
                                }, {}) : {}
                            }(e.getAllResponseHeaders())
                        }), rt.push({
                            url: e.data.url,
                            status: e.status,
                            duration: e.data.duration
                        }), e.data.url && e.data.url.match(".ts$")) {
                        var o = new Uint8Array(e.response);
                        this._transmuxer ? this._feedMuxer.bind(this)(e, o, i) : this._initializeMux().then(function() {
                            r._transmuxer = new window.muxjs.Transmuxer({}), r._feedMuxer.bind(r)(e, o, i)
                        }).catch(console.error)
                    } else i.call(this, new Uint8Array(e.response))
                }
            }, {
                key: "_feedMuxer",
                value: function(t, e, n) {
                    var i = this;
                    this._transmuxer.on("data", function(e) {
                        i._transmuxer.off("data"), n.call(i, new Uint8Array(t.data.isInitSegmentRequest ? e.initSegment : e.data.buffer))
                    }), this._transmuxer.push(e), this._transmuxer.flush()
                }
            }, {
                key: "_handleDownloadError",
                value: function(e, t, n, i) {
                    it.push({
                        url: n,
                        status: t,
                        duration: i
                    }), this.fire("downloaderror", e, t)
                }
            }, {
                key: "_getSegmentInfoFromData",
                value: function(e) {
                    var t = e[1],
                        n = e[0],
                        i = n;
                    return n.id && (i = n.id), [n.url, n.byteRange, n.isInitSegmentRequest, i, t]
                }
            }, {
                key: "_continueProcessingQueue",
                value: function() {
                    0 !== this._activeXhrRequests.size || 0 !== this._queue.length ? this._activeXhrRequests.size < this._parallel && this._processQueue() : this._processingQueue = !1
                }
            }, {
                key: "_fetchOne",
                value: function() {
                    var o = this;
                    if (0 !== this._queue.length) {
                        var a = null,
                            s = this._queue.shift(),
                            e = this._getSegmentInfoFromData(s),
                            t = e[0],
                            n = e[1],
                            i = e[2],
                            u = e[3],
                            c = e[4],
                            l = s[0].includeWithBandwidthChecks,
                            d = m.getTime(),
                            f = new XMLHttpRequest;
                        f.stream = s[0].stream, f.data = {}, f.data.url = t, f.data.isInitSegmentRequest = i;
                        var h = 0,
                            v = m.getTime(),
                            p = 0;
                        f.addEventListener("progress", function(e) {
                            if (e.lengthComputable) {
                                var t = 8 * (e.loaded - h),
                                    n = m.getTime(),
                                    i = n - v,
                                    r = {
                                        startTime: v,
                                        length: i,
                                        bitrate: t / (i / 1e3),
                                        index: p
                                    };
                                0 < p && (100 <= ot.length && ot.shift(), ot.push(r)), v = n, h = e.loaded, p += 1, o._pendingFetchMap.set(f, {
                                    bytesTotal: e.total,
                                    bytesLoaded: e.loaded,
                                    percent: e.loaded / e.total,
                                    identifier: u
                                }), o.fire("progress", u)
                            }
                        }), f.open("GET", t, !0), f.responseType = "arraybuffer", n && f.setRequestHeader("Range", "bytes=" + n), f.onload = function(e) {
                            var t = Date.now() - a;
                            f.data.duration = t, o._activeXhrRequests.delete(f), o._pendingFetchMap.delete(f);
                            var n = (m.getTime() - d) / 1e3,
                                i = e.target.response.byteLength;
                            if (40960 < i) {
                                var r = 8 * i / n;
                                100 < nt.length && nt.shift(), o._includeWithSpeeds && l && nt.push(r)
                            }
                            o._handleXHRResponse(f, s, u, c), o._continueProcessingQueue()
                        }, f.onerror = function() {
                            var e = Date.now() - a;
                            f.data.duration = e, o._activeXhrRequests.delete(f), o._pendingFetchMap.delete(f), o._retry(f, s, u), o._continueProcessingQueue()
                        }, f.onabort = function() {
                            var e = Date.now() - a;
                            f.data.duration = e, it.push({
                                url: t,
                                status: "abort",
                                duration: e
                            }), o._pendingFetchMap.delete(f), o._activeXhrRequests.delete(f), o.fire("downloadabort", u), 0 === o._activeXhrRequests.size && 0 === o._queue.length && (o._processingQueue = !1), o._continueProcessingQueue()
                        }, this.fire("downloadstart", u), this._activeXhrRequests.add(f), a = Date.now(), f.data.requestSendTime = a, f.send()
                    } else this._processingQueue = !1
                }
            }, {
                key: "parallel",
                get: function() {
                    return this._parallel
                },
                set: function(e) {
                    this._parallel = e
                }
            }, {
                key: "pendingFetches",
                get: function() {
                    var n = this,
                        i = [];
                    return this._activeXhrRequests.forEach(function(e) {
                        if (n._pendingFetchMap.get(e)) {
                            var t = n._pendingFetchMap.get(e);
                            t.elapsedTime = Date.now() - e.data.requestSendTime, i.push(t)
                        }
                    }), i
                }
            }]), m
        }(),
        st = function() {
            function t(e) {
                q(this, t), ee(this), this._sorcerer = e, this._sourceBuffer = null, this._activeStreamIndex = null, this._needsStreamSwitch = !1, this._needInitSegment = !0, this._lastAppended = null, this._toRemove = [], this._streams = [], this._quotaExceeded = !1, this._quotaExceededTimer = null, this._appendingFinalSegment = !1, this._finalSegmentTime = void 0, this._addingInitSegment = !1, this._isFirstSegment = !0, this._bufferState = {}, this._sorcerer.on("durationset", this._onDurationSet.bind(this))
            }
            return j(t, [{
                key: "addStream",
                value: function(e) {
                    var t = this;
                    e.on("segmentadd", function() {
                        return t._process()
                    });
                    var n = this._streams.push(e) - 1;
                    e.index = n, null === this._activeStreamIndex && (this._setActiveIndex(n), this._needsStreamSwitch = !0)
                }
            }, {
                key: "streamIndexAtTime",
                value: function(e) {
                    return this._bufferState[void 0] ? {
                        stream: this.activeStreamIndex
                    } : this._bufferState[Math.floor(e / 6)]
                }
            }, {
                key: "switchTo",
                value: function(e, t) {
                    var n = this;
                    void 0 === t && (t = !0);
                    var i = e;
                    "object" === (void 0 === e ? "undefined" : M(e)) && (i = e.index);
                    var r = this._activeStreamIndex !== i,
                        o = r;
                    if (!r && this._needsStreamSwitch && (r = !0), r) {
                        this._needsStreamSwitch = !1;
                        var a = this._activeStreamIndex,
                            s = this._streams[a];
                        s && o && t && s.abort(), this._switchToIndex = i, this._setActiveIndex(i), this._finalSegmentTime = void 0
                    }
                    return this._process(), new I(function(e) {
                        r ? n._resolveSwitchComplete = function() {
                            n._switchToIndex === i && (n._resolveSwitchComplete = null, e(), n.fire("streamchange", i))
                        } : e()
                    })
                }
            }, {
                key: "isTimeInBuffer",
                value: function(e) {
                    for (var t = 0; t < this.sourceBuffer.buffered.length; t++) {
                        var n = this.sourceBuffer.buffered.start(t),
                            i = this.sourceBuffer.buffered.end(t);
                        if (n <= e && e <= i) return !0
                    }
                    return !1
                }
            }, {
                key: "hasAppendedFinalSegment",
                value: function() {
                    return void 0 !== this._finalSegmentTime && this.isTimeInBuffer(this._finalSegmentTime)
                }
            }, {
                key: "clear",
                value: function() {
                    this._streams.forEach(function(e) {
                        e.clear()
                    })
                }
            }, {
                key: "remove",
                value: function(n, i) {
                    var r = this;
                    return void 0 === i && (i = this._sorcerer._mediaSource.duration), new I(function(e, t) {
                        r._toRemove.push([n, i, e]), r._process()
                    })
                }
            }, {
                key: "_onDurationSet",
                value: function() {
                    var e = this._sorcerer._mediaSource.duration,
                        t = Math.floor(e / 6);
                    t += 1 < 6 % e ? 1 : 0;
                    for (var n = 0; n < t; n++) this._bufferState[n] = {
                        stream: null,
                        segment: n,
                        type: "video"
                    }
                }
            }, {
                key: "_attachEvents",
                value: function() {
                    this.bound = {
                        handleUpdateEnd: this._handleUpdateEnd.bind(this)
                    }, this._sourceBuffer.addEventListener("updateend", this.bound.handleUpdateEnd), this._sorcerer.on("endofstream", this.bound.handleUpdateEnd)
                }
            }, {
                key: "_handleUpdateEnd",
                value: function(e) {
                    this._appendingFinalSegment && (this._appendingFinalSegment = !1, this._finalSegmentTime = this._sourceBuffer.buffered.end(this._sourceBuffer.buffered.length - 1)), this._sorcerer.checkEndOfStream(), this._lastAppended && (this.fire("appendbufferend", this._lastAppended), this._lastAppended = null, this._resolveSwitchComplete && this._resolveSwitchComplete()), this._process()
                }
            }, {
                key: "_removeEventListeners",
                value: function() {
                    this.bound && (this._sourceBuffer && this._sourceBuffer.removeEventListener("updateend", this.bound.handleUpdateEnd), this._sorcerer.off("endofstream", this.bound.handleUpdateEnd))
                }
            }, {
                key: "_setActiveIndex",
                value: function(e) {
                    this._needInitSegment = !0, this._activeStreamIndex = e, this._sorcerer._frameDropper.streamIndex = e
                }
            }, {
                key: "_process",
                value: function() {
                    var t = this,
                        n = this._streams[this._activeStreamIndex];
                    if (this._sourceBuffer) {
                        if (n && "closed" !== this._sorcerer._mediaSource.readyState) {
                            var i = this._sourceBuffer;
                            if (!i.updating) {
                                if (this._toRemove.length) {
                                    var e = this._toRemove.shift(),
                                        r = e[0],
                                        o = e[1],
                                        a = e[2],
                                        s = this;
                                    return i.addEventListener("updateend", function e(t) {
                                        i.removeEventListener("updateend", e), a(), clearTimeout(s._quotaExceededTimer), s._quotaExceededTimer = setTimeout(function() {
                                            s._quotaExceeded = !1, s._process()
                                        }, 5e3)
                                    }), void i.remove(r, o)
                                }
                                if (!this._quotaExceeded && !this._addingInitSegment) {
                                    if (this._needInitSegment) return this._addingInitSegment = !0, n.getInitSegment().then(function(e) {
                                        return t._lastAppended = null, i.appendBuffer(e), t._addingInitSegment = !1, e
                                    }).catch(function(e) {
                                        t._addingInitSegment = !1
                                    }), void(this._needInitSegment = !1);
                                    var u = n.getNextSegment();
                                    if (null !== u) {
                                        var c = n.getIdForSegment(u);
                                        n.isFinal(u) && (this._appendingFinalSegment = !0), this._lastAppended = c, this.fire("appendbufferstart", c);
                                        try {
                                            i.appendBuffer(u), this._bufferState[c.segment] = c, this._isFirstSegment && (this._isFirstSegment = !1, this.fire("initialbufferstart"))
                                        } catch (e) {
                                            if ("QuotaExceededError" === e.name) {
                                                this._quotaExceeded = !0;
                                                if (6 < this._sorcerer._video.currentTime) {
                                                    var l = this._sorcerer._video.currentTime - 6;
                                                    this._sorcerer.removeBuffer(0, l)
                                                }
                                                n._readyToAppend.unshift(u)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    } else this.on("sourcebufferattach", this._process)
                }
            }, {
                key: "streams",
                get: function() {
                    return this._streams
                }
            }, {
                key: "activeStreamIndex",
                get: function() {
                    return this._activeStreamIndex
                }
            }, {
                key: "sourceBuffer",
                get: function() {
                    return this._sourceBuffer
                },
                set: function(e) {
                    this._sourceBuffer = e, this._attachEvents(), this.fire("sourcebufferattach")
                }
            }]), t
        }(),
        ut = function() {
            function v(n, e, t) {
                var i = this;
                void 0 === e && (e = ""), void 0 === t && (t = new at), q(this, v), ee(this), this._readyToAppend = [], this._initSegment = null, this._index = NaN, this._codec = e, this._fetcher = t, this._fetcher.start(), this._bufferData = new Ae, this._segmentToId = {}, this._getInitSegmentPromise = new I(function(t, e) {
                    v.isValidSegmentUrl(n) ? i._fetcher.add({
                        url: n.url || n,
                        byteRange: n.byteRange,
                        id: null,
                        stream: i,
                        isInitSegmentRequest: !0
                    }, function(e) {
                        i._initSegment = e, t(e)
                    }) : (i._initSegment = n, t(n))
                })
            }
            return j(v, null, [{
                key: "isValidSegmentUrl",
                value: function(e) {
                    return "string" == typeof e || "string" == typeof e.url && "string" == typeof e.byteRange
                }
            }]), j(v, [{
                key: "getIdForSegment",
                value: function(e) {
                    return v.isValidSegmentUrl(e) ? this._segmentToId[e] : this._bufferData.get(e).id
                }
            }, {
                key: "isFinal",
                value: function(e) {
                    return this._bufferData.get(e).final
                }
            }, {
                key: "addSegment",
                value: function(n, e) {
                    var i = this,
                        t = void 0 === e ? {} : e,
                        r = t.identifier,
                        o = void 0 === r ? null : r,
                        a = t.isFinalSegment,
                        s = void 0 !== a && a,
                        u = t.loadOnly,
                        c = void 0 !== u && u,
                        l = t.priority,
                        d = void 0 === l ? 0 : l,
                        f = t.includeWithBandwidthChecks,
                        h = void 0 === f || f;
                    return new I(function(t, e) {
                        if (v.isValidSegmentUrl(n)) return i._segmentToId[n] = o || n, i.fire("queued", i.getIdForSegment(n)), void i._fetcher.add({
                            url: n.url || n,
                            byteRange: n.byteRange,
                            id: i.getIdForSegment(n),
                            stream: i,
                            includeWithBandwidthChecks: h,
                            isInitSegmentRequest: !1,
                            priority: d
                        }, function(e) {
                            i._bufferData.set(e, {
                                id: o || n,
                                final: s
                            }), i._readyToAppend.push(e), i.fire("bufferqueueadd", i.getIdForSegment(n)), c || i.fire("segmentadd"), t()
                        });
                        i._bufferData.set(n, {
                            id: o,
                            final: s
                        }), i._readyToAppend.push(n), i.fire("bufferqueueadd", o), t()
                    })
                }
            }, {
                key: "clear",
                value: function() {
                    this._readyToAppend = []
                }
            }, {
                key: "abort",
                value: function() {
                    var e = this;
                    this._getInitSegmentPromise.then(function() {
                        e._fetcher.abort(e)
                    }).catch(function(e) {})
                }
            }, {
                key: "getNextSegment",
                value: function() {
                    return 0 === this._readyToAppend.length ? null : this._readyToAppend.shift()
                }
            }, {
                key: "getInitSegment",
                value: function() {
                    return this._getInitSegmentPromise
                }
            }, {
                key: "codec",
                get: function() {
                    return this._codec
                },
                set: function(e) {
                    this._codec = e
                }
            }, {
                key: "index",
                get: function() {
                    return this._index
                },
                set: function(e) {
                    this._index = e
                }
            }, {
                key: "pendingFetches",
                get: function() {
                    return this._fetcher.pendingFetches
                }
            }]), v
        }(),
        ct = function() {
            function t(e) {
                q(this, t), this._video = e, this._running = !1, this._droppedFramesTimeout = null, this._droppedFrameData = {}, this._decodedFrameData = {}, this._droppedFrames = 0, this._decodedFrames = 0, this._streamIndex = "default", this.bound = {
                    startCheckingDroppedFrames: this._startCheckingDroppedFrames.bind(this),
                    stopCheckingDroppedFrames: this._stopCheckingDroppedFrames.bind(this)
                }
            }
            return j(t, [{
                key: "start",
                value: function() {
                    return this._startCheckingDroppedFrames(), this
                }
            }, {
                key: "stop",
                value: function() {
                    return this._stopCheckingDroppedFrames(), this
                }
            }, {
                key: "destroy",
                value: function() {
                    this._stopCheckingDroppedFrames(), this._removeEvents()
                }
            }, {
                key: "getDroppedFrameRate",
                value: function(e, t, n) {
                    void 0 === n && (n = "average");
                    var i = this._droppedFrameData[t];
                    if (!i) return 0;
                    if (i.length < e) return 0;
                    var r = i.slice(-e);
                    return "median" === n ? tt(r) : et(r)
                }
            }, {
                key: "getDroppedFrameTotal",
                value: function() {
                    return {
                        dropped: this._getTotalDroppedFrames(),
                        total: this._getTotalFrames()
                    }
                }
            }, {
                key: "_attachEvents",
                value: function() {
                    this._video.addEventListener("playing", this.bound.startCheckingDroppedFrames), this._video.addEventListener("pause", this.bound.stopCheckingDroppedFrames), this._video.addEventListener("ended", this.bound.stopCheckingDroppedFrames)
                }
            }, {
                key: "_removeEvents",
                value: function() {
                    this._video.removeEventListener("playing", this.bound.startCheckingDroppedFrames), this._video.removeEventListener("pause", this.bound.stopCheckingDroppedFrames), this._video.removeEventListener("ended", this.bound.stopCheckingDroppedFrames)
                }
            }, {
                key: "_startCheckingDroppedFrames",
                value: function() {
                    this._running = !0, this._checkDroppedFrames()
                }
            }, {
                key: "_stopCheckingDroppedFrames",
                value: function() {
                    this._running = !1
                }
            }, {
                key: "_checkDroppedFrames",
                value: function() {
                    var e = this;
                    if (this._running && null !== this._streamIndex) {
                        clearTimeout(this._droppedFramesTimeout);
                        var t = this._getTotalDroppedFrames(),
                            n = t - this._droppedFrames;
                        this._droppedFrames = t;
                        var i = this._getTotalDecodedFrames(),
                            r = i - this._decodedFrames;
                        this._decodedFrames = i, this._droppedFrameData[this._streamIndex] || (this._droppedFrameData[this._streamIndex] = []), this._decodedFrameData[this._streamIndex] || (this._decodedFrameData[this._streamIndex] = []), 100 < this._droppedFrameData[this._streamIndex].length && this._droppedFrameData[this._streamIndex].shift(), 100 < this._decodedFrameData[this._streamIndex].length && this._decodedFrameData[this._streamIndex].shift(), this._droppedFrameData[this._streamIndex].push(n), this._decodedFrameData[this._streamIndex].push(r), this._droppedFramesTimeout = setTimeout(function() {
                            e._checkDroppedFrames()
                        }, 1e3)
                    }
                }
            }, {
                key: "_getTotalDroppedFrames",
                value: function() {
                    return "function" == typeof this._video.getVideoPlaybackQuality ? this._video.getVideoPlaybackQuality().droppedVideoFrames : this._video.webkitDroppedFrameCount || 0
                }
            }, {
                key: "_getTotalFrames",
                value: function() {
                    return "function" == typeof this._video.getVideoPlaybackQuality ? this._video.getVideoPlaybackQuality().totalVideoFrames : this._video.webkitDecodedFrameCount || 0
                }
            }, {
                key: "_getTotalDecodedFrames",
                value: function() {
                    if ("function" == typeof this._video.getVideoPlaybackQuality) {
                        var e = this._video.getVideoPlaybackQuality();
                        return e.totalVideoFrames - e.droppedVideoFrames - e.corruptedVideoFrames
                    }
                    return this._video.webkitDecodedFrameCount || 0
                }
            }, {
                key: "streamIndex",
                get: function() {
                    return this._streamIndex
                },
                set: function(e) {
                    this._streamIndex = e
                }
            }]), t
        }(),
        lt = function() {
            function n(e, t) {
                void 0 === t && (t = {}), q(this, n), this._video = e, this._options = t, ee(this), this._bufferCount = 0, this._frameDropper = new ct(e), this._mediaSource = new MediaSource, this._fetcher = new at({
                    parallel: 1
                }), this._buffersForCodec = {}, this._readyPromiseResolve = null, this._attachEvents()
            }
            return j(n, [{
                key: "attachMediaSource",
                value: function() {
                    this._video.src = URL.createObjectURL(this._mediaSource)
                }
            }, {
                key: "switchTo",
                value: function(e) {
                    return 1 === this._bufferCount && this.video.switchTo(e)
                }
            }, {
                key: "getCurrentSpeed",
                value: function(e) {
                    var t = void 0 === e ? {} : e,
                        n = t.type,
                        i = void 0 === n ? "average" : n,
                        r = t.howMany,
                        o = void 0 === r ? 10 : r,
                        a = t.weights,
                        s = void 0 === a ? [] : a,
                        u = t.percentile,
                        c = void 0 === u ? null : u;
                    return "average" === i ? at.getAverageSpeed(o, s) : "median" === i ? at.getMedianSpeed(o) : at.getPercentileSpeed(o, c)
                }
            }, {
                key: "getAverageDownloadBitrate",
                value: function(e) {
                    return void 0 === e && (e = 1e3), at.getAverageBitrate(e)
                }
            }, {
                key: "getResponseSpeeds",
                value: function() {
                    return at.getResponseSpeeds()
                }
            }, {
                key: "getFailedSegments",
                value: function() {
                    return at.getFailedSegments()
                }
            }, {
                key: "getSuccessfulSegments",
                value: function() {
                    return at.getSuccessfulSegments()
                }
            }, {
                key: "getDroppedFrameRate",
                value: function(e, t, n) {
                    return void 0 === t && (t = this.activeStreamIndex), void 0 === n && (n = "average"), this._frameDropper.getDroppedFrameRate(e, t, n)
                }
            }, {
                key: "getDroppedFrameTotal",
                value: function() {
                    return this._frameDropper.getDroppedFrameTotal()
                }
            }, {
                key: "clear",
                value: function() {
                    for (var e in this._buffersForCodec) this._buffersForCodec[e].clear()
                }
            }, {
                key: "streamIndexAtTime",
                value: function(e, t) {
                    return this._buffersForCodec[t].streamIndexAtTime(e) ? this._buffersForCodec[t].streamIndexAtTime(e).stream : null
                }
            }, {
                key: "removeBuffer",
                value: function(e, t) {
                    if (void 0 === e && (e = 0), void 0 === t && (t = this._video.duration), (t = t || 0) <= e) return I.resolve();
                    var n = [];
                    for (var i in this._buffersForCodec) n.push(this._buffersForCodec[i].remove(e, t));
                    return I.all(n)
                }
            }, {
                key: "addStream",
                value: function(e, t) {
                    var n = this,
                        i = this._getCodecType(e);
                    if (!this._buffersForCodec[i]) {
                        this._bufferCount += 1;
                        var r = new st(this, i);
                        this._buffersForCodec[i] = r, this.readyPromise.then(function() {
                            var t;
                            try {
                                t = n._mediaSource.addSourceBuffer(e)
                            } catch (e) {
                                if (22 !== e.code) return void n.fire("srcnotsupported", e);
                                t = n._buffersForCodec[i]
                            }
                            if (n._options.duration) {
                                t.appendWindowEnd = n._options.duration + .1
                            }
                            r.sourceBuffer = t
                        }).catch(function(e) {}), ["appendbufferstart", "appendbufferend", "streamchange", "initialbufferstart"].forEach(function(t) {
                            r.on(t, function(e) {
                                n.fire(t, e)
                            })
                        })
                    }
                    var o = new ut(t, e, this._fetcher);
                    return ["queued", "bufferqueueadd"].forEach(function(t) {
                        o.on(t, function(e) {
                            n.fire(t, e)
                        })
                    }), this._buffersForCodec[i].addStream(o), o
                }
            }, {
                key: "destroy",
                value: function() {
                    this.clear(), this._removeEventListeners(), this._frameDropper.destroy(), this._fetcher.abort(), this._video.src && (this._video.removeAttribute("src"), this._video.load())
                }
            }, {
                key: "_attachEvents",
                value: function() {
                    var r = this;
                    this.bound = {
                        handleSourceOpen: this._handleSourceOpen.bind(this)
                    }, this.readyPromise = new I(function(e, t) {
                        r._readyPromiseResolve = e, r._mediaSource.addEventListener("sourceopen", r.bound.handleSourceOpen)
                    }), ["downloadstart", "downloadend", "downloadabort", "downloaderror", "progress"].forEach(function(i) {
                        r._fetcher.on(i, function() {
                            for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                            r.fire.apply(r, [i].concat(t))
                        })
                    })
                }
            }, {
                key: "_sourceBuffersAreUpdating",
                value: function() {
                    for (var e = 0; e < this._mediaSource.sourceBuffers.length; e++)
                        if (this._mediaSource.sourceBuffers[e].updating) return !0;
                    return !1
                }
            }, {
                key: "checkEndOfStream",
                value: function() {
                    for (var e in this._buffersForCodec) {
                        if (!this._buffersForCodec[e].hasAppendedFinalSegment()) return
                    }
                    "open" === this._mediaSource.readyState && (this._sourceBuffersAreUpdating() || (this._mediaSource.endOfStream(), this.fire("endofstream")))
                }
            }, {
                key: "_handleSourceOpen",
                value: function() {
                    URL.revokeObjectURL(this._video.src), this._mediaSource.removeEventListener("sourceopen", this.bound.handleSourceOpen), this._options.duration && (this._mediaSource.duration = this._options.duration, this.fire("durationset")), this._readyPromiseResolve()
                }
            }, {
                key: "_removeEventListeners",
                value: function() {
                    for (var e in this._buffersForCodec) this._buffersForCodec[e]._removeEventListeners()
                }
            }, {
                key: "_getCodecType",
                value: function(e) {
                    return 0 === e.indexOf("audio") ? "audio" : "video"
                }
            }, {
                key: "mediaSource",
                get: function() {
                    return this._mediaSource
                }
            }, {
                key: "pendingFetches",
                get: function() {
                    return this._fetcher.pendingFetches
                }
            }, {
                key: "streams",
                get: function() {
                    return 1 === this._bufferCount && this.video.streams
                }
            }, {
                key: "activeStreamIndex",
                get: function() {
                    return 1 === this._bufferCount && this.video.activeStreamIndex
                }
            }, {
                key: "video",
                get: function() {
                    return !!this._buffersForCodec.video && this._buffersForCodec.video
                }
            }, {
                key: "audio",
                get: function() {
                    return !!this._buffersForCodec.audio && this._buffersForCodec.audio
                }
            }]), n
        }(),
        dt = function() {
            function t(e) {
                q(this, t), this.scanner = e
            }
            return j(t, null, [{
                key: "displayName",
                get: function() {
                    return "Brain"
                }
            }]), j(t, [{
                key: "shouldPowerUp",
                value: function(e, t) {
                    return !1
                }
            }, {
                key: "shouldPowerDown",
                value: function(e, t) {
                    return !1
                }
            }, {
                key: "canPowerUp",
                value: function(e, t) {
                    return 1 !== e.length && t < e.length - 1
                }
            }, {
                key: "canPowerDown",
                value: function(e, t) {
                    return 1 !== e.length && 0 < t
                }
            }, {
                key: "filterStreams",
                value: function(e) {
                    return e
                }
            }]), t
        }(),
        ft = function(e) {
            function i(e, t) {
                var n;
                return void 0 === t && (t = {}), q(this, i), (n = K(this, z(i).call(this, e)))._options = t, n.blacklisted = [], n.whitelisted = [], n.MAX_LOADABLE_SEGMENTS_AUTO = 3, n.MAX_LOADABLE_SEGMENTS_LOCKED = 15, n.BANDWIDTH_THRESHOLD = .85, n.SEGMENT_DURATION = 6, n
            }
            return W(i, dt), j(i, null, [{
                key: "displayName",
                get: function() {
                    return "Skyfire"
                }
            }]), j(i, [{
                key: "shouldPowerUp",
                value: function(e, t, n) {
                    n && this._options.startingBandwidthThreshold && (this.BANDWIDTH_THRESHOLD = this._options.startingBandwidthThreshold);
                    var i = e.indexOf(t);
                    if (-1 === i && (i = 0), !this.canPowerUp(e, i)) return !1;
                    var r = this.getCurrentSpeed();
                    if (!r) return !1;
                    var o = this._getStreamFromSpeed(r, this.BANDWIDTH_THRESHOLD, e);
                    return o !== i && o
                }
            }, {
                key: "shouldPowerDown",
                value: function(e, t) {
                    var n = e.indexOf(t);
                    if (-1 === n) return e.length - 1;
                    if (!this.canPowerDown(e, n)) return !1;
                    var i = this.getCurrentSpeed();
                    if (!i) return !1;
                    if (this.hasTooManyDroppedFrames(n, t, this._options.droppedFrameSwitchPercent)) return n - 1;
                    var r = this._getStreamFromSpeed(i, .9, e);
                    return r !== n && r
                }
            }, {
                key: "hasTooManyDroppedFrames",
                value: function(e, t, n) {
                    return n <= this.scanner.sorcerer.getDroppedFrameRate(10, e, "median") / t.framerate * 100 && (this.blacklist(e), !0)
                }
            }, {
                key: "isTimeInBuffer",
                value: function(e) {
                    var t = this.scanner._video;
                    return this._timesAreInRange(e, e, t.buffered)
                }
            }, {
                key: "getCurrentSpeed",
                value: function() {
                    if (this._options.tests && this._options.tests.download_bitrate && this._options.tests.download_bitrate.group) return this.scanner.downloadSpeed;
                    return this.scanner.sorcerer.getCurrentSpeed({
                        type: "average",
                        howMany: 3,
                        weights: [1, 2, 5]
                    })
                }
            }, {
                key: "getDistanceFromBuffer",
                value: function(e) {
                    for (var t = e, n = this.scanner._video, i = 0; i < n.buffered.length; i++)
                        if (n.buffered.start(i) <= e && n.buffered.end(i) >= e) {
                            t = n.buffered.end(i);
                            break
                        }
                    return t - e
                }
            }, {
                key: "getTimeEstimateToLoad",
                value: function(e, t) {
                    if (null === t) return 3;
                    var n = t.segments[e],
                        i = n.end - n.start,
                        r = this.getCurrentSpeed();
                    return 1.3 * (i * (t.bitrate + t.audioBitrate) / r)
                }
            }, {
                key: "canPlayFromTimeInStream",
                value: function(e, t) {
                    if (!this.isTimeInBuffer(e)) return !1;
                    if (!t) return !1;
                    var n = this.getSegmentsToLoad(!1, "video", t);
                    if (0 === n.length) return !0;
                    var i = this.getDistanceFromBuffer(e);
                    return this.getTimeEstimateToLoad(n[0], t) < i
                }
            }, {
                key: "getSegmentsToLoad",
                value: function(e, t, n) {
                    void 0 === t && (t = "video");
                    var i = this.scanner._video,
                        r = this.scanner.currentTime,
                        o = [],
                        a = r + this._getSecondsToLoadAhead(r, i.duration, n),
                        s = this.scanner.sorcerer[t].activeStreamIndex,
                        u = this.scanner._streams[t][s],
                        c = this.scanner.sorcerer[t].sourceBuffer,
                        l = null;
                    c && (l = c.buffered);
                    for (var d = 0; d < u.segments.length; d++) {
                        var f = u.segments[d];
                        if (!(f.end < r || f.start > a)) {
                            var h = r >= f.start && r < f.end,
                                v = this._isSegmentInBuffer(f, l);
                            !e && v || e && v && h || (h ? o.push(d) : a >= f.start && o.push(d))
                        }
                    }
                    return o
                }
            }, {
                key: "blacklist",
                value: function(e) {
                    this.blacklisted[e] = 1
                }
            }, {
                key: "lock",
                value: function(e) {
                    void 0 === e && (e = []), this.whitelisted = e
                }
            }, {
                key: "filterStreams",
                value: function(e) {
                    for (var t, n = this.scanner._video.clientWidth, i = this.scanner._video.clientHeight, r = [], o = !1, a = 0; a < e.length; a++)
                        if (t && t[0] === e[a].width && t[1] === e[a].height) r.push(e[a]);
                        else {
                            if (o) break;
                            if (!(this.blacklisted[a] && -1 === this.whitelisted.indexOf(a) || this.whitelisted.length && -1 === this.whitelisted.indexOf(a)))
                                if (this.whitelisted.length) r.push(e[a]);
                                else {
                                    var s = this._getScaleFromDimensions(n, i, e[a].width, e[a].height);
                                    (i < 1e3 / (window.devicePixelRatio || 1) ? 1.75 : 1) <= s && (o = !0), r.push(e[a]), t = [e[a].width, e[a].height]
                                }
                        }
                    return r
                }
            }, {
                key: "_getStreamFromSpeed",
                value: function(e, t, n) {
                    for (var i = 0, r = i; r < n.length; r++) e * t > n[r].bitrate + n[r].audioBitrate && (i = r);
                    return i
                }
            }, {
                key: "_getVisibleDimensions",
                value: function(e, t, n, i) {
                    var r = n / i,
                        o = e - t * r,
                        a = t - e / r,
                        s = e - o,
                        u = t - a;
                    return 0 < o && (u = t), 0 < a && (s = e), [s, u]
                }
            }, {
                key: "_getScaleFromDimensions",
                value: function(e, t, n, i) {
                    var r = this._getVisibleDimensions(e, t, n, i),
                        o = n * i;
                    this.scanner.video && this.scanner.video.metadata.percentShown && (o *= this.scanner.video.metadata.percentShown);
                    var a = window.devicePixelRatio || 1;
                    return o / (r[0] * r[1] * a * a)
                }
            }, {
                key: "_getSecondsToLoadAhead",
                value: function(e, t, n) {
                    var i = n && 12e3 < n.bitrate;
                    return 1 === this.whitelisted.length ? i ? 30 : this.MAX_LOADABLE_SEGMENTS_LOCKED * this.SEGMENT_DURATION : this.MAX_LOADABLE_SEGMENTS_AUTO * this.SEGMENT_DURATION
                }
            }, {
                key: "_round",
                value: function(e, t) {
                    if (void 0 === t && (t = 3), e = parseFloat(e), isNaN(e)) return 0;
                    var n = Math.pow(10, t);
                    return Math.round(e * n) / n
                }
            }, {
                key: "_timesAreInRange",
                value: function(e, t, n, i) {
                    if (void 0 === i && (i = 0), !n) return !1;
                    t = Math.min(t, this.scanner._video.duration);
                    for (var r = 0; r < n.length; r++) {
                        var o = this._round(n.start(r)) - i,
                            a = this._round(n.end(r)) + i;
                        if (o <= e && t <= a) return !0
                    }
                    return !1
                }
            }, {
                key: "_hasSeparateStreams",
                value: function() {
                    return 0 < this.scanner._streams.video.length && 0 < this.scanner._streams.audio.length
                }
            }, {
                key: "_isSegmentInBuffer",
                value: function(e, t) {
                    var n = 1;
                    return this._hasSeparateStreams() && (n = .05), this._timesAreInRange(e.start, e.end, t, n)
                }
            }]), i
        }(),
        ht = function(e) {
            function i(e, t) {
                var n;
                return void 0 === t && (t = {}), q(this, i), (n = K(this, z(i).call(this, e)))._options = t, n.MAX_LOADABLE_SEGMENTS_AUTO = 10, n.inVirginState = !0, n.targetStreamChanged = !1, n._initializeEvents(), n
            }
            return W(i, ft), j(i, null, [{
                key: "displayName",
                get: function() {
                    return "BBA"
                }
            }]), j(i, [{
                key: "_initializeEvents",
                value: function() {
                    var e = this;
                    this.scanner.on(Ce.STREAM_TARGET_CHANGE, function() {
                        e.targetStreamChanged = !0
                    })
                }
            }, {
                key: "getSegmentsToLoad",
                value: function(e, t, n) {
                    return void 0 === t && (t = "video"), e && this.targetStreamChanged ? this.targetStreamChanged = !1 : e = !1, $(z(i.prototype), "getSegmentsToLoad", this).call(this, e, t, n)
                }
            }, {
                key: "shouldPowerUp",
                value: function(e, t, n) {
                    var i = e.indexOf(t);
                    if (-1 === i && (i = 0), !this.canPowerUp(e, i)) return !1;
                    var r = this.scanner.sorcerer.video._sourceBuffer ? this.scanner.sorcerer.video._sourceBuffer.buffered : null,
                        o = this._getStreamFromBuffer(r, e, i);
                    return !(o <= i) && o
                }
            }, {
                key: "shouldPowerDown",
                value: function(e, t) {
                    var n = e.indexOf(t);
                    if (-1 === n) return e.length - 1;
                    if (!this.canPowerDown(e, n)) return !1;
                    if (!this.getCurrentSpeed()) return !1;
                    if (this.hasTooManyDroppedFrames(n, t, this._options.droppedFrameSwitchPercent)) return n - 1;
                    var i = this.scanner.sorcerer.video._sourceBuffer ? this.scanner.sorcerer.video._sourceBuffer.buffered : null,
                        r = this._getStreamFromBuffer(i, e, n);
                    return !(n <= r) && r
                }
            }, {
                key: "_getStreamFromBuffer",
                value: function(e, t, n, i) {
                    var r = this;
                    void 0 === i && (i = !1);
                    var o = 6 * this.SEGMENT_DURATION,
                        a = this.getDistanceFromBuffer(this.scanner.currentTime);
                    if (this.scanner.sorcerer.video.streams[n].pendingFetches.forEach(function(e) {
                            a += e.percent * r.SEGMENT_DURATION
                        }), !i && this._isVirginBuffer(e, t) || !e) {
                        var s = this.getCurrentSpeed();
                        return this._getStreamFromSpeed(s, .85, t)
                    }
                    if (a <= 3 * this.SEGMENT_DURATION) return this.scanner.fire("bufferoccupancy", 0), 0;
                    var u = Math.min(1, (a - 3 * this.SEGMENT_DURATION) / o);
                    if (a === this.scanner._video.duration - this.scanner._video.currentTime && (u = 1), this.scanner.fire(Ce.BUFFER_OCCUPANCY, Math.round(100 * u) / 100), 1 === u) return t.length - 1;
                    for (var c = [], l = 1; l < t.length; l++) c.push(t[l].bitrate);
                    var d = u * c.slice(-1)[0],
                        f = [];
                    c.forEach(function(e) {
                        f.push(Math.abs(d - e))
                    });
                    var h = f.indexOf(Math.min.apply(Math, f)) + 1,
                        v = Math.max(0, n - 1);
                    return d > c[v - 1] && d <= c[v] || d >= c[v] && d < c[v + 1] ? n : h
                }
            }, {
                key: "_isVirginBuffer",
                value: function(e, t) {
                    return !(!this.inVirginState || this._getStreamFromSpeed(this.getCurrentSpeed(), .85, t) === this._getStreamFromBuffer(e, t, this.scanner.sorcerer.video.activeStreamIndex, !0)) || (this.inVirginState && (this.inVirginState = !1), !1)
                }
            }]), i
        }(),
        vt = "video",
        pt = "audio",
        mt = function(e) {
            function i(e, t) {
                var n;
                return void 0 === t && (t = {}), q(this, i), (n = K(this, z(i).call(this, e, t))).reset(), n.manifestLoadDurations = [], t.mediaSourceScanner && (n._maxPreloadStreamIndex = t.mediaSourceScanner.maxPreloadStreamIndex, n._shouldUseBBA = t.mediaSourceScanner.shouldUseBBA), n
            }
            return W(i, Ze), j(i, null, [{
                key: "displayName",
                get: function() {
                    return "MediaSourceScanner"
                }
            }, {
                key: "supported",
                get: function() {
                    return "undefined" != typeof MediaSource && "undefined" != typeof Set
                }
            }, {
                key: "supportedVideoTypes",
                get: function() {
                    return ["application/vnd.vimeo.dash+json"]
                }
            }]), j(i, [{
                key: "deactivate",
                value: function() {
                    $(z(i.prototype), "deactivate", this).call(this), this.sorcerer && this.sorcerer.destroy(), this.reset()
                }
            }, {
                key: "reset",
                value: function() {
                    this._waitingOnSet = new Set, this._streamsForSegment = {};
                    var e = this._options.mediaSourceScanner || {};
                    e.tests = this._options.tests, this._shouldUseBBA ? this._brain = new ht(this, e) : this._brain = new ft(this, e), this._ready = !1, this._startedPlaying = !1, this._manifest = null, this._streams = {}, this._streams[pt] = [], this._streams[vt] = [], this._audioStreams = [], this._onReady = null, this._baseUrl = null, this._lastTargetStreamId = null, this._timeToSeekTo = null, this._resolveSeek = null, this._resolveStartPreload = null, this._reloadingExistingVideo = !1, this._lastStreamIndex = null, this._checkSwitchUp = !1, this._clearBufferAtTime = !1, this._preloadStream = null, this._removeBufferPromise = null, this._ranIntoBuffer = !1, this._restrictedStreamIndexes = [], this._switching = {}, this._lastDownloadBitrate = 0, this._isMediaSourceAttached = !1
                }
            }, {
                key: "preloadStream",
                value: function() {
                    var h = this;
                    return this._preloadStream || (this._preloadStream = new I(function(o, e) {
                        var a = 1;
                        h._streams.audio.length && (a = 2);
                        var c = 0,
                            l = !1,
                            d = h.sorcerer.video.activeStreamIndex;
                        h._restrictedStreamIndexes.length && (d = h._restrictedStreamIndexes[0]);
                        var f = 0,
                            s = function(e) {
                                for (var t in void 0 === e && (e = !1), e && (d = h.sorcerer.video.activeStreamIndex), h._streams)
                                    if (0 !== h._streams[t].length) {
                                        var n = h._brain.getSegmentsToLoad(!1, t, h._getCurrentStream());
                                        0 < n.length && (f = n[0]);
                                        var i = d;
                                        t === pt && (i = h._getAudioIndexFromVideo(d));
                                        var r = h._getSegmentUrl(i, f, t),
                                            o = h._isFinalSegment(i, f),
                                            a = h.sorcerer[t].streams[i],
                                            s = {
                                                stream: i,
                                                segment: f,
                                                type: t
                                            },
                                            u = r;
                                        if (h._useRangeRequests()) u = {
                                            url: u,
                                            byteRange: h._getRangeForSegment(i, f, t)
                                        };
                                        "audio" !== t || i !== l ? ("audio" === t && !1 === l && (l = i), a.addSegment(u, {
                                            identifier: s,
                                            isFinalSegment: o,
                                            loadOnly: !0,
                                            priority: 0
                                        })) : (c += 1, h._handleAppendBufferEnd(s))
                                    }
                            };
                        h.sorcerer.on("bufferqueueadd", function e(t) {
                            if (!((c += 1) < a) && t.segment === f) {
                                if (0 === h._restrictedStreamIndexes.length) {
                                    var n = h._getStreamIndexToLoad(!0);
                                    if (!1 !== n && n > t.stream) return h.sorcerer.video.switchTo(n, !1), h._streams.audio.length && h.sorcerer.audio.switchTo(h._getAudioIndexFromVideo(n), !1), void s(!(c = 0))
                                }
                                var i = h._getCurrentStream(d).segments[0].end,
                                    r = h._getDuration(!0);
                                h.currentTime >= r && (h.currentTime = r), h.currentTime > i && (h.sorcerer.clear(), h._waitingOnSet = new Set), h.sorcerer.video.switchTo(d, !1), h._streams.audio.length && h.sorcerer.audio.switchTo(h._getAudioIndexFromVideo(d), !1), h.sorcerer.off("bufferqueueadd", e), h._ready = !0, o()
                            }
                        }), s()
                    })), this._preloadStream
                }
            }, {
                key: "loadManifest",
                value: function(o) {
                    var a = this;
                    return new I(function(e, n) {
                        var i = null,
                            r = new XMLHttpRequest;
                        r.open("GET", o, !0), r.timeout = 1e4, r.onload = function() {
                            var t = Date.now() - i;
                            if (400 <= r.status) return a.manifestLoadDurations.push({
                                url: o,
                                status: r.status,
                                duration: t
                            }), a.reset(), 410 === r.status ? void a.fire(Ce.MEDIA_URL_EXPIRED) : void n("JSON manifest failed to load.");
                            "responseURL" in r && r.responseURL !== o && r.responseURL.indexOf("live-archive") && (a._baseUrl = r.responseURL.split("/").slice(0, -2).join("/"));
                            try {
                                e(JSON.parse(r.response)), a.manifestLoadDurations.push({
                                    url: o,
                                    status: r.status,
                                    duration: t
                                }), a.fire(Ce.MANIFEST_LOADED)
                            } catch (e) {
                                a.manifestLoadDurations.push({
                                    url: o,
                                    status: r.status,
                                    duration: t
                                }), n()
                            }
                        }, r.onerror = function() {
                            var e = Date.now() - i;
                            a.manifestLoadDurations.push({
                                url: o,
                                status: r.status,
                                duration: e
                            }), a.reset(), n("JSON manifest failed to load.")
                        }, r.ontimeout = function() {
                            var e = Date.now() - i;
                            a.manifestLoadDurations.push({
                                url: o,
                                status: r.status,
                                duration: e
                            }), a.reset(), a.fire(Ce.MANIFEST_TIMEOUT), n("JSON manifest " + o + " timed out in " + e + "ms.")
                        }, i = Date.now(), r.send()
                    })
                }
            }, {
                key: "setVideoSrc",
                value: function(t, e, n) {
                    var i = this;
                    if (void 0 === n && (n = !0), n && !e && this._onReady) {
                        if (("metadata" === this._preload || "none" === this._preload && !this._paused) && !this._ready) return void this._onReady.then(function() {
                            var e = i._paused;
                            i.setVideoSrc(t, e, !1)
                        }).catch(console.error);
                        if ("auto" === this._preload) return void this._onReady.then(function() {
                            i.setVideoSrc(t, !1, !1)
                        }).catch(console.error)
                    }
                    if (e) {
                        this.reset();
                        try {
                            this._video.currentTime = 0
                        } catch (e) {}
                    }
                    e || !this._paused || this.sorcerer || (e = !0);
                    var r = "_initializeManifest";
                    e && (this._video.preload = "", r = "_initialize");
                    var o = t.split("/");
                    o.pop();
                    var a = o.join("/") + "/";
                    this._reloadingExistingVideo = !e, this._onReady = this._startPreload(t, this._preload).then(this.loadManifest.bind(this)).then(function(e) {
                        return "string" == typeof i._baseUrl && -1 !== i._baseUrl.indexOf("live-archive") || (i._baseUrl = a), e
                    }).then(this[r].bind(this)), e && "auto" === this._preload && (this._onReady = this._addCallbackToPromise(this._onReady, this.preloadStream.bind(this), !1)), this._onReady = this._addCatchToPromise(this._onReady)
                }
            }, {
                key: "getBitrateAtTime",
                value: function(e, t) {
                    if (!this.sorcerer) return 0;
                    var n = this.sorcerer.streamIndexAtTime(e, t);
                    return this._streams[t][n] ? this._streams[t][n].bitrate : 0
                }
            }, {
                key: "lockStreamIndexes",
                value: function() {
                    var t = this,
                        e = this._restrictedStreamIndexes.map(function(e) {
                            return t._streams[vt].indexOf(t._streams[vt][e])
                        });
                    if (this._video.paused || (this._ignorePauseEvent = !0, this._video.pause()), this._switching[vt] = !1, this._brain.lock(e), this._startedPlaying || "auto" === this._preload) {
                        var n = Math.max(this.currentTime - 7, 0),
                            i = Math.min(this.currentTime + 7, this._video.duration);
                        this.sorcerer.removeBuffer(n, i).then(function() {
                            !t._startedPlaying && "auto" === t._preload || t.ended ? t._loadSegments() : (t.seekToTime(t.currentTime), !t._paused && t._video.paused && (t._ignorePlayEvent = !0, t.play()))
                        }).catch(console.error)
                    }
                }
            }, {
                key: "seekToTime",
                value: function(e) {
                    var t = this;
                    if (e === this.currentTime) return I.resolve();
                    this._shouldUseBBA && (this._brain.inVirginState = !0);
                    var n = null === this._timeToSeekTo;
                    if (n || (this._lastSeekReject && (this._lastSeekReject(), this._lastSeekReject = null), this._seekInProgressPromise = null, this._timeToSeekTo = null, this._resolveSeek = null), this._timeToSeekTo = e, this._ready)
                        for (var i in this._streams)
                            if (0 < this._streams[i].length) {
                                var r = this.sorcerer[i].activeStreamIndex;
                                this.sorcerer[i].streams[r].abort()
                            }
                    return this._seekInProgressPromise = this._getSeekReadyPromiseForTime(e), I.all([this._onReady, this._removeBufferPromise]).then(function() {
                        t._loadSegments()
                    }).catch(console.error), this._paused && 0 === e && this.fire(Pe.SEEKING), n || this.play(), this._onReady.then(function() {
                        return t._seekInProgressPromise
                    }).catch(function(e) {})
                }
            }, {
                key: "takeSnapshot",
                value: function() {}
            }, {
                key: "initDrm",
                value: function() {}
            }, {
                key: "onstalled",
                value: function() {
                    return !1
                }
            }, {
                key: "onseeked",
                value: function(e) {
                    this._startedPlaying && this._loadSegments()
                }
            }, {
                key: "onended",
                value: function(e) {
                    return $(z(i.prototype), "onended", this).call(this, e), !0
                }
            }, {
                key: "onseeking",
                value: function(e) {
                    var t = this;
                    this._startedPlaying && (clearTimeout(this._seekTimeout), this._seekTimeout = setTimeout(function() {
                        t._loadSegments()
                    }, 100))
                }
            }, {
                key: "ontimeupdate",
                value: function(e) {
                    if (!this.sorcerer) return !1;
                    if (0 === this.currentTime) return this._startedPlaying;
                    if (this._timeToSeekTo) return !1;
                    if (this._startedPlaying || (this._startedPlaying = !0), this._clearBufferAtTime && this.currentTime >= this._clearBufferAtTime) {
                        this.sorcerer.removeBuffer(0, this._clearBufferAtTime - 2), this._clearBufferAtTime = !1
                    }
                    this._loadSegments();
                    var t = this.sorcerer.getDroppedFrameTotal();
                    this.fire(Ce.DROPPED_FRAMES, t);
                    var n = this.sorcerer.getResponseSpeeds(),
                        i = this._streams[vt][this.sorcerer.video.activeStreamIndex],
                        r = this._options.tests && this._options.tests.download_bitrate;
                    if ((!r || !r.group) && i) {
                        var o = {
                            speed: this._brain.getCurrentSpeed(),
                            bitrate: i.bitrate,
                            speeds: n
                        };
                        this.fire(Ce.BANDWIDTH, o)
                    }
                    var a = this._video.buffered.length;
                    if (!a) return !0;
                    var s = this._video.buffered.end(a - 1);
                    if (Math.ceil(s) === Math.ceil(this._video.duration)) return !0;
                    return Math.abs(this.currentTime - s) < .2 ? !this._ranIntoBuffer && (this.fire(Ce.STREAM_BUFFER_START, {
                        hasLowerStreamIndex: 0 < this.sorcerer[vt].activeStreamIndex
                    }), !(this._ranIntoBuffer = !0)) : void 0
                }
            }, {
                key: "onprogress",
                value: function() {
                    this._brain.canPlayFromTimeInStream(this.currentTime, this._getCurrentStream()) && this._ranIntoBuffer && (this.fire(Ce.STREAM_BUFFER_END), this._ranIntoBuffer = !1)
                }
            }, {
                key: "onplay",
                value: function() {
                    return "picture-in-picture" === this.presentationMode && !(this._paused = !1)
                }
            }, {
                key: "onpause",
                value: function() {
                    return "picture-in-picture" === this.presentationMode && (this._paused = !0)
                }
            }, {
                key: "onwaiting",
                value: function(e) {
                    return !1
                }
            }, {
                key: "onerror",
                value: function() {
                    return !!this._video.error && (this._video.error.code === this._video.error.MEDIA_ERR_DECODE ? (this.fire(Ce.SCANNER_ERROR, {
                        reason: "encountered media decode error"
                    }), !1) : $(z(i.prototype), "onerror", this).call(this))
                }
            }, {
                key: "pause",
                value: function() {
                    var e = this;
                    Be(function() {
                        e.fire(Pe.PAUSE)
                    }), $(z(i.prototype), "pause", this).call(this)
                }
            }, {
                key: "play",
                value: function() {
                    var e = this;
                    return Be(function() {
                        e.fire(Pe.PLAY)
                    }), this._paused = !1, this._isMediaSourceAttached || (this._isMediaSourceAttached = !0, this._video.load(), this._onReady = this._addCallbackToPromise(this._onReady, function() {
                        e.sorcerer.attachMediaSource()
                    })), this._resolveStartPreload && this._resolveStartPreload(), this._reloadingExistingVideo || this._ready || "auto" === this._preload || (this._onReady = this._addCallbackToPromise(this._onReady, this.preloadStream.bind(this))), this._onReady.then(function() {
                        return I.resolve(e._seekInProgressPromise)
                    }).then(function() {
                        return e._paused ? null : $(z(i.prototype), "play", e).call(e)
                    })
                }
            }, {
                key: "_getAudioIndexFromVideo",
                value: function(e) {
                    return 0 !== this._streams.audio.length && (1 < this._streams.audio.length && 1e6 < this._streams.video[e].bitrate ? 1 : 0)
                }
            }, {
                key: "_addCallbackToPromise",
                value: function(e, t, n) {
                    void 0 === n && (n = !0);
                    var i = e.then(t);
                    return n && (i = this._addCatchToPromise(i)), i
                }
            }, {
                key: "_addCatchToPromise",
                value: function(e) {
                    var t = this;
                    return e.catch(function(e) {
                        return t.fire(Ce.FILE_ERROR, {
                            reason: e
                        }), new I(function(e, t) {})
                    })
                }
            }, {
                key: "_handleBufferForSeek",
                value: function() {
                    if (this._ready) {
                        12e3 < this._streams[vt][this.sorcerer.video.activeStreamIndex].bitrate / 1e3 && (this._removeBufferPromise = this.sorcerer.removeBuffer())
                    }
                }
            }, {
                key: "_startPreload",
                value: function(n, i) {
                    var r = this;
                    return new I(function(e, t) {
                        "none" !== i || r._reloadingExistingVideo && !r._paused ? e(n) : r._resolveStartPreload = function() {
                            e(n), r._resolveStartPreload = null
                        }
                    })
                }
            }, {
                key: "_getSeekReadyPromiseForTime",
                value: function(n) {
                    var i = this;
                    return void 0 === n && (n = this._timeToSeekTo), new I(function(e, t) {
                        i._startedPlaying && 0 === n || i._brain.canPlayFromTimeInStream(n, i._getCurrentStream()) ? e(n) : (i._handleBufferForSeek(), i._resolveSeek = e)
                    }).then(function(e) {
                        i._timeToSeekTo = null, i._seekInProgressPromise = null;
                        var t = new I(function(t, e) {
                            i._lastSeekReject = e;
                            i._video.addEventListener("seeked", function e() {
                                t(i._video.currentTime), i._video.removeEventListener("seeked", e)
                            })
                        });
                        return i._video.currentTime = e, t
                    })
                }
            }, {
                key: "_handlePreloadChanged",
                value: function(e, t) {
                    "auto" !== e && "auto" === t && (this._onReady = this._addCallbackToPromise(this._onReady, this.preloadStream.bind(this))), e !== t && "none" !== t && this._resolveStartPreload && this._resolveStartPreload()
                }
            }, {
                key: "_avDurationDifference",
                value: function(e) {
                    var t = e.audio.reduce(function(e, t) {
                            return e + t.duration
                        }, 0),
                        n = e.video.reduce(function(e, t) {
                            return e + t.duration
                        }, 0),
                        i = t / e.audio.length,
                        r = n / e.video.length;
                    return i + 4 < r ? r - i : 0
                }
            }, {
                key: "_initializeManifest",
                value: function(a) {
                    var s = this;
                    return new I(function(e, t) {
                        if (s._manifest = a, s._streams[vt] = s._sortStreams(a.video), a.audio) {
                            var n = s._avDurationDifference(a);
                            if (0 < n) return s.fire(Ce.AV_DURATION_MISMATCH, n), s.fire(Ce.SCANNER_ERROR, {
                                reason: "Encountered A/V duration mismatch"
                            }), void t();
                            s._streams[pt] = s._sortStreams(a.audio)
                        }
                        for (var i = 0; i < s._streams[vt].length; i++) {
                            var r = 0;
                            if (a.audio) {
                                var o = s._streams[pt][s._getAudioIndexFromVideo(i)];
                                o && (r = o.bitrate)
                            }
                            s._streams[vt][i].audioBitrate = r
                        }
                        s._initDrm(s._streams[vt], s._streams[pt]), e()
                    })
                }
            }, {
                key: "_setUpSorcerer",
                value: function(e, t) {
                    this.sorcerer && this.sorcerer.destroy(), this.sorcerer = new lt(e, t), this.successfulSegments = this.sorcerer.getSuccessfulSegments(), this.failedSegments = this.sorcerer.getFailedSegments()
                }
            }, {
                key: "_getDuration",
                value: function(e) {
                    void 0 === e && (e = !1);
                    var t = e ? 1 / 0 : 0;
                    for (var n in this._streams) this._streams[n].length && (t = Math[e ? "min" : "max"](t, this._streams[n][0].duration));
                    return t
                }
            }, {
                key: "_initialize",
                value: function(a) {
                    var s = this;
                    return new I(function(o, e) {
                        s._initializeManifest(a).then(function() {
                            var e = s._brain.filterStreams(s._streams[vt]).length - 1,
                                t = s._streams[vt][0];
                            (s._restrictedStreamIndexes.length && (t = s._streams[vt][s._restrictedStreamIndexes[0]]), void 0 !== s._maxPreloadStreamIndex) && (e <= s._streams[vt].indexOf(a.video[s._maxPreloadStreamIndex]) && (t = s._streams[vt][e]));
                            s._setUpSorcerer(s._video, {
                                duration: s._getDuration()
                            }), s.sorcerer.on("srcnotsupported", function() {
                                s.fire(Ce.SCANNER_ERROR, {
                                    reason: "this codec is not supported for mediasource playback"
                                })
                            });
                            var n = s._streams[vt].indexOf(t),
                                i = function(i) {
                                    s._streams[i].forEach(function(e, t) {
                                        var n = s._getSegmentUrl(t, "init", i);
                                        s._useRangeRequests() && s._streams[i][t].init_segment_range && (n = {
                                            url: n,
                                            byteRange: s._getRangeForSegment(t, "init", i)
                                        });
                                        s.sorcerer.addStream(e.mime_type + '; codecs="' + s._streams[i][t].codecs + '"', n)
                                    })
                                };
                            for (var r in s._streams) i(r);
                            s.sorcerer.video.switchTo(n), s.sorcerer.on("queued", s._handleQueued.bind(s)), s.sorcerer.on("downloadabort", s._handleAborted.bind(s)), s.sorcerer.on("appendbufferend", s._handleAppendBufferEnd.bind(s)), s.sorcerer.on("downloadend", s._handleDownloadEnd.bind(s)), s.sorcerer.on("downloaderror", s._handleDownloadError.bind(s)), s.sorcerer.on("progress", s._handleProgress.bind(s)), s.sorcerer.video.on("streamchange", s._handleStreamChange.bind(s)), s.sorcerer.mediaSource.addEventListener("sourceended", function() {
                                s.fire(Pe.PROGRESS)
                            }), o()
                        }).catch(console.error)
                    })
                }
            }, {
                key: "_sortStreams",
                value: function(e) {
                    var t = e.slice(0);
                    return t.sort(function(e, t) {
                        var n = e.width * e.height * e.bitrate,
                            i = t.width * t.height * t.bitrate;
                        return e.width === t.width && e.height === t.height ? e.framerate - t.framerate : n - i
                    }), t
                }
            }, {
                key: "_useRangeRequests",
                value: function() {
                    return !!this._manifest.video[0].segments[0].range
                }
            }, {
                key: "_getRangeForSegment",
                value: function(e, t, n) {
                    return "init" === t ? this._streams[n][e].init_segment_range : this._streams[n][e].segments[t].range
                }
            }, {
                key: "_getSegmentPriority",
                value: function(e, t, n) {
                    return void 0 === n && (n = vt), "init" === t ? 0 : this._streams[n][e].segments[t].start
                }
            }, {
                key: "_getSegmentUrl",
                value: function(e, t, n) {
                    if (void 0 === n && (n = vt), "init" === t && !this._streams[n][e].init_segment_range && -1 === this._streams[n][e].init_segment.indexOf(".")) return Fe(this._streams[n][e].init_segment);
                    var i = this._baseUrl,
                        r = this._manifest.base_url && -1 !== this._manifest.base_url.indexOf("//");
                    return r && (i = this._manifest.base_url), this._manifest.base_url && !r && (i += this._manifest.base_url), this._streams[n][e].base_url && (i += this._streams[n][e].base_url), this._useRangeRequests() ? i : "init" === t ? i += this._streams[n][e].init_segment : (this._streams[n][e].segments[t].url && (i += this._streams[n][e].segments[t].url), i)
                }
            }, {
                key: "_key",
                value: function(e, t, n) {
                    return e + ":" + t + ":" + n
                }
            }, {
                key: "_isFinalSegment",
                value: function(e, t) {
                    return t === this._streams[vt][e].segments.length - 1
                }
            }, {
                key: "_getCurrentlyLoadingStreamsForSegment",
                value: function(e, t) {
                    var n = [],
                        i = this._streamsForSegment[e];
                    if (!i) return n;
                    for (var r = 0; r < i.length; r++) this._waitingOnSet.has(this._key(i[r], e, t)) && n.push(i[r]);
                    return n
                }
            }, {
                key: "_getCurrentStream",
                value: function(e, t) {
                    return void 0 === e && (e = 0), void 0 === t && (t = vt), void 0 !== this.sorcerer && (e = this.sorcerer[t].activeStreamIndex), this._streams[t][e]
                }
            }, {
                key: "_getStreamIndexToLoad",
                value: function(e) {
                    var t = this._streams[vt];
                    if (0 === (t = this._brain.filterStreams(t)).length) return !1;
                    if (this._switching[vt]) return !1;
                    var n = t[t.length - 1];
                    if (n.id !== this._lastTargetStreamId) {
                        this._lastTargetStreamId = n.id;
                        var i = {
                            index: this._streams[vt].indexOf(n),
                            streams: this._streams[vt]
                        };
                        this.fire(Ce.STREAM_TARGET_CHANGE, i)
                    }
                    var r = this._getCurrentStream(),
                        o = this._brain.shouldPowerUp(t, r, e);
                    return !1 === o && (o = this._brain.shouldPowerDown(t, r)), !1 === o ? o : this._streams[vt].indexOf(t[o])
                }
            }, {
                key: "_loadSegmentsForType",
                value: function(e) {
                    var t = this;
                    void 0 === e && (e = vt);
                    var n = this._getStreamIndexToLoad();
                    e === pt && (!1 === n && (n = this.sorcerer[vt].activeStreamIndex), n = this._getAudioIndexFromVideo(n), this.sorcerer[pt].activeStreamIndex === n && (n = !1));
                    var i = !1;
                    !1 !== n && (i = n > this.sorcerer[e].activeStreamIndex, this._switching[e] = !0, this.sorcerer[e].switchTo(n).then(function() {
                        t._switching[e] = !1
                    }).catch(console.error));
                    for (var r = this._brain.getSegmentsToLoad(i, e, this._getCurrentStream()), o = this.sorcerer[e].activeStreamIndex, a = 0; a < r.length; a++) {
                        var s = this._getSegmentUrl(o, r[a], e),
                            u = this._getCurrentlyLoadingStreamsForSegment(r[a], e);
                        if (!(1 < u.length) && !(1 === u.length && o <= u[0])) {
                            var c = this._isFinalSegment(o, r[a], e),
                                l = {
                                    stream: o,
                                    segment: r[a],
                                    type: e
                                },
                                d = this.sorcerer[e].streams[o],
                                f = s;
                            if (this._useRangeRequests()) f = {
                                url: f,
                                byteRange: this._getRangeForSegment(o, r[a], e)
                            };
                            var h = this._getSegmentPriority(o, r[a], e),
                                v = e === vt;
                            d.addSegment(f, {
                                identifier: l,
                                isFinalSegment: c,
                                priority: h,
                                includeWithBandwidthChecks: v
                            })
                        }
                    }
                }
            }, {
                key: "_loadSegments",
                value: function() {
                    var t = this;
                    return this._onReady.then(function() {
                        for (var e in t._streams) 0 < t._streams[e].length && t._loadSegmentsForType(e)
                    })
                }
            }, {
                key: "_handleQueued",
                value: function(e) {
                    this._waitingOnSet.add(this._key(e.stream, e.segment, e.type)), this._streamsForSegment[e.segment] || (this._streamsForSegment[e.segment] = []), -1 === this._streamsForSegment[e.segment].indexOf(e.stream) && this._streamsForSegment[e.segment].push(e.stream)
                }
            }, {
                key: "_clearWaitingOn",
                value: function(t) {
                    var n = this;
                    this._streamsForSegment[t.segment].forEach(function(e) {
                        n._waitingOnSet.delete(n._key(e, t.segment, t.type))
                    })
                }
            }, {
                key: "_handleAborted",
                value: function(e) {
                    this._streamsForSegment[e.segment] && this._clearWaitingOn(e)
                }
            }, {
                key: "_handleAppendBufferEnd",
                value: function(e) {
                    this._checkSwitchUp && e.stream === this._lastStreamIndex && (this._checkSwitchUp = !1, this._clearBufferAtTime = this._streams[vt][e.stream].segments[e.segment].start), this._streamsForSegment[e.segment] && this._clearWaitingOn(e), null !== this._timeToSeekTo && this._resolveSeek && this._brain.canPlayFromTimeInStream(this._timeToSeekTo, this._getCurrentStream()) && (this._resolveSeek(this._timeToSeekTo), this._resolveSeek = null)
                }
            }, {
                key: "_handleDownloadEnd",
                value: function(e, t) {
                    this.fire(Ce.DOWNLOAD_END, {
                        identifier: e,
                        data: t
                    })
                }
            }, {
                key: "_handleDownloadError",
                value: function(e, t) {
                    this._clearWaitingOn(e);
                    var n = Ce.DOWNLOAD_ERROR;
                    410 === t && (n = Ce.MEDIA_URL_EXPIRED), this.fire(n, {
                        identifier: e,
                        status: t
                    })
                }
            }, {
                key: "_handleProgress",
                value: function() {
                    if (this._options.tests && this._options.tests.download_bitrate && this._options.tests.download_bitrate.group) {
                        var e = this._streams[vt][this.sorcerer.video.activeStreamIndex],
                            t = this.sorcerer.getAverageDownloadBitrate(this._options.tests.download_bitrate.data.duration);
                        if (this._lastDownloadBitrate !== t && 0 !== t) {
                            var n = {
                                speed: this._lastDownloadBitrate = t,
                                bitrate: e.bitrate
                            };
                            this.fire(Ce.BANDWIDTH, n)
                        }
                    }
                }
            }, {
                key: "_handleStreamChange",
                value: function(e) {
                    e > this._lastStreamIndex && 0 < this.currentTime && (this._checkSwitchUp = !0), this._lastStreamIndex = e;
                    var t = {
                        index: this._manifest.video.indexOf(this._streams[vt][e]),
                        streams: this._manifest.video
                    };
                    this.fire(Ce.STREAM_CHANGE, t)
                }
            }, {
                key: "_initDrm",
                value: function(e, t) {
                    if (void 0 === e && (e = []), void 0 === t && (t = []), this._telecineVideo.drmHandler) {
                        var n = {
                            audio: t.map(function(e) {
                                return e.mime_type + ';codecs="' + e.codecs + '"'
                            }),
                            video: e.map(function(e) {
                                return e.mime_type + ';codecs="' + e.codecs + '"'
                            })
                        };
                        this._telecineVideo.drmHandler.init(this, n)
                    }
                }
            }, {
                key: "preload",
                get: function() {
                    return this._preload
                },
                set: function(e) {
                    this._handlePreloadChanged(this._preload, e), this._preload = e
                }
            }, {
                key: "videoWidth",
                get: function() {
                    var e = this._getCurrentStream();
                    return e ? e.width : this._video.videoWidth
                }
            }, {
                key: "videoHeight",
                get: function() {
                    var e = this._getCurrentStream();
                    return e ? e.height : this._video.videoHeight
                }
            }, {
                key: "restrictedStreamIndexes",
                get: function() {
                    return this._restrictedStreamIndexes
                },
                set: function(e) {
                    var t = this;
                    void 0 === e && (e = []), this._restrictedStreamIndexes.join(",") !== e.join(",") && (this._restrictedStreamIndexes = e, this._onReady.then(function() {
                        return t.lockStreamIndexes()
                    }).catch(console.error))
                }
            }, {
                key: "currentTime",
                get: function() {
                    return null !== this._timeToSeekTo ? this._timeToSeekTo : this._video.currentTime
                },
                set: function(e) {
                    (this._startedPlaying || 0 !== e) && this.seekToTime(e)
                }
            }, {
                key: "downloadSpeed",
                get: function() {
                    return this._lastDownloadBitrate
                }
            }, {
                key: "isLowerProfileAvailable",
                get: function() {
                    return this.sorcerer ? 0 < this.sorcerer[vt].activeStreamIndex : null
                }
            }]), i
        }(),
        gt = ["width", "height", "bandwidth", "duration", "timescale", "presentationTimeOffset"],
        yt = function() {
            function i(e, t) {
                q(this, i);
                var n = new DOMParser;
                this.manifest = n.parseFromString(e, "application/xml"), this.url = t, this.mpd = this.manifest.getElementsByTagName("MPD")[0]
            }
            return j(i, [{
                key: "_attrsToObj",
                value: function(e) {
                    for (var t = {}, n = 0; n < e.length; n++) {
                        var i = e[n].nodeName,
                            r = e[n].nodeValue; - 1 !== gt.indexOf(i) && (r = parseInt(r, 10)), t[i] = r
                    }
                    return t
                }
            }, {
                key: "_getAttribute",
                value: function(e, t) {
                    var n = e.attributes.getNamedItem(t);
                    return n ? n.nodeValue : null
                }
            }, {
                key: "_constructAdaptationSets",
                value: function(i) {
                    for (var r = this, o = [], e = function(e) {
                            var t = r._attrsToObj(i[e].attributes),
                                n = i[e].getElementsByTagName("Representation");
                            t.representations = r._constructRepresentations(n), t.frameRate && t.representations.forEach(function(e) {
                                e.framerate = parseInt(t.frameRate, 10)
                            }), 1 === t.representations.length && (t.width && (t.representations[0].width = t.width), t.height && (t.representations[0].height = t.height)), o.push(t)
                        }, t = 0; t < i.length; t++) e(t);
                    return o
                }
            }, {
                key: "_constructRepresentations",
                value: function(e) {
                    for (var t = [], n = 0; n < e.length; n++) {
                        var i = this._attrsToObj(e[n].attributes),
                            r = e[n].getElementsByTagName("SegmentList")[0];
                        i.segmentList = this._constructSegmentList(r), t.push(i)
                    }
                    return t
                }
            }, {
                key: "_constructSegmentList",
                value: function(e) {
                    var t = e.getElementsByTagName("Initialization")[0],
                        n = e.getElementsByTagName("SegmentURL"),
                        i = this._attrsToObj(e.attributes);
                    i.startNumber = parseInt(i.startNumber, 10), i.initSegment = this.baseURL + this._getAttribute(t, "sourceURL"), i.segments = [];
                    for (var r = 0; r < n.length; r++) {
                        var o = this._getAttribute(n[r], "media"),
                            a = o.match(/cn(\d*)/);
                        if (null === a) throw new Error("Error parsing segment index from segment URL");
                        i.segments.push({
                            index: parseInt(a[1], 10),
                            url: this.baseURL + o
                        })
                    }
                    return i
                }
            }, {
                key: "profiles",
                get: function() {
                    return this._getAttribute(this.mpd, "profiles")
                }
            }, {
                key: "type",
                get: function() {
                    return this._getAttribute(this.mpd, "type")
                }
            }, {
                key: "minimumUpdatePeriod",
                get: function() {
                    return Ue(this._getAttribute(this.mpd, "minimumUpdatePeriod"))
                }
            }, {
                key: "publishTime",
                get: function() {
                    return this._getAttribute(this.mpd, "publishTime")
                }
            }, {
                key: "availabilityStartTime",
                get: function() {
                    return this._getAttribute(this.mpd, "availabilityStartTime")
                }
            }, {
                key: "timeShiftBufferDepth",
                get: function() {
                    return Ue(this._getAttribute(this.mpd, "timeShiftBufferDepth"))
                }
            }, {
                key: "suggestedPresentationDelay",
                get: function() {
                    return Ue(this._getAttribute(this.mpd, "suggestedPresentationDelay"))
                }
            }, {
                key: "minBufferTime",
                get: function() {
                    return Ue(this._getAttribute(this.mpd, "minBufferTime"))
                }
            }, {
                key: "baseURL",
                get: function() {
                    return this.url.substr(0, this.url.lastIndexOf("/") + 1)
                }
            }, {
                key: "periods",
                get: function() {
                    for (var e = [], t = this.mpd.getElementsByTagName("Period"), n = 0; n < t.length; n++) {
                        var i = this._attrsToObj(t[n].attributes),
                            r = t[n].getElementsByTagName("AdaptationSet");
                        i.adaptationSets = this._constructAdaptationSets(r), e.push(i)
                    }
                    return e
                }
            }, {
                key: "audioAdaptationSet",
                get: function() {
                    return this.periods[0].adaptationSets.find(function(e) {
                        return 0 === e.mimeType.search(/audio/)
                    })
                }
            }, {
                key: "videoAdaptationSet",
                get: function() {
                    return this.periods[0].adaptationSets.find(function(e) {
                        return 0 === e.mimeType.search(/video/)
                    })
                }
            }, {
                key: "representations",
                get: function() {
                    return this.periods[0].adaptationSets[0].representations
                }
            }, {
                key: "audioRepresentations",
                get: function() {
                    return this.audioAdaptationSet ? this.audioAdaptationSet.representations : null
                }
            }, {
                key: "videoRepresentations",
                get: function() {
                    return this.videoAdaptationSet.representations
                }
            }]), i
        }(),
        _t = ["width", "height", "bandwidth", "duration", "timescale", "presentationTimeOffset"],
        bt = function() {
            function o(e, t, n, i) {
                var r = this;
                q(this, o), window.m3u8Parser ? this._initialize(e, t, n, i) : document.getElementById("m3u8-parser").onload = function() {
                    r._initialize(e, t, n, i)
                }
            }
            return j(o, [{
                key: "refreshPlaylist",
                value: function(o) {
                    var a = this;
                    return new I(function(n, t) {
                        var e = a.playlists.filter(function(e) {
                            return "" + e.baseUrl + e.uri === "" + o.baseUrl + o.id
                        });
                        if (e.length) {
                            var i = e[0],
                                r = "" + i.baseUrl + i.uri;
                            a._requestText(r, i).then(function(e) {
                                var t = new window.m3u8Parser.Parser;
                                t.push(e.response), t.end(), e.playlist.manifest = t.manifest, e.playlist.baseUrl = a.baseURL, i = e.playlist, n()
                            }).catch(function(e) {
                                t()
                            })
                        } else t()
                    })
                }
            }, {
                key: "_initialize",
                value: function(e, t, n, i) {
                    var r = this,
                        o = new window.m3u8Parser.Parser;
                    if (o.push(e), o.end(), this.manifest = o.manifest, this.url = t, this.playlists = [], this.playlistsLoaded = 0, this.playlistErrors = 0, this.manifest.playlists && 0 !== this.manifest.playlists.length)
                        for (var a = 0; a < this.manifest.playlists.length; a++) {
                            var s = this.baseURL + this.manifest.playlists[a].uri;
                            this._requestText(s, this.manifest.playlists[a]).then(function(e) {
                                r._manifestUrl = e.responseURL, (o = new window.m3u8Parser.Parser).push(e.response), o.end();
                                var t = e.playlist;
                                t.manifest = o.manifest, t.baseUrl = r.baseURL, r.playlists.push(t), r.playlistsLoaded += 1, r.playlistsLoaded + r.playlistErrors === r.manifest.playlists.length && n()
                            }).catch(function() {
                                r.playlistErrors += 1, r.playlistErrors === r.manifest.playlists.length ? i() : r.playlistsLoaded + r.playlistErrors === r.manifest.playlists.length && n()
                            })
                        }
                }
            }, {
                key: "_attrsToObj",
                value: function(e) {
                    for (var t = {}, n = 0; n < e.length; n++) {
                        var i = e[n].nodeName,
                            r = e[n].nodeValue; - 1 !== _t.indexOf(i) && (r = parseInt(r, 10)), t[i] = r
                    }
                    return t
                }
            }, {
                key: "_getAttribute",
                value: function(e, t) {
                    var n = e.attributes.getNamedItem(t);
                    return n ? n.nodeValue : null
                }
            }, {
                key: "_constructAdaptationSets",
                value: function(i) {
                    for (var r = this, o = [], e = function(e) {
                            var t = i.playlists[e],
                                n = t;
                            t.representations = r._constructRepresentations(n), t.frameRate && t.representations.forEach(function(e) {
                                e.framerate = parseInt(t.frameRate, 10)
                            }), 1 === t.representations.length && (t.width && (t.representations[0].width = t.width), t.height && (t.representations[0].height = t.height)), o.push(t)
                        }, t = 0; t < i.playlists.length; t++) e(t);
                    return o
                }
            }, {
                key: "_constructRepresentations",
                value: function(e) {
                    for (var t = [], n = 0; n < e.length; n++) {
                        var i = this._attrsToObj(e[n].attributes),
                            r = e[n].getElementsByTagName("SegmentList")[0];
                        i.segmentList = this._constructSegmentList(r), t.push(i)
                    }
                    return t
                }
            }, {
                key: "_constructSegmentList",
                value: function(e) {
                    var t = e.getElementsByTagName("Initialization")[0],
                        n = e.getElementsByTagName("SegmentURL"),
                        i = this._attrsToObj(e.attributes);
                    i.startNumber = parseInt(i.startNumber, 10), i.initSegment = this.baseURL + this._getAttribute(t, "sourceURL"), i.segments = [];
                    for (var r = 0; r < n.length; r++) {
                        var o = this._getAttribute(n[r], "media"),
                            a = o.match(/cn(\d*)/);
                        if (null === a) throw new Error("Error parsing segment index from segment URL");
                        i.segments.push({
                            index: parseInt(a[1], 10),
                            url: this.baseURL + o
                        })
                    }
                    return i
                }
            }, {
                key: "_requestText",
                value: function(i, r) {
                    return new I(function(e, t) {
                        var n = new XMLHttpRequest;
                        n.open("GET", i, !0), n.onload = function() {
                            200 !== n.status && t("Failed to load url: " + i + " " + n.status), n.playlist = r, e(n)
                        }, n.onerror = function() {
                            t("Failed to load url: " + i)
                        }, n.send()
                    })
                }
            }, {
                key: "profiles",
                get: function() {
                    return this._getAttribute(this.manifest, "profiles")
                }
            }, {
                key: "type",
                get: function() {
                    return "dynamic"
                }
            }, {
                key: "minimumUpdatePeriod",
                get: function() {
                    return Ue("PT3.0S")
                }
            }, {
                key: "baseURL",
                get: function() {
                    return this.url.substr(0, this.url.lastIndexOf("/") + 1)
                }
            }, {
                key: "periods",
                get: function() {
                    var e = [],
                        t = {
                            id: "0",
                            start: "PT0.0S"
                        };
                    return t.adaptationSets = this._constructAdaptationSets(this.manifest), e.push(t), e
                }
            }, {
                key: "audioAdaptationSet",
                get: function() {
                    return this.periods[0].adaptationSets.find(function(e) {
                        return 0 === e.mimeType.search(/audio/)
                    })
                }
            }, {
                key: "videoAdaptationSet",
                get: function() {
                    return this.playlists
                }
            }, {
                key: "representations",
                get: function() {
                    return this.periods[0].adaptationSets[0].representations
                }
            }, {
                key: "audioRepresentations",
                get: function() {
                    return null
                }
            }, {
                key: "videoRepresentations",
                get: function() {
                    for (var e = [], t = 0; t < this.playlists.length; t++) {
                        for (var n = this.playlists[t], i = 0; i < n.manifest.segments.length; i++) {
                            var r = n.manifest.segments[i],
                                o = r.uri.substring(0, r.uri.length - 3);
                            r.index = o.substring(o.lastIndexOf("_") + 1, o.length)
                        }
                        var a = {
                            baseUrl: n.baseUrl,
                            bandwidth: n.attributes.BANDWIDTH,
                            codecs: n.attributes.CODECS,
                            framerate: 30,
                            height: n.attributes.RESOLUTION.height,
                            id: n.uri,
                            sar: "1:1",
                            segmentList: n.manifest.segments,
                            width: n.attributes.RESOLUTION.width
                        };
                        e.push(a)
                    }
                    return e
                }
            }]), o
        }(),
        wt = [1, 2, 5],
        Et = function(e) {
            function i(e, t) {
                var n;
                return void 0 === t && (t = {}), q(this, i), (n = K(this, z(i).call(this, e, t))).BANDWIDTH_THRESHOLD = .8, n.consecutiveStreamIndex = {}, n
            }
            return W(i, ft), j(i, null, [{
                key: "displayName",
                get: function() {
                    return "Live"
                }
            }]), j(i, [{
                key: "optimalStreamIndex",
                value: function(e, t) {
                    if (1 === e.length) return e[0].index;
                    e = this.filterStreams(e);
                    var n = 0;
                    n = this._options.tests && this._options.tests.download_bitrate && this._options.tests.download_bitrate.group ? this.scanner.sorcerer.getAverageDownloadBitrate(this._options.tests.download_bitrate.data.duration) : this.scanner.sorcerer.getCurrentSpeed({
                        type: "average",
                        howMany: 5,
                        weights: wt
                    });
                    for (var i = t, r = 0; r < e.length; r++) n * this.BANDWIDTH_THRESHOLD > e[r].bandwidth && (i = e[r].index);
                    this._clearConsecutiveStreamIndexes(i), this.consecutiveStreamIndex[i]++;
                    var o = 1.5 * this.scanner.segmentLength;
                    return this.scanner.duration - this.scanner.currentTime < o ? 0 : 2 < this.consecutiveStreamIndex[i] && i !== t ? i : t
                }
            }, {
                key: "_clearConsecutiveStreamIndexes",
                value: function(e) {
                    for (var t in this.consecutiveStreamIndex[e] || (this.consecutiveStreamIndex[e] = 0), this.consecutiveStreamIndex) this.consecutiveStreamIndex.hasOwnProperty(t) && parseInt(t, 10) !== e && (this.consecutiveStreamIndex[t] = 0)
                }
            }]), i
        }(),
        St = "video",
        kt = "audio",
        Tt = "application/x-mpegURL",
        At = function(e) {
            function i(e, t) {
                var n;
                return void 0 === t && (t = {}), q(this, i), (n = K(this, z(i).call(this, e, t)))._manifestUrl = null, n._apiManifestUrl = null, n._hasPlayed = !1, n._manifestRequested = !1, n._liveHls = n._options.tests.live_hls && n._options.tests.live_hls.group, n.STREAM_SWITCH_CHECK_INTERVAL = 2e3, n._hasSetDuration = !1, n._previousDuration = 0, n._livePoller = t.livePoller, n._setUpLivePoller(), n.reset(), window.addEventListener("online", function() {
                    n._clearManifestTimeout(), n.play()
                }), n
            }
            return W(i, Ze), j(i, null, [{
                key: "displayName",
                get: function() {
                    return "LiveScanner"
                }
            }, {
                key: "supportedVideoTypes",
                get: function() {
                    return Ie.iOS ? [Tt] : ["video/vnd.mpeg.dash.mpd", Tt]
                }
            }, {
                key: "supportsPlaybackRate",
                get: function() {
                    return !1
                }
            }]), j(i, [{
                key: "deactivate",
                value: function() {
                    $(z(i.prototype), "deactivate", this).call(this), this.reset()
                }
            }, {
                key: "reset",
                value: function() {
                    this._manifestTimeout && clearTimeout(this._manifestTimeout), this._sorcerer && this._sorcerer.destroy(), this._sorcerer = null, this._hasAudioRepresentation = !1, this._streams = {}, this._streams[St] = [], this._streams[kt] = [], this._lastStreamIndex = 0, this._manifest = null, this._manifestTimeout = null, this._lastSegmentAppended = {
                        audio: -1,
                        video: -1
                    }, this._noSegmentsLoadedCount = {
                        audio: 0,
                        video: 0
                    }, this._seenBufferLength = !1, this._hasLoadedManifest = !1, this._isOnline = !1, this._hasEnded = !1, this._hlsAvailabilityCheckTimeout = null, this._bufferedIndex = 0, this._streamChanging = !1, this._timeSinceLastStreamSwitchCheck = 0, this._abr = new Et(this, this._options), this._restrictedStreamIndexes = [], this._lastDownloadBitrate = 0, this._manifestRequested = !1
                }
            }, {
                key: "_clearManifestTimeout",
                value: function() {
                    this._manifestTimeout && clearTimeout(this._manifestTimeout), this._manifestTimeout = null
                }
            }, {
                key: "_setUpLivePoller",
                value: function() {
                    var t = this;
                    this._livePoller.on("liveeventended", function(e) {
                        t._hasEnded = !0, t._sorcerer.destroy(), t.deactivate()
                    })
                }
            }, {
                key: "_refreshLiveApiPlaylistUrl",
                value: function(o) {
                    var a = this;
                    return void 0 === o && (o = 0), new I(function(n, i) {
                        var r = a._livePoller.liveEvent.playlistRefreshUrl;
                        Ve(r, !0).then(function(e) {
                            if ("url" in e) {
                                var t = a._isNonNativeHLS() || a._isNativeHLS() ? e.url.hls : e.url.dash;
                                a._loadManifestFromExplcitRedirect(t, o).then(n).catch(i)
                            } else i("Error parsing 'url' key from player live API refresh endpoint: " + r + " " + e)
                        }).catch(i)
                    })
                }
            }, {
                key: "_loadManifestFromExplcitRedirect",
                value: function(e, i) {
                    var r = this;
                    return void 0 === i && (i = 0), new I(function(t, n) {
                        r._apiManifestUrl = e, Ve(r._apiManifestUrl, !0).then(function(e) {
                            "url" in e ? (r._manifestUrl = e.url, r._loadManifest(r._manifestUrl, i).then(t).catch(n)) : n("Error parsing 'url' key from Live API manifest endpoint: " + r._apiManifestUrl + " " + e)
                        }).catch(n)
                    })
                }
            }, {
                key: "_loadManifest",
                value: function(o, a) {
                    var s = this;
                    return void 0 === a && (a = 0), new I(function(n, i) {
                        var r = new XMLHttpRequest;
                        r.open("GET", o, !0), r.onload = function() {
                            if (410 === r.status) return 3 <= a ? void i("Manifest load responded with a 410. Giving up refreshing after " + a + " attempts") : (i("Manifest load responded with a 410. Attempting to refresh manifest URL"), void s._refreshLiveApiPlaylistUrl(++a).then(function() {
                                s._manifestRefresh(s._manifestUrl, Math.max(1e3 * s._manifest.minimumUpdatePeriod, 3e3))
                            }).catch(i));
                            if (200 === r.status) try {
                                s._isNonNativeHLS() ? (s._atDurationEnd() && s._isOnline && s._checkHlsAvailability(0), s._manifest = new bt(r.response, o, n, i)) : s._manifest = new yt(r.response, o), s._hasLoadedManifest || (s._hasLoadedManifest = !0), s._livePoller.isForcePolling && s._livePoller.unforcePolling();
                                var e = 3 < s._noSegmentsLoadedCount[kt] || 3 < s._noSegmentsLoadedCount[St];
                                s._isOnline || e || (s._isOnline = !0, s.fire(xe.STREAM_ONLINE)), s._isOnline && e && s._atDurationEnd() && (s._livePoller.isForcePolling || s._livePoller.forcePolling(), s._isOnline = !1, s.fire(xe.STREAM_OFFLINE)), s._isNonNativeHLS() || n()
                            } catch (e) {
                                i(e)
                            } else {
                                if (s._hasEnded) return void i("Live stream has ended");
                                if (!s._hasLoadedManifest && a < 12) return void setTimeout(function() {
                                    s._loadManifest(o, ++a).then(n).catch(i)
                                }, 1500);
                                s._livePoller.isForcePolling || s._livePoller.forcePolling(), (s._atDurationEnd() && s._isOnline || !s._hasLoadedManifest) && (s._isOnline = !1, s.fire(xe.STREAM_OFFLINE));
                                var t = Math.min(1e3 * Math.pow(2, a) + 1e3 * Math.random(), 5e3);
                                setTimeout(function() {
                                    s._loadManifest(o, ++a).then(n).catch(i)
                                }, t)
                            }
                        }, r.onerror = function() {
                            var e = s._isNonNativeHLS() ? "HLS" : "DASH";
                            3 <= a ? i(e + " manifest failed to load. Giving up refreshing after " + a + " attempts.") : (i(e + " manifest failed to load. Attempting to refresh manifest URL."), s._refreshLiveApiPlaylistUrl(++a).then(function() {
                                s._manifestRefresh(s._manifestUrl, Math.max(1e3 * s._manifest.minimumUpdatePeriod, 3e3))
                            }).catch(i))
                        }, r.send()
                    })
                }
            }, {
                key: "_loadManifestInit",
                value: function(e) {
                    var o = this;
                    return new I(function(t, n) {
                        o._loadManifestFromExplcitRedirect(e).then(function() {
                            o._setUpSorcerer(o._video), o._streams[St] = o._sortStreams(o._manifest.videoRepresentations);
                            var r = o._manifest.videoAdaptationSet.mimeType;
                            if (r || (r = "video/mp4"), o._streams[St].forEach(function(e, t) {
                                    var n = o._streams[St][t];
                                    if (o._isNonNativeHLS()) {
                                        var i = n.baseUrl + n.segmentList[0].uri;
                                        e.codecs ? o._sorcerer.addStream(r + '; codecs="' + e.codecs + '"', i, !0) : o._sorcerer.addStream(r + '; codecs="avc1.64001f,mp4a.40.5"', i, !0)
                                    } else o._sorcerer.addStream(r + '; codecs="' + n.codecs + '"', n.segmentList.initSegment)
                                }), o._isNonNativeHLS()) {
                                if (!o._hasSetDuration) {
                                    o._hasSetDuration = !0;
                                    var e = o._streams[St][0].segmentList[0];
                                    o._previousDuration = e.duration * e.index
                                }
                                o._appendTsSegments(St)
                            } else o._appendSegments(St);
                            if (o._manifest.audioRepresentations && !o._isNonNativeHLS()) {
                                o._hasAudioRepresentation = !0, o._streams[kt] = o._sortStreams(o._manifest.audioRepresentations);
                                var n = o._manifest.audioAdaptationSet.mimeType;
                                o._streams[kt].forEach(function(e, t) {
                                    o._sorcerer.addStream(n + '; codecs="' + o._streams[kt][t].codecs + '"', o._streams[kt][t].segmentList.initSegment)
                                }), o._appendSegments(kt)
                            }
                            return o.fire(xe.REPRESENTATIONS_AVAILABLE, o._streams), o._setupSorcererEvents(), o._checkForStreamSwitch(), o._manifestRefresh(o._manifestUrl, Math.max(1e3 * o._manifest.minimumUpdatePeriod, 3e3)), t()
                        }).catch(function(e) {
                            n(e)
                        })
                    })
                }
            }, {
                key: "_setUpSorcerer",
                value: function(e) {
                    this._sorcerer && this._sorcerer.destroy(), this._sorcerer = new lt(e), this._sorcerer.attachMediaSource()
                }
            }, {
                key: "_setupSorcererEvents",
                value: function() {
                    var i = this;
                    this._sorcerer.video.on("streamchange", function(e) {
                        i._streamChanging = !1;
                        var t = i._streams[St];
                        t[e].bitrate = t[e].bandwidth;
                        var n = {
                            index: e,
                            streams: t
                        };
                        i.fire(Ce.STREAM_CHANGE, n)
                    }), this.sorcerer.on("progress", this._handleProgress.bind(this)), this._sorcerer.on("downloadend", this._handleDownloadEnd.bind(this))
                }
            }, {
                key: "setVideoSrc",
                value: function(e, t) {
                    this.videoSrc = e
                }
            }, {
                key: "_handleDownloadEnd",
                value: function(e) {
                    if ("string" == typeof e) {
                        var t = e.split("_");
                        this._lastSegmentAppended[t[0]] = Number(t[2])
                    }
                }
            }, {
                key: "_handleStreamChange",
                value: function(e) {
                    this._streamChanging = !1;
                    var t = this._streams[St];
                    t[e].bitrate = t[e].bandwidth;
                    var n = {
                        index: e,
                        streams: t
                    };
                    this.fire(Ce.STREAM_CHANGE, n)
                }
            }, {
                key: "_handleProgress",
                value: function() {
                    if (this._options.tests.download_bitrate && this._options.tests.download_bitrate.group) {
                        var e = this._streams[St][this._sorcerer.video.activeStreamIndex],
                            t = this._sorcerer.getAverageDownloadBitrate(this._options.tests.download_bitrate.data.duration);
                        if (this._lastDownloadBitrate !== t && 0 !== t) {
                            var n = {
                                speed: this._lastDownloadBitrate = t,
                                bitrate: e.bitrate
                            };
                            this.fire(Ce.BANDWIDTH, n)
                        }
                    }
                }
            }, {
                key: "_isNonNativeHLS",
                value: function() {
                    return !!this._telecineVideo.currentFile && !(this._telecineVideo.currentFile.mime !== Tt || !this._liveHls || ye.iOS)
                }
            }, {
                key: "_isNativeHLS",
                value: function() {
                    return !(this._telecineVideo.currentFile.mime !== Tt || !ye.iOS)
                }
            }, {
                key: "_loadHls",
                value: function() {
                    this.fire(xe.STREAM_ONLINE), this._checkHlsAvailability(5e3)
                }
            }, {
                key: "_checkHlsAvailability",
                value: function(e) {
                    var n = this;
                    if (!("number" == typeof ye.iOS && ye.iOS < 9)) {
                        var i = function() {
                            n.fire(xe.STREAM_OFFLINE), n._livePoller.forcePolling()
                        };
                        this._hlsAvailabilityCheckTimeout = setTimeout(function() {
                            var t = new XMLHttpRequest;
                            t.onload = function() {
                                200 !== t.status && i(), t.response.match(/^#EXTM3U\n#EXT-X-VERSION:3\n$/) && i()
                            }, t.onerror = function() {
                                i()
                            }, n._isNonNativeHLS() ? Ve(n._apiManifestUrl, !0).then(function(e) {
                                "url" in e || i(), t.open("GET", e.url), t.send()
                            }).catch(function() {}) : (t.open("GET", n._video.src), t.send())
                        }, e)
                    }
                }
            }, {
                key: "_refreshSubManifest",
                value: function(e, t) {
                    var i = this;
                    return void 0 === t && (t = 0), new I(function(t, e) {
                        var n = i._sorcerer[St].activeStreamIndex;
                        i._manifest.refreshPlaylist(i._streams[St][n]).then(function() {
                            i._hasLoadedManifest || (i._hasLoadedManifest = !0), i._livePoller.isForcePolling && i._livePoller.unforcePolling();
                            var e = 3 < i._noSegmentsLoadedCount[kt] || 3 < i._noSegmentsLoadedCount[St];
                            i._isOnline || e || (i._isOnline = !0, i.fire(xe.STREAM_ONLINE)), i._isOnline && e && i._atDurationEnd() && (i._livePoller.isForcePolling || i._livePoller.forcePolling(), i._isOnline = !1, i.fire(xe.STREAM_OFFLINE)), t()
                        }).catch(function() {})
                    })
                }
            }, {
                key: "_manifestRefresh",
                value: function(e, t) {
                    var n = this;
                    this._manifestTimeout = setTimeout(function() {
                        n.paused && n._hasPlayed ? n._clearManifestTimeout() : n._isNonNativeHLS() ? n._refreshSubManifest(e).then(function() {
                            return n._streams[St] = n._sortStreams(n._manifest.videoRepresentations), n._appendTsSegments(St), n._manifestRefresh(e, Math.max(1e3 * n._manifest.minimumUpdatePeriod, 3e3))
                        }).catch(function(e) {}) : n._loadManifest(e).then(function() {
                            return n._streams[St] = n._sortStreams(n._manifest.videoRepresentations), n._appendSegments(St), n._hasAudioRepresentation && (n._streams[kt] = n._sortStreams(n._manifest.audioRepresentations), n._appendSegments(kt)), n._manifestRefresh(e, Math.max(1e3 * n._manifest.minimumUpdatePeriod, 3e3))
                        }).catch(function(e) {})
                    }, t)
                }
            }, {
                key: "_segmentIndexCompare",
                value: function(e, t) {
                    return e.index < t.index ? -1 : e.index > t.index ? 1 : 0
                }
            }, {
                key: "_appendTsSegments",
                value: function(e) {
                    if (this._sorcerer && this._sorcerer[e]) {
                        for (var t = this._sorcerer[e].activeStreamIndex, n = this._sorcerer[e].streams[t], i = this._streams[St][t].baseUrl, r = this._streams[St][t].segmentList, o = r.sort(this._segmentIndexCompare), a = 0, s = 0; s < o.length; s++) {
                            var u = o[s];
                            if (!(u.index < r.startNumber) && !(u.index <= this._lastSegmentAppended[e])) {
                                var c = e + "_" + t + "_" + u.index;
                                n.addSegment(i + u.uri, {
                                    identifier: c
                                }), a++
                            }
                        }
                        0 === a ? this._noSegmentsLoadedCount[e]++ : this._noSegmentsLoadedCount[e] = 0
                    }
                }
            }, {
                key: "_appendSegments",
                value: function(e) {
                    if (this._sorcerer && this._sorcerer[e]) {
                        for (var t = this._sorcerer[e].activeStreamIndex, n = this._sorcerer[e].streams[t], i = e === St ? this._streams[St][t].segmentList : this._streams[kt][t].segmentList, r = i.segments.sort(this._segmentIndexCompare), o = 0, a = 0; a < r.length; a++) {
                            var s = r[a];
                            if (!(s.index < i.startNumber) && !(s.index <= this._lastSegmentAppended[e])) {
                                var u = e + "_" + t + "_" + s.index;
                                n.addSegment(s.url, {
                                    identifier: u
                                }), o++
                            }
                        }
                        0 === o ? this._noSegmentsLoadedCount[e]++ : this._noSegmentsLoadedCount[e] = 0
                    }
                }
            }, {
                key: "_checkForStreamSwitch",
                value: function() {
                    if (!this._streamChanging) {
                        var e = this._abr.filterStreams(this._streams[St]),
                            t = this._abr.optimalStreamIndex(e, this._lastStreamIndex);
                        if (t !== this._lastStreamIndex) {
                            var n = e.find(function(e) {
                                    return e.index === t
                                }),
                                i = this._streams[St];
                            i[t].bitrate = i[t].bandwidth;
                            var r = {
                                index: t,
                                streams: i
                            };
                            this.fire(Ce.STREAM_TARGET_CHANGE, r), this._streamChanging = !0, this._sorcerer[St].switchTo(n, !0), this._lastStreamIndex = t
                        }
                    }
                }
            }, {
                key: "_checkForPlaybackGap",
                value: function() {
                    this._video.buffered.length && (this._bufferedIndex > this.buffered.length - 1 && (this._bufferedIndex = this.buffered.length - 1), this._video.currentTime < this._video.buffered.start(this._bufferedIndex) ? this._video.currentTime = this._video.buffered.start(this._bufferedIndex) : Math.floor(this._video.currentTime) + 3 < Math.floor(this._video.buffered.end(this._bufferedIndex)) || this._video.buffered.length - 1 > this._bufferedIndex && (this._bufferedIndex++, this._video.currentTime = this._video.buffered.start(this._bufferedIndex)))
                }
            }, {
                key: "_atDurationEnd",
                value: function() {
                    return this._isNonNativeHLS() ? !!(this._video.buffered && this._video.buffered.length && this._video.currentTime + .5 > this._video.buffered.end(this._video.buffered.length - 1)) : this._video.currentTime + .5 > this._video.duration
                }
            }, {
                key: "getBitrateAtTime",
                value: function(e, t) {
                    if (!this._sorcerer) return 0;
                    var n = this._sorcerer.streamIndexAtTime(e, t);
                    return this._streams[t][n] ? this._streams[t][n].bandwidth : 0
                }
            }, {
                key: "_timeSince",
                value: function(e) {
                    return Date.now() - e
                }
            }, {
                key: "_sortStreams",
                value: function(e) {
                    var t = e.slice(0);
                    return t.sort(function(e, t) {
                        return e.width * e.height * e.bandwidth - t.width * t.height * t.bandwidth
                    }), t.forEach(function(e, t) {
                        e.index = t
                    }), t
                }
            }, {
                key: "onprogress",
                value: function() {
                    this._isNativeHLS() || this._checkForPlaybackGap(), this._isNativeHLS() && this._hlsAvailabilityCheckTimeout && (clearTimeout(this._hlsAvailabilityCheckTimeout), this._hlsAvailabilityCheckTimeout = null, this._livePoller.unforcePolling())
                }
            }, {
                key: "ondurationchange",
                value: function() {
                    this._checkForPlaybackGap()
                }
            }, {
                key: "ontimeupdate",
                value: function() {
                    if (this._sorcerer) {
                        if (this.fire(Ce.DROPPED_FRAMES, this._sorcerer.getDroppedFrameTotal()), !this._options.tests.download_bitrate || this._options.tests.download_bitrate && !this._options.tests.download_bitrate.group) {
                            var e = this._sorcerer[St].activeStreamIndex;
                            if (e) {
                                var t = {
                                    speed: this._sorcerer.getCurrentSpeed({
                                        type: "average",
                                        howMany: 3,
                                        weights: [1, 2, 5]
                                    }),
                                    bitrate: this._streams[St][e].bitrate,
                                    speeds: this._sorcerer.getResponseSpeeds()
                                };
                                this.fire(Ce.BANDWIDTH, t)
                            }
                        }!this._isOnline && this._atDurationEnd() && this.fire(Ce.STREAM_OFFLINE), this._timeSince(this._timeSinceLastStreamSwitchCheck) > this.STREAM_SWITCH_CHECK_INTERVAL && (this._checkForStreamSwitch(), this._timeSinceLastStreamSwitchCheck = Date.now())
                    }
                }
            }, {
                key: "onstalled",
                value: function() {
                    (this._isNativeHLS() || this._isNonNativeHLS()) && this._checkHlsAvailability(3e4)
                }
            }, {
                key: "onwaiting",
                value: function() {}
            }, {
                key: "seekToTime",
                value: function() {}
            }, {
                key: "pause",
                value: function() {
                    $(z(i.prototype), "pause", this).call(this), this._isNativeHLS() || this._clearManifestTimeout()
                }
            }, {
                key: "play",
                value: function() {
                    if (this._manifestRequested ? this._manifestTimeout || this._isNativeHLS() || this._manifestRefresh(this._manifestUrl, 3e3) : (this._manifestRequested = !0, ye.iOS ? (this._video.src = this.videoSrc, this._loadHls()) : (this._manifestRequested = !0, this._loadManifestInit(this.videoSrc), this._video.load())), this._sorcerer && this._hasPlayed) {
                        var e = this._video.buffered;
                        e && e.length ? this.currentTime = e.end(0) + .1 : isNaN(this.duration) || (this.currentTime = this.duration), this._sorcerer.removeBuffer()
                    }
                    return this._hasPlayed = !0, $(z(i.prototype), "play", this).call(this)
                }
            }, {
                key: "restrictedStreamIndexes",
                get: function() {
                    return this._restrictedStreamIndexes
                },
                set: function(e) {
                    void 0 === e && (e = []), this._restrictedStreamIndexes.join(",") !== e.join(",") && (this._restrictedStreamIndexes = e, this._abr.lock(this._restrictedStreamIndexes))
                }
            }, {
                key: "videoWidth",
                get: function() {
                    return this._stream ? this._stream.width : this._video.videoWidth
                }
            }, {
                key: "videoHeight",
                get: function() {
                    return this._stream ? this._stream.height : this._video.videoHeight
                }
            }, {
                key: "duration",
                get: function() {
                    return this._video.duration
                }
            }, {
                key: "currentTime",
                get: function() {
                    return this._isNonNativeHLS() ? this._previousDuration + this._video.currentTime : this._video.currentTime
                },
                set: function(e) {
                    this._video.currentTime = e
                }
            }, {
                key: "isLowerProfileAvailable",
                get: function() {
                    return this._sorcerer ? 0 < this._sorcerer[St].activeStreamIndex : null
                }
            }, {
                key: "sorcerer",
                get: function() {
                    return this._sorcerer
                }
            }, {
                key: "segmentLength",
                get: function() {
                    return 3
                }
            }]), i
        }(),
        Pt = function() {
            function n(e, t) {
                void 0 === t && (t = {}), q(this, n), this._telecine = e, this._element = e._element, this._options = t
            }
            return j(n, null, [{
                key: "displayName",
                get: function() {
                    return "Effect"
                }
            }, {
                key: "supported",
                get: function() {
                    return !1
                }
            }, {
                key: "supportedScanners",
                get: function() {
                    return []
                }
            }]), j(n, [{
                key: "activate",
                value: function() {
                    throw new TelecineError("NotImplemented", "The effect must implement the activate method.")
                }
            }, {
                key: "deactivate",
                value: function() {
                    throw new TelecineError("NotImplemented", "The effect must implement the deactivate method.")
                }
            }]), n
        }(),
        Ct = new Ae,
        xt = new Ae,
        TelecineFile = function() {
            function TelecineFile(e, t) {
                var n = e.src,
                    i = e.mime,
                    r = e.id,
                    o = void 0 === r ? Ne() : r,
                    a = e.priority,
                    s = void 0 === a ? 0 : a,
                    u = e.metadata,
                    c = void 0 === u ? {} : u;
                if (q(this, TelecineFile), !n) throw new TypeError("Must provide a src for the file.");
                if (!i) throw new TypeError("Must provide a mime type for the file.");
                Object.defineProperties(this, {
                    mime: {
                        value: i,
                        enumerable: !0
                    },
                    id: {
                        value: "" + o,
                        enumerable: !0
                    },
                    metadata: {
                        value: c,
                        enumerable: !0
                    }
                }), this.video = t, this.priority = s, this.src = n
            }
            return j(TelecineFile, [{
                key: "priority",
                get: function() {
                    return Ct.get(this)
                },
                set: function(e) {
                    if (!("number" == typeof(e = parseInt(e, 10)) && isFinite(e) && Math.floor(e) === e && 0 <= e)) throw new TypeError("The file priority must be an integer greater than or equal to 0.");
                    Ct.set(this, e)
                }
            }, {
                key: "src",
                get: function() {
                    return xt.get(this)
                },
                set: function(e) {
                    xt.set(this, e), this.video.fire(Ce.FILE_SRC_UPDATE, this)
                }
            }, {
                key: "restrictedStreamIndexes",
                get: function() {
                    if (!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.video.currentScanner), "restrictedStreamIndexes")) throw new ReferenceError("The current scanner does not support streams.");
                    return this.video.currentScanner.restrictedStreamIndexes
                },
                set: function(e) {
                    if (void 0 === e && (e = []), !Array.isArray(e)) throw new TypeError("Indexes must be an array.");
                    if (!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.video.currentScanner), "restrictedStreamIndexes")) throw new ReferenceError("The current scanner does not support streams.");
                    this.video.currentScanner.restrictedStreamIndexes = e
                }
            }]), TelecineFile
        }(),
        Lt = ["disabled", "hidden", "showing"],
        Ot = ["subtitles", "captions", "descriptions", "chapters", "metadata"],
        Rt = ["ar", "fa", "he", "iw", "ku", "ps", "sd", "ur", "yi"],
        It = new Ae,
        Mt = new Ae,
        TelecineTextTrack = function() {
            function TelecineTextTrack(e, t) {
                var n = e.kind,
                    i = e.src,
                    r = void 0 === i ? null : i,
                    o = e.label,
                    a = void 0 === o ? "" : o,
                    s = e.language,
                    u = void 0 === s ? "" : s,
                    c = e.id,
                    l = void 0 === c ? Ne() : c;
                if (q(this, TelecineTextTrack), -1 === Ot.indexOf(n)) throw Se(12, "SYNTAX_ERR", "Syntax Error");
                ee(this), Object.defineProperties(this, {
                    kind: {
                        value: n,
                        enumerable: !0
                    },
                    label: {
                        value: a,
                        enumerable: !0
                    },
                    language: {
                        value: u,
                        enumerable: !0
                    },
                    id: {
                        value: "" + l,
                        enumerable: !0
                    },
                    rtl: {
                        value: -1 !== Rt.indexOf(u.substr(0, 2)),
                        enumerable: !0
                    }
                }), this.video = t, this.src = r, this._modeHasBeenSet = !1, It.set(this, "disabled")
            }
            return j(TelecineTextTrack, [{
                key: "dispatchEvent",
                value: function(e) {
                    this.fire(e, {
                        target: this
                    })
                }
            }, {
                key: "mode",
                get: function() {
                    return It.get(this)
                },
                set: function(e) {
                    if (-1 < Lt.indexOf(e)) {
                        if (this._modeHasBeenSet = !0, It.get(this) === e) return;
                        It.set(this, e), this.video.currentScanner && this.video.currentScanner.setModeForTrack(this, e), this.dispatchEvent("modechange")
                    }
                }
            }, {
                key: "src",
                get: function() {
                    return Mt.get(this)
                },
                set: function(e) {
                    Mt.set(this, e), this.video.fire(Ce.TEXT_SRC_UPDATE, this)
                }
            }, {
                key: "cues",
                get: function() {
                    return this.video.currentScanner ? this.video.currentScanner.getCuesForTrack(this) : []
                }
            }, {
                key: "activeCues",
                get: function() {
                    return this.video.currentScanner ? this.video.currentScanner.getActiveCuesForTrack(this) : []
                }
            }]), TelecineTextTrack
        }(),
        Dt = function() {
            function n(e, t) {
                q(this, n), this._cdms = e.cdms, this._lrToken = e.lr_token, this._userId = e.user, this._assetId = e.asset, this._useHls = t, this._licenseUrl = null, this._keySession = null, this._preferredKeySystem = null, this._encryptedEventName = null, this._boundGenerateRequest = this._generateRequest.bind(this)
            }
            return j(n, [{
                key: "init",
                value: function(e, t) {
                    var n = this;
                    return void 0 === t && (t = {}), this._video = e._video, this._scanner = e, this._canHandleEME() ? (this._licenseRequestMetadata = this._getLicenseRequestHeader(), this._getKeySystems(t).then(function(e) {
                        if (e.forEach(function(e) {
                                e.keySystem && (n._preferredKeySystem = e)
                            }), !n._preferredKeySystem) return n._scanner.fire(Ce.EME_UNSUPPORTED), !1;
                        var t = n._getCdmFromSystem(n._preferredKeySystem);
                        return n._encryptedEventName = "encrypted", n._licenseUrl = t.license_url, n._useHls && (n._certificateUrl = t.certificate_url, n._encryptedEventName = "webkitneedkey"), n._video.addEventListener(n._encryptedEventName, n._boundGenerateRequest), n._useHls ? n._video.webkitSetMediaKeys(n._preferredKeySystem.keySystem) : n._video.mediaKeys ? (n._keySession = n._video.mediaKeys.createSession(), n._keySession.addEventListener("message", function(e) {
                            return n._getLicense(e)
                        })) : (n._keySession = n._preferredKeySystem.keySystem.createSession(), n._keySession.addEventListener("message", function(e) {
                            return n._getLicense(e)
                        }), n._video.setMediaKeys(n._preferredKeySystem.keySystem)), !0
                    })) : (this._scanner.fire(Ce.EME_UNSUPPORTED), !1)
                }
            }, {
                key: "destroy",
                value: function() {
                    this._keySession && this._keySession.sessionId && this._keySession.close(), this._video.removeEventListener(this._encryptedEventName, this._boundGenerateRequest)
                }
            }, {
                key: "_generateRequest",
                value: function(n) {
                    var i = this;
                    return "com.apple.fps.1_0" === this._preferredKeySystem.name ? (this._loadFairPlayCertificate().then(function(e) {
                        i._contentId = "assetId=" + i._assetId;
                        var t = i._concatInitDataIdAndCertificate(n.initData, i._contentId, e);
                        return i._keySession = i._preferredKeySystem.keySystem.createSession("video/mp4", t), i._keySession.addEventListener("webkitkeymessage", function(e) {
                            return i._getLicense(e)
                        }, !1), e
                    }).catch(function(e) {
                        i._scanner.fire(e.error, e.payload)
                    }), !0) : !this._keySession.sessionId && !this._activeKeySession && (this._activeKeySession = this._keySession.generateRequest(n.initDataType, n.initData).catch(function() {
                        i._scanner.fire(Ce.DRM_FAILURE)
                    }), !0)
                }
            }, {
                key: "_getLicense",
                value: function(s) {
                    var u = this;
                    return new I(function(i, r) {
                        u._activeKeySession = null;
                        var o = new XMLHttpRequest;
                        o.keySession = s.target, o.responseType = "arraybuffer", o.open("POST", u._licenseUrl), o.setRequestHeader("dt-custom-data", window.btoa(JSON.stringify(u._licenseRequestMetadata)));
                        var e = s.message;
                        if ("com.microsoft.playready" === u._preferredKeySystem.name) {
                            var t = u._unpackPlayReadyRequest(s.message),
                                n = t[0];
                            Object.keys(n).forEach(function(e) {
                                o.setRequestHeader([e], n[e])
                            }), e = t[1]
                        }
                        if ("com.apple.fps.1_0" === u._preferredKeySystem.name) {
                            var a = btoa(String.fromCharCode.apply(null, e));
                            e = "spc=" + (a = encodeURIComponent(a)) + "&" + u._contentId, o.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
                        }
                        o.onload = function() {
                            if (403 !== o.status)
                                if (400 <= o.status) r({
                                    error: "drmfailure"
                                });
                                else try {
                                    u._scanner.fire(Ce.DRM_AUTH_SUCCESS);
                                    var e = new Uint8Array(o.response),
                                        t = e.buffer;
                                    "com.apple.fps.1_0" === u._preferredKeySystem.name && (t = u._unpackFairPlayLicenseResponse(btoa(String.fromCharCode.apply(null, e)))), o.keySession.update(t), i()
                                } catch (e) {
                                    r("Error updating key session: " + e)
                                } else {
                                    var n = JSON.parse(o.getResponseHeader("x-dt-error-message"));
                                    r({
                                        error: "drmauthfailure",
                                        payload: {
                                            text: n.error,
                                            code: n.error_code
                                        }
                                    })
                                }
                        }, o.onerror = r, o.send(e)
                    }).catch(function(e) {
                        u._scanner.fire(e.error, e.payload)
                    })
                }
            }, {
                key: "_canHandleEME",
                value: function() {
                    return !!(window.MediaKeys && window.navigator && window.navigator.requestMediaKeySystemAccess && window.MediaKeySystemAccess && window.MediaKeySystemAccess.prototype.getConfiguration || window.WebKitMediaKeys)
                }
            }, {
                key: "_concatInitDataIdAndCertificate",
                value: function(e, t, n) {
                    "string" == typeof t && (t = function(e) {
                        for (var t = new ArrayBuffer(2 * e.length), n = new Uint16Array(t), i = 0, r = e.length; i < r; i++) n[i] = e.charCodeAt(i);
                        return n
                    }(t));
                    var i = 0,
                        r = new ArrayBuffer(e.byteLength + 4 + t.byteLength + 4 + n.byteLength),
                        o = new DataView(r);
                    new Uint8Array(r, i, e.byteLength).set(e), i += e.byteLength, o.setUint32(i, t.byteLength, !0), i += 4;
                    var a = new Uint8Array(r, i, t.byteLength);
                    return a.set(t), i += a.byteLength, o.setUint32(i, n.byteLength, !0), i += 4, new Uint8Array(r, i, n.byteLength).set(n), new Uint8Array(r, 0, r.byteLength)
                }
            }, {
                key: "_loadFairPlayCertificate",
                value: function() {
                    var e = this;
                    return new I(function(t, n) {
                        var i = new XMLHttpRequest;
                        i.responseType = "arraybuffer", i.open("GET", e._certificateUrl), i.setRequestHeader("dt-custom-data", window.btoa(JSON.stringify(e._licenseRequestMetadata))), i.onload = function() {
                            if (403 !== i.status)
                                if (400 <= i.status) n({
                                    error: "drmfailure"
                                });
                                else try {
                                    t(new Uint8Array(i.response))
                                } catch (e) {
                                    n(e)
                                } else {
                                    var e = JSON.parse(i.getResponseHeader("x-dt-error-message"));
                                    n({
                                        error: "drmauthfailure",
                                        payload: {
                                            text: e.error,
                                            code: e.error_code
                                        }
                                    })
                                }
                        }, i.onerror = n, i.send()
                    })
                }
            }, {
                key: "_getCdmFromSystem",
                value: function(t) {
                    var n = this,
                        i = null;
                    return Object.keys(this._cdms).forEach(function(e) {
                        t.name === n._cdms[e].id && (i = n._cdms[e])
                    }), i
                }
            }, {
                key: "_unpackFairPlayLicenseResponse",
                value: function(e) {
                    var t = window.atob(e.trim());
                    return "<ckc>" === t.substr(0, 5) && "</ckc>" === t.substr(-6) && (t = t.slice(5, -6)), new Uint8Array(atob(t).split("").map(function(e) {
                        return e.charCodeAt(0)
                    }))
                }
            }, {
                key: "_unpackPlayReadyRequest",
                value: function(e) {
                    for (var t = String.fromCharCode.apply(null, new Uint16Array(e)), n = (new DOMParser).parseFromString(t, "application/xml"), i = {}, r = n.getElementsByTagName("HttpHeader"), o = 0; o < r.length; ++o) {
                        var a = r[o].querySelector("name"),
                            s = r[o].querySelector("value");
                        i[a.textContent] = s.textContent
                    }
                    var u = n.querySelector("Challenge");
                    return [i, e = new Uint8Array(atob(u.textContent).split("").map(function(e) {
                        return e.charCodeAt(0)
                    }))]
                }
            }, {
                key: "_getLicenseRequestHeader",
                value: function() {
                    var e = {},
                        t = window.screen.availWidth + "x" + window.screen.availHeight,
                        n = window.devicePixelRatio;
                    return e.merchant = "vimeo", e.sessionId = JSON.stringify({
                        ua: navigator.userAgent,
                        token: this._lrToken,
                        resolution: t,
                        pixelRatio: n
                    }), e.userId = this._userId, e
                }
            }, {
                key: "_getKeySystems",
                value: function(e) {
                    var i = this,
                        t = e.audio || [],
                        n = e.video || [],
                        r = {
                            persistentState: "optional",
                            sessionTypes: ["temporary"]
                        };
                    n.length && (r.videoCapabilities = n.map(function(e) {
                        return {
                            contentType: e
                        }
                    })), t.length && (r.audioCapabilities = t.map(function(e) {
                        return {
                            contentType: e
                        }
                    }));
                    var o = Object.keys(this._cdms).map(function(e) {
                        var t = i._cdms[e].id;
                        if (i._useHls) {
                            var n = null;
                            try {
                                n = new window.WebKitMediaKeys(t)
                            } catch (e) {}
                            return I.resolve({
                                name: t,
                                keySystem: n
                            })
                        }
                        return navigator.requestMediaKeySystemAccess(t, [r, {}]).then(function(e) {
                            return e.createMediaKeys()
                        }).catch(function(e) {}).then(function(e) {
                            return {
                                name: t,
                                keySystem: e
                            }
                        })
                    });
                    return I.all(o)
                }
            }]), n
        }(),
        Nt = new Ae,
        TelecineVideo = function() {
            function TelecineVideo(e) {
                var t = this,
                    n = e.files,
                    i = e.id,
                    r = void 0 === i ? Ne() : i,
                    o = e.title,
                    a = void 0 === o ? null : o,
                    s = e.subtitle,
                    u = void 0 === s ? null : s,
                    c = e.metadata,
                    l = void 0 === c ? {} : c,
                    d = e.textTracks,
                    f = void 0 === d ? De() : d,
                    h = e.externalDisplayFiles,
                    v = void 0 === h ? {} : h;
                if (q(this, TelecineVideo), !n || !Array.isArray(n)) throw new TypeError("Must provide files for the video.");
                ee(this);
                var p = function(e) {
                        return void 0 === e && (e = []), e.getFileById = Me, e
                    }(n.map(function(e) {
                        return e instanceof TelecineFile ? (e.video = t, e) : new TelecineFile(e, t)
                    })),
                    m = De(f.map(function(e) {
                        return e instanceof TelecineTextTrack ? (e.video = t, e) : new TelecineTextTrack(e, t)
                    }));
                Object.keys(v).forEach(function(e) {
                    !v[e] || v[e] instanceof TelecineFile || (v[e] = new TelecineFile(v[e], t))
                }), Object.defineProperties(this, {
                    id: {
                        value: "" + r,
                        enumerable: !0
                    },
                    title: {
                        value: a,
                        enumerable: !0
                    },
                    subtitle: {
                        value: u,
                        enumerable: !0
                    },
                    metadata: {
                        value: l,
                        enumerable: !0
                    },
                    files: {
                        value: p,
                        enumerable: !0
                    },
                    textTracks: {
                        value: m,
                        enumerable: !0
                    },
                    externalDisplayFiles: {
                        value: v,
                        enumerable: !0
                    }
                }), l.drm && (this._drmHandler = new Dt(l.drm, l.useHls))
            }
            return j(TelecineVideo, [{
                key: "deactivate",
                value: function() {
                    var t = this;
                    this._drmHandler && this._drmHandler.destroy(), this.textTracks.forEach(function(e) {
                        return t.currentScanner.removeTextTrack(e)
                    })
                }
            }, {
                key: "drmHandler",
                get: function() {
                    return this._drmHandler || null
                }
            }, {
                key: "currentFile",
                get: function() {
                    return this.currentScanner.currentFile
                },
                set: function(e) {
                    this.currentScanner.currentFile = e
                }
            }, {
                key: "currentScanner",
                get: function() {
                    return Nt.get(this)
                },
                set: function(t) {
                    var n = this;
                    this.currentScanner && this.currentScanner.constructor.supportsTextTracks && this.textTracks.forEach(function(e) {
                        return n.currentScanner.removeTextTrack(e)
                    }), t.constructor.supportsTextTracks && this.textTracks.forEach(function(e) {
                        return t.addTextTrack(e)
                    }), Nt.set(this, t)
                }
            }]), TelecineVideo
        }(),
        Ft = "pending",
        Bt = "started",
        qt = "ended",
        Ut = "started",
        jt = function() {
            function t(e) {
                q(this, t), ee(this), this.liveEvent = e, this._forcedPoll = !1, this._setupPolling()
            }
            return j(t, [{
                key: "forcePolling",
                value: function() {
                    this.isForcePolling || (this._forcedPoll = !0, this._setupPolling())
                }
            }, {
                key: "unforcePolling",
                value: function() {
                    this._forcedPoll = !1
                }
            }, {
                key: "_setupPolling",
                value: function() {
                    this._shouldPollApp() ? this._pollApp() : this._shouldPoll() && this._pollLiveApi()
                }
            }, {
                key: "_shouldPoll",
                value: function() {
                    return (this.liveEvent.status !== qt || !this.liveEvent.archive || this.liveEvent.archive.status === Ut) && (!!this.isForcePolling || this.liveEvent.status !== Bt)
                }
            }, {
                key: "_shouldPollApp",
                value: function() {
                    return !this.liveEvent.sessionUrl || this.liveEvent.status === Ft && null === this.liveEvent.id
                }
            }, {
                key: "_request",
                value: function(r) {
                    return new I(function(t, n) {
                        var i = new XMLHttpRequest;
                        i.open("GET", r, !0), i.onload = function() {
                            if (200 !== i.status) return n(i.status);
                            try {
                                var e = JSON.parse(i.response);
                                return t(e)
                            } catch (e) {
                                return n(new Error("Failed to parse request response: " + r + " " + e))
                            }
                        }, i.onerror = function() {
                            return n(new Error("Request error: " + r))
                        }, i.send()
                    })
                }
            }, {
                key: "_getSessionUrl",
                value: function() {
                    var n = this;
                    return new I(function(t, e) {
                        n._request(n.liveEvent.sessionRefreshUrl).then(function(e) {
                            n.liveEvent.sessionUrl = e.url, t(e.url)
                        }).catch(e)
                    })
                }
            }, {
                key: "_pollLiveApi",
                value: function(t) {
                    var i = this;
                    if (void 0 === t && (t = 0), !(3 < t)) return this._request(this.liveEvent.sessionUrl).then(function(e) {
                        if (e.status !== i.liveEvent.status) {
                            var t = "liveevent" + e.status;
                            try {
                                i.fire(t, e)
                            } catch (e) {}
                        }
                        if (e.archive && (!i.liveEvent.archive || e.archive.status !== i.liveEvent.archive.status)) {
                            var n = "livearchive" + e.archive.status;
                            i.fire(n, e)
                        }
                        i.liveEvent = H(i.liveEvent, e), i._shouldPoll() && setTimeout(i._pollLiveApi.bind(i), 5e3)
                    }).catch(function(e) {
                        if ("number" == typeof e && 410 === e) return i._getSessionUrl.then(function() {
                            setTimeout(i._pollLiveApi.bind(i, ++t), 5e3)
                        })
                    })
                }
            }, {
                key: "_pollApp",
                value: function() {
                    var t = this;
                    return this._request(this.liveEvent.appPollUrl).then(function(e) {
                        return null !== e.ingest.session_id ? (t.liveEvent.id = e.ingest.session_id, t._getSessionUrl().then(t._pollLiveApi.bind(t))) : setTimeout(t._pollApp.bind(t), 5e3)
                    })
                }
            }, {
                key: "isForcePolling",
                get: function() {
                    return this._forcedPoll
                }
            }]), t
        }(),
        Vt = function() {
            function i(e, t, n) {
                void 0 === n && (n = {}), q(this, i), this._element = e, this._scanners = t, this._options = n, this._video = null, this._textTracks = De(), this._properties = {}, this._currentScanner = new ze, this._blacklistedScanners = [], this._activeEffects = [], this._options.liveEvent && this.initLiveEvent(this._options.liveEvent), ee(this)
            }
            return j(i, [{
                key: "supportsEffect",
                value: function(e) {
                    var t = this;
                    return !!e.supported && e.supportedScanners.some(function(e) {
                        return t._getScannerName(t._currentScanner) === e.displayName
                    })
                }
            }, {
                key: "getEffectByName",
                value: function(t) {
                    var n = this,
                        i = null;
                    return this._activeEffects.forEach(function(e) {
                        t === n._getEffectName(e) && (i = e)
                    }), i
                }
            }, {
                key: "activateEffect",
                value: function(e, t) {
                    var n = new e(this, t);
                    return n.activate(), this._activeEffects.push(n), n
                }
            }, {
                key: "deactivateEffect",
                value: function(n) {
                    var i = this;
                    this._activeEffects.some(function(e, t) {
                        return e.constructor === n && (e.deactivate(), i._activeEffects.splice(t, 1), !0)
                    })
                }
            }, {
                key: "deactivateEffects",
                value: function() {
                    var t = this;
                    this._activeEffects.forEach(function(e) {
                        return t.deactivateEffect(e.constructor)
                    })
                }
            }, {
                key: "play",
                value: function() {
                    if (!this._video || this._video.files.length < 1) throw new TelecineError("NoFiles", "There are no files to play.");
                    var e = this._currentScanner.play();
                    return this._properties.paused = !1, e
                }
            }, {
                key: "pause",
                value: function() {
                    if (!this._video || this._video.files.length < 1) throw new TelecineError("NoFiles", "There are no files to play.");
                    return this._currentScanner.pause(), this._properties.paused = !0, this
                }
            }, {
                key: "getBitrateAtTime",
                value: function(e, t) {
                    return void 0 === t && (t = "video"), "MediaSourceScanner" !== this._getScannerName(this._currentScanner) && "LiveScanner" !== this._getScannerName(this._currentScanner) ? 0 : "audio" === t && this._currentScanner._streams[t].length <= 1 ? 0 : this._currentScanner.getBitrateAtTime(e, t)
                }
            }, {
                key: "showExternalDisplayPicker",
                value: function(e) {
                    return this._currentScanner.showExternalDisplayPicker(e)
                }
            }, {
                key: "supportsPresentationMode",
                value: function(e) {
                    return -1 !== this.supportedPresentationModes.indexOf(e)
                }
            }, {
                key: "addCuePoint",
                value: function(e, t) {
                    return this._currentScanner.addCuePoint(e, t)
                }
            }, {
                key: "removeCuePoint",
                value: function(e) {
                    return this._currentScanner.removeCuePoint(e)
                }
            }, {
                key: "removeAllCuePoints",
                value: function() {
                    return this._currentScanner.removeAllCuePoints()
                }
            }, {
                key: "_findScanner",
                value: function(e) {
                    var t = (void 0 === e ? {} : e).textTrackSupport,
                        n = void 0 !== t && t,
                        i = this._video.files.map(function(e) {
                            return e.mime
                        }),
                        r = this._scanners,
                        o = Array.isArray(r),
                        a = 0;
                    for (r = o ? r : r[Kn.iterator]();;) {
                        var s;
                        if (o) {
                            if (a >= r.length) break;
                            s = r[a++]
                        } else {
                            if ((a = r.next()).done) break;
                            s = a.value
                        }
                        var u = s;
                        if (u.supported)
                            if (!n || u.supportsTextTracks)
                                if (-1 === this._blacklistedScanners.indexOf(this._getScannerName(u)))
                                    if (u.supportedVideoTypes.some(function(e) {
                                            return -1 !== i.indexOf(e)
                                        })) return u
                    }
                    return n ? (this.fire(Pe.ERROR, new TelecineError("TextTracksNotSupported", "None of the scanners support text tracks in this browser.")), this._blacklistedScanners = [], this._findScanner()) : null
                }
            }, {
                key: "_initScanner",
                value: function(e, t) {
                    var n = this;
                    if (this._currentScanner.constructor !== e || this._currentScanner.video !== t) {
                        this._currentScanner.deactivate();
                        var i = new e(this._element, this._options);
                        Object.keys(ae).forEach(function(e) {
                            var t = ae[e];
                            i.on(t, function(e) {
                                return n._handleEvent(t, e, i)
                            })
                        }), this._currentScanner = i, t.currentScanner = i, this._currentScanner.video = t;
                        for (var r = Object.keys(this._properties), o = 0; o < r.length; o++) {
                            var a = r[o];
                            "paused" !== a ? "currentTime" !== a && (this._currentScanner[a] = this._properties[a]) : !1 === this._properties.paused && this._currentScanner.play()
                        }
                        this.fire(Ce.SCANNER_CHANGE, this._getScannerName(this._currentScanner))
                    }
                }
            }, {
                key: "_updateScanner",
                value: function() {
                    if (null !== this._video) {
                        var e = this._findScanner({
                            textTrackSupport: 0 < this._video.textTracks.length
                        });
                        e ? this._initScanner(e, this._video) : this.fire(Pe.ERROR, new TelecineError("FilesNotPlayable", "None of the files could be played in this browser."))
                    }
                }
            }, {
                key: "_handleEvent",
                value: function(t, e, n) {
                    if (n === this._currentScanner) {
                        switch (t) {
                            case Pe.ERROR:
                                return void(e instanceof TelecineError && this.fire(Pe.ERROR, e));
                            case Ce.SCANNER_ERROR:
                                this.fire(Pe.ERROR, new TelecineError("ScannerError", "The current scanner can no longer be used because " + e.reason)), this._blacklistedScanners.push(this._getScannerName(this._currentScanner)), this._updateScanner([]);
                                break;
                            case Ce.FILE_ERROR:
                                this.fire(Pe.ERROR, new TelecineError("FileError", "The current file can no longer be used because " + e.reason)), this._currentScanner._switchToNextFile();
                                break;
                            case Ce.DOWNLOAD_ERROR:
                                this.fire(Pe.ERROR, new TelecineError("DownloadError", e)), this._currentScanner._switchToNextFile();
                                break;
                            case Ce.EME_UNSUPPORTED:
                                this.fire(Pe.ERROR, new TelecineError("DRMFailure", {
                                    text: null,
                                    code: "emeunsupported"
                                }));
                                break;
                            case Ce.DRM_FAILURE:
                                this.fire(Pe.ERROR, new TelecineError("DRMFailure", {
                                    text: null,
                                    code: null
                                }));
                                break;
                            case Ce.DRM_AUTH_FAILURE:
                                this.fire(Pe.ERROR, new TelecineError("DRMFailure", {
                                    text: e.text,
                                    code: e.code
                                }));
                                break;
                            case Ce.DRM_AUTH_SUCCESS:
                                this.fire(Ce.DRM_AUTH_SUCCESS);
                                break;
                            case Pe.TIME_UPDATE:
                                this._properties.currentTime = this._currentScanner.currentTime;
                                break;
                            case Ce.MEDIA_URL_EXPIRED:
                                this.fire(Pe.ERROR, new TelecineError("MediaUrlExpired", e));
                                break;
                            case re.SPATIAL_UNSUPPORTED:
                                this.getEffectByName("ThreeSixtyEffect").deactivate();
                                break;
                            case Pe.ENDED:
                                this._properties.paused = !0;
                                break;
                            case Pe.WAITING:
                                this.fire(Pe.WAITING)
                        }
                        this._activeEffects.forEach(function(e) {
                            "function" == typeof e["on" + t] && e["on" + t]()
                        }), this.fire(t, e)
                    }
                }
            }, {
                key: "_getScannerName",
                value: function(e) {
                    return e instanceof ze ? e.constructor.displayName : e.prototype.constructor.displayName
                }
            }, {
                key: "_getEffectName",
                value: function(e) {
                    return e instanceof Pt ? e.constructor.displayName : e.prototype.constructor.displayName
                }
            }, {
                key: "initLiveEvent",
                value: function(e) {
                    var n = this;
                    this._options.livePoller && (this._options.livePoller = null);
                    var i = new jt(e);
                    Object.keys(xe).forEach(function(e) {
                        var t = xe[e];
                        i.on(t, function(e) {
                            n.fire(t, e)
                        })
                    }), this._options.livePoller = i
                }
            }, {
                key: "supportsSettingVolume",
                get: function() {
                    return this._scanners.some(function(e) {
                        return e.supported && e.supportsSettingVolume
                    })
                }
            }, {
                key: "supportsPlaybackRate",
                get: function() {
                    return this._currentScanner.constructor.supportsPlaybackRate
                }
            }, {
                key: "supportsTextTracks",
                get: function() {
                    return this._scanners.some(function(e) {
                        return e.supported && e.supportsTextTracks
                    })
                }
            }, {
                key: "activeEffects",
                get: function() {
                    return this._activeEffects
                }
            }, {
                key: "isLowerProfileAvailable",
                get: function() {
                    return this._currentScanner.isLowerProfileAvailable
                }
            }, {
                key: "buffered",
                get: function() {
                    return this._currentScanner.buffered
                }
            }, {
                key: "manifestLoadDurations",
                get: function() {
                    return this._currentScanner.manifestLoadDurations ? this._currentScanner.manifestLoadDurations : []
                }
            }, {
                key: "successfulSegments",
                get: function() {
                    return this._currentScanner.successfulSegments ? this._currentScanner.successfulSegments : []
                }
            }, {
                key: "failedSegments",
                get: function() {
                    return this._currentScanner.failedSegments ? this._currentScanner.failedSegments : []
                }
            }, {
                key: "cuePoints",
                get: function() {
                    return this._currentScanner.cuePoints
                }
            }, {
                key: "currentFile",
                get: function() {
                    return this._currentScanner.currentFile
                },
                set: function(t) {
                    if ("string" == typeof t && (t = this._files.filter(function(e) {
                            return e.id === t
                        })[0]), !t) throw new TelecineError("FileNotValid", "The file is not valid.");
                    this._currentScanner.currentFile = t
                }
            }, {
                key: "currentScanner",
                get: function() {
                    return this._getScannerName(this._currentScanner)
                }
            }, {
                key: "currentTime",
                get: function() {
                    return this._currentScanner.currentTime
                },
                set: function(e) {
                    this._properties.currentTime = e, this._currentScanner.currentTime = e
                }
            }, {
                key: "duration",
                get: function() {
                    return this._currentScanner.duration
                }
            }, {
                key: "ended",
                get: function() {
                    return this._currentScanner.ended
                }
            }, {
                key: "externalDisplayAvailable",
                get: function() {
                    return this._currentScanner.externalDisplayAvailable
                }
            }, {
                key: "externalDisplayActive",
                get: function() {
                    return this._currentScanner.externalDisplayActive
                }
            }, {
                key: "loop",
                get: function() {
                    return this._currentScanner.loop
                },
                set: function(e) {
                    this._properties.loop = e, this._currentScanner.loop = e
                }
            }, {
                key: "muted",
                get: function() {
                    return this._currentScanner.muted
                },
                set: function(e) {
                    this._properties.muted = !!e, this._currentScanner.muted = !!e
                }
            }, {
                key: "playsinline",
                get: function() {
                    return this._currentScanner.playsinline
                },
                set: function(e) {
                    this._properties.playsinline = !!e, this._currentScanner.playsinline = !!e
                }
            }, {
                key: "paused",
                get: function() {
                    return this._currentScanner.paused
                }
            }, {
                key: "defaultPlaybackRate",
                get: function() {
                    return this._currentScanner.defaultPlaybackRate
                },
                set: function(e) {
                    this._properties.defaultPlaybackRate = e, this._currentScanner.defaultPlaybackRate = e
                }
            }, {
                key: "playbackRate",
                get: function() {
                    return this._currentScanner.playbackRate
                },
                set: function(e) {
                    this._properties.playbackRate = e, this._currentScanner.playbackRate = e
                }
            }, {
                key: "preload",
                get: function() {
                    return this._currentScanner.preload
                },
                set: function(e) {
                    this._properties.preload = e, this._currentScanner.preload = e
                }
            }, {
                key: "presentationMode",
                get: function() {
                    return this._currentScanner.presentationMode
                },
                set: function(e) {
                    this._currentScanner.presentationMode = e
                }
            }, {
                key: "supportedPresentationModes",
                get: function() {
                    return this._currentScanner.supportedPresentationModes
                }
            }, {
                key: "video",
                get: function() {
                    return this._video
                },
                set: function(e) {
                    this._video && this._video.deactivate(), this._blacklistedScanners = [], this._video = new TelecineVideo(e), this._updateScanner()
                }
            }, {
                key: "videoWidth",
                get: function() {
                    return this._currentScanner.videoWidth
                }
            }, {
                key: "videoHeight",
                get: function() {
                    return this._currentScanner.videoHeight
                }
            }, {
                key: "volume",
                get: function() {
                    return this._currentScanner.volume
                },
                set: function(e) {
                    if (e < 0 || 1 < e) throw new TelecineError("IndexSizeError", "Failed to set the 'volume' property: The volume provided (" + e + ") is outside of the range [0, 1].");
                    this._properties.volume = e, this._currentScanner.volume = e
                }
            }]), i
        }(),
        Ht = 500,
        Wt = function(e) {
            function i(e, t) {
                var n;
                return void 0 === t && (t = {}), q(this, i), (n = K(this, z(i).call(this, e, t)))._activated = !1, n._camera = null, n._scene = null, n._renderer = null, n._animationFrame = null, n.isUserInteracting = !1, n._onMouseDownMouseX = 0, n._onMouseDownMouseY = 0, n._coordinates = {
                    lat: 0,
                    long: 0
                }, n._previousCoordinates = {
                    lat: 0,
                    long: 0
                }, n._onMouseDownCoordinates = {
                    lat: 0,
                    long: 0
                }, n._phi = 0, n._theta = 0, n._distance = Ht, n._video = n._telecine._currentScanner._video, n._rotation = 0, n._gyroVector = {
                    x: 0,
                    y: 0
                }, n._offset = {
                    lat: 0,
                    long: 0
                }, n._writeSpeeds = {
                    videoFps: n._options.fps,
                    motionRenderSpeed: 60
                }, n._maxTimeBetweenWrites = 1e3 / n._writeSpeeds.videoFps, n._motionTimeouts = [], n._movingAutomatically = !1, n._deviceMotionHasOccurred = !1, n._updateFromGyroscopePending = !1, n._keysPressed = {
                    up: !1,
                    down: !1,
                    left: !1,
                    right: !1
                }, n
            }
            return W(i, Pt), j(i, [{
                key: "isUserInteracting",
                set: function(e) {
                    e !== this._isUserInteracting && ((this._isUserInteracting = e) ? this._options.isMobile || this._telecine.fire(re.MOTION_START) : this._options.isMobile || this._telecine.fire(re.MOTION_END))
                },
                get: function() {
                    return this._isUserInteracting
                }
            }], [{
                key: "displayName",
                get: function() {
                    return "ThreeSixtyEffect"
                }
            }, {
                key: "supported",
                get: function() {
                    return !0
                }
            }, {
                key: "supportedScanners",
                get: function() {
                    return [Ze, mt]
                }
            }]), j(i, [{
                key: "activate",
                value: function() {
                    var i = this;
                    return new I(function(e, t) {
                        if (window.THREE) e();
                        else {
                            var n = document.createElement("script");
                            n.src = i._options.threeUrl, document.body.appendChild(n), n.onload = function() {
                                e()
                            }
                        }
                    }).then(function() {
                        return i._initialize()
                    })
                }
            }, {
                key: "_initialize",
                value: function() {
                    this._activated = !0, this._camera = new THREE.PerspectiveCamera(this._options.fieldOfView, this._video.clientWidth / this._video.clientHeight, 1, 1e3), this._camera.target = new THREE.Vector3(0, 0, 0), this._initializeAutoMovement(this._options.directorTimeline), this._scene = new THREE.Scene;
                    var e = new THREE.SphereBufferGeometry(Ht, 120, 80);
                    e.scale(-1, 1, 1), this._texture = new THREE.VideoTexture(this._video), this._texture.minFilter = THREE.LinearFilter, this._texture.format = THREE.RGBFormat, "top-bottom" === this._options.stereoMode && (this._texture.offset.y = .5, this._texture.repeat.set(1, .5)), "left-right" === this._options.stereoMode && (this._texture.offset.x = .5, this._texture.repeat.set(.5, 1));
                    var t = new THREE.MeshBasicMaterial({
                            map: this._texture
                        }),
                        n = new THREE.Mesh(e, t);
                    this._scene.add(n);
                    try {
                        this._renderer = new THREE.WebGLRenderer
                    } catch (e) {
                        return void this._telecine._currentScanner.fire(re.SPATIAL_UNSUPPORTED)
                    }
                    this._renderer.setPixelRatio(window.devicePixelRatio), this._output = document.createElement("div"), this._output.appendChild(this._renderer.domElement), this._element.appendChild(this._output), this._hideOutput(), this._telecine._currentScanner._video.setAttribute("crossorigin", "anonymous"), this._startRendering(), this._telecine._currentScanner.paused || this._showOutput()
                }
            }, {
                key: "onplay",
                value: function() {
                    this._activated && (this._showOutput(), this.adjustRenderSize())
                }
            }, {
                key: "deactivate",
                value: function() {
                    this._output && this._element.removeChild(this._output), this._stopRendering(), this._activated = !1
                }
            }, {
                key: "snapToCenter",
                value: function() {
                    var t = this;
                    this._motionTimeouts.forEach(function(e) {
                        return clearTimeout(e)
                    });
                    for (var n = ((180 <= this._coordinates.long ? 360 : 0) - this._coordinates.long) / 11, i = (0 - this._coordinates.lat) / 11, e = function(e) {
                            t._motionTimeouts.push(setTimeout(function() {
                                0 === e && (t._movingAutomatically = !0, t._options.isMobile || (t._maxTimeBetweenWrites = 1e3 / t._writeSpeeds.motionRenderSpeed)), 49 === e && (t._movingAutomatically = !1, t._options.isMobile || (t._maxTimeBetweenWrites = 1e3 / t._writeSpeeds.videoFps)), t._updateViewpoint(t._coordinates.lat + i / Math.pow(1.1, e), t._coordinates.long + n / Math.pow(1.1, e)), t._offset.lat = THREE.Math.radToDeg(t._gyroVector.x) + t._coordinates.lat + i / Math.pow(1.1, e), t._offset.long = THREE.Math.radToDeg(t._gyroVector.y) + t._coordinates.long + i / Math.pow(1.1, e)
                            }, e * t._maxTimeBetweenWrites))
                        }, r = this._rotation = 0; r < 50; r++) e(r)
                }
            }, {
                key: "activateStereoRendering",
                value: function() {
                    this._stereo || (this._stereo = new THREE.StereoCamera, this._stereo.aspect = .5, this._renderer.setSize(this._video.clientWidth, this._video.clientHeight), this.adjustRenderSize(), "mono" !== this._options.stereoMode && this._buildStereoAssets(), this._renderStereoScene())
                }
            }, {
                key: "deactivateStereoRendering",
                value: function() {
                    this._renderer.render(this._scene, this._camera), this._stereo = null, this.adjustRenderSize(), this._update()
                }
            }, {
                key: "toggleStereoRendering",
                value: function() {
                    this._stereo ? this.deactivateStereo() : this.activateStereo()
                }
            }, {
                key: "isStereo",
                value: function() {
                    return !!this._stereo
                }
            }, {
                key: "_buildStereoAssets",
                value: function() {
                    for (var e in this._stereoAssets = {
                            left: {
                                scene: new THREE.Scene,
                                geometry: new THREE.SphereBufferGeometry(Ht, 120, 80),
                                texture: new THREE.VideoTexture(this._video)
                            },
                            right: {
                                scene: new THREE.Scene,
                                geometry: new THREE.SphereBufferGeometry(Ht, 120, 80),
                                texture: new THREE.VideoTexture(this._video)
                            }
                        }, this._stereoAssets) this._stereoAssets[e].texture.minFilter = THREE.LinearFilter, this._stereoAssets[e].texture.format = THREE.RGBFormat, this._stereoAssets[e].texture.offset.y = .5, this._stereoAssets[e].texture.repeat.set(1, .5), this._stereoAssets[e].material = new THREE.MeshBasicMaterial({
                        map: this._stereoAssets[e].texture
                    }), this._stereoAssets[e].mesh = new THREE.Mesh(this._stereoAssets[e].geometry, this._stereoAssets[e].material), this._stereoAssets[e].geometry.scale(-1, 1, 1), this._stereoAssets[e].scene.add(this._stereoAssets[e].mesh)
                }
            }, {
                key: "_initializeAutoMovement",
                value: function(e) {
                    e && e[0] && void 0 !== e[0].p && "undefined" !== e[0].y && this._updateViewpoint(e[0].p, e[0].y)
                }
            }, {
                key: "_renderStereoScene",
                value: function() {
                    this._scene.updateMatrixWorld(), null === this._camera.parent && this._camera.updateMatrixWorld(), this._stereo.update(this._camera);
                    var e = this._renderer.getSize();
                    this._renderer.autoClear && this._renderer.clear(), this._renderer.setScissorTest(!0);
                    var t = this._stereoAssets ? {
                        right: this._stereoAssets.right.scene,
                        left: this._stereoAssets.left.scene
                    } : {
                        right: this._scene,
                        left: this._scene
                    };
                    this._renderer.setScissor(0, 0, e.width / 2, e.height), this._renderer.setViewport(0, 0, e.width / 2, e.height), this._renderer.render(t.right, this._stereo.cameraR), this._renderer.setScissor(e.width / 2, 0, e.width / 2, e.height), this._renderer.setViewport(e.width / 2, 0, e.width / 2, e.height), this._renderer.render(t.left, this._stereo.cameraL), this._renderer.setScissorTest(!1)
                }
            }, {
                key: "_updateViewpoint",
                value: function(e, t) {
                    this._previousCoordinates.long = this._coordinates.long, this._previousCoordinates.lat = this._coordinates.lat, e %= 360, this._coordinates.lat = Math.max(-85, Math.min(85, e)), t = 0 <= (t %= 360) ? t : 360 + t, this._coordinates.long = t
                }
            }, {
                key: "makeContact",
                value: function(e) {
                    this.isUserInteracting = !0, this._motionTimeouts.forEach(function(e) {
                        return clearTimeout(e)
                    }), this._movingAutomatically = !1, this._contactPoint = {
                        x: e.x,
                        y: e.y
                    }, this._onMouseDownCoordinates.long = this._coordinates.long, this._onMouseDownCoordinates.lat = this._coordinates.lat, this._motionStart = {
                        long: this._coordinates.long,
                        lat: this._coordinates.lat
                    }, this._options.isMobile || (this._maxTimeBetweenWrites = 1e3 / this._writeSpeeds.motionRenderSpeed)
                }
            }, {
                key: "move",
                value: function(e) {
                    this._offset.lat = THREE.Math.radToDeg(this._gyroVector.x) + this._previousCoordinates.lat, this._offset.long = THREE.Math.radToDeg(this._gyroVector.y) + this._previousCoordinates.long;
                    var t = this._motionStart.lat - .2 * (this._contactPoint.y - e.y),
                        n = .2 * (this._contactPoint.x - e.x) + this._motionStart.long;
                    this._updateViewpoint(t, n)
                }
            }, {
                key: "moveWheel",
                value: function(e) {
                    this._offset.lat = THREE.Math.radToDeg(this._gyroVector.x) + this._previousCoordinates.lat, this._offset.long = THREE.Math.radToDeg(this._gyroVector.y) + this._previousCoordinates.long;
                    var t = this._coordinates.lat - .1 * e.y,
                        n = this._coordinates.long + .1 * e.x;
                    this._updateViewpoint(t, n)
                }
            }, {
                key: "moveDevice",
                value: function(e, t, n, i) {
                    this._updateFromGyroscopePending = !0;
                    var r = new THREE.Quaternion,
                        o = window.orientation;
                    null === o && (o = this._video.clientWidth > this._video.clientHeight ? 90 : 0), e = e ? THREE.Math.degToRad(e) : 0, t = t ? THREE.Math.degToRad(t) : 0, n = n ? THREE.Math.degToRad(n) : 0;
                    var a = o ? THREE.Math.degToRad(o) : 0,
                        s = new THREE.Vector3(0, 0, 1),
                        u = new THREE.Euler,
                        c = new THREE.Quaternion,
                        l = new THREE.Quaternion(-Math.sqrt(.5), 0, 0, Math.sqrt(.5));
                    u.set(t, e, -n, "YXZ"), r.setFromEuler(u), r.multiply(l), r.multiply(c.setFromAxisAngle(s, -a)), this._gyroVector = (new THREE.Euler).setFromQuaternion(r, "YXZ"), this._rotation = this._gyroVector.z, this.isUserInteracting || this._movingAutomatically || this._updateViewpoint(THREE.Math.radToDeg(this._gyroVector.x) - this._offset.lat, -THREE.Math.radToDeg(this._gyroVector.y) + this._offset.long), this._deviceMotionHasOccurred || (this.snapToCenter(), this._telecine.fire(re.MOTION_START), this._deviceMotionHasOccurred = !0)
                }
            }, {
                key: "releaseContact",
                value: function(e) {
                    if (this._offset.lat = THREE.Math.radToDeg(this._gyroVector.x) - this._coordinates.lat, this._offset.long = THREE.Math.radToDeg(this._gyroVector.y) + this._coordinates.long, this.isUserInteracting = !1, this._motionStart && !e) {
                        var t = Math.hypot(this._coordinates.long - this._motionStart.long, this._coordinates.lat - this._motionStart.lat);
                        this._moveDueToMomentum(t)
                    }
                }
            }, {
                key: "abandonMotion",
                value: function() {
                    this.isUserInteracting = !1, this._motionStart = null
                }
            }, {
                key: "keyPress",
                value: function(e) {
                    this._keyIsDown() || (this.isUserInteracting = !0, this._motionTimeouts && this._motionTimeouts.forEach(function(e) {
                        return clearTimeout(e)
                    })), this._keysPressed[e] || (this._keysPressed[e] = !0)
                }
            }, {
                key: "keyUp",
                value: function(e) {
                    this._keysPressed[e] = !1, this._keyIsDown() || (this.isUserInteracting = !1, this._moveDueToMomentum(1 / 0))
                }
            }, {
                key: "_moveFromKeyPress",
                value: function() {
                    var t = this;
                    Object.keys(this._keysPressed).forEach(function(e) {
                        if (t._keysPressed[e]) switch (e) {
                            case "up":
                                t._updateViewpoint(t._coordinates.lat + 2, t._coordinates.long);
                                break;
                            case "down":
                                t._updateViewpoint(t._coordinates.lat - 2, t._coordinates.long);
                                break;
                            case "left":
                                t._updateViewpoint(t._coordinates.lat, t._coordinates.long - 2);
                                break;
                            case "right":
                                t._updateViewpoint(t._coordinates.lat, t._coordinates.long + 2)
                        }
                    })
                }
            }, {
                key: "_keyIsDown",
                value: function() {
                    var t = this;
                    return Object.keys(this._keysPressed).map(function(e) {
                        return t._keysPressed[e]
                    }).some(function(e) {
                        return e
                    })
                }
            }, {
                key: "_moveDueToMomentum",
                value: function(i) {
                    var r = this;
                    20 <= i && function() {
                        var n = {
                            long: r._coordinates.long - r._previousCoordinates.long,
                            lat: r._coordinates.lat - r._previousCoordinates.lat
                        };
                        i === 1 / 0 && (n.long /= 2, n.lat /= 2);
                        for (var e = function(t) {
                                r._motionTimeouts.push(setTimeout(function() {
                                    1 === t && (r._movingAutomatically = !0), 49 === t && (r._movingAutomatically = !1, r._maxTimeBetweenWrites = 1e3 / r._writeSpeeds.videoFps);
                                    var e = 2 / Math.pow(t, 1.5);
                                    r._offset.lat = THREE.Math.radToDeg(r._gyroVector.x) + r._coordinates.lat + n.lat, r._offset.long = THREE.Math.radToDeg(r._gyroVector.y) + r._coordinates.long + n.long, r._updateViewpoint(r._coordinates.lat + n.lat * e, r._coordinates.long + n.long * e)
                                }, t * r._maxTimeBetweenWrites))
                            }, t = 1; t < 50; t++) e(t)
                    }()
                }
            }, {
                key: "onseeked",
                value: function() {
                    this._activated && this._update()
                }
            }, {
                key: "onresize",
                value: function() {
                    this.adjustRenderSize(), this.isUserInteracting = !1
                }
            }, {
                key: "_update",
                value: function() {
                    this._phi = THREE.Math.degToRad(90 + this._coordinates.lat), this._theta = THREE.Math.degToRad(this._coordinates.long), this._camera.position.x = this._distance * Math.sin(this._phi) * Math.cos(this._theta), this._camera.position.y = this._distance * Math.cos(this._phi), this._camera.position.z = this._distance * Math.sin(this._phi) * Math.sin(this._theta), this._camera.lookAt(this._camera.target), this._camera.rotation.z += this._rotation, this._stereo ? this._renderStereoScene() : this._renderer.render(this._scene, this._camera), this._telecine.fire(re.CAMERA_UPDATE, {
                        lon: this._coordinates.long,
                        lat: this._coordinates.lat
                    })
                }
            }, {
                key: "adjustRenderSize",
                value: function() {
                    this._camera.aspect = Math.max(1 / 3, Math.min(3, this._video.clientWidth / this._video.clientHeight)), this._distance = Math.min(250, this._options.dimensions.width / this._options.dimensions.height / this._camera.aspect * Ht / 2);
                    var e = qe(this._video.clientWidth, this._video.clientHeight, this._camera.aspect, 1);
                    this._camera.aspect = e.width / e.height, this._camera.updateProjectionMatrix(), this._renderer.setSize(e.width, e.height), this._output.style.paddingTop = e.top + "px", this._renderer.render(this._scene, this._camera)
                }
            }, {
                key: "getRendererSize",
                value: function() {
                    return {
                        height: this._renderer.domElement.clientHeight,
                        width: this._renderer.domElement.clientWidth
                    }
                }
            }, {
                key: "_startRendering",
                value: function() {
                    var e = this;
                    this._interval && window.clearInterval(this._interval), this.adjustRenderSize();
                    this._interval = window.setInterval(function() {
                        e._renderFrame(), e._keyIsDown() && e._moveFromKeyPress()
                    }, 1e3 / 60)
                }
            }, {
                key: "_stopRendering",
                value: function() {
                    this._interval && (window.clearInterval(this._interval), this._interval = null), this._motionTimeouts && this._motionTimeouts.forEach(function(e) {
                        return clearTimeout(e)
                    })
                }
            }, {
                key: "_renderFrame",
                value: function() {
                    this._requestRenderAnimationFrame()
                }
            }, {
                key: "_requestRenderAnimationFrame",
                value: function() {
                    var e = this;
                    this._animationFrame && window.cancelAnimationFrame(this._animationFrame);
                    var t = this._movingAutomatically || this.isUserInteracting || this._updateFromGyroscopePending || this._keyIsDown();
                    this._animationFrame = window.requestAnimationFrame(function() {
                        (!e._telecine._currentScanner.paused && !e._telecine._currentScanner._ranIntoBuffer || t) && (e._update(), e._updateFromGyroscopePending = !1)
                    })
                }
            }, {
                key: "_showOutput",
                value: function() {
                    this._styleOutput({
                        backgroundColor: "#000",
                        display: "block"
                    })
                }
            }, {
                key: "_hideOutput",
                value: function() {
                    this._styleOutput({
                        backgroundColor: "#000",
                        display: "none"
                    })
                }
            }, {
                key: "_styleOutput",
                value: function(e) {
                    var t = void 0 === e ? {} : e,
                        n = t.backgroundColor,
                        i = t.display;
                    this._output.style.cssText = "position:absolute;left:0;top:0;margin-left:auto;margin-right:auto;padding:0;background:" + n + ";width:100%;height:100%;text-align:center;display:" + i
                }
            }, {
                key: "currentCoordinates",
                get: function() {
                    return this._coordinates
                },
                set: function(e) {
                    var t = e[0],
                        n = e[1];
                    if (90 < t || t < -90) throw new RangeError("Latitude should be a float between -90 and 90.");
                    if (n < 0 || 360 < n) throw new RangeError("Longitude should be a float between 0 and 360.");
                    this._updateViewpoint(t, n), this._update()
                }
            }, {
                key: "fieldOfView",
                get: function() {
                    return this._camera.fov
                },
                set: function(e) {
                    this._camera.fov = e, this._camera.updateProjectionMatrix(), this._renderer.render(this._scene, this._camera)
                }
            }], [{
                key: "frustumSurfaceArea",
                value: function(e, t, n) {
                    var i = 2e3 * Math.sin(Math.PI / 180 * (e / 2));
                    return i * (i * t / n) / (4 * Math.PI * Math.pow(Ht, 2))
                }
            }]), i
        }(),
        zt = "control-pause",
        Gt = "control-play",
        Yt = "control-seek",
        Kt = "control-reset",
        Xt = "control-change-quality",
        $t = "control-turn-captions-on",
        Jt = "control-turn-captions-off",
        Qt = "control-activate-picture-in-picture",
        Zt = "control-deactivate-picture-in-picture",
        en = "events-config-changed",
        tn = "events-telecine-ready",
        nn = "events-telecine-video-init",
        rn = "events-buffer-started",
        on = "events-buffer-ended",
        an = "events-ui-buffer-started",
        sn = "events-play-initiated",
        un = "events-quality-changed",
        cn = "events-forced-quality",
        ln = "events-cue-changed",
        dn = "events-captions-changed",
        fn = "events-spatial-playback-toggled",
        hn = "events-picture-in-picture-available",
        vn = "events-picture-in-picture-not-available",
        pn = "events-picture-in-picture-activated",
        mn = "events-picture-in-picture-deactivated",
        gn = Object.freeze({
            CONFIG_CHANGED: en,
            TELECINE_READY: tn,
            TELECINE_VIDEO_INIT: nn,
            BUFFER_STARTED: rn,
            BUFFER_ENDED: on,
            UI_BUFFER_STARTED: an,
            PLAY_INITIATED: sn,
            QUALITY_CHANGED: un,
            FORCED_QUALITY: cn,
            CUE_CHANGED: ln,
            CAPTIONS_CHANGED: dn,
            SPATIAL_PLAYBACK_TOGGLED: fn,
            PICTURE_IN_PICTURE_AVAILABLE: hn,
            PICTURE_IN_PICTURE_NOT_AVAILABLE: vn,
            PICTURE_IN_PICTURE_ACTIVATED: pn,
            PICTURE_IN_PICTURE_DEACTIVATED: mn
        }),
        yn = (function(t) {
            for (var e = 1; e < arguments.length; e++) {
                var n = null != arguments[e] ? arguments[e] : {},
                    i = Object.keys(n);
                "function" == typeof Object.getOwnPropertySymbols && (i = i.concat(Object.getOwnPropertySymbols(n).filter(function(e) {
                    return Object.getOwnPropertyDescriptor(n, e).enumerable
                }))), i.forEach(function(e) {
                    V(t, e, n[e])
                })
            }
        }({}, Pe, Ce, xe, re, ne, oe, gn), {
            h264: "video/mp4",
            hls: "application/vnd.apple.mpegurl",
            hlsLive: "application/x-mpegURL",
            dash: "application/vnd.vimeo.dash+json",
            dashMpd: "video/vnd.mpeg.dash.mpd",
            vp6: "video/x-flv",
            vp8: "video/webm",
            webm: "video/webm",
            hds: "application/f4m"
        }),
        _n = "pending",
        bn = "active",
        wn = "started",
        En = "ended",
        Sn = "done",
        kn = {
            low: .5,
            high: 2
        },
        Tn = function() {
            function t(e) {
                q(this, t), this.config = e
            }
            return j(t, [{
                key: "liveEvent",
                get: function() {
                    return this.config.video.live_event
                }
            }, {
                key: "exists",
                get: function() {
                    return this.liveEvent && null !== this.liveEvent
                }
            }, {
                key: "isPending",
                get: function() {
                    return this.exists && this.liveEvent.status === _n
                }
            }, {
                key: "isActive",
                get: function() {
                    return this.exists && this.liveEvent.status === bn
                }
            }, {
                key: "isStarted",
                get: function() {
                    return this.exists && this.liveEvent.status === wn
                }
            }, {
                key: "isEnded",
                get: function() {
                    return this.exists && this.liveEvent.status === En
                }
            }, {
                key: "inProgress",
                get: function() {
                    return this.exists && !this.isEnded
                }
            }, {
                key: "isArchived",
                get: function() {
                    return this.exists && this.liveEvent.archive && this.liveEvent.archive.status === Sn
                }
            }, {
                key: "dashUrl",
                get: function() {
                    return this.exists && this.liveEvent.playback ? this.liveEvent.playback.dash_noredirect : null
                }
            }, {
                key: "hlsUrl",
                get: function() {
                    return this.exists && this.liveEvent.playback ? this.liveEvent.playback.hls : null
                }
            }, {
                key: "scheduledStartTime",
                get: function() {
                    return this.exists && this.liveEvent.ingest ? this.liveEvent.ingest.scheduled_start_time : null
                }
            }]), t
        }();

    function An(e, t, n) {
        if (t < e) throw new Error("min must not be greater than max in clamp(min, max, value)");
        return n < e ? e : t < n ? t : n
    }

    function Pn(r, o, a, s) {
        var e = function(e) {
            for (var t = o.length, n = 0; n < t;) {
                if (r === o[n]) return a[n];
                n += 1
            }
            for (var i in o[n + 1] = r, a[n + 1] = e, r) e[i] = s ? Pn(r[i], o, a, !0) : r[i];
            return e
        };
        switch (function(e) {
            return null === e ? "Null" : void 0 === e ? "Undefined" : Object.prototype.toString.call(e).slice(8, -1)
        }(r)) {
            case "Object":
                return e({});
            case "Array":
                return e([]);
            case "Date":
                return new Date(r.valueOf());
            case "RegExp":
                return function(e) {
                    return new RegExp(e.source, (e.global ? "g" : "") + (e.ignoreCase ? "i" : "") + (e.multiline ? "m" : "") + (e.sticky ? "y" : "") + (e.unicode ? "u" : ""))
                }(r);
            default:
                return r
        }
    }

    function Cn(e) {
        return null != e && "function" == typeof e.clone ? e.clone() : Pn(e, [], [], !0)
    }

    function xn(e, l) {
        switch (e) {
            case 0:
                return function() {
                    return l.apply(this, arguments)
                };
            case 1:
                return function(e) {
                    return l.apply(this, arguments)
                };
            case 2:
                return function(e, t) {
                    return l.apply(this, arguments)
                };
            case 3:
                return function(e, t, n) {
                    return l.apply(this, arguments)
                };
            case 4:
                return function(e, t, n, i) {
                    return l.apply(this, arguments)
                };
            case 5:
                return function(e, t, n, i, r) {
                    return l.apply(this, arguments)
                };
            case 6:
                return function(e, t, n, i, r, o) {
                    return l.apply(this, arguments)
                };
            case 7:
                return function(e, t, n, i, r, o, a) {
                    return l.apply(this, arguments)
                };
            case 8:
                return function(e, t, n, i, r, o, a, s) {
                    return l.apply(this, arguments)
                };
            case 9:
                return function(e, t, n, i, r, o, a, s, u) {
                    return l.apply(this, arguments)
                };
            case 10:
                return function(e, t, n, i, r, o, a, s, u, c) {
                    return l.apply(this, arguments)
                };
            default:
                throw new Error("First argument to _arity must be a non-negative integer no greater than ten")
        }
    }

    function Ln(e) {
        return null != e && "object" === (void 0 === e ? "undefined" : M(e)) && !0 === e["@@functional/placeholder"]
    }

    function On(e) {
        for (var t = arguments.length, n = new Array(1 < t ? t - 1 : 0), i = 1; i < t; i++) n[i - 1] = arguments[i];
        return n.reduce(Rn, e)
    }

    function Rn(e, t) {
        return e === t ? e : Array.isArray(t) ? function(e, t) {
            void 0 === e && (e = []);
            if (Array.isArray(e))
                for (var n = 0; n < t.length; n++) e[n] = Rn(e[n], t[n]);
            return e
        }(e, t) : function(e) {
            if ("object" !== (void 0 === e ? "undefined" : M(e)) || null === e) return !1;
            for (var t = e; null !== Object.getPrototypeOf(t);) t = Object.getPrototypeOf(t);
            return Object.getPrototypeOf(e) === t
        }(t) ? function(e, t) {
            void 0 === e && (e = {});
            for (var n in t) e[n] = Rn(e[n], t[n]);
            return e
        }(e, t) : void 0 === e ? t : e
    }
    var In = Object.prototype.hasOwnProperty,
        Mn = Object.prototype.toString;

    function Dn(e) {
        if (null == e) return !0;
        if ("boolean" == typeof e) return !1;
        if ("number" == typeof e) return 0 === e;
        if ("string" == typeof e) return 0 === e.length;
        if ("function" == typeof e) return 0 === e.length;
        if (Array.isArray(e)) return 0 === e.length;
        if (e instanceof Error) return "" === e.message;
        if (e.toString == Mn) switch (e.toString()) {
            case "[object File]":
            case "[object Map]":
            case "[object Set]":
                return 0 === e.size;
            case "[object Object]":
                for (var t in e)
                    if (In.call(e, t)) return !1;
                return !0
        }
        return !1
    }
    var Nn = function(e) {
        var i = Math[e];
        return function(e, t) {
            if (t = null == t ? 0 : Math.min(t, 292)) {
                var n = (e + "e").split("e");
                return +((n = (i(n[0] + "e" + (+n[1] + t)) + "e").split("e"))[0] + "e" + (+n[1] - t))
            }
            return i(e)
        }
    }("round");
    ! function(e, t) {
        xn(e, function o(a, s, u) {
            return function() {
                for (var e = [], t = 0, n = a, i = 0; i < s.length || t < arguments.length;) {
                    var r;
                    i < s.length && (!Ln(s[i]) || t >= arguments.length) ? r = s[i] : (r = arguments[t], t += 1), Ln(e[i] = r) || (n -= 1), i += 1
                }
                return n <= 0 ? u.apply(this, e) : xn(n, o(a, e, u))
            }
        }(e, [], t))
    }(2, function(e, t) {
        return e(t), t
    });

    function Fn(t, e) {
        return e.find(function(e) {
            return e.id === parseInt(t, 10)
        })
    }

    function Bn(e) {
        return Nn(e, 3)
    }

    function qn(r) {
        return function(i) {
            for (var e = arguments.length, t = new Array(1 < e ? e - 1 : 0), n = 1; n < e; n++) t[n - 1] = arguments[n];
            return t.forEach(function(e) {
                for (var t in e) {
                    var n = Object.getOwnPropertyDescriptor(e, t);
                    Object.defineProperty(i, t, H(n, r))
                }
            }), i
        }
    }
    var Un = qn({
            enumerable: !1,
            configurable: !0,
            writeable: !1
        }),
        jn = qn({
            enumerable: !1,
            configurable: !1,
            writeable: !1
        }),
        Vn = qn({
            enumerable: !0,
            configurable: !0,
            writeable: !1
        });

    function Hn(e) {
        var n = this,
            t = {},
            i = {
                get attributes() {
                    return H({}, n)
                },
                get previousAttributes() {
                    return t
                },
                clear: function() {
                    r();
                    var e = n.attributes;
                    for (var t in e) delete n[t]
                },
                set: function(e) {
                    for (var t in r(), e) n[t] = e[t]
                },
                clone: function() {
                    return new Hn(n.attributes)
                },
                toJSON: function() {
                    return Cn(n.attributes)
                }
            };

        function r() {
            Dn(n.attributes) || (t = Cn(n.attributes))
        }
        return i.set(e), Un(n, i)
    }

    function Wn(e, t) {
        var n = new Hn(On(e, t)),
            i = n.set,
            r = new Tn(n),
            o = 0;

        function a(e) {
            return o += 1, i(e), On(n, t), n
        }
        return jn(n, {
            reset: function(e) {
                return n.clear(), a(e), n
            },
            set: a,
            isNewVideo: function() {
                var e = n.previousAttributes;
                return o < 2 || e.video.id !== n.video.id || e.video.version.current !== n.video.version.current
            },
            liveEvent: r
        })
    }

    function zn(e) {
        return e.quality || e.metadata.quality
    }

    function Gn(e) {
        var t = e.request.files,
            n = Yn(t.progressive, e.video.file_codecs),
            i = ei(e),
            r = function(e) {
                var t = e.files,
                    n = void 0 === t ? [] : t,
                    i = e.preference,
                    r = void 0 === i ? "360p" : i,
                    o = e.priorityOffset,
                    a = void 0 === o ? 0 : o;
                (n = ke(n)).sort(ni());
                var s = n.map(zn);
                if (r) {
                    -1 === s.indexOf(r) && (s.push(r), s.sort(function(e, t) {
                        return Zn(t) - Zn(e)
                    }));
                    var u = s.indexOf(r),
                        c = s.splice(0, u);
                    c.reverse(), s.push.apply(s, Z(c))
                }
                return n.map(function(e) {
                    return {
                        id: e.id,
                        src: e.url,
                        mime: e.mime,
                        priority: s.indexOf(e.quality) + 1 + a,
                        metadata: {
                            profile: e.profile,
                            cdn: e.cdn,
                            origin: e.origin,
                            quality: e.quality,
                            fps: e.fps
                        }
                    }
                })
            }({
                files: n,
                preference: e.request.cookie.quality || i || function(e) {
                    var t = Yn(e.request.files.progressive, e.video.file_codecs),
                        n = t.some(Qn);
                    ye.mobileAndroid && (n = !1);
                    var i = "720p";
                    if (n) {
                        var r = ke(t).map(zn); - 1 !== r.indexOf("1080p") && -1 === r.indexOf("720p") && (i = "1080p")
                    }
                    return e.request.cookie.hd || e.video.default_to_hd ? i : "360p"
                }(e),
                priorityOffset: 2
            }),
            o = e.request.drm && ye.browser.safari;
        return (t.hls && (ye.iPhone || ye.iPad) || o) && (r = r.concat(function(e) {
            var t = e.request.files,
                n = t.hls.default_cdn,
                i = Jn(e.video.file_codecs),
                r = t.hls.cdns[n].url;
            if (0 < i.length) {
                var o = /\/(((\d+),?)+)\/master\.m3u8/.exec(r);
                null !== o && (r = r.replace(o[1], i.join(",")))
            }
            return {
                id: "hls-" + n + "-" + e.video.id,
                src: r,
                mime: yn.hls,
                priority: 2,
                metadata: {
                    cdn: n,
                    origin: t.hls.cdns[n].origin,
                    quality: "sd"
                }
            }
        }(e))), t.dash && !o && (r = r.concat(function(i) {
            var r = i.request.files,
                o = Jn(i.video.file_codecs);
            return Object.keys(r.dash.cdns).map(function(e) {
                var t = r.dash.cdns[e].url;
                if (0 < o.length) {
                    var n = /\/(((\d+),?)+)\/master\.json/.exec(t);
                    null !== n && (t = t.replace(n[1], o.join(",")))
                }
                return {
                    id: "dash-" + e + "-" + i.video.id,
                    src: t,
                    mime: yn.dash,
                    priority: e === r.dash.default_cdn ? 1 : 2,
                    metadata: {
                        cdn: e,
                        origin: r.dash.cdns[e].origin,
                        quality: "sd"
                    }
                }
            })
        }(e))), r
    }

    function Yn(e, t) {
        void 0 === e && (e = []), void 0 === t && (t = {});
        var n = Jn(t);
        return ke(e).filter(Xn(n)).filter(function(e) {
            var t = ke(e).filter($n).map(zn);
            return function(e) {
                return !(-1 !== t.indexOf(zn(e)) && !$n(e))
            }
        }(e))
    }

    function Xn(n) {
        return function(e) {
            if (!n.length) return !0;
            var t = "number" != typeof e.id ? parseInt(e.id, 10) : e.id;
            return -1 !== n.indexOf(t)
        }
    }

    function $n(e) {
        var t = e.fps;
        return "metadata" in e && (t = e.metadata.fps), 30 < t
    }

    function Jn(e) {
        var t = [];
        return !Dn(e) && (0 < e.hevc.sdr.length || 0 < e.hevc.hdr.length) && (t = ye.hdr && 0 < e.hevc.hdr.length ? e.hevc.hdr : ye.hevc && 0 < e.hevc.sdr.length ? e.hevc.sdr : e.avc), t
    }

    function Qn(e) {
        return 720 <= Zn(e)
    }

    function Zn(e) {
        return "string" != typeof e && (e = zn(e)), parseInt(e, 10)
    }

    function ei(e) {
        var t = Yn(e.request.files.progressive, e.video.file_codecs).map(function(e) {
            return e.quality
        });
        return ti(e, e.embed.quality, t)
    }

    function ti(e, t, n) {
        return void 0 === n && (n = []), e.embed.on_site || ye.android || ye.iOS || ye.windowsPhone || e.video.vod || !t ? null : n.length && -1 === n.indexOf(t) ? null : t
    }

    function ni(a) {
        return void 0 === a && (a = "desc"),
            function(e, t) {
                var n = Zn(e),
                    i = ii(e),
                    r = Zn(t),
                    o = ii(t);
                return "asc" === a ? n - r || i - o : r - n || o - i
            }
    }

    function ii(e) {
        return "object" !== (void 0 === e ? "undefined" : M(e)) ? 0 : "fps" in e ? e.fps : "metadata" in e && "fps" in e.metadata ? e.metadata.fps : 0
    }

    function ri(e) {
        var t = [],
            n = function(e) {
                var t = e.liveEvent,
                    n = e.request.files;
                if (!n.dash) return null;
                var i = n.dash.default_cdn,
                    r = n.dash.cdns[i].url ? n.dash.cdns[i].url : t.dashUrl,
                    o = e.request.ab_tests && e.request.ab_tests.live_hls && e.request.ab_tests.live_hls.group;
                return {
                    id: "dash-" + i + "-" + e.video.id,
                    src: r,
                    mime: t.isArchived ? yn.dash : yn.dashMpd,
                    priority: o && !t.isArchived ? 2 : 1,
                    metadata: {
                        cdn: i,
                        origin: n.dash.cdns[i].origin,
                        quality: "sd"
                    }
                }
            }(e);
        n && t.push(n);
        var i = oi(e);
        return i && t.push(i), t
    }

    function oi(e) {
        var t = e.liveEvent,
            n = e.request.files,
            i = e.request.ab_tests && e.request.ab_tests.live_hls && e.request.ab_tests.live_hls.group;
        if (n.hls && (ye.iOS || i)) {
            var r = n.hls.default_cdn;
            if (t.isArchived && !ye.iOS) return null;
            var o = n.hls.cdns[r].json_url ? n.hls.cdns[r].json_url : t.hls_noredirect;
            return (t.isArchived || ye.iOS) && (o = n.hls.cdns[r].url ? n.hls.cdns[r].url : t.hlsUrl), {
                id: "hls-" + r + "-" + e.video.id,
                src: o,
                mime: yn.hlsLive,
                priority: i ? 1 : 2,
                metadata: {
                    cdn: r,
                    origin: n.hls.cdns[r].origin,
                    quality: "sd"
                }
            }
        }
        return null
    }

    function ai(e) {
        var t = e.video.live_event;
        if (t) {
            t.appPollUrl = "https://" + e.vimeo_url + "/live_event/status?clip_id=" + e.video.id;
            var n = e.request,
                i = n.signature,
                r = n.timestamp,
                o = n.expires,
                a = "https://" + e.player_url + "/live/" + e.video.id,
                s = "?signature=" + i + "&time=" + r + "&expires=" + o;
            t.playlistRefreshUrl = a + "/playlist/refresh" + s, t.sessionRefreshUrl = a + "/session/refresh" + s
        }
        return t
    }

    function si(e) {
        return e.request.text_tracks.map(function(e) {
            return {
                id: e.id,
                src: e.url,
                kind: e.kind,
                label: e.label,
                language: e.lang
            }
        })
    }
    var ui = {
            captureException: function(e) {},
            captureMessage: function(e) {},
            captureBreadcrumb: function() {}
        },
        ci = ui;
    var li = {
        set: function(e) {
            ci = H({}, ui, e)
        },
        captureException: function(e, t) {
            return ci.captureException(e, t)
        },
        captureMessage: function(e, t) {
            return ci.captureMessage(e, t)
        },
        captureBreadcrumb: function(e, t, n, i) {
            return void 0 === n && (n = "backbone"), void 0 === i && (i = "info"), ci.captureBreadcrumb(e, t, n, i)
        }
    };

    function di(e, i, o, a) {
        var r = i.liveEvent,
            t = i.embed.playsinline && (ye.mobileAndroid || 10 <= ye.iOS),
            n = !1,
            s = !1,
            u = !1,
            c = !1,
            l = !1,
            d = !1,
            f = !1,
            h = !1,
            v = !0,
            p = i.embed.time ? i.embed.time : 0;

        function m() {
            a.playsinline = t, a.muted = i.embed.muted
        }

        function g() {
            s = n = !0, u || (o.fire(sn), u = !0, a.play()), r.isStarted && a.paused && (o.fire(an), c = !0), h && y()
        }

        function y() {
            f = l = !1, s && a.paused && a.play()
        }

        function _() {
            s = !1, a.pause(), r.exists && c && (o.fire(on), c = l = !1)
        }

        function b() {
            v = !0, a.paused || a.pause(), s = u = !1, setTimeout(function() {
                a.currentTime = 0
            }, 300)
        }

        function w(e) {
            v = !1, o.fire(Pe.PLAY, a.currentTime)
        }

        function E(e) {
            l || f || o.fire(Pe.PAUSE, a.currentTime, a.ended)
        }

        function S(e) {
            var t = a.currentTime;
            if (!v) {
                var n = a.duration,
                    i = t / n,
                    r = a.playbackRate;
                o.fire(Pe.TIME_UPDATE, {
                    currentTime: t,
                    duration: n,
                    timeProgress: i,
                    playbackRate: r
                })
            }
        }

        function k(e) {
            if (a.loop) a.play();
            else {
                if (n = s = !1, r.isStarted) return;
                o.fire(Pe.ENDED, e)
            }
        }

        function T(e) {
            h = !0;
            var t = a.duration;
            isFinite(t) && 0 < t && (i.video.duration = t), i.video.video_width = a.videoWidth, i.video.video_height = a.videoHeight
        }

        function A(e) {
            var t = a.duration;
            isFinite(t) && (0 < i.video.duration && (t < i.video.duration - 1 || t > i.video.duration + 1) || (i.video.duration = t))
        }

        function P() {
            "LiveScanner" !== a.currentScanner && (i.embed.autoplay || s || n && !u) && y()
        }

        function C() {
            "LiveScanner" !== a.currentScanner && (n && !u && y(), (l || s && a.paused) && y())
        }

        function x(e) {
            if (!v && a.buffered && 0 < a.buffered.length) {
                e = e || a.currentTime;
                var t = function(e, t) {
                        var n = e.length - 1;
                        if (1 < e.length)
                            for (var i = 0, r = e.length; i < r; i++)
                                if (e.start(i) <= t && e.end(i) >= t) {
                                    n = i;
                                    break
                                }
                        return n
                    }(a.buffered, e),
                    n = a.buffered.end(t),
                    i = n / a.duration,
                    r = a.duration;
                if (o.fire(Pe.PROGRESS, {
                        loaded: n,
                        duration: r,
                        loadProgress: i
                    }), c && s && n === a.duration) return void y()
            }
        }

        function L(e) {
            x()
        }

        function O(e, t) {
            t || (t = (a.duration || i.video.duration) * An(0, 1, e)), t = An(0, a.duration || i.video.duration, t), u || (o.fire(Gt), s = n = u = !0), a.currentTime = t
        }

        function R() {
            d = !0
        }

        function I() {
            x();
            var e = a.currentTime,
                t = a.duration,
                n = e / t;
            o.fire(Pe.SEEKED, {
                currentTime: e,
                duration: t,
                timeProgress: n
            }), d = !1
        }

        function M(t) {
            if (a.video.currentFile.mime === yn.dash || r.isStarted) D(t);
            else {
                var e = Jn(i.video.file_codecs),
                    n = ke(a.video.files).filter(Xn(e)).filter(function(e) {
                        return e.metadata.quality === t
                    });
                n.sort(ni()), 0 < n.length && (v = !0, a.video.currentFile = n[0])
            }
            o.fire(un, t)
        }

        function D(e) {
            if ("auto" !== e) {
                var t = Jn(i.video.file_codecs),
                    n = ke(i.request.files.dash.streams).filter(Xn(t)).sort(ni("asc")).map(function(e) {
                        return e.quality
                    }).indexOf(e); - 1 !== n && (li.captureBreadcrumb("Switched to " + e, {}, "video"), a.video.currentFile.restrictedStreamIndexes = [n])
            } else a.video.currentFile.restrictedStreamIndexes = []
        }

        function N(e) {
            li.captureBreadcrumb("Current file changed", {
                id: e.id,
                mime: e.mime,
                src: e.src,
                metadata: e.metadata
            }, "video");
            var t = e.metadata.quality;
            e.mime === yn.dash ? function(e) {
                var t = i.request.files.dash.streams.map(function(e) {
                        return e.quality
                    }),
                    n = ti(i, i.embed.quality, t);
                n && o.fire(cn, n);
                D(n || "auto")
            }() : function(e) {
                var t = ei(i);
                t && o.fire(cn, t)
            }(), o.fire(un, t)
        }
        o.on(nn, m), o.on(Gt, g), o.on(zt, _), o.on(Kt, b), a.on(Pe.PLAY, w), a.on(Pe.PAUSE, E), a.on(Pe.PLAYING, L), a.on(Pe.TIME_UPDATE, S), a.on(Pe.ENDED, k), a.on(Pe.LOADED_METADATA, T), a.on(Pe.DURATION_CHANGE, A), a.on(Pe.CAN_PLAY, P), a.on(Pe.CAN_PLAY_THROUGH, C), a.on(Pe.PROGRESS, x), setInterval(function() {
            var e = a.currentTime;
            u && !d && !a.paused && !c && e < p + .125 && (c = !0, o.fire(rn)), u && !a.paused && c && p + .125 < e && (c = !1, o.fire(on)), p = e
        }, 250), o.on(Yt, O), a.on(Pe.SEEKING, R), a.on(Pe.SEEKED, I), o.on(Xt, M), a.on(Ce.CURRENT_FILE_CHANGE, N)
    }

    function fi(e, n, i) {
        var t = !1,
            r = i.presentationMode;

        function o() {
            t = !0
        }

        function a() {
            t ? u() : i.once(Pe.LOADED_METADATA, u)
        }

        function s(t) {
            "inline" === r && "picture-in-picture" === t && n.fire(pn), "picture-in-picture" === r && "inline" === t && n.fire(mn), r = t, i.video.textTracks.forEach(function(e) {
                "picture-in-picture" === t && "hidden" === e.mode && (e.mode = "showing"), "inline" === t && "showing" === e.mode && (e.mode = "hidden")
            })
        }

        function u() {
            !i.supportsPresentationMode("picture-in-picture") || ye.spatialPlayback && e.video.spatial ? n.fire(vn) : n.fire(hn)
        }

        function c() {
            i.supportsPresentationMode("picture-in-picture") && (i.presentationMode = "picture-in-picture")
        }

        function l() {
            i.supportsPresentationMode("picture-in-picture") && (i.presentationMode = "inline")
        }
        i.on(Pe.LOADED_METADATA, o), i.on(Pe.PLAY, a), i.on(Ce.PRESENTATION_MODE_CHANGE, s), n.on(Qt, c), n.on(Zt, l)
    }

    function hi(t, n, i) {
        var r = null;

        function e() {
            r && (i.deactivateEffect(Wt), r = null, n.fire(fn, r));
            var e = t.video.spatial;
            e && (t.request.drm || i.supportsEffect(Wt) && (r = i.activateEffect(Wt, {
                threeUrl: t.request.urls.three_js,
                fps: t.video.fps,
                fieldOfView: e.fov,
                directorTimeline: e.director_timeline,
                projection: e.projection,
                stereoMode: e.stereo_mode,
                initialView: e.initial_view,
                isMobile: ye.android,
                dimensions: t.embed.on_site ? {
                    width: 1080,
                    height: 540
                } : {
                    width: 640,
                    height: 360
                }
            }), n.fire(fn, r)))
        }

        function o() {
            r && (i.deactivateEffect(Wt), r = null, n.fire(fn, r))
        }
        ye.spatialPlayback && (n.on(nn, e), i.on(re.SPATIAL_UNSUPPORTED, o))
    }

    function vi(e, t) {
        if (void 0 === t && (t = []), !e || "null" === e || 0 === t.length) return {
            track: null
        };
        var n = e.split("."),
            i = n[0],
            r = n[1],
            o = i.split(/[-_]/)[0],
            a = i !== o,
            s = t.filter(function(e) {
                return a && e.language === i || e.language === o
            }).sort(function(e, t) {
                var n = 2 * (e.language === o && e.kind === r) + 2 * (e.language === i) + 1 * (e.kind === r);
                return 2 * (t.language === o && t.kind === r) + 2 * (t.language === i) + 1 * (t.kind === r) - n
            });
        return 0 < s.length ? {
            track: s[0],
            exactMatch: s[0].language === i && s[0].kind === r
        } : {
            track: null
        }
    }

    function pi(t, s, r, i) {
        var o;

        function e() {
            if (0 !== si(t).length) {
                if (r.video.textTracks.forEach(function(e) {
                        e.on("cuechange", u), e.on("modechange", c)
                    }), t.video.lang)
                    if (t.request.lang.split(/[-_]/)[0] !== t.video.lang.split(/[-_]/)[0]) {
                        var e = t.request.lang + ".subtitles";
                        if (vi(e, r.video.textTracks).track) return void s.fire($t, e)
                    }
                s.fire(Jt)
            } else s.fire(Jt)
        }

        function n(e) {
            if (!o || o.id !== e) {
                var t = r.video.textTracks.getTrackById(e),
                    n = !0;
                if (!t) {
                    var i = vi(e, r.video.textTracks);
                    t = i.track, n = i.exactMatch
                }
                t !== o && setTimeout(function() {
                    r.video.textTracks.forEach(function(e) {
                        e.mode = e === t ? "hidden" : "disabled"
                    }), s.fire(dn, t, !n), o = t
                }, 0)
            }
        }

        function a() {
            setTimeout(function() {
                r.video.textTracks.forEach(function(e) {
                    e.mode = "disabled"
                }), s.fire(ln), o && (o = null, s.fire(dn, null))
            }, 0)
        }

        function u(e) {
            for (var t, n = e.target, i = n.activeCues, r = [], o = 0, a = i.length; o < a; o++) "" !== i[o].text.replace(/^\s+|\s+$/gm, "") && ((t = document.createElement("span")).appendChild(i[o].getCueAsHTML()), r.push({
                html: t.innerHTML.replace("\n", "<br>"),
                text: i[o].text
            }));
            s.fire(ln, n, r)
        }

        function c(e) {
            var t = e.target,
                n = i.querySelector("video");
            ye.iOS && function(e) {
                var t = [document.fullscreenElement, document.webkitFullscreenElement, document.webkitCurrentFullScreenElement, document.mozFullScreenElement, document.msFullscreenElement].find(function(e) {
                    return void 0 !== e
                });
                return void 0 !== t ? !!t : e.webkitDisplayingFullscreen
            }(n) && "showing" === t.mode && s.fire(dn, t)
        }
        s.on(nn, e), s.on($t, n), s.on(Jt, a)
    }

    function mi(e, o, a, r) {
        var s, u = o.liveEvent;

        function t(e) {
            var t = e.index,
                n = e.streams,
                i = n[t],
                r = Fn(i.id, o.request.files.dash.streams);
            void 0 !== r ? (i.profile = r.profile, i.quality = r.quality, i.fps = r.fps) : (i.profile = null, i.quality = i.height + "p", i.fps = i.framerate), li.captureBreadcrumb("Stream changed", i, "video"), a.fire(Ce.STREAM_CHANGE, i, t, n)
        }

        function n(e) {
            var t = e.index,
                n = e.streams,
                i = n[t],
                r = Fn(i.id, o.request.files.dash.streams);
            void 0 !== r && (i.profile = r.profile, i.quality = r.quality, i.fps = r.fps), a.fire(Ce.STREAM_TARGET_CHANGE, i, t, n)
        }

        function i(e) {
            o.request.files.dash.streams = e.video.map(function(e) {
                return {
                    quality: e.height + "p"
                }
            }), a.fire(xe.REPRESENTATIONS_AVAILABLE, e)
        }

        function c(e) {
            a.fire(Pe.ENDED)
        }

        function l() {
            if (!(u.isPending || u.isActive || u.isEnded && !u.isArchived) && (!u.isStarted || !s.video || o.isNewVideo())) {
                var e = u.isStarted || u.isArchived ? ri(o) : Gn(o),
                    t = si(o);
                !s.video || o.isNewVideo() ? function(e, t) {
                    var n = r.getBoundingClientRect(),
                        i = u.isStarted ? oi(o) : function(e) {
                            var t = e.request.files;
                            if (t.hls) {
                                var n = t.hls.default_cdn,
                                    i = t.hls.cdns[n].url;
                                return t.hls.cdns[n].captions && (i = t.hls.cdns[n].captions), {
                                    src: i,
                                    mime: yn.hls,
                                    metadata: {
                                        cdn: t.hls.cdn,
                                        origin: t.hls.origin,
                                        quality: "sd"
                                    }
                                }
                            }
                            return null
                        }(o);
                    s.video = {
                        id: o.video.id,
                        title: o.video.title,
                        subtitle: "from " + o.video.owner.name,
                        files: e,
                        textTracks: t,
                        externalDisplayFiles: {
                            AirPlay: i
                        },
                        metadata: {
                            thumbnail: o.video.thumbs[640],
                            useHls: o.request.drm && ye.browser.safari,
                            drm: o.request.drm,
                            percentShown: Wt.frustumSurfaceArea(o.video.spatial.fov, n.width, n.height)
                        }
                    }, a.fire(nn)
                }(e, t) : function(e, t) {
                    e.forEach(function(e) {
                        var t = s.video.files.getFileById(e.id);
                        t && (t.src = e.src)
                    }), t.forEach(function(e) {
                        var t = s.video.textTracks.getTrackById(e.id);
                        t && (t.src = e.src)
                    })
                }(e, t)
            }
        }

        function d() {
            u.exists && s.initLiveEvent(ai(o)), l()
        }
        return (s = new Vt(r, [mt, At, Ze], {
                externalDisplays: [AirPlayExternalDisplay],
                mediaSourceScanner: {
                    shouldUseBBA: o.request.ab_tests.bba.group,
                    droppedFrameSwitchPercent: function(e) {
                        return ye.spatialPlayback && e.video.spatial ? 35 : 50
                    }(o)
                },
                liveEvent: ai(o),
                tests: o.request.ab_tests,
                fileCodecs: o.video.file_codecs
            })).hide = function() {
                r.classList.add("invisible")
            }, s.show = function() {
                r.classList.remove("invisible")
            },
            function(e) {
                for (var t = Object.keys(e), n = t.length, i = [], r = 0; r < n;) i[r] = e[t[r]], r += 1;
                return i
            }(Pe).filter(function(e) {
                return ! function(e, t) {
                    return -1 !== t.indexOf(e)
                }(e, [Pe.TIME_UPDATE, Pe.PROGRESS, Pe.SUSPEND, Pe.ERROR])
            }).forEach(function(t) {
                s.on(t, function(e) {
                    void 0 === e && (e = ""), li.captureBreadcrumb(t, e, "video event")
                })
            }), s.on(Ce.STREAM_CHANGE, t), s.on(Ce.STREAM_TARGET_CHANGE, n), s.on(xe.REPRESENTATIONS_AVAILABLE, i), s.on(xe.EVENT_ENDED, c),
            function(e, r, t) {
                t.forEach(function(i) {
                    e(i, function() {
                        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                        r.apply(void 0, [i].concat(t))
                    })
                })
            }(s.on, a.fire, [ne.AVAILABLE, ne.UNAVAILABLE, ne.ACTIVATED, ne.DEACTIVATED, xe.EVENT_ACTIVE, xe.EVENT_ENDED, xe.EVENT_STARTED, xe.STREAM_OFFLINE, xe.STREAM_ONLINE, Ce.AV_DURATION_MISMATCH, Ce.BANDWIDTH, Ce.CUE_POINT, Ce.DOWNLOAD_END, Ce.DRM_AUTH_SUCCESS, Ce.DROPPED_FRAMES, Ce.SCANNER_CHANGE, Ce.STREAM_BUFFER_END, Ce.STREAM_BUFFER_START, re.CAMERA_UPDATE, re.MOTION_END, re.MOTION_START, re.SPATIAL_UNSUPPORTED, Pe.DURATION_CHANGE, Pe.ERROR, Pe.LOADED_METADATA, Pe.PLAYING, Pe.RATE_CHANGE, Pe.VOLUME_CHANGE]), a.fire(tn), new pi(o, a, s, r), new fi(o, a, s), new hi(o, a, s), new di(e, o, a, s), a.on(en, d), {
                telecine: s
            }
    }

    function gi(e, t, n) {
        this.constructorName = "BackboneError", this.message = e, this.name = t, this.source = n
    }
    gi.prototype = new Error;
    var yi = {
        embed: {},
        request: {
            ab_tests: {
                bba: {}
            },
            cookie: {},
            files: {},
            flags: {},
            urls: {},
            text_tracks: []
        },
        video: {
            file_codecs: {},
            owner: {},
            thumbs: {},
            version: {}
        },
        user: {}
    };

    function _i(t, e) {
        var n, i = this,
            s = B(),
            u = null,
            r = new Wn(e, yi);

        function o(e) {
            return s.fire(en, e), e
        }
        var a = {
            get telecine() {
                return n
            },
            play: function() {
                return s.fire(Gt), this
            },
            pause: function() {
                return s.fire(zt), this
            },
            get paused() {
                return n.paused
            },
            get currentTime() {
                return .1 < n.currentTime ? Bn(n.currentTime) : 0
            },
            set currentTime(e) {
                if (e = parseFloat(e), isNaN(e) || e < 0 || e > r.video.duration) throw new gi("Seconds must be a positive number less than the duration of the video (" + Bn(r.video.duration) + ").", "RangeError", "setCurrentTime");
                s.fire(Yt, null, e)
            },
            get duration() {
                return Bn(r.video.duration)
            },
            get ended() {
                return n.ended
            },
            get enabledTextTrack() {
                return u
            },
            get loop() {
                return n.loop
            },
            set loop(e) {
                n.loop = e
            },
            loadVideo: function(e) {
                return r.reset(e), r = o(r), this
            },
            unload: function() {
                return s.fire(Kt), this
            },
            on: function(e, t) {
                return s.on(e, t), this
            },
            once: function(e, t) {
                return s.once(e, t), this
            },
            off: function(e, t) {
                return s.off(e, t), this
            },
            enableTextTrack: function(e, t) {
                var n, i;
                void 0 === t && (t = null);
                var r = this.textTracks;
                if (function(e) {
                        return !isNaN(e)
                    }(e)) u = r.getTrackById(e);
                else {
                    var o = e.split(".");
                    n = o[0];
                    var a = o[1];
                    if (i = void 0 === a ? t : a, !r.some(function(e) {
                            return e.language.toLowerCase() === n.toLowerCase()
                        })) throw new gi("There are no tracks for " + n.toUpperCase() + ".", "InvalidTrackLanguageError", "enableTextTrack");
                    u = vi(i ? n + "." + i : n, r).track
                }
                if (!u || i && u.kind !== i) throw new gi("There are no " + i + " tracks for " + n.toUpperCase() + ".", "InvalidTrackError", "enableTextTrack");
                s.fire($t, u.id)
            },
            disableTextTrack: function() {
                u = null, s.fire(Jt)
            },
            set quality(e) {
                s.fire(Xt, e)
            },
            get playbackRate() {
                return n ? n.playbackRate : 1
            },
            set playbackRate(e) {
                if (!r.embed.settings.speed) throw new gi("Setting the playback rate is not enabled for this video.", "Error", "setPlaybackRate");
                if (isNaN(e) || e < kn.low || e > kn.high) throw new gi("Playback rate should be a number between " + kn.low + " and " + kn.high + ".", "RangeError", "setPlaybackRate");
                n.playbackRate = e, n.defaultPlaybackRate = e
            },
            get presentationMode() {
                return n.presentationMode
            },
            set presentationMode(e) {
                "picture-in-picture" === e ? s.fire(Qt) : s.fire(Zt)
            },
            supportsPresentationMode: function(e) {
                return n.supportsPresentationMode(e)
            },
            get supportsTextTracks() {
                return n.supportsTextTracks
            },
            get textTracks() {
                return n.video ? n.video.textTracks : []
            },
            get supportsSettingVolume() {
                return n.supportsSettingVolume
            },
            get volume() {
                return n ? n.volume : Bn(r.request.cookie.volume)
            },
            set volume(e) {
                if (e = parseFloat(e), isNaN(e) || e < 0 || 1 < e) throw new gi("Volume should be a number between 0 and 1.", "RangeError", "setVolume");
                n.volume = e
            },
            get muted() {
                return n.muted
            },
            set muted(e) {
                n.muted = e
            },
            get videoId() {
                return r.video.id
            },
            get videoWidth() {
                return n.videoWidth || r.video.width
            },
            get videoHeight() {
                return n.videoHeight || r.video.height
            }
        };
        return function() {
            r = o(r);
            var e = new mi(i, r, s, t);
            n = e.telecine
        }(), Vn(i, a)
    }
    Array.prototype.find || Object.defineProperty(Array.prototype, "find", {
        value: function(e) {
            for (var t = Object(this), n = t.length >>> 0, i = arguments[1], r = 0; r < n;) {
                var o = t[r];
                if (e.call(i, o, r, t)) return o;
                r++
            }
        }
    });
    var bi = navigator.userAgent.toLowerCase();

    function wi(e) {
        e = e.toLowerCase();
        var t = new RegExp(e).test(bi);
        return "safari" === e ? t && new RegExp("version").test(bi) : t
    }

    function Ei(e) {
        var t = document.createElement("div"),
            n = e.charAt(0).toUpperCase() + e.slice(1),
            i = (e + " " + ["Webkit", "Moz", "O", "ms"].join(n + " ") + n).split(" ");
        for (var r in i) {
            var o = i[r];
            if (void 0 !== t.style[o]) return o
        }
        return e
    }
    var Si = !!wi("android") && (parseFloat(bi.replace(/^.* android (\d+)\.(\d+).*$/, "$1.$2")) || !0),
        ki = window.devicePixelRatio || 1,
        Ti = !(!wi("windows phone") && !wi("iemobile")) && (parseFloat(bi.replace(/^.* windows phone (os )?(\d+)\.(\d+).*$/, "$2.$3")) || !0),
        Ai = !!wi("msie") && parseFloat(bi.replace(/^.*msie (\d+).*$/, "$1")),
        Pi = !!wi("trident") && parseFloat(bi.replace(/^.*trident\/(\d+)\.(\d+).*$/, "$1.$2")) + 4,
        Ci = !!(wi("ipad;") || wi("iphone;") || wi("ipod touch;")) && parseFloat(bi.replace(/^.* os (\d+)_(\d+).*$/, "$1.$2"));

    function xi() {
        if (!wi("safari")) return [];
        var e = bi.split(" ").find(function(e) {
            return /version\//.test(e)
        });
        return e ? e.replace("version/", "").split(".").map(function(e) {
            return parseInt(e, 10)
        }) : []
    }
    var Li = wi("safari") && wi("apple") && !wi("chrome") && !wi("android") && 11 == xi()[0],
        Oi = {
            airPlay: "WebKitPlaybackTargetAvailabilityEvent" in window,
            android: Si,
            hasAutoplayPolicy: Si || Ci || Li || 66 <= function() {
                if (!wi("chrome")) return [];
                var e = bi.split(" ").find(function(e) {
                    return Ci ? /CriOS\//.test(e) : /chrome\//.test(e)
                });
                return e ? e.replace("chrome/", "").split(".").map(function(e) {
                    return parseInt(e, 10)
                }) : []
            }()[0],
            iOS: Ci,
            mobileAndroid: Si && wi("mobile"),
            browser: {
                bb10: wi("bb10"),
                chrome: wi("chrome"),
                firefox: wi("firefox"),
                ie: Ai || Pi,
                edge: wi("edge"),
                opera: wi("opera"),
                safari: wi("safari") && wi("apple") && !wi("chrome") && !wi("android")
            },
            devicePixelRatio: ki,
            flash: function() {
                var e = navigator,
                    t = !1,
                    n = [0, 0, 0],
                    i = null,
                    r = "Shockwave Flash",
                    o = "application/x-shockwave-flash";
                if (void 0 !== e.plugins && "object" == typeof e.plugins[r]) !(i = e.plugins[r].description) || void 0 !== e.mimeTypes && e.mimeTypes[o] && !e.mimeTypes[o].enabledPlugin || (t = !0, i = i.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), n[0] = parseInt(i.replace(/^(.*)\..*$/, "$1"), 10), n[1] = parseInt(i.replace(/^.*\.(.*)\s.*$/, "$1"), 10), n[2] = /[a-zA-Z]/.test(i) ? parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0);
                else if (void 0 !== window.ActiveXObject) try {
                    var a = new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
                    a && (i = a.GetVariable("$version")) && (t = !0, i = i.split(" ")[1].split(","), n = [parseInt(i[0], 10), parseInt(i[1], 10), parseInt(i[2], 10)])
                } catch (e) {}
                return {
                    installed: t,
                    version: n.join("."),
                    major: n[0],
                    minor: n[1],
                    revision: n[2]
                }
            }(),
            iPhone: wi("iphone;") || wi("ipod touch;") || wi("ipod;"),
            iPad: wi("ipad;"),
            iPadNonRetina: wi("ipad;") && ki < 2,
            mac: wi("mac os"),
            pointerEvents: window.navigator.pointerEnabled || window.navigator.msPointerEnabled || !1,
            svg: !!document.createElementNS && !!document.createElementNS("http://www.w3.org/2000/svg", "svg").createSVGRect,
            touch: "ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch || wi("windows phone") || 1 < window.navigator.maxTouchPoints || window.navigator.msMaxTouchPoints || !1,
            transformProperty: Ei("transform"),
            transitionProperty: Ei("transition"),
            windowsPhone: Ti
        },
        Ri = /mac os x 10_13/.test(bi),
        Ii = Oi.iOS && /os 11/.test(bi),
        Mi = Oi.iPhone && 812 === window.screen.availHeight && 375 === window.screen.availWidth,
        Di = Oi.iPad && (1024 === window.screen.availHeight && 1366 === window.screen.availWidth || 1112 === window.screen.availHeight && 834 === window.screen.availWidth);
    Oi.hevc = !!(Li && Ri || Li && Ii) || "undefined" != typeof MediaSource && MediaSource.isTypeSupported('video/mp4; codecs="hvc1"'), Oi.hdr = Li && Ii && (Mi || Di), Oi.vp9hdr = (window.matchMedia("(color-gamut: p3)").matches || window.matchMedia("(color-gamut: rec2020)").matches) && 48 <= screen.colorDepth && (MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.00"') || MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.01"') || MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.00"') || MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.01"')), Oi.spatialPlayback = !(Oi.iOS || Oi.iPad || Oi.browser.ie) && (!wi("safari") || 11 < xi()[0] || 11 == xi()[0] && (1 < xi()[2] || 0 < xi()[1])), Oi.stereoscopic = Oi.spatialPlayback && Oi.mobileAndroid;
    var Ni = Array.isArray,
        Fi = "object" == typeof s && s && s.Object === Object && s,
        Bi = "object" == typeof self && self && self.Object === Object && self,
        qi = Fi || Bi || Function("return this")(),
        Ui = qi.Symbol,
        ji = Object.prototype,
        Vi = ji.hasOwnProperty,
        Hi = ji.toString,
        Wi = Ui ? Ui.toStringTag : void 0;
    var zi = function(e) {
            var t = Vi.call(e, Wi),
                n = e[Wi];
            try {
                e[Wi] = void 0
            } catch (e) {}
            var i = Hi.call(e);
            return t ? e[Wi] = n : delete e[Wi], i
        },
        Gi = Object.prototype.toString;
    var Yi = function(e) {
            return Gi.call(e)
        },
        Ki = Ui ? Ui.toStringTag : void 0;
    var Xi = function(e) {
        return null == e ? void 0 === e ? "[object Undefined]" : "[object Null]" : Ki && Ki in Object(e) ? zi(e) : Yi(e)
    };
    var $i = function(e) {
        return null != e && "object" == typeof e
    };
    var Ji = function(e) {
            return "symbol" == typeof e || $i(e) && "[object Symbol]" == Xi(e)
        },
        Qi = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
        Zi = /^\w*$/;
    var er = function(e, t) {
        if (Ni(e)) return !1;
        var n = typeof e;
        return !("number" != n && "symbol" != n && "boolean" != n && null != e && !Ji(e)) || Zi.test(e) || !Qi.test(e) || null != t && e in Object(t)
    };
    var tr = function(e) {
        var t = typeof e;
        return null != e && ("object" == t || "function" == t)
    };
    var nr = function(e) {
            if (!tr(e)) return !1;
            var t = Xi(e);
            return "[object Function]" == t || "[object GeneratorFunction]" == t || "[object AsyncFunction]" == t || "[object Proxy]" == t
        },
        ir = qi["__core-js_shared__"],
        rr = function() {
            var e = /[^.]+$/.exec(ir && ir.keys && ir.keys.IE_PROTO || "");
            return e ? "Symbol(src)_1." + e : ""
        }();
    var or = function(e) {
            return !!rr && rr in e
        },
        ar = Function.prototype.toString;
    var sr = function(e) {
            if (null != e) {
                try {
                    return ar.call(e)
                } catch (e) {}
                try {
                    return e + ""
                } catch (e) {}
            }
            return ""
        },
        ur = /^\[object .+?Constructor\]$/,
        cr = Function.prototype,
        lr = Object.prototype,
        dr = cr.toString,
        fr = lr.hasOwnProperty,
        hr = RegExp("^" + dr.call(fr).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
    var vr = function(e) {
        return !(!tr(e) || or(e)) && (nr(e) ? hr : ur).test(sr(e))
    };
    var pr = function(e, t) {
        return null == e ? void 0 : e[t]
    };
    var mr = function(e, t) {
            var n = pr(e, t);
            return vr(n) ? n : void 0
        },
        gr = mr(Object, "create");
    var yr = function() {
        this.__data__ = gr ? gr(null) : {}, this.size = 0
    };
    var _r = function(e) {
            var t = this.has(e) && delete this.__data__[e];
            return this.size -= t ? 1 : 0, t
        },
        br = Object.prototype.hasOwnProperty;
    var wr = function(e) {
            var t = this.__data__;
            if (gr) {
                var n = t[e];
                return "__lodash_hash_undefined__" === n ? void 0 : n
            }
            return br.call(t, e) ? t[e] : void 0
        },
        Er = Object.prototype.hasOwnProperty;
    var Sr = function(e) {
        var t = this.__data__;
        return gr ? void 0 !== t[e] : Er.call(t, e)
    };
    var kr = function(e, t) {
        var n = this.__data__;
        return this.size += this.has(e) ? 0 : 1, n[e] = gr && void 0 === t ? "__lodash_hash_undefined__" : t, this
    };

    function Tr(e) {
        var t = -1,
            n = null == e ? 0 : e.length;
        for (this.clear(); ++t < n;) {
            var i = e[t];
            this.set(i[0], i[1])
        }
    }
    Tr.prototype.clear = yr, Tr.prototype.delete = _r, Tr.prototype.get = wr, Tr.prototype.has = Sr, Tr.prototype.set = kr;
    var Ar = Tr;
    var Pr = function() {
        this.__data__ = [], this.size = 0
    };
    var Cr = function(e, t) {
        return e === t || e != e && t != t
    };
    var xr = function(e, t) {
            for (var n = e.length; n--;)
                if (Cr(e[n][0], t)) return n;
            return -1
        },
        Lr = Array.prototype.splice;
    var Or = function(e) {
        var t = this.__data__,
            n = xr(t, e);
        return !(n < 0 || (n == t.length - 1 ? t.pop() : Lr.call(t, n, 1), --this.size, 0))
    };
    var Rr = function(e) {
        var t = this.__data__,
            n = xr(t, e);
        return n < 0 ? void 0 : t[n][1]
    };
    var Ir = function(e) {
        return -1 < xr(this.__data__, e)
    };
    var Mr = function(e, t) {
        var n = this.__data__,
            i = xr(n, e);
        return i < 0 ? (++this.size, n.push([e, t])) : n[i][1] = t, this
    };

    function Dr(e) {
        var t = -1,
            n = null == e ? 0 : e.length;
        for (this.clear(); ++t < n;) {
            var i = e[t];
            this.set(i[0], i[1])
        }
    }
    Dr.prototype.clear = Pr, Dr.prototype.delete = Or, Dr.prototype.get = Rr, Dr.prototype.has = Ir, Dr.prototype.set = Mr;
    var Nr = Dr,
        Fr = mr(qi, "Map");
    var Br = function(e) {
        var t = typeof e;
        return "string" == t || "number" == t || "symbol" == t || "boolean" == t ? "__proto__" !== e : null === e
    };
    var qr = function(e, t) {
        var n = e.__data__;
        return Br(t) ? n["string" == typeof t ? "string" : "hash"] : n.map
    };
    var Ur = function(e) {
        var t = qr(this, e).delete(e);
        return this.size -= t ? 1 : 0, t
    };
    var jr = function(e) {
        return qr(this, e).get(e)
    };
    var Vr = function(e) {
        return qr(this, e).has(e)
    };
    var Hr = function(e, t) {
        var n = qr(this, e),
            i = n.size;
        return n.set(e, t), this.size += n.size == i ? 0 : 1, this
    };

    function Wr(e) {
        var t = -1,
            n = null == e ? 0 : e.length;
        for (this.clear(); ++t < n;) {
            var i = e[t];
            this.set(i[0], i[1])
        }
    }
    Wr.prototype.clear = function() {
        this.size = 0, this.__data__ = {
            hash: new Ar,
            map: new(Fr || Nr),
            string: new Ar
        }
    }, Wr.prototype.delete = Ur, Wr.prototype.get = jr, Wr.prototype.has = Vr, Wr.prototype.set = Hr;
    var zr = Wr,
        Gr = "Expected a function";

    function Yr(r, o) {
        if ("function" != typeof r || null != o && "function" != typeof o) throw new TypeError(Gr);
        var a = function() {
            var e = arguments,
                t = o ? o.apply(this, e) : e[0],
                n = a.cache;
            if (n.has(t)) return n.get(t);
            var i = r.apply(this, e);
            return a.cache = n.set(t, i) || n, i
        };
        return a.cache = new(Yr.Cache || zr), a
    }
    Yr.Cache = zr;
    var Kr = Yr;
    var Xr = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
        $r = /\\(\\)?/g,
        Jr = function(e) {
            var t = Kr(e, function(e) {
                    return 500 === n.size && n.clear(), e
                }),
                n = t.cache;
            return t
        }(function(e) {
            var r = [];
            return 46 === e.charCodeAt(0) && r.push(""), e.replace(Xr, function(e, t, n, i) {
                r.push(n ? i.replace($r, "$1") : t || e)
            }), r
        });
    var Qr = function(e, t) {
            for (var n = -1, i = null == e ? 0 : e.length, r = Array(i); ++n < i;) r[n] = t(e[n], n, e);
            return r
        },
        Zr = 1 / 0,
        eo = Ui ? Ui.prototype : void 0,
        to = eo ? eo.toString : void 0;
    var no = function e(t) {
        if ("string" == typeof t) return t;
        if (Ni(t)) return Qr(t, e) + "";
        if (Ji(t)) return to ? to.call(t) : "";
        var n = t + "";
        return "0" == n && 1 / t == -Zr ? "-0" : n
    };
    var io = function(e) {
        return null == e ? "" : no(e)
    };
    var ro = function(e, t) {
        return Ni(e) ? e : er(e, t) ? [e] : Jr(io(e))
    };
    var oo = function(e) {
        if ("string" == typeof e || Ji(e)) return e;
        var t = e + "";
        return "0" == t && 1 / e == -1 / 0 ? "-0" : t
    };
    var ao = function(e, t) {
        for (var n = 0, i = (t = ro(t, e)).length; null != e && n < i;) e = e[oo(t[n++])];
        return n && n == i ? e : void 0
    };
    var so = function(e, t, n) {
            var i = null == e ? void 0 : ao(e, t);
            return void 0 === i ? n : i
        },
        uo = "object" == typeof global && global && global.Object === Object && global,
        co = "object" == typeof self && self && self.Object === Object && self,
        lo = (uo || co || Function("return this")()).Symbol,
        fo = Object.prototype,
        ho = fo.hasOwnProperty,
        vo = fo.toString,
        po = lo ? lo.toStringTag : void 0;
    var mo = Object.prototype.toString;
    var go = "[object Null]",
        yo = "[object Undefined]",
        _o = lo ? lo.toStringTag : void 0;

    function bo(e) {
        return null == e ? void 0 === e ? yo : go : _o && _o in Object(e) ? function(e) {
            var t = ho.call(e, po),
                n = e[po];
            try {
                e[po] = void 0
            } catch (e) {}
            var i = vo.call(e);
            return t ? e[po] = n : delete e[po], i
        }(e) : function(e) {
            return mo.call(e)
        }(e)
    }
    var wo = function(t, n) {
        return function(e) {
            return t(n(e))
        }
    }(Object.getPrototypeOf, Object);
    var Eo = "[object Object]",
        So = Function.prototype,
        ko = Object.prototype,
        To = So.toString,
        Ao = ko.hasOwnProperty,
        Po = To.call(Object);
    var Co = function(e) {
            var t, n = e.Symbol;
            return "function" == typeof n ? n.observable ? t = n.observable : (t = n("observable"), n.observable = t) : t = "@@observable", t
        }("undefined" != typeof self ? self : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof module ? module : Function("return this")()),
        xo = {
            INIT: "@@redux/INIT"
        };

    function Lo(e, t, n) {
        var i;
        if ("function" == typeof t && void 0 === n && (n = t, t = void 0), void 0 !== n) {
            if ("function" != typeof n) throw new Error("Expected the enhancer to be a function.");
            return n(Lo)(e, t)
        }
        if ("function" != typeof e) throw new Error("Expected the reducer to be a function.");
        var r = e,
            o = t,
            a = [],
            s = a,
            u = !1;

        function c() {
            s === a && (s = a.slice())
        }

        function l() {
            return o
        }

        function d(t) {
            if ("function" != typeof t) throw new Error("Expected listener to be a function.");
            var n = !0;
            return c(), s.push(t),
                function() {
                    if (n) {
                        n = !1, c();
                        var e = s.indexOf(t);
                        s.splice(e, 1)
                    }
                }
        }

        function f(e) {
            if (! function(e) {
                    if (! function(e) {
                            return null != e && "object" == typeof e
                        }(e) || bo(e) != Eo) return !1;
                    var t = wo(e);
                    if (null === t) return !0;
                    var n = Ao.call(t, "constructor") && t.constructor;
                    return "function" == typeof n && n instanceof n && To.call(n) == Po
                }(e)) throw new Error("Actions must be plain objects. Use custom middleware for async actions.");
            if (void 0 === e.type) throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');
            if (u) throw new Error("Reducers may not dispatch actions.");
            try {
                u = !0, o = r(o, e)
            } finally {
                u = !1
            }
            for (var t = a = s, n = 0; n < t.length; n++) {
                (0, t[n])()
            }
            return e
        }
        return f({
            type: xo.INIT
        }), (i = {
            dispatch: f,
            subscribe: d,
            getState: l,
            replaceReducer: function(e) {
                if ("function" != typeof e) throw new Error("Expected the nextReducer to be a function.");
                r = e, f({
                    type: xo.INIT
                })
            }
        })[Co] = function() {
            var e, n = d;
            return (e = {
                subscribe: function(e) {
                    if ("object" != typeof e) throw new TypeError("Expected the observer to be an object.");

                    function t() {
                        e.next && e.next(l())
                    }
                    return t(), {
                        unsubscribe: n(t)
                    }
                }
            })[Co] = function() {
                return this
            }, e
        }, i
    }

    function Oo() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[n];
        return 0 === t.length ? function(e) {
            return e
        } : 1 === t.length ? t[0] : t.reduce(function(e, t) {
            return function() {
                return e(t.apply(void 0, arguments))
            }
        })
    }
    var Ro = Object.assign || function(e) {
        for (var t = 1; t < arguments.length; t++) {
            var n = arguments[t];
            for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
        }
        return e
    };
    var Io = t(function(e, t) {
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = t.repeat = function(e, t) {
                return new Array(t + 1).join(e)
            },
            i = t.pad = function(e, t) {
                return n("0", t - e.toString().length) + e
            };
        t.formatTime = function(e) {
            return i(e.getHours(), 2) + ":" + i(e.getMinutes(), 2) + ":" + i(e.getSeconds(), 2) + "." + i(e.getMilliseconds(), 3)
        }, t.timer = "undefined" != typeof performance && null !== performance && "function" == typeof performance.now ? performance : Date
    });
    e(Io);
    Io.repeat, Io.pad, Io.formatTime, Io.timer;
    var Mo = t(function(n, e) {
            ! function(e, t) {
                n.exports = t()
            }(0, function(v) {
                var e, t, n = [];

                function i(e, t) {
                    e.super_ = t, e.prototype = Object.create(t.prototype, {
                        constructor: {
                            value: e,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    })
                }

                function r(e, t) {
                    Object.defineProperty(this, "kind", {
                        value: e,
                        enumerable: !0
                    }), t && t.length && Object.defineProperty(this, "path", {
                        value: t,
                        enumerable: !0
                    })
                }

                function p(e, t, n) {
                    p.super_.call(this, "E", e), Object.defineProperty(this, "lhs", {
                        value: t,
                        enumerable: !0
                    }), Object.defineProperty(this, "rhs", {
                        value: n,
                        enumerable: !0
                    })
                }

                function m(e, t) {
                    m.super_.call(this, "N", e), Object.defineProperty(this, "rhs", {
                        value: t,
                        enumerable: !0
                    })
                }

                function g(e, t) {
                    g.super_.call(this, "D", e), Object.defineProperty(this, "lhs", {
                        value: t,
                        enumerable: !0
                    })
                }

                function y(e, t, n) {
                    y.super_.call(this, "A", e), Object.defineProperty(this, "index", {
                        value: t,
                        enumerable: !0
                    }), Object.defineProperty(this, "item", {
                        value: n,
                        enumerable: !0
                    })
                }

                function _(e, t, n) {
                    var i = e.slice((n || t) + 1 || e.length);
                    return e.length = t < 0 ? e.length + t : t, e.push.apply(e, i), e
                }

                function b(e) {
                    var t = typeof e;
                    return "object" !== t ? t : e === Math ? "math" : null === e ? "null" : Array.isArray(e) ? "array" : "[object Date]" === Object.prototype.toString.call(e) ? "date" : void 0 !== e.toString && /^\/.*\//.test(e.toString()) ? "regexp" : "object"
                }

                function w(i, r, o, a, e, t, s) {
                    var u = (e = e || []).slice(0);
                    if (void 0 !== t) {
                        if (a) {
                            if ("function" == typeof a && a(u, t)) return;
                            if ("object" == typeof a) {
                                if (a.prefilter && a.prefilter(u, t)) return;
                                if (a.normalize) {
                                    var n = a.normalize(u, t, i, r);
                                    n && (i = n[0], r = n[1])
                                }
                            }
                        }
                        u.push(t)
                    }
                    "regexp" === b(i) && "regexp" === b(r) && (i = i.toString(), r = r.toString());
                    var c = typeof i,
                        l = typeof r;
                    if ("undefined" === c) "undefined" !== l && o(new m(u, r));
                    else if ("undefined" === l) o(new g(u, i));
                    else if (b(i) !== b(r)) o(new p(u, i, r));
                    else if ("[object Date]" === Object.prototype.toString.call(i) && "[object Date]" === Object.prototype.toString.call(r) && i - r != 0) o(new p(u, i, r));
                    else if ("object" === c && null !== i && null !== r) {
                        if ((s = s || []).indexOf(i) < 0) {
                            if (s.push(i), Array.isArray(i)) {
                                var d;
                                i.length;
                                for (d = 0; d < i.length; d++) d >= r.length ? o(new y(u, d, new g(v, i[d]))) : w(i[d], r[d], o, a, u, d, s);
                                for (; d < r.length;) o(new y(u, d, new m(v, r[d++])))
                            } else {
                                var f = Object.keys(i),
                                    h = Object.keys(r);
                                f.forEach(function(e, t) {
                                    var n = h.indexOf(e);
                                    0 <= n ? (w(i[e], r[e], o, a, u, e, s), h = _(h, n)) : w(i[e], v, o, a, u, e, s)
                                }), h.forEach(function(e) {
                                    w(v, r[e], o, a, u, e, s)
                                })
                            }
                            s.length = s.length - 1
                        }
                    } else i !== r && ("number" === c && isNaN(i) && isNaN(r) || o(new p(u, i, r)))
                }

                function o(e, t, n, i) {
                    return i = i || [], w(e, t, function(e) {
                        e && i.push(e)
                    }, n), i.length ? i : v
                }

                function a(e, t, n) {
                    if (e && t && n && n.kind) {
                        for (var i = e, r = -1, o = n.path ? n.path.length - 1 : 0; ++r < o;) void 0 === i[n.path[r]] && (i[n.path[r]] = "number" == typeof n.path[r] ? [] : {}), i = i[n.path[r]];
                        switch (n.kind) {
                            case "A":
                                ! function e(t, n, i) {
                                    if (i.path && i.path.length) {
                                        var r, o = t[n],
                                            a = i.path.length - 1;
                                        for (r = 0; r < a; r++) o = o[i.path[r]];
                                        switch (i.kind) {
                                            case "A":
                                                e(o[i.path[r]], i.index, i.item);
                                                break;
                                            case "D":
                                                delete o[i.path[r]];
                                                break;
                                            case "E":
                                            case "N":
                                                o[i.path[r]] = i.rhs
                                        }
                                    } else switch (i.kind) {
                                        case "A":
                                            e(t[n], i.index, i.item);
                                            break;
                                        case "D":
                                            t = _(t, n);
                                            break;
                                        case "E":
                                        case "N":
                                            t[n] = i.rhs
                                    }
                                    return t
                                }(n.path ? i[n.path[r]] : i, n.index, n.item);
                                break;
                            case "D":
                                delete i[n.path[r]];
                                break;
                            case "E":
                            case "N":
                                i[n.path[r]] = n.rhs
                        }
                    }
                }
                return e = "object" == typeof s && s ? s : "undefined" != typeof window ? window : {}, (t = e.DeepDiff) && n.push(function() {
                    void 0 !== t && e.DeepDiff === o && (e.DeepDiff = t, t = v)
                }), i(p, r), i(m, r), i(g, r), i(y, r), Object.defineProperties(o, {
                    diff: {
                        value: o,
                        enumerable: !0
                    },
                    observableDiff: {
                        value: w,
                        enumerable: !0
                    },
                    applyDiff: {
                        value: function(t, n, i) {
                            t && n && w(t, n, function(e) {
                                i && !i(t, n, e) || a(t, n, e)
                            })
                        },
                        enumerable: !0
                    },
                    applyChange: {
                        value: a,
                        enumerable: !0
                    },
                    revertChange: {
                        value: function(e, t, n) {
                            if (e && t && n && n.kind) {
                                var i, r, o = e;
                                for (r = n.path.length - 1, i = 0; i < r; i++) void 0 === o[n.path[i]] && (o[n.path[i]] = {}), o = o[n.path[i]];
                                switch (n.kind) {
                                    case "A":
                                        ! function e(t, n, i) {
                                            if (i.path && i.path.length) {
                                                var r, o = t[n],
                                                    a = i.path.length - 1;
                                                for (r = 0; r < a; r++) o = o[i.path[r]];
                                                switch (i.kind) {
                                                    case "A":
                                                        e(o[i.path[r]], i.index, i.item);
                                                        break;
                                                    case "D":
                                                    case "E":
                                                        o[i.path[r]] = i.lhs;
                                                        break;
                                                    case "N":
                                                        delete o[i.path[r]]
                                                }
                                            } else switch (i.kind) {
                                                case "A":
                                                    e(t[n], i.index, i.item);
                                                    break;
                                                case "D":
                                                case "E":
                                                    t[n] = i.lhs;
                                                    break;
                                                case "N":
                                                    t = _(t, n)
                                            }
                                            return t
                                        }(o[n.path[i]], n.index, n.item);
                                        break;
                                    case "D":
                                    case "E":
                                        o[n.path[i]] = n.lhs;
                                        break;
                                    case "N":
                                        delete o[n.path[i]]
                                }
                            }
                        },
                        enumerable: !0
                    },
                    isConflict: {
                        value: function() {
                            return void 0 !== t
                        },
                        enumerable: !0
                    },
                    noConflict: {
                        value: function() {
                            return n && (n.forEach(function(e) {
                                e()
                            }), n = null), o
                        },
                        enumerable: !0
                    }
                }), o
            })
        }),
        Do = t(function(e, t) {
            Object.defineProperty(t, "__esModule", {
                value: !0
            }), t.default = function(e, t, i, n) {
                var r = (0, o.default)(e, t);
                try {
                    n ? i.groupCollapsed("diff") : i.group("diff")
                } catch (e) {
                    i.log("diff")
                }
                r ? r.forEach(function(e) {
                    var t = e.kind,
                        n = function(e) {
                            var t = e.kind,
                                n = e.path,
                                i = e.lhs,
                                r = e.rhs,
                                o = e.index,
                                a = e.item;
                            switch (t) {
                                case "E":
                                    return [n.join("."), i, "", r];
                                case "N":
                                    return [n.join("."), r];
                                case "D":
                                    return [n.join(".")];
                                case "A":
                                    return [n.join(".") + "[" + o + "]", a];
                                default:
                                    return []
                            }
                        }(e);
                    i.log.apply(i, ["%c " + a[t].text, function(e) {
                        return "color: " + a[e].color + "; font-weight: bold"
                    }(t)].concat(function(e) {
                        {
                            if (Array.isArray(e)) {
                                for (var t = 0, n = Array(e.length); t < e.length; t++) n[t] = e[t];
                                return n
                            }
                            return ke(e)
                        }
                    }(n)))
                }) : i.log(" no diff ");
                try {
                    i.groupEnd()
                } catch (e) {
                    i.log(" diff end  ")
                }
            };
            var o = function(e) {
                return e && e.__esModule ? e : {
                    default: e
                }
            }(Mo);
            var a = {
                E: {
                    color: "#2196F3",
                    text: "CHANGED:"
                },
                N: {
                    color: "#4CAF50",
                    text: "ADDED:"
                },
                D: {
                    color: "#F44336",
                    text: "DELETED:"
                },
                A: {
                    color: "#2196F3",
                    text: "ARRAY:"
                }
            };
            e.exports = t.default
        });
    e(Do);
    var No = t(function(e, t) {
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = "function" == typeof Kn && "symbol" == typeof Kn.iterator ? function(e) {
            return typeof e
        } : function(e) {
            return e && "function" == typeof Kn && e.constructor === Kn && e !== Kn.prototype ? "symbol" : typeof e
        };
        t.printBuffer = function(b, w) {
            var E = w.logger,
                S = w.actionTransformer,
                e = w.titleFormatter,
                k = void 0 === e ? function(e) {
                    var r = e.timestamp,
                        o = e.duration;
                    return function(e, t, n) {
                        var i = ["action"];
                        return i.push("%c" + String(e.type)), r && i.push("%c@ " + t), o && i.push("%c(in " + n.toFixed(2) + " ms)"), i.join(" ")
                    }
                }(w) : e,
                T = w.collapsed,
                A = w.colors,
                P = w.level,
                C = w.diff,
                x = void 0 === w.titleFormatter;
            b.forEach(function(e, t) {
                var n = e.started,
                    i = e.startedTime,
                    r = e.action,
                    o = e.prevState,
                    a = e.error,
                    s = e.took,
                    u = e.nextState,
                    c = b[t + 1];
                c && (u = c.prevState, s = c.started - n);
                var l = S(r),
                    d = "function" == typeof T ? T(function() {
                        return u
                    }, r, e) : T,
                    f = (0, Io.formatTime)(i),
                    h = A.title ? "color: " + A.title(l) + ";" : "",
                    v = ["color: gray; font-weight: lighter;"];
                v.push(h), w.timestamp && v.push("color: gray; font-weight: lighter;"), w.duration && v.push("color: gray; font-weight: lighter;");
                var p = k(l, f, s);
                try {
                    d ? A.title && x ? E.groupCollapsed.apply(E, ["%c " + p].concat(v)) : E.groupCollapsed(p) : A.title && x ? E.group.apply(E, ["%c " + p].concat(v)) : E.group(p)
                } catch (e) {
                    E.log(p)
                }
                var m = O(P, l, [o], "prevState"),
                    g = O(P, l, [l], "action"),
                    y = O(P, l, [a, o], "error"),
                    _ = O(P, l, [u], "nextState");
                m && (A.prevState ? E[m]("%c prev state", "color: " + A.prevState(o) + "; font-weight: bold", o) : E[m]("prev state", o)), g && (A.action ? E[g]("%c action    ", "color: " + A.action(l) + "; font-weight: bold", l) : E[g]("action    ", l)), a && y && (A.error ? E[y]("%c error     ", "color: " + A.error(a, o) + "; font-weight: bold;", a) : E[y]("error     ", a)), _ && (A.nextState ? E[_]("%c next state", "color: " + A.nextState(u) + "; font-weight: bold", u) : E[_]("next state", u)), C && (0, L.default)(o, u, E, d);
                try {
                    E.groupEnd()
                } catch (e) {
                    E.log(" log end ")
                }
            })
        };
        var L = function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }(Do);

        function O(e, t, n, i) {
            switch (void 0 === e ? "undefined" : r(e)) {
                case "object":
                    return "function" == typeof e[i] ? e[i].apply(e, function(e) {
                        if (Array.isArray(e)) {
                            for (var t = 0, n = Array(e.length); t < e.length; t++) n[t] = e[t];
                            return n
                        }
                        return ke(e)
                    }(n)) : e[i];
                case "function":
                    return e(t);
                default:
                    return e
            }
        }
    });
    e(No);
    No.printBuffer;
    var Fo = t(function(e, t) {
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.default = {
            level: "log",
            logger: console,
            logErrors: !0,
            collapsed: void 0,
            predicate: void 0,
            duration: !1,
            timestamp: !0,
            stateTransformer: function(e) {
                return e
            },
            actionTransformer: function(e) {
                return e
            },
            errorTransformer: function(e) {
                return e
            },
            colors: {
                title: function() {
                    return "inherit"
                },
                prevState: function() {
                    return "#9E9E9E"
                },
                action: function() {
                    return "#03A9F4"
                },
                nextState: function() {
                    return "#4CAF50"
                },
                error: function() {
                    return "#F20404"
                }
            },
            diff: !1,
            diffPredicate: void 0,
            transformer: void 0
        }, e.exports = t.default
    });
    e(Fo);
    var Bo = t(function(e, t) {
        Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.logger = t.createLogger = t.defaults = void 0;
        var h = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            },
            n = function(e) {
                return e && e.__esModule ? e : {
                    default: e
                }
            }(Fo);

        function i() {
            var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                a = h({}, n.default, e),
                t = a.logger,
                s = a.stateTransformer,
                u = a.errorTransformer,
                c = a.predicate,
                l = a.logErrors,
                d = a.diffPredicate;
            if (void 0 === t) return function() {
                return function(t) {
                    return function(e) {
                        return t(e)
                    }
                }
            };
            if (e.getState && e.dispatch) return function() {
                return function(t) {
                    return function(e) {
                        return t(e)
                    }
                }
            };
            var f = [];
            return function(e) {
                var o = e.getState;
                return function(r) {
                    return function(e) {
                        if ("function" == typeof c && !c(o, e)) return r(e);
                        var t = {};
                        f.push(t), t.started = Io.timer.now(), t.startedTime = new Date, t.prevState = s(o()), t.action = e;
                        var n = void 0;
                        if (l) try {
                            n = r(e)
                        } catch (e) {
                            t.error = u(e)
                        } else n = r(e);
                        t.took = Io.timer.now() - t.started, t.nextState = s(o());
                        var i = a.diff && "function" == typeof d ? d(o, e) : a.diff;
                        if ((0, No.printBuffer)(f, h({}, a, {
                                diff: i
                            })), f.length = 0, t.error) throw t.error;
                        return n
                    }
                }
            }
        }
        var r = function() {
            var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                t = e.dispatch,
                n = e.getState;
            if ("function" == typeof t || "function" == typeof n) return i()({
                dispatch: t,
                getState: n
            })
        };
        t.defaults = n.default, t.createLogger = i, t.logger = r, t.default = r
    });
    e(Bo);
    Bo.logger, Bo.createLogger, Bo.defaults;

    function qo(u) {
        var c = {};
        return (u = u || {}).prependOn = function(e, t) {
            return u.on(e, t, !0)
        }, u.eventNames = function() {
            return Object.keys(c)
        }, u.on = function(e, t, n) {
            for (var i = 0, r = (e = [].concat(e)).length; i < r; i++) {
                var o = e[i];
                if (!o) throw new Error("Tried to listen for an undefined event.");
                c[o] || (c[o] = []), n ? c[o].unshift(t) : c[o].push(t)
            }
            return u
        }, u.once = function(e, t, n) {
            function i() {
                t.apply(u.off(e, i), arguments)
            }
            return i.handler = t, u.on(e, i, n)
        }, u.off = function(e, t) {
            if (!e) return c = {}, u;
            for (var n = 0, i = (e = [].concat(e)).length; n < i; n++) {
                var r = e[n];
                if (!r) throw new Error("Tried to remove an undefined event.");
                if (r in c)
                    if (t) {
                        var o = c[r].indexOf(t);
                        if (-1 === o)
                            for (var a = 0, s = c[r].length; a < s; a++)
                                if (c[r][a].handler === t) {
                                    o = n;
                                    break
                                }
                        if (-1 === o) return u;
                        c[r].splice(o, 1)
                    } else delete c[r]
            }
            return u
        }, u.fire = function(e) {
            if (!e) throw new Error("Tried to fire an undefined event.");
            if (e in c)
                for (var t = c[e].slice(0), n = 0, i = t.length; n < i; n++)
                    if (t[n].apply(u, t.slice.call(arguments, 1)), u.__isHalted) {
                        delete u.__isHalted;
                        break
                    }
            return u
        }, u.halt = function() {
            return u.__isHalted = !0, u
        }, u
    }
    if (window.HTMLMediaElement) {
        var Uo = HTMLMediaElement.prototype.play;
        HTMLMediaElement.prototype.play = function() {
            var e = Uo.apply(this, arguments);
            return e && e.catch(function() {}), e
        }
    }
    if ((function() {
            for (var e = ["webkit", "moz"], t = 0; t < e.length && !window.requestAnimationFrame; ++t) {
                var n = e[t];
                window.requestAnimationFrame = window[n + "RequestAnimationFrame"], window.cancelAnimationFrame = window[n + "CancelAnimationFrame"] || window[n + "CancelRequestAnimationFrame"]
            }!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) && window.requestAnimationFrame && window.cancelAnimationFrame || (window.requestAnimationFrame = function(e) {
                return setTimeout(e, 0)
            }, window.cancelAnimationFrame = clearTimeout)
        }(), Number.isInteger || (Number.isInteger = function(e) {
            return "number" == typeof e && isFinite(e) && Math.floor(e) === e
        }), "undefined" != typeof DOMTokenList) && ! function() {
            var e = document.createElement("div");
            return e.classList.toggle("test-class", !1), !e.classList.contains("test-class")
        }()) {
        var jo = DOMTokenList.prototype.toggle;
        DOMTokenList.prototype.toggle = function(e, t) {
            !0 !== t ? !1 !== t ? jo.call(this, e) : this.remove(e) : this.add(e)
        }
    }
    "function" != typeof Object.assign && (Object.assign = function(e) {
        if (null == e) throw new TypeError("Cannot convert undefined or null to object");
        for (var t = Object(e), n = 1; n < arguments.length; n++) {
            var i = arguments[n];
            if (null != i)
                for (var r in i) i.hasOwnProperty(r) && (t[r] = i[r])
        }
        return t
    }), Array.prototype.find || Object.defineProperty(Array.prototype, "find", {
        value: function(e) {
            for (var t = Object(this), n = t.length >>> 0, i = arguments[1], r = 0; r < n;) {
                var o = t[r];
                if (e.call(i, o, r, t)) return o;
                r++
            }
        }
    }), Array.prototype.findIndex || Object.defineProperty(Array.prototype, "findIndex", {
        value: function(e) {
            for (var t = Object(this), n = t.length >>> 0, i = arguments[1], r = 0; r < n;) {
                var o = t[r];
                if (e.call(i, o, r, t)) return r;
                r++
            }
            return -1
        }
    });
    var Vo = function(e) {
        var t = this.__data__,
            n = t.delete(e);
        return this.size = t.size, n
    };
    var Ho = function(e) {
        return this.__data__.get(e)
    };
    var Wo = function(e) {
        return this.__data__.has(e)
    };
    var zo = function(e, t) {
        var n = this.__data__;
        if (n instanceof Nr) {
            var i = n.__data__;
            if (!Fr || i.length < 199) return i.push([e, t]), this.size = ++n.size, this;
            n = this.__data__ = new zr(i)
        }
        return n.set(e, t), this.size = n.size, this
    };

    function Go(e) {
        var t = this.__data__ = new Nr(e);
        this.size = t.size
    }
    Go.prototype.clear = function() {
        this.__data__ = new Nr, this.size = 0
    }, Go.prototype.delete = Vo, Go.prototype.get = Ho, Go.prototype.has = Wo, Go.prototype.set = zo;
    var Yo = Go,
        Ko = function() {
            try {
                var e = mr(Object, "defineProperty");
                return e({}, "", {}), e
            } catch (e) {}
        }();
    var Xo = function(e, t, n) {
        "__proto__" == t && Ko ? Ko(e, t, {
            configurable: !0,
            enumerable: !0,
            value: n,
            writable: !0
        }) : e[t] = n
    };
    var $o = function(e, t, n) {
        (void 0 === n || Cr(e[t], n)) && (void 0 !== n || t in e) || Xo(e, t, n)
    };
    var Jo = function(u) {
            return function(e, t, n) {
                for (var i = -1, r = Object(e), o = n(e), a = o.length; a--;) {
                    var s = o[u ? a : ++i];
                    if (!1 === t(r[s], s, r)) break
                }
                return e
            }
        }(),
        Qo = t(function(e, t) {
            var n = t && !t.nodeType && t,
                i = n && e && !e.nodeType && e,
                r = i && i.exports === n ? qi.Buffer : void 0,
                o = r ? r.allocUnsafe : void 0;
            e.exports = function(e, t) {
                if (t) return e.slice();
                var n = e.length,
                    i = o ? o(n) : new e.constructor(n);
                return e.copy(i), i
            }
        }),
        Zo = qi.Uint8Array;
    var ea = function(e) {
        var t = new e.constructor(e.byteLength);
        return new Zo(t).set(new Zo(e)), t
    };
    var ta = function(e, t) {
        var n = t ? ea(e.buffer) : e.buffer;
        return new e.constructor(n, e.byteOffset, e.length)
    };
    var na = function(e, t) {
            var n = -1,
                i = e.length;
            for (t || (t = Array(i)); ++n < i;) t[n] = e[n];
            return t
        },
        ia = Object.create,
        ra = function() {
            function n() {}
            return function(e) {
                if (!tr(e)) return {};
                if (ia) return ia(e);
                n.prototype = e;
                var t = new n;
                return n.prototype = void 0, t
            }
        }();
    var oa = function(t, n) {
            return function(e) {
                return t(n(e))
            }
        },
        aa = oa(Object.getPrototypeOf, Object),
        sa = Object.prototype;
    var ua = function(e) {
        var t = e && e.constructor;
        return e === ("function" == typeof t && t.prototype || sa)
    };
    var ca = function(e) {
        return "function" != typeof e.constructor || ua(e) ? {} : ra(aa(e))
    };
    var la = function(e) {
            return $i(e) && "[object Arguments]" == Xi(e)
        },
        da = Object.prototype,
        fa = da.hasOwnProperty,
        ha = da.propertyIsEnumerable,
        va = la(function() {
            return arguments
        }()) ? la : function(e) {
            return $i(e) && fa.call(e, "callee") && !ha.call(e, "callee")
        };
    var pa = function(e) {
        return "number" == typeof e && -1 < e && e % 1 == 0 && e <= 9007199254740991
    };
    var ma = function(e) {
        return null != e && pa(e.length) && !nr(e)
    };
    var ga = function(e) {
        return $i(e) && ma(e)
    };
    var ya = function() {
            return !1
        },
        _a = t(function(e, t) {
            var n = t && !t.nodeType && t,
                i = n && e && !e.nodeType && e,
                r = i && i.exports === n ? qi.Buffer : void 0,
                o = (r ? r.isBuffer : void 0) || ya;
            e.exports = o
        }),
        ba = Function.prototype,
        wa = Object.prototype,
        Ea = ba.toString,
        Sa = wa.hasOwnProperty,
        ka = Ea.call(Object);
    var Ta = function(e) {
            if (!$i(e) || "[object Object]" != Xi(e)) return !1;
            var t = aa(e);
            if (null === t) return !0;
            var n = Sa.call(t, "constructor") && t.constructor;
            return "function" == typeof n && n instanceof n && Ea.call(n) == ka
        },
        Aa = {};
    Aa["[object Float32Array]"] = Aa["[object Float64Array]"] = Aa["[object Int8Array]"] = Aa["[object Int16Array]"] = Aa["[object Int32Array]"] = Aa["[object Uint8Array]"] = Aa["[object Uint8ClampedArray]"] = Aa["[object Uint16Array]"] = Aa["[object Uint32Array]"] = !0, Aa["[object Arguments]"] = Aa["[object Array]"] = Aa["[object ArrayBuffer]"] = Aa["[object Boolean]"] = Aa["[object DataView]"] = Aa["[object Date]"] = Aa["[object Error]"] = Aa["[object Function]"] = Aa["[object Map]"] = Aa["[object Number]"] = Aa["[object Object]"] = Aa["[object RegExp]"] = Aa["[object Set]"] = Aa["[object String]"] = Aa["[object WeakMap]"] = !1;
    var Pa = function(e) {
        return $i(e) && pa(e.length) && !!Aa[Xi(e)]
    };
    var Ca = function(t) {
            return function(e) {
                return t(e)
            }
        },
        xa = t(function(e, t) {
            var n = t && !t.nodeType && t,
                i = n && e && !e.nodeType && e,
                r = i && i.exports === n && Fi.process,
                o = function() {
                    try {
                        return r && r.binding && r.binding("util")
                    } catch (e) {}
                }();
            e.exports = o
        }),
        La = xa && xa.isTypedArray,
        Oa = La ? Ca(La) : Pa;
    var Ra = function(e, t) {
            return "__proto__" == t ? void 0 : e[t]
        },
        Ia = Object.prototype.hasOwnProperty;
    var Ma = function(e, t, n) {
        var i = e[t];
        Ia.call(e, t) && Cr(i, n) && (void 0 !== n || t in e) || Xo(e, t, n)
    };
    var Da = function(e, t, n, i) {
        var r = !n;
        n || (n = {});
        for (var o = -1, a = t.length; ++o < a;) {
            var s = t[o],
                u = i ? i(n[s], e[s], s, n, e) : void 0;
            void 0 === u && (u = e[s]), r ? Xo(n, s, u) : Ma(n, s, u)
        }
        return n
    };
    var Na = function(e, t) {
            for (var n = -1, i = Array(e); ++n < e;) i[n] = t(n);
            return i
        },
        Fa = /^(?:0|[1-9]\d*)$/;
    var Ba = function(e, t) {
            var n = typeof e;
            return !!(t = null == t ? 9007199254740991 : t) && ("number" == n || "symbol" != n && Fa.test(e)) && -1 < e && e % 1 == 0 && e < t
        },
        qa = Object.prototype.hasOwnProperty;
    var Ua = function(e, t) {
        var n = Ni(e),
            i = !n && va(e),
            r = !n && !i && _a(e),
            o = !n && !i && !r && Oa(e),
            a = n || i || r || o,
            s = a ? Na(e.length, String) : [],
            u = s.length;
        for (var c in e) !t && !qa.call(e, c) || a && ("length" == c || r && ("offset" == c || "parent" == c) || o && ("buffer" == c || "byteLength" == c || "byteOffset" == c) || Ba(c, u)) || s.push(c);
        return s
    };
    var ja = function(e) {
            var t = [];
            if (null != e)
                for (var n in Object(e)) t.push(n);
            return t
        },
        Va = Object.prototype.hasOwnProperty;
    var Ha = function(e) {
        if (!tr(e)) return ja(e);
        var t = ua(e),
            n = [];
        for (var i in e)("constructor" != i || !t && Va.call(e, i)) && n.push(i);
        return n
    };
    var Wa = function(e) {
        return ma(e) ? Ua(e, !0) : Ha(e)
    };
    var za = function(e) {
        return Da(e, Wa(e))
    };
    var Ga = function(e, t, n, i, r, o, a) {
        var s = Ra(e, n),
            u = Ra(t, n),
            c = a.get(u);
        if (c) $o(e, n, c);
        else {
            var l = o ? o(s, u, n + "", e, t, a) : void 0,
                d = void 0 === l;
            if (d) {
                var f = Ni(u),
                    h = !f && _a(u),
                    v = !f && !h && Oa(u);
                l = u, f || h || v ? l = Ni(s) ? s : ga(s) ? na(s) : h ? Qo(u, !(d = !1)) : v ? ta(u, !(d = !1)) : [] : Ta(u) || va(u) ? va(l = s) ? l = za(s) : (!tr(s) || i && nr(s)) && (l = ca(u)) : d = !1
            }
            d && (a.set(u, l), r(l, u, i, o, a), a.delete(u)), $o(e, n, l)
        }
    };
    var Ya = function i(r, o, a, s, u) {
        r !== o && Jo(o, function(e, t) {
            if (tr(e)) u || (u = new Yo), Ga(r, o, t, a, i, s, u);
            else {
                var n = s ? s(Ra(r, t), e, t + "", r, o, u) : void 0;
                void 0 === n && (n = e), $o(r, t, n)
            }
        }, Wa)
    };
    var Ka = function(e) {
        return e
    };
    var Xa = function(e, t, n) {
            switch (n.length) {
                case 0:
                    return e.call(t);
                case 1:
                    return e.call(t, n[0]);
                case 2:
                    return e.call(t, n[0], n[1]);
                case 3:
                    return e.call(t, n[0], n[1], n[2])
            }
            return e.apply(t, n)
        },
        $a = Math.max;
    var Ja = function(o, a, s) {
        return a = $a(void 0 === a ? o.length - 1 : a, 0),
            function() {
                for (var e = arguments, t = -1, n = $a(e.length - a, 0), i = Array(n); ++t < n;) i[t] = e[a + t];
                t = -1;
                for (var r = Array(a + 1); ++t < a;) r[t] = e[t];
                return r[a] = s(i), Xa(o, this, r)
            }
    };
    var Qa = function(e) {
            return function() {
                return e
            }
        },
        Za = Ko ? function(e, t) {
            return Ko(e, "toString", {
                configurable: !0,
                enumerable: !1,
                value: Qa(t),
                writable: !0
            })
        } : Ka,
        es = Date.now;
    var ts = function(n) {
        var i = 0,
            r = 0;
        return function() {
            var e = es(),
                t = 16 - (e - r);
            if (r = e, 0 < t) {
                if (800 <= ++i) return arguments[0]
            } else i = 0;
            return n.apply(void 0, arguments)
        }
    }(Za);
    var ns = function(e, t) {
        return ts(Ja(e, t, Ka), e + "")
    };
    var is = function(e, t, n) {
        if (!tr(n)) return !1;
        var i = typeof t;
        return !!("number" == i ? ma(n) && Ba(t, n.length) : "string" == i && t in n) && Cr(n[t], e)
    };
    var rs = function(s) {
            return ns(function(e, t) {
                var n = -1,
                    i = t.length,
                    r = 1 < i ? t[i - 1] : void 0,
                    o = 2 < i ? t[2] : void 0;
                for (r = 3 < s.length && "function" == typeof r ? (i--, r) : void 0, o && is(t[0], t[1], o) && (r = i < 3 ? void 0 : r, i = 1), e = Object(e); ++n < i;) {
                    var a = t[n];
                    a && s(e, a, n, r)
                }
                return e
            })
        }(function(e, t, n) {
            Ya(e, t, n)
        }),
        os = {
            badPlayback: "bad-playback",
            bufferStarted: "buffer-started",
            bufferEnded: "buffer-ended",
            spatialUnsupported: "spatial-unsupported",
            spatialFailure: "spatial-failure"
        },
        as = 1e4,
        ss = {
            PRIVACY_PUBLIC: "anybody",
            PRIVACY_NOBODY: "nobody",
            PRIVACY_FOLLOW: "contacts",
            PRIVACY_PASSWORD: "password",
            PRIVACY_USER: "users",
            PRIVACY_PURGATORY: "purgatory",
            PRIVACY_HIDE_FROM_VIMEO: "disable",
            PRIVACY_PAYTOVIEW: "ptv",
            PRIVACY_PAYTOVIEWEXTRA: "ptv_extra",
            PRIVACY_UNLISTED: "unlisted"
        },
        us = {
            h264: "video/mp4",
            hls: "application/vnd.apple.mpegurl",
            hlsLive: "application/x-mpegURL",
            dash: "application/vnd.vimeo.dash+json",
            dashMpd: "video/vnd.mpeg.dash.mpd",
            vp6: "video/x-flv",
            vp8: "video/webm",
            webm: "video/webm",
            hds: "application/f4m"
        },
        cs = {
            seek: "control-seek",
            changeVolume: "control-change-volume",
            hideOverlay: "control-hide-overlay",
            showOverlay: "control-show-overlay",
            openPopup: "control-open-popup",
            reset: "control-reset",
            changeLoop: "control-change-loop",
            changeQuality: "control-change-quality",
            openVimeo: "control-open-vimeo",
            changeColor: "control-change-color",
            disableVolume: "control-disable-volume",
            enableVolume: "control-enable-volume",
            disableCaptions: "control-disable-captions",
            enableCaptions: "control-enable-captions",
            forceFullscreen: "control-force-fullscreen",
            turnCaptionsOn: "control-turn-captions-on",
            turnCaptionsOff: "control-turn-captions-off",
            toggleNativeControls: "control-toggle-native-controls",
            showOutro: "control-show-outro",
            hideOutro: "control-hide-outro",
            activatePictureInPicture: "control-activate-picture-in-picture",
            deactivatePictureInPicture: "control-deactivate-picture-in-picture",
            attachSpatialPlaybackEvents: "control-attach-spatial-playback-events",
            toggleSpatialPlayback: "control-toggle-spatial-playback",
            revealSpatialControls: "control-reveal-spatial-controls",
            setTime: "control-set-time",
            addCard: "control-add-card",
            removeCard: "control-remove-card",
            changePlaybackRate: "control-change-playback-rate"
        },
        ls = {
            like: {
                will: "willLikeVideo",
                did: "didLikeVideo"
            },
            unlike: {
                will: "willUnlikeVideo",
                did: "didUnlikeVideo"
            },
            addToWatchLater: {
                will: "willAddToWatchLater",
                did: "didAddToWatchLater"
            },
            removeFromWatchLater: {
                will: "willRemoveFromWatchLater",
                did: "didRemoveFromWatchLater"
            },
            purchase: {
                will: "willOpenVodPurchaseForm",
                did: "didOpenVodPurchaseForm"
            },
            shareOverlay: {
                will: "willOpenShareOverlay",
                did: "didOpenShareOverlay"
            },
            loginForm: {
                will: "willOpenLoginForm",
                did: "didOpenLoginForm"
            },
            collectionsOverlay: {
                will: "willOpenCollectionsOverlay",
                did: "didOpenCollectionsOverlay"
            },
            showOutro: {
                will: "willShowOutro",
                did: "didShowOutro"
            },
            playLog: {
                will: "willSendPlayLog",
                did: "didSendPlayLog"
            }
        },
        ds = {
            apiError: "events-api-error",
            error: "events-error",
            hevcRestrictedStreams: "hevc-restricted-streams",
            paused: "events-paused",
            ended: "events-ended",
            volumeChanged: "events-volume-changed",
            qualityChanged: "events-quality-changed",
            targetTimeReached: "events-target-time-reached",
            cuepoint: "events-cuepoint",
            firstTimeUpdate: "events-first-time-update",
            playbackRateChanged: "events-playback-rate-changed",
            fullscreenButtonPressed: "events-fullscreen-button-pressed",
            pauseButtonPressed: "events-pause-button-pressed",
            playButtonPressed: "events-play-button-pressed",
            prefsButtonPressed: "events-prefs-button-pressed",
            ccButtonPressed: "events-cc-button-pressed",
            scrubbingStarted: "events-scrubbing-started",
            scrubbingEnded: "events-scrubbing-ended",
            volumeScrubbingStarted: "events-volume-scrubbing-started",
            volumeScrubbingEnded: "events-volume-scrubbing-ended",
            controlBarVisibilityChanged: "events-control-bar-visibility-changed",
            sidedockVisibilityChanged: "events-sidedock-visibility-changed",
            menuVisibilityChanged: "events-menu-visibility-changed",
            captionsChanged: "events-captions-changed",
            cuePointAdded: "events-cue-point-added",
            cuePointRemoved: "events-cue-point-removed",
            stereoscopicButtonPressed: "events-stereoscopic-button-pressed",
            menuPanelOpened: "events-menu-panel-opened",
            menuPanelClosed: "events-menu-panel-closed",
            menuCentered: "events-menu-centered",
            badgePressed: "events-badge-pressed",
            willEnterFullscreen: "events-will-enter-fullscreen",
            didEnterFullscreen: "events-did-enter-fullscreen",
            willExitFullscreen: "events-will-exit-fullscreen",
            didExitFullscreen: "events-did-exit-fullscreen",
            likeButtonPressed: "events-like-button-pressed",
            watchLaterButtonPressed: "events-watch-later-button-pressed",
            shareButtonPressed: "events-share-button-pressed",
            embedButtonPressed: "events-embed-button-pressed",
            vodButtonPressed: "events-vod-button-pressed",
            collectionsButtonPressed: "events-collections-button-pressed",
            followButtonPressed: "events-follow-button-pressed",
            overlayOpened: "events-overlay-opened",
            overlayClosed: "events-overlay-closed",
            overlayCleared: "events-overlay-cleared",
            overlayCloseButtonPressed: "events-overlay-close-button-pressed",
            facebookButtonPressed: "events-facebook-button-pressed",
            twitterButtonPressed: "events-twitter-button-pressed",
            tumblrButtonPressed: "events-tumblr-button-pressed",
            emailButtonPressed: "events-email-button-pressed",
            embedCodeCopied: "events-embed-code-copied",
            popupOpened: "events-popup-opened",
            debugButtonPressed: "events-debug-button-pressed",
            emailCaptureSubmitted: "events-email-capture-submitted",
            popupClosed: "events-popup-closed",
            shareViewShown: "events-share-view-shown",
            embedViewShown: "events-embed-view-shown",
            shareViewEnd: "events-share-view-end",
            embedViewEnd: "events-embed-view-end",
            mousedOut: "events-moused-out",
            mousedOver: "events-moused-over",
            mouseTimeout: "events-mouse-timeout",
            liked: "events-liked",
            unliked: "events-unliked",
            addedToWatchLater: "events-added-to-watch-later",
            removedFromWatchLater: "events-removed-from-watch-later",
            userLogIn: "events-user-log-in",
            userLoggedIn: "events-user-logged-in",
            userLoggedOut: "events-user-logged-out",
            loginFailure: "events-login-failure",
            colorChanged: "events-color-changed",
            configChanged: "events-config-changed",
            passwordUnlocked: "events-password-unlocked",
            privateUnlocked: "events-private-unlocked",
            enteredTinyMode: "events-entered-tiny-mode",
            enteredMiniMode: "events-entered-mini-mode",
            enteredNormalMode: "events-entered-normal-mode",
            signatureExpired: "events-signature-expired",
            requestConfigReloaded: "events-request-config-reloaded",
            embedSettingChanged: "events-embed-setting-changed",
            outroDisplayed: "events-outro-displayed",
            outroHidden: "events-outro-hidden",
            outroVideoPressed: "events-outro-video-pressed",
            becameActive: "events-became-active",
            becameInactive: "events-became-inactive",
            tipped: "events-tipped",
            emailCaptureSuccess: "events-email-capture-success",
            loadVideo: "events-load-video",
            outroLinkPressed: "events-outro-link-pressed",
            errorLinkPressed: "events-error-link-pressed",
            followed: "events-followed",
            unfollowed: "events-unfollowed",
            outroImagePressed: "events-outro-image-pressed",
            outroCtaPressed: "events-outro-cta-pressed",
            hudDisplayed: "events-hud-displayed",
            hudHidden: "events-hud-hidden",
            cardDisplayed: "events-card-displayed",
            cardPressed: "events-card-pressed",
            spaceChanged: "events-space-changed",
            emailCaptureEnd: "events-email-capture-end",
            titleModuleReady: "events-title-module-ready",
            sidedockModuleReady: "events-sidedock-module-ready",
            controlBarModuleReady: "events-control-bar-module-ready",
            videoModuleReady: "events-video-module-ready",
            overlayModuleReady: "events-overlay-module-ready",
            notificationModuleReady: "events-notification-module-ready",
            statsModuleReady: "events-stats-module-ready",
            apiModuleReady: "events-api-module-ready",
            ready: "events-ready",
            telecineReady: "events-telecine-ready",
            notificationHidden: "events-notification-hidden",
            alertVisibilityChanged: "events-alert-visibility-changed",
            airPlayAvailable: "events-air-play-available",
            airPlayNotAvailable: "events-air-play-not-available",
            airPlayActivated: "events-air-play-activated",
            airPlayDeactivated: "events-air-play-deactivated",
            airPlayButtonPressed: "events-air-play-button-pressed"
        },
        fs = "done",
        hs = {
            pending: "pending",
            active: "active",
            started: "started",
            ended: "ended"
        },
        vs = {
            "application/vnd.apple.mpegurl": "hls",
            "application/vnd.vimeo.dash+json": "dash",
            "video/mp4": "progressive",
            "video/webm": "progressive",
            "video/x-flv": "progressive",
            "video/vnd.mpeg.dash.mpd": "live",
            "application/x-mpegURL": "hlslive"
        },
        ps = "likes",
        ms = "watchlater",
        gs = "following",
        ys = {
            low: .5,
            high: 2
        },
        _s = {
            HTMLScanner: "html",
            MediaSourceScanner: "html",
            LiveScanner: "html",
            SWFScanner: "flash"
        },
        bs = {
            main: 1,
            privateLocked: 2,
            privateUnlocked: 3,
            privatePassword: 4,
            error: 7,
            contentRating: 9
        },
        ws = {
            BUFFER_END: "bufferend",
            BUFFER_START: "bufferstart",
            CONTROL_BAR_VISIBILITY_CHANGED: "controlbarvisibilitychanged",
            CUE_CHANGE: "cuechange",
            CUEPOINT: "cuepoint",
            ENDED: "ended",
            ERROR: "error",
            LIVE_EVENT_ENDED: "liveeventended",
            LIVE_EVENT_STARTED: "liveeventstarted",
            LIVE_STREAM_OFFLINE: "livestreamoffline",
            LIVE_STREAM_ONLINE: "livestreamonline",
            LOADED: "loaded",
            MOTION_END: "motionend",
            MOTION_START: "motionstart",
            PAUSE: "pause",
            PLAY: "play",
            PLAYBACK_RATE_CHANGE: "playbackratechange",
            PROGRESS: "progress",
            READY: "ready",
            SEEKED: "seeked",
            TEXT_TRACK_CHANGE: "texttrackchange",
            TIME_UPDATE: "timeupdate",
            VOLUME_CHANGE: "volumechange"
        },
        Es = {
            onFinish: "ended",
            onLoading: "progress",
            onLoad: "ready",
            onProgress: "timeupdate",
            onPlay: "play",
            onPause: "pause",
            onSeek: "seeked"
        },
        Ss = {
            playProgress: "timeupdate",
            loadProgress: "progress",
            finish: "ended",
            seek: "seeked"
        };
    var ks = function(e) {
        return "string" == typeof e || !Ni(e) && $i(e) && "[object String]" == Xi(e)
    };

    function Ts() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[n];
        return t.reduce(function(e, t) {
            return function() {
                return e(t.apply(void 0, arguments))
            }
        })
    }
    var As = function(e) {
            for (var t = this, n = arguments.length, i = Array(1 < n ? n - 1 : 0), r = 1; r < n; r++) i[r - 1] = arguments[r];
            return function i(r) {
                return r.length >= e.length ? e.apply(t, r) : function() {
                    for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                    return i([].concat(r, t))
                }
            }(i)
        }(function(t, n) {
            return Object.keys(t).every(function(e) {
                return t[e] === n[e]
            })
        }),
        Ps = function() {
            var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : [];
            return {
                get: function(e) {
                    return e ? t.find(As(e)) : t
                },
                insert: function(e) {
                    return (t = t.concat(e)).slice(-1).pop()
                },
                getOrInsert: function(e) {
                    return this.get(e) || this.insert(e)
                },
                remove: function(e) {
                    return t.splice(t.findIndex(As(e)), 1).pop()
                }
            }
        };

    function Cs(e, t) {
        var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : document.styleSheets[0];
        try {
            n.insertRule ? n.insertRule(e + "{" + t + "}", (n.cssRules || n.rules).length) : n.addRule(e, t)
        } catch (e) {}
    }

    function xs() {
        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : document.activeElement,
            t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null;
        try {
            e.blur()
        } catch (e) {
            t && t(e)
        }
    }

    function Ls(e) {
        var t = e.getBoundingClientRect();
        return document.msFullscreenElement && window.parent !== window && e.offsetWidth < e.clientWidth && (t = {
            bottom: 100 * t.bottom,
            left: 100 * t.left,
            top: 100 * t.top,
            right: 100 * t.right,
            width: 100 * t.width,
            height: 100 * t.height
        }), t
    }

    function Os(e) {
        try {
            return new URL(e).origin
        } catch (e) {}
        var t = document.createElement("a");
        return t.href = e, t.origin ? t.origin : t.protocol.replace(":", "") + "://" + t.host
    }

    function Rs(e) {
        var t = e.width,
            n = e.height,
            i = e.elementWidth,
            r = e.elementHeight,
            o = e.threshold,
            a = void 0 === o ? 10 : o,
            s = 1,
            u = t / n,
            c = i - r * u,
            l = r - i / u;
        if (0 < c && c < a || 0 < l && l < a) {
            var d = i / (i - c),
                f = r / (r - l);
            s = Math.max(d, f)
        }
        return {
            extraWidth: c,
            extraHeight: l,
            scaleFactor: s
        }
    }

    function Is(e, t, n) {
        return n < e ? n : e < t ? t : e
    }

    function Ms(e, t, n) {
        var i = n.width,
            r = n.height,
            o = n.scrollbars,
            a = void 0 === o ? "yes" : o,
            s = n.resizable,
            u = void 0 === s ? "yes" : s,
            c = n.toolbar,
            l = void 0 === c ? "no" : c,
            d = (window.screenY || window.screenTop || 0) + window.outerHeight / 2 - r / 2,
            f = (window.screenX || window.screenLeft || 0) + window.outerWidth / 2 - i / 2;
        window.chrome && -1 !== window.navigator.userAgent.toLowerCase().indexOf("mac os x") && (r += 27), window.safari && (r += 47);
        var h = "scrollbars=" + a + ",resizable=" + u + ",toolbar=" + l;
        return window.open(e, t, "width=" + i + ",height=" + r + ",left=" + f + ",top=" + d + "," + h)
    }

    function Ds(e) {
        var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
            n = t.method,
            r = void 0 === n ? "GET" : n,
            i = t.withCredentials,
            o = void 0 === i || i,
            a = t.allowErrorStatuses,
            s = void 0 !== a && a,
            u = t.jwt,
            c = void 0 !== u && u;
        return new I(function(t, n) {
            var i = new XMLHttpRequest;
            i.open(r, e, !0), o && (i.withCredentials = !0), c && i.setRequestHeader("Authorization", "jwt " + c), i.onload = function() {
                if (400 <= i.status && !s) {
                    var e = {
                        403: "Forbidden",
                        404: "Not Found",
                        500: "Internal Server Error"
                    };
                    return e[i.status] ? void n(new Error(e[i.status])) : void n(new Error("Request returned non-200 status code: " + i.status))
                }
                t(i.responseText)
            }, i.onerror = function() {
                return n(new Error("The request failed."))
            }, i.send()
        })
    }

    function Ns(e) {
        for (var t, n, i = (e || document).querySelectorAll("[tabindex]"), r = [], o = 0, a = 0, s = i.length; a < s; a++) t = i[a], n = window.getComputedStyle(t, ""), 0 < t.tabIndex && "none" !== n.display && 0 < n.opacity && "hidden" !== n.visibility && (r[o++] = t);
        var u = r.shift();
        u && (u.focus(), u.blur())
    }

    function Fs(e, t) {
        if (e = parseFloat(e), isNaN(e)) return 0;
        var n = Math.pow(10, t || 3);
        return Math.round(e * n) / n
    }

    function Bs(e, t) {
        return -1 !== ke(t).indexOf(e)
    }

    function qs(e) {
        return e ? ke(e.parentNode.children).indexOf(e) : -1
    }
    var Us = Ts(qs, function(e, t) {
        for (; e && e.parentElement && !Bs(e, t);) e = e.parentElement;
        return Bs(e, t) ? e : null
    });
    var js = function(e) {
        return e + "px"
    };

    function Vs(e) {
        for (var t = Object.keys(e), n = t.length, i = [], r = 0; r < n;) i[r] = e[t[r]], r += 1;
        return i
    }
    var Hs = {
            isObject: function(e) {
                return "object" == typeof e && null !== e
            },
            isError: function(e) {
                switch ({}.toString.call(e)) {
                    case "[object Error]":
                    case "[object Exception]":
                    case "[object DOMException]":
                        return !0;
                    default:
                        return e instanceof Error
                }
            }
        },
        Ws = {
            collectWindowErrors: !0,
            debug: !1
        },
        zs = "undefined" != typeof window ? window : void 0 !== s ? s : "undefined" != typeof self ? self : {},
        Gs = [].slice,
        Ys = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;

    function Ks() {
        return "undefined" == typeof document || void 0 === document.location ? "" : document.location.href
    }
    Ws.report = function() {
        var c, t, r = [],
            o = null,
            a = null,
            l = null;

        function d(e, t) {
            var n = null;
            if (!t || Ws.collectWindowErrors) {
                for (var i in r)
                    if (r.hasOwnProperty(i)) try {
                        r[i].apply(null, [e].concat(Gs.call(arguments, 2)))
                    } catch (e) {
                        n = e
                    }
                if (n) throw n
            }
        }

        function n(e, t, n, i, r) {
            if (l) Ws.computeStackTrace.augmentStackTraceWithInitialElement(l, t, n, e), f();
            else if (r && Hs.isError(r)) d(Ws.computeStackTrace(r), !0);
            else {
                var o, a = {
                        url: t,
                        line: n,
                        column: i
                    },
                    s = void 0,
                    u = e;
                if ("[object String]" === {}.toString.call(e))(o = e.match(Ys)) && (s = o[1], u = o[2]);
                a.func = "?", d({
                    name: s,
                    message: u,
                    url: Ks(),
                    stack: [a]
                }, !0)
            }
            return !!c && c.apply(this, arguments)
        }

        function f() {
            var e = l,
                t = o;
            d.apply(a = l = o = null, [e, !1].concat(t))
        }

        function e(e, t) {
            var n = Gs.call(arguments, 1);
            if (l) {
                if (a === e) return;
                f()
            }
            var i = Ws.computeStackTrace(e);
            if (l = i, a = e, o = n, setTimeout(function() {
                    a === e && f()
                }, i.incomplete ? 2e3 : 0), !1 !== t) throw e
        }
        return e.subscribe = function(e) {
            t || (c = zs.onerror, zs.onerror = n, t = !0), r.push(e)
        }, e.unsubscribe = function(e) {
            for (var t = r.length - 1; 0 <= t; --t) r[t] === e && r.splice(t, 1)
        }, e.uninstall = function() {
            t && (zs.onerror = c, t = !1, c = void 0), r = []
        }, e
    }(), Ws.computeStackTrace = function() {
        function i(e) {
            if (void 0 !== e.stack && e.stack) {
                for (var t, n, i, r = /^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i, o = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i, a = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i, s = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i, u = /\((\S*)(?::(\d+))(?::(\d+))\)/, c = e.stack.split("\n"), l = [], d = (/^(.*) is undefined$/.exec(e.message), 0), f = c.length; d < f; ++d) {
                    if (n = r.exec(c[d])) {
                        var h = n[2] && 0 === n[2].indexOf("native");
                        n[2] && 0 === n[2].indexOf("eval") && (t = u.exec(n[2])) && (n[2] = t[1], n[3] = t[2], n[4] = t[3]), i = {
                            url: h ? null : n[2],
                            func: n[1] || "?",
                            args: h ? [n[2]] : [],
                            line: n[3] ? +n[3] : null,
                            column: n[4] ? +n[4] : null
                        }
                    } else if (n = a.exec(c[d])) i = {
                        url: n[2],
                        func: n[1] || "?",
                        args: [],
                        line: +n[3],
                        column: n[4] ? +n[4] : null
                    };
                    else {
                        if (!(n = o.exec(c[d]))) continue;
                        n[3] && -1 < n[3].indexOf(" > eval") && (t = s.exec(n[3])) ? (n[3] = t[1], n[4] = t[2], n[5] = null) : 0 !== d || n[5] || void 0 === e.columnNumber || (l[0].column = e.columnNumber + 1), i = {
                            url: n[3],
                            func: n[1] || "?",
                            args: n[2] ? n[2].split(",") : [],
                            line: n[4] ? +n[4] : null,
                            column: n[5] ? +n[5] : null
                        }
                    }!i.func && i.line && (i.func = "?"), l.push(i)
                }
                return l.length ? {
                    name: e.name,
                    message: e.message,
                    url: Ks(),
                    stack: l
                } : null
            }
        }

        function l(e, t, n, i) {
            var r = {
                url: t,
                line: n
            };
            if (r.url && r.line) {
                if (e.incomplete = !1, r.func || (r.func = "?"), 0 < e.stack.length && e.stack[0].url === r.url) {
                    if (e.stack[0].line === r.line) return !1;
                    if (!e.stack[0].line && e.stack[0].func === r.func) return e.stack[0].line = r.line, !1
                }
                return e.stack.unshift(r), e.partial = !0
            }
            return !(e.incomplete = !0)
        }

        function d(e, t) {
            for (var n, i, r = /function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i, o = [], a = {}, s = !1, u = d.caller; u && !s; u = u.caller)
                if (u !== f && u !== Ws.report) {
                    if (i = {
                            url: null,
                            func: "?",
                            line: null,
                            column: null
                        }, u.name ? i.func = u.name : (n = r.exec(u.toString())) && (i.func = n[1]), void 0 === i.func) try {
                        i.func = n.input.substring(0, n.input.indexOf("{"))
                    } catch (e) {}
                    a["" + u] ? s = !0 : a["" + u] = !0, o.push(i)
                }
            t && o.splice(0, t);
            var c = {
                name: e.name,
                message: e.message,
                url: Ks(),
                stack: o
            };
            return l(c, e.sourceURL || e.fileName, e.line || e.lineNumber, e.message || e.description), c
        }

        function f(e, t) {
            var n = null;
            t = null == t ? 0 : +t;
            try {
                if (n = i(e)) return n
            } catch (e) {}
            try {
                if (n = d(e, t + 1)) return n
            } catch (e) {}
            return {
                name: e.name,
                message: e.message,
                url: Ks()
            }
        }
        return f.augmentStackTraceWithInitialElement = l, f.computeStackTraceFromStackProp = i, f
    }();
    var Xs = Ws,
        $s = t(function(e, t) {
            function s(e, t) {
                for (var n = 0; n < e.length; ++n)
                    if (e[n] === t) return n;
                return -1
            }

            function r(i, r) {
                var o = [],
                    a = [];
                return null == r && (r = function(e, t) {
                        return o[0] === t ? "[Circular ~]" : "[Circular ~." + a.slice(0, s(o, t)).join(".") + "]"
                    }),
                    function(e, t) {
                        if (0 < o.length) {
                            var n = s(o, this);
                            ~n ? o.splice(n + 1) : o.push(this), ~n ? a.splice(n, 1 / 0, e) : a.push(e), ~s(o, t) && (t = r.call(this, e, t))
                        } else o.push(t);
                        return null == i ? t : i.call(this, e, t)
                    }
            }(e.exports = function(e, t, n, i) {
                return JSON.stringify(e, r(t, i), n)
            }).getSerialize = r
        });
    $s.getSerialize;

    function Js(e) {
        this.name = "RavenConfigError", this.message = e
    }
    var Qs = (Js.prototype = new Error).constructor = Js,
        Zs = function(e, t, n) {
            var i = e[t],
                r = e;
            if (t in e) {
                var o = "warn" === t ? "warning" : t;
                e[t] = function() {
                    var e = [].slice.call(arguments),
                        t = "" + e.join(" ");
                    n && n(t, {
                        level: o,
                        logger: "console",
                        extra: {
                            arguments: e
                        }
                    }), i && Function.prototype.apply.call(i, r, e)
                }
            }
        },
        eu = Hs.isError,
        tu = Hs.isObject,
        nu = Zs,
        iu = "source protocol user pass host port path".split(" "),
        ru = /^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;

    function ou() {
        return +new Date
    }
    var au = "undefined" != typeof window ? window : void 0 !== s ? s : "undefined" != typeof self ? self : {},
        su = au.document,
        uu = au.navigator;

    function cu() {
        for (var e in this._hasJSON = !("object" != typeof JSON || !JSON.stringify), this._hasDocument = !du(su), this._hasNavigator = !du(uu), this._lastCapturedException = null, this._lastData = null, this._lastEventId = null, this._globalServer = null, this._globalKey = null, this._globalProject = null, this._globalContext = {}, this._globalOptions = {
                logger: "javascript",
                ignoreErrors: [],
                ignoreUrls: [],
                whitelistUrls: [],
                includePaths: [],
                crossOrigin: "anonymous",
                collectWindowErrors: !0,
                maxMessageLength: 0,
                maxUrlLength: 250,
                stackTraceLimit: 50,
                autoBreadcrumbs: !0,
                sampleRate: 1
            }, this._ignoreOnError = 0, this._isRavenInstalled = !1, this._originalErrorStackTraceLimit = Error.stackTraceLimit, this._originalConsole = au.console || {}, this._originalConsoleMethods = {}, this._plugins = [], this._startTime = ou(), this._wrappedBuiltIns = [], this._breadcrumbs = [], this._lastCapturedEvent = null, this._keypressTimeout, this._location = au.location, this._lastHref = this._location && this._location.href, this._resetBackoff(), this._originalConsole) this._originalConsoleMethods[e] = this._originalConsole[e]
    }
    cu.prototype = {
        VERSION: "3.14.2",
        debug: !1,
        TraceKit: Xs,
        config: function(e, t) {
            var n = this;
            if (n._globalServer) return this._logDebug("error", "Error: Raven has already been configured"), n;
            if (!e) return n;
            var i = n._globalOptions;
            t && pu(t, function(e, t) {
                "tags" === e || "extra" === e || "user" === e ? n._globalContext[e] = t : i[e] = t
            }), n.setDSN(e), i.ignoreErrors.push(/^Script error\.?$/), i.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/), i.ignoreErrors = _u(i.ignoreErrors), i.ignoreUrls = !!i.ignoreUrls.length && _u(i.ignoreUrls), i.whitelistUrls = !!i.whitelistUrls.length && _u(i.whitelistUrls), i.includePaths = _u(i.includePaths), i.maxBreadcrumbs = Math.max(0, Math.min(i.maxBreadcrumbs || 100, 100));
            var r = {
                    xhr: !0,
                    console: !0,
                    dom: !0,
                    location: !0
                },
                o = i.autoBreadcrumbs;
            return "[object Object]" === {}.toString.call(o) ? o = mu(r, o) : !1 !== o && (o = r), i.autoBreadcrumbs = o, Xs.collectWindowErrors = !!i.collectWindowErrors, n
        },
        install: function() {
            var e = this;
            return e.isSetup() && !e._isRavenInstalled && (Xs.report.subscribe(function() {
                e._handleOnErrorStackInfo.apply(e, arguments)
            }), e._instrumentTryCatch(), e._globalOptions.autoBreadcrumbs && e._instrumentBreadcrumbs(), e._drainPlugins(), e._isRavenInstalled = !0), Error.stackTraceLimit = e._globalOptions.stackTraceLimit, this
        },
        setDSN: function(e) {
            var t = this,
                n = t._parseDSN(e),
                i = n.path.lastIndexOf("/"),
                r = n.path.substr(1, i);
            t._dsn = e, t._globalKey = n.user, t._globalSecret = n.pass && n.pass.substr(1), t._globalProject = n.path.substr(i + 1), t._globalServer = t._getGlobalServer(n), t._globalEndpoint = t._globalServer + "/" + r + "api/" + t._globalProject + "/store/", this._resetBackoff()
        },
        context: function(e, t, n) {
            return fu(e) && (n = t || [], t = e, e = void 0), this.wrap(e, t).apply(this, n)
        },
        wrap: function(i, r, o) {
            var a = this;
            if (du(r) && !fu(i)) return i;
            if (fu(i) && (r = i, i = void 0), !fu(r)) return r;
            try {
                if (r.__raven__) return r;
                if (r.__raven_wrapper__) return r.__raven_wrapper__
            } catch (e) {
                return r
            }

            function e() {
                var e = [],
                    t = arguments.length,
                    n = !i || i && !1 !== i.deep;
                for (o && fu(o) && o.apply(this, arguments); t--;) e[t] = n ? a.wrap(i, arguments[t]) : arguments[t];
                try {
                    return r.apply(this, e)
                } catch (e) {
                    throw a._ignoreNextOnError(), a.captureException(e, i), e
                }
            }
            for (var t in r) yu(r, t) && (e[t] = r[t]);
            return e.prototype = r.prototype, (r.__raven_wrapper__ = e).__raven__ = !0, e.__inner__ = r, e
        },
        uninstall: function() {
            return Xs.report.uninstall(), this._restoreBuiltIns(), Error.stackTraceLimit = this._originalErrorStackTraceLimit, this._isRavenInstalled = !1, this
        },
        captureException: function(t, e) {
            if (!eu(t)) return this.captureMessage(t, mu({
                trimHeadFrames: 1,
                stacktrace: !0
            }, e));
            this._lastCapturedException = t;
            try {
                var n = Xs.computeStackTrace(t);
                this._handleStackInfo(n, e)
            } catch (e) {
                if (t !== e) throw e
            }
            return this
        },
        captureMessage: function(e, t) {
            if (!this._globalOptions.ignoreErrors.test || !this._globalOptions.ignoreErrors.test(e)) {
                var n = mu({
                    message: e + ""
                }, t = t || {});
                if (this._globalOptions.stacktrace || t && t.stacktrace) {
                    var i;
                    try {
                        throw new Error(e)
                    } catch (e) {
                        i = e
                    }
                    i.name = null, t = mu({
                        fingerprint: e,
                        trimHeadFrames: (t.trimHeadFrames || 0) + 1
                    }, t);
                    var r = Xs.computeStackTrace(i),
                        o = this._prepareFrames(r, t);
                    n.stacktrace = {
                        frames: o.reverse()
                    }
                }
                return this._send(n), this
            }
        },
        captureBreadcrumb: function(e) {
            var t = mu({
                timestamp: ou() / 1e3
            }, e);
            if (fu(this._globalOptions.breadcrumbCallback)) {
                var n = this._globalOptions.breadcrumbCallback(t);
                if (tu(n) && !vu(n)) t = n;
                else if (!1 === n) return this
            }
            return this._breadcrumbs.push(t), this._breadcrumbs.length > this._globalOptions.maxBreadcrumbs && this._breadcrumbs.shift(), this
        },
        addPlugin: function(e) {
            var t = [].slice.call(arguments, 1);
            return this._plugins.push([e, t]), this._isRavenInstalled && this._drainPlugins(), this
        },
        setUserContext: function(e) {
            return this._globalContext.user = e, this
        },
        setExtraContext: function(e) {
            return this._mergeContext("extra", e), this
        },
        setTagsContext: function(e) {
            return this._mergeContext("tags", e), this
        },
        clearContext: function() {
            return this._globalContext = {}, this
        },
        getContext: function() {
            return JSON.parse($s(this._globalContext))
        },
        setEnvironment: function(e) {
            return this._globalOptions.environment = e, this
        },
        setRelease: function(e) {
            return this._globalOptions.release = e, this
        },
        setDataCallback: function(t) {
            var n = this._globalOptions.dataCallback;
            return this._globalOptions.dataCallback = fu(t) ? function(e) {
                return t(e, n)
            } : t, this
        },
        setBreadcrumbCallback: function(t) {
            var n = this._globalOptions.breadcrumbCallback;
            return this._globalOptions.breadcrumbCallback = fu(t) ? function(e) {
                return t(e, n)
            } : t, this
        },
        setShouldSendCallback: function(t) {
            var n = this._globalOptions.shouldSendCallback;
            return this._globalOptions.shouldSendCallback = fu(t) ? function(e) {
                return t(e, n)
            } : t, this
        },
        setTransport: function(e) {
            return this._globalOptions.transport = e, this
        },
        lastException: function() {
            return this._lastCapturedException
        },
        lastEventId: function() {
            return this._lastEventId
        },
        isSetup: function() {
            return !!this._hasJSON && (!!this._globalServer || (this.ravenNotConfiguredError || (this.ravenNotConfiguredError = !0, this._logDebug("error", "Error: Raven has not been configured.")), !1))
        },
        afterLoad: function() {
            var e = au.RavenConfig;
            e && this.config(e.dsn, e.config).install()
        },
        showReportDialog: function(e) {
            if (su) {
                var t = (e = e || {}).eventId || this.lastEventId();
                if (!t) throw new Qs("Missing eventId");
                var n = e.dsn || this._dsn;
                if (!n) throw new Qs("Missing DSN");
                var i = encodeURIComponent,
                    r = "";
                r += "?eventId=" + i(t), r += "&dsn=" + i(n);
                var o = e.user || this._globalContext.user;
                o && (o.name && (r += "&name=" + i(o.name)), o.email && (r += "&email=" + i(o.email)));
                var a = this._getGlobalServer(this._parseDSN(n)),
                    s = su.createElement("script");
                s.async = !0, s.src = a + "/api/embed/error-page/" + r, (su.head || su.body).appendChild(s)
            }
        },
        _ignoreNextOnError: function() {
            var e = this;
            this._ignoreOnError += 1, setTimeout(function() {
                e._ignoreOnError -= 1
            })
        },
        _triggerEvent: function(e, t) {
            var n, i;
            if (this._hasDocument) {
                for (i in t = t || {}, e = "raven" + e.substr(0, 1).toUpperCase() + e.substr(1), su.createEvent ? (n = su.createEvent("HTMLEvents")).initEvent(e, !0, !0) : (n = su.createEventObject()).eventType = e, t) yu(t, i) && (n[i] = t[i]);
                if (su.createEvent) su.dispatchEvent(n);
                else try {
                    su.fireEvent("on" + n.eventType.toLowerCase(), n)
                } catch (e) {}
            }
        },
        _breadcrumbEventHandler: function(n) {
            var i = this;
            return function(e) {
                if (i._keypressTimeout = null, i._lastCapturedEvent !== e) {
                    var t;
                    i._lastCapturedEvent = e;
                    try {
                        t = function(e) {
                            var t, n = [],
                                i = 0,
                                r = 0,
                                o = " > ".length;
                            for (; e && i++ < 5 && !("html" === (t = wu(e)) || 1 < i && 80 <= r + n.length * o + t.length);) n.push(t), r += t.length, e = e.parentNode;
                            return n.reverse().join(" > ")
                        }(e.target)
                    } catch (e) {
                        t = "<unknown>"
                    }
                    i.captureBreadcrumb({
                        category: "ui." + n,
                        message: t
                    })
                }
            }
        },
        _keypressEventHandler: function() {
            var r = this;
            return function(e) {
                var t;
                try {
                    t = e.target
                } catch (e) {
                    return
                }
                var n = t && t.tagName;
                if (n && ("INPUT" === n || "TEXTAREA" === n || t.isContentEditable)) {
                    var i = r._keypressTimeout;
                    i || r._breadcrumbEventHandler("input")(e), clearTimeout(i), r._keypressTimeout = setTimeout(function() {
                        r._keypressTimeout = null
                    }, 1e3)
                }
            }
        },
        _captureUrlChange: function(e, t) {
            var n = bu(this._location.href),
                i = bu(t),
                r = bu(e);
            this._lastHref = t, n.protocol === i.protocol && n.host === i.host && (t = i.relative), n.protocol === r.protocol && n.host === r.host && (e = r.relative), this.captureBreadcrumb({
                category: "navigation",
                data: {
                    to: t,
                    from: e
                }
            })
        },
        _instrumentTryCatch: function() {
            var c = this,
                t = c._wrappedBuiltIns;

            function e(o) {
                return function(e, t) {
                    for (var n = new Array(arguments.length), i = 0; i < n.length; ++i) n[i] = arguments[i];
                    var r = n[0];
                    return fu(r) && (n[0] = c.wrap(r)), o.apply ? o.apply(this, n) : o(n[0], n[1])
                }
            }
            var l = this._globalOptions.autoBreadcrumbs;

            function n(u) {
                var e = au[u] && au[u].prototype;
                e && e.hasOwnProperty && e.hasOwnProperty("addEventListener") && (ku(e, "addEventListener", function(s) {
                    return function(e, t, n, i) {
                        try {
                            t && t.handleEvent && (t.handleEvent = c.wrap(t.handleEvent))
                        } catch (e) {}
                        var r, o, a;
                        return l && l.dom && ("EventTarget" === u || "Node" === u) && (o = c._breadcrumbEventHandler("click"), a = c._keypressEventHandler(), r = function(e) {
                            if (e) {
                                var t;
                                try {
                                    t = e.type
                                } catch (e) {
                                    return
                                }
                                return "click" === t ? o(e) : "keypress" === t ? a(e) : void 0
                            }
                        }), s.call(this, e, c.wrap(t, void 0, r), n, i)
                    }
                }, t), ku(e, "removeEventListener", function(r) {
                    return function(e, t, n, i) {
                        try {
                            t = t && (t.__raven_wrapper__ ? t.__raven_wrapper__ : t)
                        } catch (e) {}
                        return r.call(this, e, t, n, i)
                    }
                }, t))
            }
            ku(au, "setTimeout", e, t), ku(au, "setInterval", e, t), au.requestAnimationFrame && ku(au, "requestAnimationFrame", function(t) {
                return function(e) {
                    return t(c.wrap(e))
                }
            }, t);
            for (var i = ["EventTarget", "Window", "Node", "ApplicationCache", "AudioTrackList", "ChannelMergerNode", "CryptoOperation", "EventSource", "FileReader", "HTMLUnknownElement", "IDBDatabase", "IDBRequest", "IDBTransaction", "KeyOperation", "MediaController", "MessagePort", "ModalWindow", "Notification", "SVGElementInstance", "Screen", "TextTrack", "TextTrackCue", "TextTrackList", "WebSocket", "WebSocketWorker", "Worker", "XMLHttpRequest", "XMLHttpRequestEventTarget", "XMLHttpRequestUpload"], r = 0; r < i.length; r++) n(i[r])
        },
        _instrumentBreadcrumbs: function() {
            var c = this,
                e = this._globalOptions.autoBreadcrumbs,
                t = c._wrappedBuiltIns;

            function a(e, t) {
                e in t && fu(t[e]) && ku(t, e, function(e) {
                    return c.wrap(e)
                })
            }
            if (e.xhr && "XMLHttpRequest" in au) {
                var n = XMLHttpRequest.prototype;
                ku(n, "open", function(n) {
                    return function(e, t) {
                        return hu(t) && -1 === t.indexOf(c._globalKey) && (this.__raven_xhr = {
                            method: e,
                            url: t,
                            status_code: null
                        }), n.apply(this, arguments)
                    }
                }, t), ku(n, "send", function(o) {
                    return function(e) {
                        var t = this;

                        function n() {
                            if (t.__raven_xhr && (1 === t.readyState || 4 === t.readyState)) {
                                try {
                                    t.__raven_xhr.status_code = t.status
                                } catch (e) {}
                                c.captureBreadcrumb({
                                    type: "http",
                                    category: "xhr",
                                    data: t.__raven_xhr
                                })
                            }
                        }
                        for (var i = ["onload", "onerror", "onprogress"], r = 0; r < i.length; r++) a(i[r], t);
                        return "onreadystatechange" in t && fu(t.onreadystatechange) ? ku(t, "onreadystatechange", function(e) {
                            return c.wrap(e, void 0, n)
                        }) : t.onreadystatechange = n, o.apply(this, arguments)
                    }
                }, t)
            }
            e.xhr && "fetch" in au && ku(au, "fetch", function(u) {
                return function(e, t) {
                    for (var n = new Array(arguments.length), i = 0; i < n.length; ++i) n[i] = arguments[i];
                    var r, o = n[0],
                        a = "GET";
                    "string" == typeof o ? r = o : (r = o.url, o.method && (a = o.method)), n[1] && n[1].method && (a = n[1].method);
                    var s = {
                        method: a,
                        url: r,
                        status_code: null
                    };
                    return c.captureBreadcrumb({
                        type: "http",
                        category: "fetch",
                        data: s
                    }), u.apply(this, n).then(function(e) {
                        return s.status_code = e.status, e
                    })
                }
            }, t), e.dom && this._hasDocument && (su.addEventListener ? (su.addEventListener("click", c._breadcrumbEventHandler("click"), !1), su.addEventListener("keypress", c._keypressEventHandler(), !1)) : (su.attachEvent("onclick", c._breadcrumbEventHandler("click")), su.attachEvent("onkeypress", c._keypressEventHandler())));
            var i = au.chrome,
                r = !(i && i.app && i.app.runtime) && au.history && history.pushState;
            if (e.location && r) {
                var o = au.onpopstate;
                au.onpopstate = function() {
                    var e = c._location.href;
                    if (c._captureUrlChange(c._lastHref, e), o) return o.apply(this, arguments)
                }, ku(history, "pushState", function(t) {
                    return function() {
                        var e = 2 < arguments.length ? arguments[2] : void 0;
                        return e && c._captureUrlChange(c._lastHref, e + ""), t.apply(this, arguments)
                    }
                }, t)
            }
            if (e.console && "console" in au && console.log) {
                var s = function(e, t) {
                    c.captureBreadcrumb({
                        message: e,
                        level: t.level,
                        category: "console"
                    })
                };
                pu(["debug", "info", "warn", "error", "log"], function(e, t) {
                    nu(console, t, s)
                })
            }
        },
        _restoreBuiltIns: function() {
            for (var e; this._wrappedBuiltIns.length;) {
                var t = (e = this._wrappedBuiltIns.shift())[0],
                    n = e[1],
                    i = e[2];
                t[n] = i
            }
        },
        _drainPlugins: function() {
            var r = this;
            pu(this._plugins, function(e, t) {
                var n = t[0],
                    i = t[1];
                n.apply(r, [r].concat(i))
            })
        },
        _parseDSN: function(t) {
            var e = ru.exec(t),
                n = {},
                i = 7;
            try {
                for (; i--;) n[iu[i]] = e[i] || ""
            } catch (e) {
                throw new Qs("Invalid DSN: " + t)
            }
            if (n.pass && !this._globalOptions.allowSecretKey) throw new Qs("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");
            return n
        },
        _getGlobalServer: function(e) {
            var t = "//" + e.host + (e.port ? ":" + e.port : "");
            return e.protocol && (t = e.protocol + ":" + t), t
        },
        _handleOnErrorStackInfo: function() {
            this._ignoreOnError || this._handleStackInfo.apply(this, arguments)
        },
        _handleStackInfo: function(e, t) {
            var n = this._prepareFrames(e, t);
            this._triggerEvent("handle", {
                stackInfo: e,
                options: t
            }), this._processException(e.name, e.message, e.url, e.lineno, n, t)
        },
        _prepareFrames: function(e, t) {
            var i = this,
                r = [];
            if (e.stack && e.stack.length && (pu(e.stack, function(e, t) {
                    var n = i._normalizeFrame(t);
                    n && r.push(n)
                }), t && t.trimHeadFrames))
                for (var n = 0; n < t.trimHeadFrames && n < r.length; n++) r[n].in_app = !1;
            return r = r.slice(0, this._globalOptions.stackTraceLimit)
        },
        _normalizeFrame: function(e) {
            if (e.url) {
                var t = {
                    filename: e.url,
                    lineno: e.line,
                    colno: e.column,
                    function: e.func || "?"
                };
                return t.in_app = !(this._globalOptions.includePaths.test && !this._globalOptions.includePaths.test(t.filename) || /(Raven|TraceKit)\./.test(t.function) || /raven\.(min\.)?js$/.test(t.filename)), t
            }
        },
        _processException: function(e, t, n, i, r, o) {
            var a;
            if ((!this._globalOptions.ignoreErrors.test || !this._globalOptions.ignoreErrors.test(t)) && (t += "", r && r.length ? (n = r[0].filename || n, r.reverse(), a = {
                    frames: r
                }) : n && (a = {
                    frames: [{
                        filename: n,
                        lineno: i,
                        in_app: !0
                    }]
                }), (!this._globalOptions.ignoreUrls.test || !this._globalOptions.ignoreUrls.test(n)) && (!this._globalOptions.whitelistUrls.test || this._globalOptions.whitelistUrls.test(n)))) {
                var s = mu({
                    exception: {
                        values: [{
                            type: e,
                            value: t,
                            stacktrace: a
                        }]
                    },
                    culprit: n
                }, o);
                this._send(s)
            }
        },
        _trimPacket: function(e) {
            var t = this._globalOptions.maxMessageLength;
            if (e.message && (e.message = gu(e.message, t)), e.exception) {
                var n = e.exception.values[0];
                n.value = gu(n.value, t)
            }
            var i = e.request;
            return i && (i.url && (i.url = gu(i.url, this._globalOptions.maxUrlLength)), i.Referer && (i.Referer = gu(i.Referer, this._globalOptions.maxUrlLength))), e.breadcrumbs && e.breadcrumbs.values && this._trimBreadcrumbs(e.breadcrumbs), e
        },
        _trimBreadcrumbs: function(e) {
            for (var t, n, i, r = ["to", "from", "url"], o = 0; o < e.values.length; ++o)
                if ((n = e.values[o]).hasOwnProperty("data") && tu(n.data)) {
                    i = n.data;
                    for (var a = 0; a < r.length; ++a) t = r[a], i.hasOwnProperty(t) && (i[t] = gu(i[t], this._globalOptions.maxUrlLength))
                }
        },
        _getHttpData: function() {
            if (this._hasNavigator || this._hasDocument) {
                var e = {};
                return this._hasNavigator && uu.userAgent && (e.headers = {
                    "User-Agent": navigator.userAgent
                }), this._hasDocument && (su.location && su.location.href && (e.url = su.location.href), su.referrer && (e.headers || (e.headers = {}), e.headers.Referer = su.referrer)), e
            }
        },
        _resetBackoff: function() {
            this._backoffDuration = 0, this._backoffStart = null
        },
        _shouldBackoff: function() {
            return this._backoffDuration && ou() - this._backoffStart < this._backoffDuration
        },
        _isRepeatData: function(e) {
            var t = this._lastData;
            return !(!t || e.message !== t.message || e.culprit !== t.culprit) && (e.stacktrace || t.stacktrace ? Su(e.stacktrace, t.stacktrace) : !e.exception && !t.exception || function(e, t) {
                return !Eu(e, t) && (e = e.values[0], t = t.values[0], e.type === t.type && e.value === t.value && Su(e.stacktrace, t.stacktrace))
            }(e.exception, t.exception))
        },
        _setBackoffState: function(e) {
            if (!this._shouldBackoff()) {
                var t = e.status;
                if (400 === t || 401 === t || 429 === t) {
                    var n;
                    try {
                        n = e.getResponseHeader("Retry-After"), n = 1e3 * parseInt(n, 10)
                    } catch (e) {}
                    this._backoffDuration = n || (2 * this._backoffDuration || 1e3), this._backoffStart = ou()
                }
            }
        },
        _send: function(e) {
            var t = this._globalOptions,
                n = {
                    project: this._globalProject,
                    logger: t.logger,
                    platform: "javascript"
                },
                i = this._getHttpData();
            i && (n.request = i), e.trimHeadFrames && delete e.trimHeadFrames, (e = mu(n, e)).tags = mu(mu({}, this._globalContext.tags), e.tags), e.extra = mu(mu({}, this._globalContext.extra), e.extra), e.extra["session:duration"] = ou() - this._startTime, this._breadcrumbs && 0 < this._breadcrumbs.length && (e.breadcrumbs = {
                values: [].slice.call(this._breadcrumbs, 0)
            }), vu(e.tags) && delete e.tags, this._globalContext.user && (e.user = this._globalContext.user), t.environment && (e.environment = t.environment), t.release && (e.release = t.release), t.serverName && (e.server_name = t.serverName), fu(t.dataCallback) && (e = t.dataCallback(e) || e), e && !vu(e) && (fu(t.shouldSendCallback) && !t.shouldSendCallback(e) || (this._shouldBackoff() ? this._logDebug("warn", "Raven dropped error due to backoff: ", e) : "number" == typeof t.sampleRate ? Math.random() < t.sampleRate && this._sendProcessedPayload(e) : this._sendProcessedPayload(e)))
        },
        _getUuid: function() {
            return function() {
                var e = au.crypto || au.msCrypto; {
                    if (!du(e) && e.getRandomValues) {
                        var t = new Uint16Array(8);
                        e.getRandomValues(t), t[3] = 4095 & t[3] | 16384, t[4] = 16383 & t[4] | 32768;
                        var n = function(e) {
                            for (var t = e.toString(16); t.length < 4;) t = "0" + t;
                            return t
                        };
                        return n(t[0]) + n(t[1]) + n(t[2]) + n(t[3]) + n(t[4]) + n(t[5]) + n(t[6]) + n(t[7])
                    }
                    return "xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g, function(e) {
                        var t = 16 * Math.random() | 0,
                            n = "x" === e ? t : 3 & t | 8;
                        return n.toString(16)
                    })
                }
            }()
        },
        _sendProcessedPayload: function(t, n) {
            var i = this,
                e = this._globalOptions;
            if (this.isSetup())
                if (this._lastEventId = t.event_id || (t.event_id = this._getUuid()), t = this._trimPacket(t), this._globalOptions.allowDuplicates || !this._isRepeatData(t)) {
                    this._lastData = t, this._logDebug("debug", "Raven about to send:", t);
                    var r = {
                        sentry_version: "7",
                        sentry_client: "raven-js/" + this.VERSION,
                        sentry_key: this._globalKey
                    };
                    this._globalSecret && (r.sentry_secret = this._globalSecret);
                    var o = t.exception && t.exception.values[0];
                    this.captureBreadcrumb({
                        category: "sentry",
                        message: o ? (o.type ? o.type + ": " : "") + o.value : t.message,
                        event_id: t.event_id,
                        level: t.level || "error"
                    });
                    var a = this._globalEndpoint;
                    (e.transport || this._makeRequest).call(this, {
                        url: a,
                        auth: r,
                        data: t,
                        options: e,
                        onSuccess: function() {
                            i._resetBackoff(), i._triggerEvent("success", {
                                data: t,
                                src: a
                            }), n && n()
                        },
                        onError: function(e) {
                            i._logDebug("error", "Raven transport failed to send: ", e), e.request && i._setBackoffState(e.request), i._triggerEvent("failure", {
                                data: t,
                                src: a
                            }), e = e || new Error("Raven send failed (no additional details provided)"), n && n(e)
                        }
                    })
                } else this._logDebug("warn", "Raven dropped repeat event: ", t)
        },
        _makeRequest: function(t) {
            var n = new XMLHttpRequest;
            if ("withCredentials" in n || "undefined" != typeof XDomainRequest) {
                var e = t.url;
                "withCredentials" in n ? n.onreadystatechange = function() {
                    if (4 === n.readyState)
                        if (200 === n.status) t.onSuccess && t.onSuccess();
                        else if (t.onError) {
                        var e = new Error("Sentry error code: " + n.status);
                        e.request = n, t.onError(e)
                    }
                } : (n = new XDomainRequest, e = e.replace(/^https?:/, ""), t.onSuccess && (n.onload = t.onSuccess), t.onError && (n.onerror = function() {
                    var e = new Error("Sentry error code: XDomainRequest");
                    e.request = n, t.onError(e)
                })), n.open("POST", e + "?" + function(e) {
                    var n = [];
                    return pu(e, function(e, t) {
                        n.push(encodeURIComponent(e) + "=" + encodeURIComponent(t))
                    }), n.join("&")
                }(t.auth)), n.send($s(t.data))
            }
        },
        _logDebug: function(e) {
            this._originalConsoleMethods[e] && this.debug && Function.prototype.apply.call(this._originalConsoleMethods[e], this._originalConsole, [].slice.call(arguments, 1))
        },
        _mergeContext: function(e, t) {
            du(t) ? delete this._globalContext[e] : this._globalContext[e] = mu(this._globalContext[e] || {}, t)
        }
    };
    var lu = Object.prototype;

    function du(e) {
        return void 0 === e
    }

    function fu(e) {
        return "function" == typeof e
    }

    function hu(e) {
        return "[object String]" === lu.toString.call(e)
    }

    function vu(e) {
        for (var t in e) return !1;
        return !0
    }

    function pu(e, t) {
        var n, i;
        if (du(e.length))
            for (n in e) yu(e, n) && t.call(null, n, e[n]);
        else if (i = e.length)
            for (n = 0; n < i; n++) t.call(null, n, e[n])
    }

    function mu(n, e) {
        return e && pu(e, function(e, t) {
            n[e] = t
        }), n
    }

    function gu(e, t) {
        return !t || e.length <= t ? e : e.substr(0, t) + ""
    }

    function yu(e, t) {
        return lu.hasOwnProperty.call(e, t)
    }

    function _u(e) {
        for (var t, n = [], i = 0, r = e.length; i < r; i++) hu(t = e[i]) ? n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1")) : t && t.source && n.push(t.source);
        return new RegExp(n.join("|"), "i")
    }

    function bu(e) {
        var t = e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);
        if (!t) return {};
        var n = t[6] || "",
            i = t[8] || "";
        return {
            protocol: t[2],
            host: t[4],
            path: t[5],
            relative: t[5] + n + i
        }
    }

    function wu(e) {
        var t, n, i, r, o, a = [];
        if (!e || !e.tagName) return "";
        if (a.push(e.tagName.toLowerCase()), e.id && a.push("#" + e.id), (t = e.className) && hu(t))
            for (n = t.split(/\s+/), o = 0; o < n.length; o++) a.push("." + n[o]);
        var s = ["type", "name", "title", "alt"];
        for (o = 0; o < s.length; o++) i = s[o], (r = e.getAttribute(i)) && a.push("[" + i + '="' + r + '"]');
        return a.join("")
    }

    function Eu(e, t) {
        return !!(!!e ^ !!t)
    }

    function Su(e, t) {
        if (Eu(e, t)) return !1;
        var n, i, r = e.frames,
            o = t.frames;
        if (r.length !== o.length) return !1;
        for (var a = 0; a < r.length; a++)
            if (n = r[a], i = o[a], n.filename !== i.filename || n.lineno !== i.lineno || n.colno !== i.colno || n.function !== i.function) return !1;
        return !0
    }

    function ku(e, t, n, i) {
        var r = e[t];
        e[t] = n(r), i && i.push([e, t, r])
    }
    cu.prototype.setUser = cu.prototype.setUserContext, cu.prototype.setReleaseContext = cu.prototype.setRelease;
    var Tu = cu,
        Au = "undefined" != typeof window ? window : void 0 !== s ? s : "undefined" != typeof self ? self : {},
        Pu = Au.Raven,
        Cu = new Tu;
    Cu.noConflict = function() {
        return Au.Raven = Pu, Cu
    }, Cu.afterLoad();
    var xu = Cu;

    function Lu(e) {
        Oi.iOS && "onpagehide" in window ? window.addEventListener("pagehide", e, !1) : window.addEventListener("beforeunload", e, !1)
    }
    var Ou = {
            setUp: function(t) {
                if (t.request.sentry) try {
                    var e = "dev" === t.request.build.js ? "dev" : "production",
                        n = {
                            session: t.request.session,
                            locale: t.request.lang,
                            git_commit: t.request.build.player,
                            debug_intent: t.request.sentry.debug_intent ? 1 : 0
                        };
                    if (t.request.ab_tests) {
                        var i = t.request.ab_tests;
                        Object.keys(i).forEach(function(e) {
                            var t = i[e].data;
                            Object.keys(t).forEach(function(e) {
                                n[e] = t[e]
                            })
                        })
                    }
                    xu.config(t.request.sentry.url, {
                        logger: "player-raven",
                        release: t.request.build.js,
                        environment: e,
                        tags: n,
                        autoBreadcrumbs: {
                            console: !1
                        },
                        includePaths: [/https?:\/\/.*vimeo\.com/],
                        ignoreErrors: ["Permission denied to access property 'toString'", 'Permission denied to access property "toString"', "The play() request was interrupted by a call to pause().", "Permission denied to access property 'href'", 'Permission denied to access property "href"', "docs-homescreen-gb-container", "Failed to load image.", '      "endsWith"', "play() can only be initiated by a user gesture.", "Forbidden", "Not Found"],
                        shouldSendCallback: function(e) {
                            return !(!t.request || !t.request.sentry.enabled && !(t.request.sentry.debug_enabled && e.extra && e.extra.debugLink))
                        }
                    }).install(), window.addEventListener("unhandledrejection", function(e) {
                        e.preventDefault(), e.reason && xu.captureException(e.reason)
                    }), t.request.sentry.debug_intent && Lu(function() {
                        xu.captureMessage("Session debug", {
                            level: "info"
                        })
                    })
                } catch (e) {}
            },
            captureException: function(e, t) {
                return xu.captureException(e, t), xu.lastEventId()
            },
            captureMessage: function(e, t) {
                return xu.captureMessage(e, t), xu.lastEventId()
            },
            captureBreadcrumb: function(e, t) {
                var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : "player",
                    i = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : "info";
                xu.captureBreadcrumb({
                    message: e,
                    data: t,
                    category: n,
                    level: i
                })
            }
        },
        Ru = /^(%20|\s)*(javascript|data)/im,
        Iu = /[^\x20-\x7E]/gim,
        Mu = /^([^:]+):/gm,
        Du = [".", "/"];

    function Nu(e) {
        var t = e.match(Mu);
        return t && t[0]
    }

    function Fu(e) {
        var t = e.replace(Iu, "");
        if (function(e) {
                return -1 < Du.indexOf(e[0])
            }(t)) return t;
        var n = Nu(t);
        return n && Ru.test(n) ? "" : t
    }

    function Bu(e) {
        return e ? decodeURI(encodeURI(function(e) {
            var t = Nu(e = e.trim());
            return e && !t && (e = "http://" + e), e
        }(Fu(e)))) : null
    }

    function qu(e) {
        if ("object" !== (void 0 === e ? "undefined" : M(e))) return "";
        var t = [];
        for (var n in e) e.hasOwnProperty(n) && t.push(encodeURIComponent(n) + "=" + encodeURIComponent(e[n]));
        return t.join("&")
    }
    var Uu = 6e4;

    function ju(e) {
        var u = e.events,
            c = null,
            l = null,
            t = null,
            d = null,
            f = null,
            h = {
                video: {},
                request: {},
                embed: {}
            };

        function n() {
            return l && l - Uu <= Date.now()
        }

        function v(e) {
            var t = Date.now() + 1e3 * e;
            return f = setTimeout(function() {
                "onLine" in navigator && !navigator.onLine || (d = r().catch(Ou.captureException))
            }, 1e3 * e - Uu - 5e3), t
        }

        function i(e) {
            var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
            clearTimeout(f);
            var n = c;
            if (isNaN(e) && "string" != typeof e) return l = v((c = e).request.expires), I.resolve({
                old: n,
                loaded: c
            });
            Date.now();
            var i = (h = rs(h, c)).request.referrer,
                r = e;
            if (!isNaN(e)) {
                var o = c && c.player_url ? "https://" + c.player_url : "",
                    a = function(e) {
                        return "string" != typeof e ? {} : e.replace("?", "").split("&").reduce(function(e, t) {
                            if (0 < t.length) {
                                var n = t.split("="),
                                    i = Te(n, 2),
                                    r = i[0],
                                    o = i[1];
                                e[r] = decodeURIComponent(o)
                            }
                            return e
                        }, {})
                    }(window.location.search),
                    s = qu(Object.assign(a, t));
                r = o + "/video/" + e + "/config" + (0 < s.length ? "?" : "") + s
            }
            return i && (r += (-1 === r.indexOf("?") ? "?" : "&") + "referrer=" + encodeURIComponent(i)), Ds(r, {
                allowErrorStatuses: !0
            }).then(function(e) {
                (c = JSON.parse(e)).view !== bs.error && (l = v(c.request.expires), h.request.session && c.video.id === h.video.id && (c.request.session = h.request.session), i && (c.request.referrer = i), h.embed.player_id && (c.embed.player_id = h.embed.player_id), h.embed.on_site && (c.embed.on_site = 1, c.embed.context = h.embed.context));
                Date.now();
                return {
                    old: n,
                    loaded: c
                }
            })
        }

        function r() {
            clearTimeout(f);
            Date.now();
            var t = c && c.request.referrer,
                n = c.video.live_event ? c.request.files.dash.streams : null,
                e = c.request,
                i = e.signature,
                r = e.session,
                o = e.timestamp,
                a = e.expires,
                s = "https://" + c.player_url + "/video/" + c.video.id + "/config/request?session=" + r + "&signature=" + i + "&time=" + o + "&expires=" + a;
            return t && (s += (-1 === s.indexOf("?") ? "?" : "&") + "referrer=" + encodeURIComponent(t)), Ds(s).then(function(e) {
                c.request = JSON.parse(e), t && (c.request.referrer = t), n && (c.request.files.dash.streams = n), l = v(c.request.expires);
                Date.now();
                return d = null, u.fire(ds.requestConfigReloaded), c.request
            })
        }
        return window.addEventListener("online", function() {
            n() && (d = r().catch(Ou.captureException))
        }), u.on(ds.error, function(e) {
            "media-url-expired" === e && (d = r().catch(Ou.captureException))
        }), {
            get isExpired() {
                return n()
            },
            load: function(e, t) {
                return i(e, t)
            },
            reload: function() {
                return c && c.video.id ? i(c.video.id) : I.reject(new Error("No config loaded."))
            },
            toJSON: function() {
                return c
            },
            get config() {
                return c
            },
            set config(e) {
                c = e
            },
            verify: function() {
                return n() ? (d || (d = r()), d) : I.resolve(c.request)
            },
            get _video() {
                return t
            },
            set _video(e) {
                t = e
            }
        }
    }
    var Vu = function() {
            return qi.Date.now()
        },
        Hu = /^\s+|\s+$/g,
        Wu = /^[-+]0x[0-9a-f]+$/i,
        zu = /^0b[01]+$/i,
        Gu = /^0o[0-7]+$/i,
        Yu = parseInt;
    var Ku = function(e) {
            if ("number" == typeof e) return e;
            if (Ji(e)) return NaN;
            if (tr(e)) {
                var t = "function" == typeof e.valueOf ? e.valueOf() : e;
                e = tr(t) ? t + "" : t
            }
            if ("string" != typeof e) return 0 === e ? e : +e;
            e = e.replace(Hu, "");
            var n = zu.test(e);
            return n || Gu.test(e) ? Yu(e.slice(2), n ? 2 : 8) : Wu.test(e) ? NaN : +e
        },
        Xu = Math.max,
        $u = Math.min;
    var Ju = function(i, n, e) {
            var r, o, a, s, u, c, l = 0,
                d = !1,
                f = !1,
                t = !0;
            if ("function" != typeof i) throw new TypeError("Expected a function");

            function h(e) {
                var t = r,
                    n = o;
                return r = o = void 0, l = e, s = i.apply(n, t)
            }

            function v(e) {
                var t = e - c;
                return void 0 === c || n <= t || t < 0 || f && a <= e - l
            }

            function p() {
                var e = Vu();
                if (v(e)) return m(e);
                u = setTimeout(p, function(e) {
                    var t = n - (e - c);
                    return f ? $u(t, a - (e - l)) : t
                }(e))
            }

            function m(e) {
                return u = void 0, t && r ? h(e) : (r = o = void 0, s)
            }

            function g() {
                var e = Vu(),
                    t = v(e);
                if (r = arguments, o = this, c = e, t) {
                    if (void 0 === u) return function(e) {
                        return l = e, u = setTimeout(p, n), d ? h(e) : s
                    }(c);
                    if (f) return u = setTimeout(p, n), h(c)
                }
                return void 0 === u && (u = setTimeout(p, n)), s
            }
            return n = Ku(n) || 0, tr(e) && (d = !!e.leading, a = (f = "maxWait" in e) ? Xu(Ku(e.maxWait) || 0, n) : a, t = "trailing" in e ? !!e.trailing : t), g.cancel = function() {
                void 0 !== u && clearTimeout(u), r = c = o = u = void(l = 0)
            }, g.flush = function() {
                return void 0 === u ? s : m(Vu())
            }, g
        },
        Qu = "PREVIEW_SET_SIZE",
        Zu = function(e, t) {
            return {
                type: Qu,
                payload: {
                    width: e,
                    height: t
                }
            }
        },
        ec = oa(Object.keys, Object),
        tc = Object.prototype.hasOwnProperty;
    var nc = function(e) {
            if (!ua(e)) return ec(e);
            var t = [];
            for (var n in Object(e)) tc.call(e, n) && "constructor" != n && t.push(n);
            return t
        },
        ic = mr(qi, "DataView"),
        rc = mr(qi, "Promise"),
        oc = mr(qi, "Set"),
        ac = mr(qi, "WeakMap"),
        sc = "[object Map]",
        uc = "[object Promise]",
        cc = "[object Set]",
        lc = "[object WeakMap]",
        dc = "[object DataView]",
        fc = sr(ic),
        hc = sr(Fr),
        vc = sr(rc),
        pc = sr(oc),
        mc = sr(ac),
        gc = Xi;
    (ic && gc(new ic(new ArrayBuffer(1))) != dc || Fr && gc(new Fr) != sc || rc && gc(rc.resolve()) != uc || oc && gc(new oc) != cc || ac && gc(new ac) != lc) && (gc = function(e) {
        var t = Xi(e),
            n = "[object Object]" == t ? e.constructor : void 0,
            i = n ? sr(n) : "";
        if (i) switch (i) {
            case fc:
                return dc;
            case hc:
                return sc;
            case vc:
                return uc;
            case pc:
                return cc;
            case mc:
                return lc
        }
        return t
    });
    var yc = gc,
        _c = Object.prototype.hasOwnProperty;
    var bc = function(e) {
        if (null == e) return !0;
        if (ma(e) && (Ni(e) || "string" == typeof e || "function" == typeof e.splice || _a(e) || Oa(e) || va(e))) return !e.length;
        var t = yc(e);
        if ("[object Map]" == t || "[object Set]" == t) return !e.size;
        if (ua(e)) return !nc(e).length;
        for (var n in e)
            if (_c.call(e, n)) return !1;
        return !0
    };

    function wc(e, t) {
        var n = e,
            i = t;
        return n % 320 != 0 && (n = 100 * Math.ceil(e / 100), i = Math.round(n / e * t)), {
            width: n,
            height: i
        }
    }

    function Ec(e) {
        var t = e.width,
            n = e.height,
            i = e.baseUrl,
            r = e.webpSupport,
            o = void 0 !== r && r,
            a = e.crop,
            s = void 0 !== a && a,
            u = i + (o ? ".webp" : ".jpg"),
            c = {},
            l = parseInt(t, 10),
            d = parseInt(n, 10);
        return 0 !== l && (s ? c.w = l : c.mw = l), 0 !== d && (s ? c.h = d : c.mh = d), 1 < Oi.devicePixelRatio && (c.q = 70), bc(c) || (u += "?" + qu(c)), u
    }

    function Sc(i) {
        return new I(function(e, t) {
            var n = new Image;
            n.src = i, n.onload = function() {
                return e(n)
            }, n.onerror = function() {
                return t(new Error("Failed to load image."))
            }
        })
    }

    function kc(r, o, a) {
        var e = null;

        function s() {
            return a.getAttribute("data-thumb")
        }

        function u() {
            return wc(o.get("ui.player.innerWidth") * Oi.devicePixelRatio, o.get("ui.player.innerHeight") * Oi.devicePixelRatio)
        }

        function n() {
            if (!r.config.video.thumbs.base) return I.resolve();
            var e = u(),
                t = e.width,
                n = Ec({
                    width: t,
                    height: e.height,
                    baseUrl: r.config.video.thumbs.base,
                    webpSupport: r.config.request.flags.webp
                });
            a.setAttribute("data-thumb", n), a.setAttribute("data-thumb-width", t);
            var i = Sc(n).then(function(e) {
                return o.dispatch(Zu(e.width, e.height)), r.config.embed.autoplay || (a.style.backgroundImage = "url(" + s() + ")"), e
            }).catch(function(e) {
                Ou.captureException(e, {
                    extra: {
                        thumbnailUrl: n
                    }
                })
            });
            return I.race([i, new I(function(e) {
                return setTimeout(e, 2e3)
            })])
        }
        return e = n(), r.events.on(ds.didEnterFullscreen, function() {
            a.classList.contains("vp-preview-invisible") && "beginning" !== r.config.embed.outro || (e = n())
        }), o.watch("ui.player.innerWidth", Ju(function() {
            e = e.then(function() {
                return function() {
                    var e = u().width,
                        t = a.getAttribute("data-thumb-width");
                    return e <= parseInt(t, 10) || 0 === e ? I.resolve() : n()
                }()
            }).catch(function(e) {})
        }, 250)), o.watch("ui.preview.scaleFactor", function(e) {
            1 < e ? a.classList.add("vp-preview-cover") : a.classList.remove("vp-preview-cover")
        }), {
            show: function() {
                a.style.backgroundImage = "url(" + s() + ")", a.classList.remove("vp-preview-invisible")
            },
            hide: function() {
                a.classList.add("vp-preview-invisible")
            },
            resetThumbnail: function() {
                a.setAttribute("data-thumb", ""), a.setAttribute("data-thumb-width", ""), a.style.backgroundImage = ""
            },
            getThumbnail: s,
            loadThumbnail: n,
            thumbnailPromise: e
        }
    }

    function Tc(e) {
        return !0 === e || !1 === e ? Number(e) : "null" === e ? null : e
    }

    function Ac(n) {
        var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : document.cookie;
        try {
            if (e && "" !== e) return e.split(";").reduce(function(e, t) {
                return 0 === (t = t.trim()).indexOf(n + "=") ? decodeURIComponent(t.substr(n.length + 1)) : e
            }, null)
        } catch (e) {}
        return null
    }
    var Pc = ["quality", "volume", "captions"],
        Cc = null;

    function xc(a) {
        var e = 0 !== a.config.request.urls.proxy.indexOf(window.location.origin),
            n = 0;

        function i(e, t) {
            if (Cc) {
                var n = {
                    method: "set",
                    key: "sync_" + e,
                    val: t,
                    session: a.config.request.session
                };
                return function(n) {
                    Cc.then(function(e) {
                        var t = Os(a.config.request.urls.proxy);
                        return e.contentWindow.postMessage(n, t), e
                    }).catch(function(e) {
                        Ou.captureException(e, {
                            extra: {
                                proxyUrl: a.config.request.urls.proxy
                            }
                        })
                    })
                }(n), void
                function(e) {
                    a.config.embed.on_site && window.postMessage(e, window.location.origin)
                }(n)
            }
            try {
                window.localStorage.setItem("sync_" + e, JSON.stringify(t))
            } catch (e) {}
        }

        function r(e, t) {
            0 <= Pc.indexOf(e) && (a.config.request.cookie[e] = t);
            var n = [];
            0 <= Pc.indexOf(e) && null !== t && n.push(e + "=" + t);
            var i = o(Pc);
            for (var r in i) r in i && null !== i[r] && r !== e && n.push(r + "=" + i[r]);
            ! function(e, t, n) {
                var i = new Date;
                i.setFullYear(i.getFullYear() + 1), i = i.toGMTString();
                var r = e + "=" + (t = Tc(t)) + ";";
                r += "expires=" + i + ";", r += "path=/;", r += "domain=" + n + ";";
                try {
                    document.cookie = r
                } catch (e) {
                    return
                }
            }("player", '"' + n.join("&") + '"', a.config.request.cookie_domain)
        }

        function o(e) {
            var t = null;
            try {
                t = Ac("player")
            } catch (e) {}
            if (!t) return null;
            t = t.substring(1, t.length - 1);
            var i = {};
            t.split("&").forEach(function(e) {
                e = e.split("="), i[e[0]] = Tc(decodeURIComponent(e[1] || ""))
            });
            var n = [].concat(e),
                r = n.reduce(function(e, t) {
                    if (t in i) {
                        var n = parseFloat(i[t]);
                        return e[t] = isNaN(n) || "quality" === t ? i[t] : n, e
                    }
                    return e[t] = null, e
                }, {});
            return 1 === n.length ? r[e] : r
        }

        function s(e, t) {
            a.doNotTrackEnabled || (i(e, t = Tc(t)), r(e, t))
        }

        function u(e, t) {
            switch (e) {
                case "sync_quality":
                    a.events.fire(cs.changeQuality, t, !0);
                    break;
                case "sync_volume":
                    if (a.config.embed.settings.background) break;
                    a.events.fire(cs.changeVolume, t, !0);
                    break;
                case "sync_captions":
                    if (null === t) {
                        a.events.fire(cs.turnCaptionsOff, !0);
                        break
                    }
                    a.events.fire(cs.turnCaptionsOn, t, !0);
                    break;
                case "sync_login":
                    ! function(e) {
                        if (4 < n) return;
                        n++, e && !a.config.user.logged_in ? a.events.fire(ds.userLogIn) : !e && a.config.user.logged_in && a.events.fire(ds.userLoggedOut)
                    }(t);
                    break;
                case "sync_active":
                    null !== t && t !== a.config.request.session && a.config.embed.autopause && a.events.fire(ds.becameInactive)
            }
        }
        return a.events.on(ds.qualityChanged, function(e, t) {
            t || s("quality", e)
        }), a.events.on(ds.volumeChanged, function(e, t) {
            a.config.request.cookie.volume = Tc(e), t || s("volume", e)
        }), a.events.on(ds.captionsChanged, function(e, t) {
            if (e) {
                var n = e.language + "." + e.kind;
                return a.config.request.cookie.captions = Tc(n), void(t || s("captions", n))
            }
            a.config.request.cookie.captions = null, t || s("captions", null)
        }), a.events.on(ds.playButtonPressed, function() {
            a.config.embed.settings.background || (s("active", a.config.request.session), a.events.fire(ds.becameActive))
        }), a.events.on([ds.pauseButtonPressed, ds.ended], function() {
            o("active") === a.config.request.session && s("active", null)
        }), a.events.on(ds.userLoggedIn, function() {
            s("login", !0)
        }), e && !Cc && (Cc = function(o) {
            return new I(function(n, t) {
                document.createElement("a").href = a.config.request.urls.proxy;
                var i = document.createElement("iframe");
                i.src = o, i.setAttribute("title", "Vimeo LocalStorage Proxy"), i.setAttribute("aria-hidden", "true"), i.setAttribute("hidden", ""), i.onload = function(e) {
                    var t = Os(a.config.request.urls.proxy);
                    i.contentWindow.postMessage({
                        method: "ping"
                    }, t)
                }, i.onerror = function(e) {
                    t(e)
                };
                var r = setTimeout(function() {
                    t()
                }, 1e4);
                window.addEventListener("message", function e(t) {
                    0 !== o.indexOf(t.origin) || "ready" !== t.data && "ping" !== t.data || (window.removeEventListener("message", e, !1), clearTimeout(r), n(i))
                }, !1), document.body.appendChild(i)
            })
        }(a.config.request.urls.proxy)), e ? window.addEventListener("message", function(e) {
            var t = Os(a.config.request.urls.proxy);
            e.origin === t && "object" === M(e.data) && "key" in e.data && "newValue" in e.data ? u(e.data.key, e.data.newValue) : e.origin === window.location.origin && e.data.session !== a.config.request.session && u(e.data.key, e.data.val)
        }, !1) : window.addEventListener("storage", function(t) {
            if (0 === t.key.indexOf("sync_") && t.oldValue !== t.newValue && window.localStorage.getItem(t.key) === t.newValue) try {
                u(t.key, JSON.parse(t.newValue))
            } catch (e) {
                Ou.captureException(e, {
                    extra: {
                        key: t.key,
                        oldValue: t.oldValue,
                        newValue: t.newValue
                    }
                })
            }
        }, !1), {
            reset: function() {
                s("login", !!a.config.user.logged_in)
            }
        }
    }
    var Lc = "LIVE_SET_STATUS",
        Oc = "LIVE_ARCHIVE_SET_STATUS",
        Rc = "LIVE_UPDATE",
        Ic = "LIVE_SET_START_TIME",
        Mc = function(e) {
            return {
                type: Lc,
                payload: e
            }
        },
        Dc = function(e) {
            return {
                type: Rc,
                payload: e
            }
        },
        Nc = function(e) {
            return {
                type: Ic,
                payload: e
            }
        };

    function Fc(e) {
        return e.replace(/(_\w)/g, function(e) {
            return e[1].toUpperCase()
        })
    }

    function Bc(e) {
        return function n(i, r) {
            return Object.keys(r).reduce(function(e, t) {
                return r[t] && "object" === M(r[t]) ? e[i(t)] = n(i, r[t]) : e[i(t)] = r[t], e
            }, {})
        }(Fc, e)
    }
    var qc = "CONFIG_LOAD",
        Uc = function(e) {
            return {
                type: qc,
                payload: N({}, Bc(e))
            }
        };

    function jc() {
        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
            t = arguments[1],
            n = t.type,
            i = t.payload;
        switch (n) {
            case qc:
                var r = i.video.liveEvent;
                return N({}, e, {
                    liveStatus: r ? r.status : null,
                    liveArchiveStatus: r && r.archive ? r.archive.status : null
                });
            case Rc:
                return N({}, e, {
                    liveStatus: i ? i.status : null,
                    liveArchiveStatus: i && i.archive ? i.archive.status : null
                });
            case Lc:
                return N({}, e, {
                    liveStatus: i
                });
            case Oc:
                return N({}, e, {
                    liveArchiveStatus: i
                });
            default:
                return e
        }
    }
    var Vc = function(e) {
            return !!e.ui.liveEvent.liveStatus && null !== e.ui.liveEvent.liveStatus
        },
        Hc = function(e) {
            return Vc(e) && e.ui.liveEvent.liveStatus === hs.pending
        },
        Wc = function(e) {
            return Vc(e) && e.ui.liveEvent.liveStatus === hs.active
        },
        zc = function(e) {
            return Vc(e) && e.ui.liveEvent.liveStatus === hs.started
        },
        Gc = function(e) {
            return Vc(e) && e.ui.liveEvent.liveStatus === hs.ended
        },
        Yc = function(e) {
            return Vc(e) && !Gc(e)
        },
        Kc = function(e) {
            return Vc(e) && e.ui.liveEvent.liveArchiveStatus === fs
        },
        Xc = Object.freeze({
            default: jc,
            liveExists: Vc,
            isLivePending: Hc,
            isLiveActive: Wc,
            isLiveStarted: zc,
            isLiveEnded: Gc,
            liveInProgress: Yc,
            isLiveArchived: Kc
        });

    function $c(e, t) {
        if (!document.getElementById(e)) {
            var n = document.createElement("script");
            n.setAttribute("id", e), n.setAttribute("src", t), document.getElementsByTagName("head")[0].appendChild(n)
        }
    }
    var Jc = function() {
            return {
                id: "error",
                title: "Player error",
                message: "The player is having trouble. Well have it back up and running as soon as possible.",
                modal: !0,
                final: !0
            }
        },
        Qc = Object.freeze({
            BrowserNotSupported: function() {
                return {
                    id: "not-supported",
                    title: "Unsupported viewing environment",
                    message: 'Your system is having trouble playing this video. For more information, see our <a href="https://help.vimeo.com/hc/en-us/articles/115015677227-Troubleshoot-player-error-messages" target="_blank" rel="noopener">Help Center</a>.',
                    deferred: !0,
                    final: !0
                }
            },
            DRMFailure: function() {
                return {
                    id: "drm-failure",
                    title: "Rights issue",
                    message: "Were having trouble authorizing playback for this video. ",
                    final: !0
                }
            },
            FilesNotPlayable: function() {
                return {
                    id: "not-supported",
                    title: "Unsupported viewing environment",
                    message: 'Your system is having trouble playing this video. For more information, see our <a href="https://help.vimeo.com/hc/en-us/articles/115015677227-Troubleshoot-player-error-messages" target="_blank" rel="noopener">Help Center</a>.',
                    deferred: !0,
                    final: !0
                }
            },
            MediaSrcNotSupportedError: function() {
                return {
                    id: "not-supported",
                    final: !1
                }
            },
            MediaDecodeError: function() {
                return {
                    id: "decode",
                    final: !1
                }
            },
            MediaNetworkError: function() {
                return {
                    id: "network",
                    title: "Network error",
                    message: 'A network hiccup interrupted playback. Please <a href="javascript:window.location.reload()" rel="noopener">reload the player</a> and try again.',
                    final: !0
                }
            },
            MediaUnknownError: function() {
                return {
                    id: "unknown",
                    title: "Browser error",
                    message: 'Were having trouble playing this video file. Please <a href="javascript:window.location.reload()" rel="noopener">reload the player</a> and try again.',
                    final: !0
                }
            },
            FileError: function() {
                return {
                    id: "telecine-file-error",
                    final: !1
                }
            },
            DownloadError: function() {
                return {
                    id: "telecine-download-error",
                    final: !1
                }
            },
            MediaUrlExpired: function() {
                return {
                    id: "media-url-expired",
                    title: "Playback error",
                    message: 'Were having trouble playing this video. Please <a href="javascript:window.location.reload()" rel="noopener">reload the player</a> and try again.',
                    final: !1
                }
            },
            ScannerError: function() {
                return {
                    id: "scanner-error",
                    final: !1
                }
            },
            PlayerError: Jc
        }),
        Zc = "app.vimeo.com/",
        el = "key_live_jpj6Duy53e6MhounkriNljdgsBhGbf0d";

    function tl(e, t) {
        return function(e) {
            var t, n = {
                    feature: 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null,
                    $deeplink_path: Zc + e,
                    $always_deeplink: !0,
                    ref: "player",
                    context: "player"
                },
                i = [];
            for (var r in n) i.push(encodeURIComponent(r) + "=" + encodeURIComponent(n[r]));
            return t = i.join("&"), "https://bnc.lt/a/" + el + "?" + t
        }("videos/" + e, t)
    }

    function nl(a, n, t) {
        var i, r = t.querySelector(".vp-telecine"),
            s = a.backbone,
            o = s.telecine,
            u = !a.config.embed.playsinline && (Oi.mobileAndroid || Oi.iOS && !Oi.iPad),
            c = 8 <= Oi.iOS && !Oi.iPad,
            l = !1,
            d = !1,
            f = !1,
            h = !1,
            v = null,
            p = !1,
            m = !1,
            g = !1,
            y = !1,
            _ = !1,
            b = !1,
            e = !1;

        function w(e) {
            r.classList.remove("invisible"), s.play()
        }

        function E() {
            if ("disable" !== a.config.video.privacy && a.config.video.spatial && Oi.iOS && !b || r.classList.remove("invisible"), v) return a.events.fire(ds.error, v), void a.preview.show();
            if (l = !0, p) a.preview.show();
            else {
                if (s.off(Pe.PLAY, w), !f) {
                    if (a.config.video.spatial && Oi.iOS && !b) return b = !0, a.events.fire(cs.showOverlay, "app-redirect", {
                        redirectUrl: a.doNotTrackEnabled ? "https://itunes.apple.com/us/app/apple-store/id425194759?mt=8" : tl(a.config.video.id, "player-spatial-redirect"),
                        title: null,
                        buttonText: "Watch in the Vimeo app",
                        ignoreText: null,
                        bottomText: "360 not supported in this browser",
                        newWindow: !a.config.embed.on_site
                    }), void s.once(Pe.PLAY, w);
                    s.play(), !a.config.user.progress || e || !a.config.embed.settings.playbar || a.config.embed.autoplay || a.config.embed.time || (s.currentTime = a.config.user.progress, a.config.user.progress = 0)
                }
                u && (g = !0, a.events.fire(cs.forceFullscreen)), S()
            }
        }

        function S() {
            h || p || l && s.paused && (i && (s.currentTime = i, i = null), s.play())
        }

        function k(e) {
            switch (e) {
                case hs.started:
                    if (A(), r.classList.remove("invisible"), Oi.android || Oi.iOS) return;
                    a.events.fire(ds.playButtonPressed)
            }
        }

        function T() {
            var e = "none";
            ("metadata" === a.config.request.flags.preload_video || u || 8 <= Oi.iOS) && (e = "metadata"), "auto" === a.config.request.flags.preload_video && (e = "metadata", "MediaSourceScanner" === o.currentScanner && (e = "auto")), o.preload = e, a.events.on(ds.mousedOver, function() {
                a.config.request && "metadata_on_hover" === a.config.request.flags.preload_video && !f && a.verifyConfig().then(function() {
                    return o.preload = "metadata", !0
                }).catch(function(e) {})
            })
        }

        function A() {
            var e = !(0 < arguments.length && void 0 !== arguments[0]) || arguments[0];
            b = !1;
            var t = function() {
                var e = a.config.video.file_codecs,
                    t = [];
                return null !== e && (0 < e.hevc.sdr.length || 0 < e.hevc.hdr.length) && (t = Oi.hdr && 0 < e.hevc.hdr.length ? e.hevc.hdr : Oi.hevc && 0 < e.hevc.sdr.length ? e.hevc.sdr : e.avc), t
            }();
            if (a.events.fire(ds.hevcRestrictedStreams, t), !o.video || e)
                if (s.loadVideo(a.config), null === a.config.request.cookie.captions || "null" === a.config.request.cookie.captions);
                else {
                    a.events.fire(cs.turnCaptionsOn, a.config.request.cookie.captions, !0)
                }
            else s.loadVideo(a.config)
        }

        function P(e, t, n, i) {
            if (d) {
                var r = new XMLHttpRequest;
                r.open("DELETE", e + "/plays/" + t + "/" + n + "?token=" + i, !1), r.send(), d = !1
            }
        }

        function C() {
            if (a.config.embed.autoplay) {
                if (n.get(Vc) && !n.get(zc)) return;
                if (n.get(Vc) && Oi.iOS && !a.config.embed.muted) return;
                a.events.fire(ds.playButtonPressed)
            }
        }
        r.classList.add("invisible"), c && r.classList.add("hide-webkit-controls"), a.config.video.live_event && (t.classList.add("live-background"), $c("m3u8-parser", a.config.request.urls.m3u8_parser_url), $c("muxjs", a.config.request.urls.muxer_url)), a.config.embed.transparent && t.classList.add("transparent"), n.watch("ui.liveEvent.liveStatus", k), n.watch("ui.video.scaleFactor", function(e) {
                1 < e ? r.classList.add("vp-telecine-cover") : r.classList.remove("vp-telecine-cover")
            }),
            function(e, r, t) {
                t.forEach(function(i) {
                    e(i, function() {
                        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                        r.apply(void 0, [i].concat(t))
                    })
                })
            }(s.on, a.events.fire, [gn.BUFFER_ENDED, gn.BUFFER_STARTED, gn.CUE_CHANGED, gn.UI_BUFFER_STARTED, gn.FORCED_QUALITY, gn.PICTURE_IN_PICTURE_ACTIVATED, gn.PICTURE_IN_PICTURE_AVAILABLE, gn.PICTURE_IN_PICTURE_DEACTIVATED, gn.PICTURE_IN_PICTURE_NOT_AVAILABLE, gn.PLAY_INITIATED, gn.SPATIAL_PLAYBACK_TOGGLED, xe.EVENT_ACTIVE, xe.EVENT_ENDED, xe.EVENT_STARTED, xe.REPRESENTATIONS_AVAILABLE, xe.STREAM_OFFLINE, xe.STREAM_ONLINE, Ce.CUE_POINT, Ce.STREAM_CHANGE, Ce.STREAM_TARGET_CHANGE, re.CAMERA_UPDATE, re.MOTION_END, re.MOTION_START, re.SPATIAL_UNSUPPORTED, Pe.PLAY, Pe.PLAYING, Pe.PROGRESS, Pe.SEEKED, Pe.TIME_UPDATE]), s.on(Ce.SCANNER_CHANGE, function() {
                T(), setTimeout(function() {
                    a.events.fire(s.supportsSettingVolume ? cs.enableVolume : cs.disableVolume), a.events.fire(s.supportsTextTracks ? cs.enableCaptions : cs.disableCaptions)
                }, 0), Ou.captureBreadcrumb("Scanner changed to " + o.currentScanner, {}, "video")
            }), s.on(xe.EVENT_STARTED, function(e) {
                a.config.video.live_event = e, n.dispatch(Dc(e)), n.dispatch(Mc(hs.started))
            }), s.on(xe.EVENT_ENDED, function() {
                return n.dispatch(Mc(hs.ended))
            }), s.on(xe.EVENT_ACTIVE, function() {
                return n.dispatch(Mc(hs.active))
            }), s.on(xe.REPRESENTATIONS_AVAILABLE, function(e) {
                a.config.request.files.dash.streams = e.video.map(function(e) {
                    return {
                        quality: e.height + "p"
                    }
                })
            }), T(), s.on(Pe.LOADED_METADATA, function(e) {
                a.config.video.duration = s.duration, a.config.video.video_width = s.videoWidth, a.config.video.video_height = s.videoHeight
            }), s.on(Pe.DURATION_CHANGE, function(e) {
                a.config.video.duration = s.duration
            }), a.events.on(ds.playButtonPressed, E).on(ds.pauseButtonPressed, s.pause).on(ds.becameInactive, function() {
                window.location.search.indexOf("autopause=0") < 0 && !s.paused && !a.config.embed.settings.background && (l = !1, a.events.fire(ds.pauseButtonPressed))
            }), s.on(Pe.ERROR, function(e) {
                if (e && ("NotAllowedError" === e.name || Oi.iOS && "AbortError" === e.name)) {
                    if (a.config.embed.autoplay = 0, s.pause(), a.config.embed.time) return void(s.currentTime = a.config.embed.time);
                    0 === o.currentTime && a.events.fire(cs.reset)
                }
            }), s.on(Pe.PLAY, function(e) {
                r.classList.remove("invisible")
            }), s.on(Pe.PAUSE, function(e, t) {
                h || a.events.fire(ds.paused, e, t)
            }), s.on(Pe.TIME_UPDATE, function(e) {
                var t = e.currentTime;
                i && i < t && (i = null)
            }), s.on(Pe.ENDED, function(e) {
                if (!h && !a.config.embed.loop) {
                    if (g && a.events.fire(ds.fullscreenButtonPressed), l = !1, m) return;
                    a.events.fire(ds.ended, e)
                }
            }), s.on(Ce.DRM_AUTH_SUCCESS, function() {
                d = !0
            }), s.on(gn.PLAY_INITIATED, function() {
                f = !0, s.once(Pe.TIME_UPDATE, function() {
                    a.events.fire(ds.firstTimeUpdate)
                })
            }), a.events.on(ds.hudDisplayed, function() {
                m = !0
            }), a.events.on(ds.hudHidden, function() {
                m = !1, s.ended && a.events.fire(ds.ended)
            }), s.on(gn.BUFFER_STARTED, function() {
                h || a.events.fire(os.bufferStarted)
            }),
            function() {
                var o = !1;

                function e(e) {
                    if (!o)
                        if (Ou.captureBreadcrumb(e.name, {
                                message: e.message
                            }, "telecine error", "error"), "TextTracksNotSupported" !== e.name) {
                            var t = Qc[e.name];
                            if ("function" == typeof t) {
                                var n = t();
                                if (v = n.deferred ? n.id : null, "DRMFailure" === e.name) {
                                    var i = a.config.request.dynamic_drm_translation_map,
                                        r = e.message.code;
                                    i && r && i[r] && (n.title = i[r].title, n.message = i[r].msg), Ou.captureBreadcrumb("DRM failure", e, "video")
                                }
                                a.events.fire(ds.error, n.id, n)
                            }
                        } else a.events.fire(cs.disableCaptions)
                }
                Lu(function() {
                    o = !0
                }), s.on(Pe.ERROR, e), a.events.on("test-error", e)
            }(), a.events.on(cs.changeLoop, function(e) {
                var t = !!e && (!Oi.iOS || 10 <= Oi.iOS);
                a.config.embed.loop = t, s.loop = t
            }), a.events.fire(cs.changeLoop, a.config.embed.loop), a.events.on(ds.scrubbingStarted, function() {
                p || (l = !s.paused, h = !0, s.pause())
            }), a.events.on(ds.scrubbingEnded, function(e) {
                h = !1, e || S()
            }), a.events.on(cs.seek, function(e, t) {
                p || (t || (t = (s.duration || a.config.video.duration) * Is(e, 0, 1)), s.currentTime = t)
            }), a.events.on(cs.setTime, function(e) {
                s.currentTime = e
            }),
            function() {
                a.events.on(cs.changeVolume, function(e, t, n) {
                    n && (e += s.volume), s.volume = Is(e, 0, 1), s.muted = 0 === s.volume, a.events.fire(ds.volumeChanged, Is(e, 0, 1), t)
                }), s.on(Pe.VOLUME_CHANGE, function() {
                    return a.events.fire(ds.volumeChanged, s.volume, !0)
                });
                var e = a.config.embed.muted ? 0 : a.config.request.cookie.volume;
                a.events.fire(cs.changeVolume, e, !0)
            }(), a.events.on(cs.changeQuality, function(e, t) {
                (o.video.currentFile.mime === us.dash || n.get(zc)) && (t = !0), s.quality = e, a.events.fire(ds.qualityChanged, e, t)
            }),
            function() {
                var t = s.playbackRate;
                s.on(Pe.RATE_CHANGE, function(e) {
                    s.playbackRate !== t && (a.events.fire(ds.playbackRateChanged, s.playbackRate, t), t = s.playbackRate)
                }), a.events.on(cs.changePlaybackRate, function(e) {
                    s.playbackRate = e
                }), a.events.on(ds.loadVideo, function() {
                    try {
                        s.playbackRate = 1
                    } catch (e) {}
                })
            }(),
            function() {
                function n() {
                    p = !0, f && !_ && (l = l || !s.paused, s.pause(), a.events.fire(ds.paused, s.currentTime))
                }

                function i() {
                    p = !1, l && !_ && (g || y || !u || a.events.fire(cs.forceFullscreen), S())
                }
                a.events.on(ds.overlayOpened, n), a.events.on(ds.overlayClosed, i), a.events.on(ds.menuVisibilityChanged, function(e, t) {
                    t.isCentered() && (t.isVisible() ? n() : i())
                })
            }(), a.events.on(ds.popupOpened, function(e) {
                f && !_ && (l = !s.paused, s.pause())
            }), a.events.on(ds.popupClosed, function(e) {
                _ || S()
            }), a.events.on(ds.didEnterFullscreen, function(e, t) {
                r.classList.remove("hide-webkit-controls"), e && (y = !0), e || (f || Oi.browser.safari || (o.poster = a.preview.getThumbnail()), g = !0, setTimeout(function() {
                    s.textTracks.forEach(function(e) {
                        "hidden" === e.mode && (e.mode = "showing")
                    })
                }, 500)), t || !Oi.windowsPhone || Oi.browser.edge || a.events.fire(cs.toggleNativeControls, !0)
            }), a.events.on(ds.didExitFullscreen, function(e) {
                o.poster = "", e || s.pause(), f || r.classList.add("invisible"), y = g = !1, c && r.classList.add("hide-webkit-controls"), s.textTracks.forEach(function(e) {
                    "showing" === e.mode && (e.mode = "hidden")
                })
            }), s.on(gn.PLAY_INITIATED, function() {
                o.poster = ""
            }), a.events.on(cs.toggleNativeControls, function(e) {
                if (e) return o.controls = !0, void t.classList.add("native-controls");
                o.controls = !1, t.classList.remove("native-controls")
            }), a.events.on(ds.signatureExpired, function() {
                i = s.currentTime
            }), a.events.on(ds.requestConfigReloaded, function(e) {
                A(!1)
            }), a.events.on(ds.configChanged, function(e, t) {
                n.get(Vc) || A(e), C()
            }), a.events.on(cs.reset, function() {
                s.unload(), a.events.fire(ds.paused, s.currentTime), a.preview.show(), r.classList.add("invisible"), l = f = !1, v = null
            }),
            function() {
                var n = void 0;
                a.events.on(cs.turnCaptionsOn, function(e) {
                    var t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
                    n = t;
                    try {
                        s.enableTextTrack(e)
                    } catch (e) {}
                }).on(cs.turnCaptionsOff, function() {
                    var e = 0 < arguments.length && void 0 !== arguments[0] && arguments[0];
                    n = e, s.disableTextTrack()
                }), s.on(gn.CAPTIONS_CHANGED, function(e, t) {
                    a.events.fire(ds.captionsChanged, e, n || t)
                })
            }(), s.on(ne.AVAILABLE, function(e) {
                var t = e.type;
                if (!a.config.request.drm) switch (t) {
                    case "AirPlay":
                        a.events.fire(ds.airPlayAvailable)
                }
            }), s.on(ne.UNAVAILABLE, function(e) {
                var t = e.type;
                if (!a.config.request.drm) switch (t) {
                    case "AirPlay":
                        a.events.fire(ds.airPlayNotAvailable)
                }
            }), s.on(ne.ACTIVATED, function(e) {
                var t = e.type;
                switch (_ = !0, t) {
                    case "AirPlay":
                        a.events.fire(ds.airPlayActivated)
                }
            }), s.on(ne.DEACTIVATED, function(e) {
                var t = e.type;
                switch (_ = !1, t) {
                    case "AirPlay":
                        a.events.fire(ds.airPlayDeactivated)
                }
            }), a.events.on(ds.airPlayButtonPressed, function() {
                o.showExternalDisplayPicker("AirPlay")
            }), a.events.on(cs.activatePictureInPicture, function() {
                s.supportsPresentationMode("picture-in-picture") && (s.presentationMode = "picture-in-picture")
            }), a.events.on(cs.deactivatePictureInPicture, function() {
                s.supportsPresentationMode("picture-in-picture") && (s.presentationMode = "inline")
            }), a.events.on(ds.enteredTinyMode, function() {
                e = !0
            }).on([ds.enteredMiniMode, ds.enteredNormalMode], function() {
                e = !1
            }), A(), Oi.spatialPlayback ? (a.events.fire(cs.attachSpatialPlaybackEvents), a.events.on([Pe.PLAY, Pe.SEEKED], function() {
                a.events.fire(cs.revealSpatialControls)
            }), s.on(re.SPATIAL_UNSUPPORTED, function() {
                f ? a.events.fire(os.spatialFailure, p) : a.events.once(ds.firstTimeUpdate, function() {
                    a.events.fire(os.spatialFailure, p)
                })
            })) : a.events.once(ds.firstTimeUpdate, function() {
                a.config.video.spatial && a.events.fire(os.spatialUnsupported, p)
            }), Lu(function() {
                var e = a.config.request.drm;
                e && P(e.hoover_url, e.user, e.asset, e.hoover_token)
            }), a.events.on(ds.loadVideo, function() {
                var e = a.config.request && a.config.request.drm;
                e && P(e.hoover_url, e.user, e.asset, e.hoover_token)
            }), a.ready().then(function() {
                return setTimeout(function() {
                    return C()
                }, 0), 0 < a.config.embed.time && a.events.fire(cs.setTime, a.config.embed.time, a.config.embed.time / o.duration), null
            }).catch(function(e) {}), a.events.fire(ds.videoModuleReady)
    }
    var il = t(function(e) {
            ! function() {
                var i, c = 0,
                    r = 0,
                    l = {},
                    d = {};

                function f(e, t, n) {
                    return "_root" == t ? n : e !== n ? function(e) {
                        return i || (i = e.matches ? e.matches : e.webkitMatchesSelector ? e.webkitMatchesSelector : e.mozMatchesSelector ? e.mozMatchesSelector : e.msMatchesSelector ? e.msMatchesSelector : e.oMatchesSelector ? e.oMatchesSelector : h.matchesSelector)
                    }(e).call(e, t) ? e : e.parentNode ? (c++, f(e.parentNode, t, n)) : void 0 : void 0
                }

                function s(e, t, n, i) {
                    l[e.id] || (l[e.id] = {}), l[e.id][t] || (l[e.id][t] = {}), l[e.id][t][n] || (l[e.id][t][n] = []), l[e.id][t][n].push(i)
                }

                function u(e, t, n, i) {
                    if (l[e.id])
                        if (t)
                            if (i || n)
                                if (i) {
                                    if (l[e.id][t][n])
                                        for (var r = 0; r < l[e.id][t][n].length; r++)
                                            if (l[e.id][t][n][r] === i) {
                                                l[e.id][t][n].splice(r, 1);
                                                break
                                            }
                                } else delete l[e.id][t][n];
                    else l[e.id][t] = {};
                    else
                        for (var o in l[e.id]) l[e.id].hasOwnProperty(o) && (l[e.id][o] = {})
                }

                function o(e, t, n, i) {
                    if (this.element) {
                        e instanceof Array || (e = [e]), n || "function" != typeof t || (n = t, t = "_root");
                        var r, o = this.id;
                        for (r = 0; r < e.length; r++) i ? u(this, e[r], t, n) : (l[o] && l[o][e[r]] || h.addEvent(this, e[r], a(e[r])), s(this, e[r], t, n));
                        return this
                    }

                    function a(t) {
                        return function(e) {
                            ! function(e, t, n) {
                                if (l[e][n]) {
                                    var i, r, o = t.target || t.srcElement,
                                        a = {},
                                        s = 0,
                                        u = 0;
                                    for (i in c = 0, l[e][n]) l[e][n].hasOwnProperty(i) && (r = f(o, i, d[e].element)) && h.matchesEvent(n, d[e].element, r, "_root" == i, t) && (c++, l[e][n][i].match = r, a[c] = l[e][n][i]);
                                    for (t.stopPropagation = function() {
                                            t.cancelBubble = !0
                                        }, s = 0; s <= c; s++)
                                        if (a[s])
                                            for (u = 0; u < a[s].length; u++) {
                                                if (!1 === a[s][u].call(a[s].match, t)) return h.cancel(t);
                                                if (t.cancelBubble) return
                                            }
                                }
                            }(o, e, t)
                        }
                    }
                }

                function h(e, t) {
                    if (!(this instanceof h)) {
                        for (var n in d)
                            if (d[n].element === e) return d[n];
                        return d[++r] = new h(e, r), d[r]
                    }
                    this.element = e, this.id = t
                }
                h.prototype.on = function(e, t, n) {
                    return o.call(this, e, t, n)
                }, h.prototype.off = function(e, t, n) {
                    return o.call(this, e, t, n, !0)
                }, h.matchesSelector = function() {}, h.cancel = function(e) {
                    e.preventDefault(), e.stopPropagation()
                }, h.addEvent = function(e, t, n) {
                    var i = "blur" == t || "focus" == t;
                    e.element.addEventListener(t, n, i)
                }, h.matchesEvent = function() {
                    return !0
                }, e.exports && (e.exports = h), window.Gator = h
            }()
        }),
        rl = il.addEvent,
        ol = void 0 === window.PointerEvent && void 0 !== window.MSPointerEvent,
        al = {
            pointerdown: "MSPointerDown",
            pointerup: "MSPointerUp",
            pointercancel: "MSPointerCancel",
            pointermove: "MSPointerMove",
            pointerenter: "MSPointerEnter",
            pointerleave: "MSPointerLeave",
            pointerover: "MSPointerOver",
            pointerout: "MSPointerOut"
        },
        sl = "onmspointerenter" in document,
        ul = "onmspointerleave" in document;
    il.addEvent = function(e, t, n) {
        ol && al[t] && (t = al[t]), "transitionend" === t && (rl(e, "webkitTransitionEnd", n), rl(e, "otransitionend", n)), "mouseenter" === t && (t = "mouseover"), "mouseleave" === t && (t = "mouseout"), "MSPointerEnter" !== t || sl || (t = "MSPointerOver"), "MSPointerLeave" !== t || ul || (t = "MSPointerOut"), rl(e, t, n)
    }, il.matchesEvent = function(e, t, n, i, r) {
        return !("mouseenter" === e || "mouseleave" === e || !sl && "MSPointerEnter" === e || !ul && "MSPointerLeave" === e) || function(e, t, n, i) {
            return !i.relatedTarget || (!n || e === t) && t !== i.relatedTarget && !t.contains(i.relatedTarget)
        }(t, n, i, r)
    };
    var cl = "alert-displayed",
        ll = "alert-hidden",
        dl = "captions-enabled",
        fl = "captions-disabled",
        hl = "chromecast-connected",
        vl = "chromecast-disconnected",
        pl = "error-link-pressed",
        ml = "mediasession-play",
        gl = "mediasession-pause",
        yl = "mediasession-seekforward",
        _l = "mediasession-seekbackward",
        bl = "slate-displayed",
        wl = "video-buffer-end",
        El = "video-buffer-start",
        Sl = "video-can-start",
        kl = "video-duration-mismatch",
        Tl = "video-ended",
        Al = "video-exit",
        Pl = "video-fullscreen-change",
        Cl = "video-load-failure",
        xl = "video-manifest-loaded",
        Ll = "video-manifest-timeout",
        Ol = "video-minute-watched",
        Rl = "video-paused",
        Il = "video-played",
        Ml = "video-playback-error",
        Dl = "video-playback-rate-changed",
        Nl = "video-ready",
        Fl = "video-start-attempt",
        Bl = "video-start-failure",
        ql = "video-start-time",
        Ul = "video-stream-change",
        jl = "video-switch-back-to-auto",
        Vl = "video-switch-from-auto",
        Hl = "video-seek",
        Wl = "video-seeked";

    function zl(e) {
        var t = e.fps;
        return "metadata" in e && (t = e.metadata.fps), 30 < t
    }

    function Gl(e) {
        return e.quality || e.metadata.quality
    }

    function Yl(e) {
        return "string" != typeof e && (e = Gl(e)), parseInt(e, 10)
    }

    function Kl(e) {
        var t = ke(e).filter(zl).map(Gl);
        return function(e) {
            return !(-1 !== t.indexOf(Gl(e)) && !zl(e))
        }
    }

    function Xl(n) {
        return function(e) {
            if (!n.length) return !0;
            var t = "number" != typeof e.id ? parseInt(e.id, 10) : e.id;
            return -1 !== n.indexOf(t)
        }
    }

    function $l(e) {
        return "object" !== (void 0 === e ? "undefined" : M(e)) ? 0 : "fps" in e ? e.fps : "metadata" in e && "fps" in e.metadata ? e.metadata.fps : 0
    }

    function Jl() {
        var a = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : "desc";
        return function(e, t) {
            var n = Yl(e),
                i = $l(e),
                r = Yl(t),
                o = $l(t);
            return "asc" === a ? n - r || i - o : r - n || o - i
        }
    }

    function Ql(e) {
        var t = Gl(e),
            n = {
                "1440p": "2K",
                "2160p": "4K",
                "2700p": "5K",
                "3240p": "6K",
                "3780p": "7K",
                "4320p": "8K"
            };
        for (var i in n) t = t.replace(i, n[i]);
        return t
    }

    function Zl() {
        return void 0 !== window.performance && "function" == typeof window.performance.now ? window.performance.now() : Date.now()
    }

    function ed(e) {
        return Zl() - e
    }

    function td(e) {
        return nd() - e
    }

    function nd() {
        return parseInt(Zl() / 1e3, 10)
    }

    function id(e) {
        var t = e.getHours(),
            n = e.getMinutes(),
            i = 12 <= t ? "PM" : "AM";
        return (t = (t %= 12) || 12) + ":" + (n = n < 10 ? "0" + n : n) + " " + i
    }
    var rd = function() {
            function t(e) {
                O(this, t), this.player = e, this._reset(), this._setUpPlayerEvents()
            }
            return R(t, [{
                key: "_reset",
                value: function() {
                    this.rebufferCount = 0, this.rebufferDuration = 0, this.rebufferPercent = 0, this.playbackFailure = !1, this.sessionLength = 0, this.playerStartupTime = -1, this.startupRequestTime = null, this._lastScaleCheck = null, this._lastScale = null, this._scaleDurations = {
                        satisfied: 0,
                        tolerable: 0,
                        frustrated: 0
                    }
                }
            }, {
                key: "_setUpPlayerEvents",
                value: function() {
                    var t = this;
                    this.player.events.on(gn.PLAY_INITIATED, function() {
                        -1 === t.playerStartupTime && (t.startupRequestTime = Zl())
                    }), this.player.events.on(Pe.TIME_UPDATE, function() {
                        -1 === t.playerStartupTime && (t.playbackInitTime = Zl(), t.playerStartupTime = ed(t.startupRequestTime)), t._trackScaling()
                    }), this.player.events.on(gn.BUFFER_STARTED, function() {
                        -1 !== t.playerStartupTime && (t.rebufferCount++, t.rebufferStartTime = Zl())
                    }), this.player.events.on(gn.BUFFER_ENDED, function() {
                        -1 !== t.playerStartupTime && (t.rebufferDuration += ed(t.rebufferStartTime))
                    }), this.player.events.on(ds.error, function(e) {
                        (1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {
                            final: !0
                        }).final && (t.playbackFailure = !0)
                    }), this.player.events.on(ds.configChanged, function() {
                        t._reset()
                    })
                }
            }, {
                key: "_trackScaling",
                value: function() {
                    var e = this.player.element.querySelector(".vp-video").getBoundingClientRect(),
                        t = this.player.telecine.videoWidth,
                        n = this.player.telecine.videoHeight;
                    if (0 !== t || 0 !== n) {
                        var i = "satisfied",
                            r = "tolerable",
                            o = "frustrated",
                            a = i;
                        if (e.width > t && e.height > n && (t / e.width < .4 ? a = i : t / e.width < 1 ? a = r : 1 < t / e.width && (a = o)), this._lastScaleCheck) {
                            var s = ed(this._lastScaleCheck);
                            this._scaleDurations[this._lastScale] += s
                        }
                        this._lastScale = a, this._lastScaleCheck = Zl()
                    }
                }
            }, {
                key: "overallScore",
                get: function() {
                    return Math.min(this.failureScore, this.startupTimeScore, this.rebufferScore, this.videoQualityScore)
                }
            }, {
                key: "failureScore",
                get: function() {
                    return this.playbackFailure ? 0 : 1
                }
            }, {
                key: "startupTimeScore",
                get: function() {
                    return -1 === this.playerStartupTime ? null : 8e3 < this.playerStartupTime || -1 === this.playerStartupTime ? 0 : 2e3 < this.playerStartupTime ? .5 : 1
                }
            }, {
                key: "rebufferScore",
                get: function() {
                    return this.playbackInitTime ? (this.rebufferPercent = this.rebufferDuration / ed(this.playbackInitTime), 4 <= this.rebufferCount || .12 <= this.rebufferPercent ? 0 : this.rebufferCount < 4 && 0 !== this.rebufferCount ? this.rebufferPercent < .12 ? .5 : 0 : 1) : null
                }
            }, {
                key: "videoQualityScore",
                get: function() {
                    var n = this;
                    if (-1 === this.playerStartupTime) return null;
                    switch (this._trackScaling(), Object.keys(this._scaleDurations).reduce(function(e, t) {
                        return n._scaleDurations[e] > n._scaleDurations[t] ? e : t
                    })) {
                        case "satisfied":
                            return 1;
                        case "tolerable":
                            return .5;
                        case "frustrated":
                            return 0
                    }
                    return null
                }
            }]), t
        }(),
        od = {
            id: "7742C69E",
            name: "prod"
        },
        ad = "urn:x-cast:com.vimeo.cast.media",
        sd = {
            connected: "chromecast-connected",
            disconnected: "chromecast-disconnected",
            playing: "chromecast-playing",
            paused: "chromecast-paused",
            buffering: "chromecast-buffering",
            idle: "chromecast-idle",
            ended: "chromecast-ended",
            sessionStateChanged: "chromecast-session-state-changed",
            timeUpdated: "chromecast-time-updated",
            mediaLoadedSuccess: "chromecast-media-loaded-success",
            mediaLoadedFailed: "chromecast-media-loaded-failed",
            error: "chromecast-error"
        },
        ud = function() {
            function n(e) {
                for (var t in O(this, n), e = e || this, console) "function" == typeof console[t] && (this[t] = function() {})
            }
            return R(n, [{
                key: "toString",
                value: function() {
                    return "Console"
                }
            }]), n
        }(),
        cd = function() {
            function t(e) {
                O(this, t), this.alertTextElement = e.querySelector(".vp-text-alert-wrapper"), this.alertContentElement = this.alertTextElement.querySelector(".vp-alert-text")
            }
            return R(t, [{
                key: "show",
                value: function(e) {
                    this.alertContentElement.innerHTML = e, this.alertContentElement.classList.remove("hidden"), this.alertTextElement.classList.remove("hidden")
                }
            }, {
                key: "hide",
                value: function() {
                    this.alertContentElement.classList.add("hidden"), this.alertTextElement.classList.add("hidden")
                }
            }]), t
        }(),
        ld = t(function(e, t) {
            function n(e) {
                return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e
            }

            function i(e, t) {
                return e(t = {
                    exports: {}
                }, t.exports), t.exports
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var r = Math.ceil,
                o = Math.floor,
                u = function(e) {
                    return isNaN(e = +e) ? 0 : (0 < e ? o : r)(e)
                },
                c = function(e) {
                    if (null == e) throw TypeError("Can't call method on  " + e);
                    return e
                },
                p = i(function(e) {
                    var t = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
                    "number" == typeof __g && (__g = t)
                }),
                m = i(function(e) {
                    var t = e.exports = {
                        version: "2.5.5"
                    };
                    "number" == typeof __e && (__e = t)
                }),
                a = (m.version, function(e) {
                    if ("function" != typeof e) throw TypeError(e + " is not a function!");
                    return e
                }),
                g = function(i, r, e) {
                    if (a(i), void 0 === r) return i;
                    switch (e) {
                        case 1:
                            return function(e) {
                                return i.call(r, e)
                            };
                        case 2:
                            return function(e, t) {
                                return i.call(r, e, t)
                            };
                        case 3:
                            return function(e, t, n) {
                                return i.call(r, e, t, n)
                            }
                    }
                    return function() {
                        return i.apply(r, arguments)
                    }
                },
                l = function(e) {
                    return "object" == typeof e ? null !== e : "function" == typeof e
                },
                v = function(e) {
                    if (!l(e)) throw TypeError(e + " is not an object!");
                    return e
                },
                d = function(e) {
                    try {
                        return !!e()
                    } catch (e) {
                        return !0
                    }
                },
                s = !d(function() {
                    return 7 != Object.defineProperty({}, "a", {
                        get: function() {
                            return 7
                        }
                    }).a
                }),
                f = p.document,
                h = l(f) && l(f.createElement),
                y = function(e) {
                    return h ? f.createElement(e) : {}
                },
                _ = !s && !d(function() {
                    return 7 != Object.defineProperty(y("div"), "a", {
                        get: function() {
                            return 7
                        }
                    }).a
                }),
                b = function(e, t) {
                    if (!l(e)) return e;
                    var n, i;
                    if (t && "function" == typeof(n = e.toString) && !l(i = n.call(e))) return i;
                    if ("function" == typeof(n = e.valueOf) && !l(i = n.call(e))) return i;
                    if (!t && "function" == typeof(n = e.toString) && !l(i = n.call(e))) return i;
                    throw TypeError("Can't convert object to primitive value")
                },
                w = Object.defineProperty,
                E = {
                    f: s ? Object.defineProperty : function(e, t, n) {
                        if (v(e), t = b(t, !0), v(n), _) try {
                            return w(e, t, n)
                        } catch (e) {}
                        if ("get" in n || "set" in n) throw TypeError("Accessors not supported!");
                        return "value" in n && (e[t] = n.value), e
                    }
                },
                S = function(e, t) {
                    return {
                        enumerable: !(1 & e),
                        configurable: !(2 & e),
                        writable: !(4 & e),
                        value: t
                    }
                },
                k = s ? function(e, t, n) {
                    return E.f(e, t, S(1, n))
                } : function(e, t, n) {
                    return e[t] = n, e
                },
                T = {}.hasOwnProperty,
                A = function(e, t) {
                    return T.call(e, t)
                },
                P = "prototype",
                C = function(e, t, n) {
                    var i, r, o, a = e & C.F,
                        s = e & C.G,
                        u = e & C.S,
                        c = e & C.P,
                        l = e & C.B,
                        d = e & C.W,
                        f = s ? m : m[t] || (m[t] = {}),
                        h = f[P],
                        v = s ? p : u ? p[t] : (p[t] || {})[P];
                    for (i in s && (n = t), n)(r = !a && v && void 0 !== v[i]) && A(f, i) || (o = r ? v[i] : n[i], f[i] = s && "function" != typeof v[i] ? n[i] : l && r ? g(o, p) : d && v[i] == o ? function(i) {
                        var e = function(e, t, n) {
                            if (this instanceof i) {
                                switch (arguments.length) {
                                    case 0:
                                        return new i;
                                    case 1:
                                        return new i(e);
                                    case 2:
                                        return new i(e, t)
                                }
                                return new i(e, t, n)
                            }
                            return i.apply(this, arguments)
                        };
                        return e[P] = i[P], e
                    }(o) : c && "function" == typeof o ? g(Function.call, o) : o, c && ((f.virtual || (f.virtual = {}))[i] = o, e & C.R && h && !h[i] && k(h, i, o)))
                };
            C.F = 1, C.G = 2, C.S = 4, C.P = 8, C.B = 16, C.W = 32, C.U = 64, C.R = 128;
            var x = C,
                L = k,
                O = {},
                R = {}.toString,
                I = function(e) {
                    return R.call(e).slice(8, -1)
                },
                M = Object("z").propertyIsEnumerable(0) ? Object : function(e) {
                    return "String" == I(e) ? e.split("") : Object(e)
                },
                D = function(e) {
                    return M(c(e))
                },
                N = Math.min,
                F = function(e) {
                    return 0 < e ? N(u(e), 9007199254740991) : 0
                },
                B = Math.max,
                q = Math.min,
                U = "__core-js_shared__",
                j = p[U] || (p[U] = {}),
                V = function(e) {
                    return j[e] || (j[e] = {})
                },
                H = 0,
                W = Math.random(),
                z = function(e) {
                    return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++H + W).toString(36))
                },
                G = V("keys"),
                Y = function(e) {
                    return G[e] || (G[e] = z(e))
                },
                K = function(s) {
                    return function(e, t, n) {
                        var i, r = D(e),
                            o = F(r.length),
                            a = function(e, t) {
                                return (e = u(e)) < 0 ? B(e + t, 0) : q(e, t)
                            }(n, o);
                        if (s && t != t) {
                            for (; a < o;)
                                if ((i = r[a++]) != i) return !0
                        } else
                            for (; a < o; a++)
                                if ((s || a in r) && r[a] === t) return s || a || 0;
                        return !s && -1
                    }
                }(!1),
                X = Y("IE_PROTO"),
                $ = function(e, t) {
                    var n, i = D(e),
                        r = 0,
                        o = [];
                    for (n in i) n != X && A(i, n) && o.push(n);
                    for (; t.length > r;) A(i, n = t[r++]) && (~K(o, n) || o.push(n));
                    return o
                },
                J = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),
                Q = Object.keys || function(e) {
                    return $(e, J)
                },
                Z = s ? Object.defineProperties : function(e, t) {
                    v(e);
                    for (var n, i = Q(t), r = i.length, o = 0; o < r;) E.f(e, n = i[o++], t[n]);
                    return e
                },
                ee = p.document,
                te = ee && ee.documentElement,
                ne = Y("IE_PROTO"),
                ie = function() {},
                re = "prototype",
                oe = function() {
                    var e, t = y("iframe"),
                        n = J.length;
                    for (t.style.display = "none", te.appendChild(t), t.src = "javascript:", (e = t.contentWindow.document).open(), e.write("<script>document.F=Object<\/script>"), e.close(), oe = e.F; n--;) delete oe[re][J[n]];
                    return oe()
                },
                ae = Object.create || function(e, t) {
                    var n;
                    return null !== e ? (ie[re] = v(e), n = new ie, ie[re] = null, n[ne] = e) : n = oe(), void 0 === t ? n : Z(n, t)
                },
                se = i(function(e) {
                    var t = V("wks"),
                        n = p.Symbol,
                        i = "function" == typeof n;
                    (e.exports = function(e) {
                        return t[e] || (t[e] = i && n[e] || (i ? n : z)("Symbol." + e))
                    }).store = t
                }),
                ue = E.f,
                ce = se("toStringTag"),
                le = function(e, t, n) {
                    e && !A(e = n ? e : e.prototype, ce) && ue(e, ce, {
                        configurable: !0,
                        value: t
                    })
                },
                de = {};
            k(de, se("iterator"), function() {
                return this
            });
            var fe = function(e) {
                    return Object(c(e))
                },
                he = Y("IE_PROTO"),
                ve = Object.prototype,
                pe = Object.getPrototypeOf || function(e) {
                    return e = fe(e), A(e, he) ? e[he] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? ve : null
                },
                me = se("iterator"),
                ge = !([].keys && "next" in [].keys()),
                ye = "values",
                _e = function() {
                    return this
                },
                be = function(e, t, n, i, r, o, a) {
                    ! function(e, t, n) {
                        e.prototype = ae(de, {
                            next: S(1, n)
                        }), le(e, t + " Iterator")
                    }(n, t, i);
                    var s, u, c, l = function(e) {
                            if (!ge && e in v) return v[e];
                            switch (e) {
                                case "keys":
                                case ye:
                                    return function() {
                                        return new n(this, e)
                                    }
                            }
                            return function() {
                                return new n(this, e)
                            }
                        },
                        d = t + " Iterator",
                        f = r == ye,
                        h = !1,
                        v = e.prototype,
                        p = v[me] || v["@@iterator"] || r && v[r],
                        m = p || l(r),
                        g = r ? f ? l("entries") : m : void 0,
                        y = "Array" == t && v.entries || p;
                    if (y && (c = pe(y.call(new e))) !== Object.prototype && c.next && le(c, d, !0), f && p && p.name !== ye && (h = !0, m = function() {
                            return p.call(this)
                        }), a && (ge || h || !v[me]) && k(v, me, m), O[t] = m, O[d] = _e, r)
                        if (s = {
                                values: f ? m : l(ye),
                                keys: o ? m : l("keys"),
                                entries: g
                            }, a)
                            for (u in s) u in v || L(v, u, s[u]);
                        else x(x.P + x.F * (ge || h), t, s);
                    return s
                },
                we = function(s) {
                    return function(e, t) {
                        var n, i, r = String(c(e)),
                            o = u(t),
                            a = r.length;
                        return o < 0 || a <= o ? s ? "" : void 0 : (n = r.charCodeAt(o)) < 55296 || 56319 < n || o + 1 === a || (i = r.charCodeAt(o + 1)) < 56320 || 57343 < i ? s ? r.charAt(o) : n : s ? r.slice(o, o + 2) : i - 56320 + (n - 55296 << 10) + 65536
                    }
                }(!0);
            be(String, "String", function(e) {
                this._t = String(e), this._i = 0
            }, function() {
                var e, t = this._t,
                    n = this._i;
                return n >= t.length ? {
                    value: void 0,
                    done: !0
                } : (e = we(t, n), this._i += e.length, {
                    value: e,
                    done: !1
                })
            });
            var Ee = function(e, t) {
                return {
                    value: t,
                    done: !!e
                }
            };
            be(Array, "Array", function(e, t) {
                this._t = D(e), this._i = 0, this._k = t
            }, function() {
                var e = this._t,
                    t = this._k,
                    n = this._i++;
                return !e || n >= e.length ? (this._t = void 0, Ee(1)) : Ee(0, "keys" == t ? n : "values" == t ? e[n] : [n, e[n]])
            }, "values");
            O.Arguments = O.Array;
            for (var Se = se("toStringTag"), ke = "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","), Te = 0; Te < ke.length; Te++) {
                var Ae = ke[Te],
                    Pe = p[Ae],
                    Ce = Pe && Pe.prototype;
                Ce && !Ce[Se] && k(Ce, Se, Ae), O[Ae] = O.Array
            }
            var xe = {
                    f: se
                },
                Le = xe.f("iterator"),
                Oe = i(function(e) {
                    e.exports = {
                        default: Le,
                        __esModule: !0
                    }
                });
            n(Oe);
            var Re = i(function(e) {
                    var n = z("meta"),
                        t = E.f,
                        i = 0,
                        r = Object.isExtensible || function() {
                            return !0
                        },
                        o = !d(function() {
                            return r(Object.preventExtensions({}))
                        }),
                        a = function(e) {
                            t(e, n, {
                                value: {
                                    i: "O" + ++i,
                                    w: {}
                                }
                            })
                        },
                        s = e.exports = {
                            KEY: n,
                            NEED: !1,
                            fastKey: function(e, t) {
                                if (!l(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
                                if (!A(e, n)) {
                                    if (!r(e)) return "F";
                                    if (!t) return "E";
                                    a(e)
                                }
                                return e[n].i
                            },
                            getWeak: function(e, t) {
                                if (!A(e, n)) {
                                    if (!r(e)) return !0;
                                    if (!t) return !1;
                                    a(e)
                                }
                                return e[n].w
                            },
                            onFreeze: function(e) {
                                return o && s.NEED && r(e) && !A(e, n) && a(e), e
                            }
                        }
                }),
                Ie = (Re.KEY, Re.NEED, Re.fastKey, Re.getWeak, Re.onFreeze, E.f),
                Me = function(e) {
                    var t = m.Symbol || (m.Symbol = {});
                    "_" == e.charAt(0) || e in t || Ie(t, e, {
                        value: xe.f(e)
                    })
                },
                De = {
                    f: Object.getOwnPropertySymbols
                },
                Ne = {
                    f: {}.propertyIsEnumerable
                },
                Fe = Array.isArray || function(e) {
                    return "Array" == I(e)
                },
                Be = J.concat("length", "prototype"),
                qe = {
                    f: Object.getOwnPropertyNames || function(e) {
                        return $(e, Be)
                    }
                },
                Ue = qe.f,
                je = {}.toString,
                Ve = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [],
                He = {
                    f: function(e) {
                        return Ve && "[object Window]" == je.call(e) ? function(e) {
                            try {
                                return Ue(e)
                            } catch (e) {
                                return Ve.slice()
                            }
                        }(e) : Ue(D(e))
                    }
                },
                We = Object.getOwnPropertyDescriptor,
                ze = {
                    f: s ? We : function(e, t) {
                        if (e = D(e), t = b(t, !0), _) try {
                            return We(e, t)
                        } catch (e) {}
                        if (A(e, t)) return S(!Ne.f.call(e, t), e[t])
                    }
                },
                Ge = Re.KEY,
                Ye = ze.f,
                Ke = E.f,
                Xe = He.f,
                $e = p.Symbol,
                Je = p.JSON,
                Qe = Je && Je.stringify,
                Ze = "prototype",
                et = se("_hidden"),
                tt = se("toPrimitive"),
                nt = {}.propertyIsEnumerable,
                it = V("symbol-registry"),
                rt = V("symbols"),
                ot = V("op-symbols"),
                at = Object[Ze],
                st = "function" == typeof $e,
                ut = p.QObject,
                ct = !ut || !ut[Ze] || !ut[Ze].findChild,
                lt = s && d(function() {
                    return 7 != ae(Ke({}, "a", {
                        get: function() {
                            return Ke(this, "a", {
                                value: 7
                            }).a
                        }
                    })).a
                }) ? function(e, t, n) {
                    var i = Ye(at, t);
                    i && delete at[t], Ke(e, t, n), i && e !== at && Ke(at, t, i)
                } : Ke,
                dt = function(e) {
                    var t = rt[e] = ae($e[Ze]);
                    return t._k = e, t
                },
                ft = st && "symbol" == typeof $e.iterator ? function(e) {
                    return "symbol" == typeof e
                } : function(e) {
                    return e instanceof $e
                },
                ht = function(e, t, n) {
                    return e === at && ht(ot, t, n), v(e), t = b(t, !0), v(n), A(rt, t) ? (n.enumerable ? (A(e, et) && e[et][t] && (e[et][t] = !1), n = ae(n, {
                        enumerable: S(0, !1)
                    })) : (A(e, et) || Ke(e, et, S(1, {})), e[et][t] = !0), lt(e, t, n)) : Ke(e, t, n)
                },
                vt = function(e, t) {
                    v(e);
                    for (var n, i = function(e) {
                            var t = Q(e),
                                n = De.f;
                            if (n)
                                for (var i, r = n(e), o = Ne.f, a = 0; r.length > a;) o.call(e, i = r[a++]) && t.push(i);
                            return t
                        }(t = D(t)), r = 0, o = i.length; r < o;) ht(e, n = i[r++], t[n]);
                    return e
                },
                pt = function(e) {
                    var t = nt.call(this, e = b(e, !0));
                    return !(this === at && A(rt, e) && !A(ot, e)) && (!(t || !A(this, e) || !A(rt, e) || A(this, et) && this[et][e]) || t)
                },
                mt = function(e, t) {
                    if (e = D(e), t = b(t, !0), e !== at || !A(rt, t) || A(ot, t)) {
                        var n = Ye(e, t);
                        return !n || !A(rt, t) || A(e, et) && e[et][t] || (n.enumerable = !0), n
                    }
                },
                gt = function(e) {
                    for (var t, n = Xe(D(e)), i = [], r = 0; n.length > r;) A(rt, t = n[r++]) || t == et || t == Ge || i.push(t);
                    return i
                },
                yt = function(e) {
                    for (var t, n = e === at, i = Xe(n ? ot : D(e)), r = [], o = 0; i.length > o;) !A(rt, t = i[o++]) || n && !A(at, t) || r.push(rt[t]);
                    return r
                };
            st || (L(($e = function() {
                if (this instanceof $e) throw TypeError("Symbol is not a constructor!");
                var t = z(0 < arguments.length ? arguments[0] : void 0),
                    n = function(e) {
                        this === at && n.call(ot, e), A(this, et) && A(this[et], t) && (this[et][t] = !1), lt(this, t, S(1, e))
                    };
                return s && ct && lt(at, t, {
                    configurable: !0,
                    set: n
                }), dt(t)
            })[Ze], "toString", function() {
                return this._k
            }), ze.f = mt, E.f = ht, qe.f = He.f = gt, Ne.f = pt, De.f = yt, xe.f = function(e) {
                return dt(se(e))
            }), x(x.G + x.W + x.F * !st, {
                Symbol: $e
            });
            for (var _t = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), bt = 0; _t.length > bt;) se(_t[bt++]);
            for (var wt = Q(se.store), Et = 0; wt.length > Et;) Me(wt[Et++]);
            x(x.S + x.F * !st, "Symbol", {
                for: function(e) {
                    return A(it, e += "") ? it[e] : it[e] = $e(e)
                },
                keyFor: function(e) {
                    if (!ft(e)) throw TypeError(e + " is not a symbol!");
                    for (var t in it)
                        if (it[t] === e) return t
                },
                useSetter: function() {
                    ct = !0
                },
                useSimple: function() {
                    ct = !1
                }
            }), x(x.S + x.F * !st, "Object", {
                create: function(e, t) {
                    return void 0 === t ? ae(e) : vt(ae(e), t)
                },
                defineProperty: ht,
                defineProperties: vt,
                getOwnPropertyDescriptor: mt,
                getOwnPropertyNames: gt,
                getOwnPropertySymbols: yt
            }), Je && x(x.S + x.F * (!st || d(function() {
                var e = $e();
                return "[null]" != Qe([e]) || "{}" != Qe({
                    a: e
                }) || "{}" != Qe(Object(e))
            })), "JSON", {
                stringify: function(e) {
                    for (var t, n, i = [e], r = 1; arguments.length > r;) i.push(arguments[r++]);
                    if (n = t = i[1], (l(t) || void 0 !== e) && !ft(e)) return Fe(t) || (t = function(e, t) {
                        if ("function" == typeof n && (t = n.call(this, e, t)), !ft(t)) return t
                    }), i[1] = t, Qe.apply(Je, i)
                }
            }), $e[Ze][tt] || k($e[Ze], tt, $e[Ze].valueOf), le($e, "Symbol"), le(Math, "Math", !0), le(p.JSON, "JSON", !0), Me("asyncIterator"), Me("observable");
            var St = m.Symbol,
                kt = i(function(e) {
                    e.exports = {
                        default: St,
                        __esModule: !0
                    }
                });
            n(kt);
            var Tt = n(i(function(e, t) {
                t.__esModule = !0;
                var n = o(Oe),
                    i = o(kt),
                    r = "function" == typeof i.default && "symbol" == typeof n.default ? function(e) {
                        return typeof e
                    } : function(e) {
                        return e && "function" == typeof i.default && e.constructor === i.default && e !== i.default.prototype ? "symbol" : typeof e
                    };

                function o(e) {
                    return e && e.__esModule ? e : {
                        default: e
                    }
                }
                t.default = "function" == typeof i.default && "symbol" === r(n.default) ? function(e) {
                    return void 0 === e ? "undefined" : r(e)
                } : function(e) {
                    return e && "function" == typeof i.default && e.constructor === i.default && e !== i.default.prototype ? "symbol" : void 0 === e ? "undefined" : r(e)
                }
            }));
            ! function(e, t) {
                var n = (m.Object || {})[e] || Object[e],
                    i = {};
                i[e] = t(n), x(x.S + x.F * d(function() {
                    n(1)
                }), "Object", i)
            }("keys", function() {
                return function(e) {
                    return Q(fe(e))
                }
            });
            var At, Pt, Ct, xt = m.Object.keys,
                Lt = n(i(function(e) {
                    e.exports = {
                        default: xt,
                        __esModule: !0
                    }
                })),
                Ot = se("toStringTag"),
                Rt = "Arguments" == I(function() {
                    return arguments
                }()),
                It = function(e) {
                    var t, n, i;
                    return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof(n = function(e, t) {
                        try {
                            return e[t]
                        } catch (e) {}
                    }(t = Object(e), Ot)) ? n : Rt ? I(t) : "Object" == (i = I(t)) && "function" == typeof t.callee ? "Arguments" : i
                },
                Mt = function(t, e, n, i) {
                    try {
                        return i ? e(v(n)[0], n[1]) : e(n)
                    } catch (e) {
                        var r = t.return;
                        throw void 0 !== r && v(r.call(t)), e
                    }
                },
                Dt = se("iterator"),
                Nt = Array.prototype,
                Ft = se("iterator"),
                Bt = m.getIteratorMethod = function(e) {
                    if (null != e) return e[Ft] || e["@@iterator"] || O[It(e)]
                },
                qt = i(function(e) {
                    var f = {},
                        h = {},
                        t = e.exports = function(e, t, n, i, r) {
                            var o, a, s, u, c = r ? function() {
                                    return e
                                } : Bt(e),
                                l = g(n, i, t ? 2 : 1),
                                d = 0;
                            if ("function" != typeof c) throw TypeError(e + " is not iterable!");
                            if (function(e) {
                                    return void 0 !== e && (O.Array === e || Nt[Dt] === e)
                                }(c)) {
                                for (o = F(e.length); d < o; d++)
                                    if ((u = t ? l(v(a = e[d])[0], a[1]) : l(e[d])) === f || u === h) return u
                            } else
                                for (s = c.call(e); !(a = s.next()).done;)
                                    if ((u = Mt(s, l, a.value, t)) === f || u === h) return u
                        };
                    t.BREAK = f, t.RETURN = h
                }),
                Ut = se("species"),
                jt = function(e, t) {
                    var n, i = v(e).constructor;
                    return void 0 === i || null == (n = v(i)[Ut]) ? t : a(n)
                },
                Vt = p.process,
                Ht = p.setImmediate,
                Wt = p.clearImmediate,
                zt = p.MessageChannel,
                Gt = p.Dispatch,
                Yt = 0,
                Kt = {},
                Xt = "onreadystatechange",
                $t = function() {
                    var e = +this;
                    if (Kt.hasOwnProperty(e)) {
                        var t = Kt[e];
                        delete Kt[e], t()
                    }
                },
                Jt = function(e) {
                    $t.call(e.data)
                };
            Ht && Wt || (Ht = function(e) {
                for (var t = [], n = 1; arguments.length > n;) t.push(arguments[n++]);
                return Kt[++Yt] = function() {
                    ! function(e, t, n) {
                        var i = void 0 === n;
                        switch (t.length) {
                            case 0:
                                return i ? e() : e.call(n);
                            case 1:
                                return i ? e(t[0]) : e.call(n, t[0]);
                            case 2:
                                return i ? e(t[0], t[1]) : e.call(n, t[0], t[1]);
                            case 3:
                                return i ? e(t[0], t[1], t[2]) : e.call(n, t[0], t[1], t[2]);
                            case 4:
                                return i ? e(t[0], t[1], t[2], t[3]) : e.call(n, t[0], t[1], t[2], t[3])
                        }
                        e.apply(n, t)
                    }("function" == typeof e ? e : Function(e), t)
                }, At(Yt), Yt
            }, Wt = function(e) {
                delete Kt[e]
            }, "process" == I(Vt) ? At = function(e) {
                Vt.nextTick(g($t, e, 1))
            } : Gt && Gt.now ? At = function(e) {
                Gt.now(g($t, e, 1))
            } : zt ? (Ct = (Pt = new zt).port2, Pt.port1.onmessage = Jt, At = g(Ct.postMessage, Ct, 1)) : p.addEventListener && "function" == typeof postMessage && !p.importScripts ? (At = function(e) {
                p.postMessage(e + "", "*")
            }, p.addEventListener("message", Jt, !1)) : At = Xt in y("script") ? function(e) {
                te.appendChild(y("script"))[Xt] = function() {
                    te.removeChild(this), $t.call(e)
                }
            } : function(e) {
                setTimeout(g($t, e, 1), 0)
            });
            var Qt = {
                    set: Ht,
                    clear: Wt
                },
                Zt = Qt.set,
                en = p.MutationObserver || p.WebKitMutationObserver,
                tn = p.process,
                nn = p.Promise,
                rn = "process" == I(tn);

            function on(e) {
                var n, i;
                this.promise = new e(function(e, t) {
                    if (void 0 !== n || void 0 !== i) throw TypeError("Bad Promise constructor");
                    n = e, i = t
                }), this.resolve = a(n), this.reject = a(i)
            }
            var an = {
                    f: function(e) {
                        return new on(e)
                    }
                },
                sn = function(e) {
                    try {
                        return {
                            e: !1,
                            v: e()
                        }
                    } catch (e) {
                        return {
                            e: !0,
                            v: e
                        }
                    }
                },
                un = function(e, t) {
                    if (v(e), l(t) && t.constructor === e) return t;
                    var n = an.f(e);
                    return (0, n.resolve)(t), n.promise
                },
                cn = se("species"),
                ln = se("iterator"),
                dn = !1;
            try {
                [7][ln]().return = function() {
                    dn = !0
                }
            } catch (e) {}
            var fn, hn, vn, pn, mn = Qt.set,
                gn = function() {
                    var n, i, r, e = function() {
                        var e, t;
                        for (rn && (e = tn.domain) && e.exit(); n;) {
                            t = n.fn, n = n.next;
                            try {
                                t()
                            } catch (e) {
                                throw n ? r() : i = void 0, e
                            }
                        }
                        i = void 0, e && e.enter()
                    };
                    if (rn) r = function() {
                        tn.nextTick(e)
                    };
                    else if (!en || p.navigator && p.navigator.standalone)
                        if (nn && nn.resolve) {
                            var t = nn.resolve();
                            r = function() {
                                t.then(e)
                            }
                        } else r = function() {
                            Zt.call(p, e)
                        };
                    else {
                        var o = !0,
                            a = document.createTextNode("");
                        new en(e).observe(a, {
                            characterData: !0
                        }), r = function() {
                            a.data = o = !o
                        }
                    }
                    return function(e) {
                        var t = {
                            fn: e,
                            next: void 0
                        };
                        i && (i.next = t), n || (n = t, r()), i = t
                    }
                }(),
                yn = "Promise",
                _n = p.TypeError,
                bn = p.process,
                wn = p[yn],
                En = "process" == It(bn),
                Sn = function() {},
                kn = hn = an.f,
                Tn = !! function() {
                    try {
                        var e = wn.resolve(1),
                            t = (e.constructor = {})[se("species")] = function(e) {
                                e(Sn, Sn)
                            };
                        return (En || "function" == typeof PromiseRejectionEvent) && e.then(Sn) instanceof t
                    } catch (e) {}
                }(),
                An = function(e) {
                    var t;
                    return !(!l(e) || "function" != typeof(t = e.then)) && t
                },
                Pn = function(l, n) {
                    if (!l._n) {
                        l._n = !0;
                        var i = l._c;
                        gn(function() {
                            for (var u = l._v, c = 1 == l._s, e = 0, t = function(e) {
                                    var t, n, i, r = c ? e.ok : e.fail,
                                        o = e.resolve,
                                        a = e.reject,
                                        s = e.domain;
                                    try {
                                        r ? (c || (2 == l._h && Ln(l), l._h = 1), !0 === r ? t = u : (s && s.enter(), t = r(u), s && (s.exit(), i = !0)), t === e.promise ? a(_n("Promise-chain cycle")) : (n = An(t)) ? n.call(t, o, a) : o(t)) : a(u)
                                    } catch (e) {
                                        s && !i && s.exit(), a(e)
                                    }
                                }; i.length > e;) t(i[e++]);
                            l._c = [], l._n = !1, n && !l._h && Cn(l)
                        })
                    }
                },
                Cn = function(o) {
                    mn.call(p, function() {
                        var e, t, n, i = o._v,
                            r = xn(o);
                        if (r && (e = sn(function() {
                                En ? bn.emit("unhandledRejection", i, o) : (t = p.onunhandledrejection) ? t({
                                    promise: o,
                                    reason: i
                                }) : (n = p.console) && n.error && n.error("Unhandled promise rejection", i)
                            }), o._h = En || xn(o) ? 2 : 1), o._a = void 0, r && e.e) throw e.v
                    })
                },
                xn = function(e) {
                    return 1 !== e._h && 0 === (e._a || e._c).length
                },
                Ln = function(t) {
                    mn.call(p, function() {
                        var e;
                        En ? bn.emit("rejectionHandled", t) : (e = p.onrejectionhandled) && e({
                            promise: t,
                            reason: t._v
                        })
                    })
                },
                On = function(e) {
                    var t = this;
                    t._d || (t._d = !0, (t = t._w || t)._v = e, t._s = 2, t._a || (t._a = t._c.slice()), Pn(t, !0))
                },
                Rn = function(e) {
                    var n, i = this;
                    if (!i._d) {
                        i._d = !0, i = i._w || i;
                        try {
                            if (i === e) throw _n("Promise can't be resolved itself");
                            (n = An(e)) ? gn(function() {
                                var t = {
                                    _w: i,
                                    _d: !1
                                };
                                try {
                                    n.call(e, g(Rn, t, 1), g(On, t, 1))
                                } catch (e) {
                                    On.call(t, e)
                                }
                            }): (i._v = e, i._s = 1, Pn(i, !1))
                        } catch (e) {
                            On.call({
                                _w: i,
                                _d: !1
                            }, e)
                        }
                    }
                };
            Tn || (wn = function(e) {
                    ! function(e, t, n, i) {
                        if (!(e instanceof t) || void 0 !== i && i in e) throw TypeError(n + ": incorrect invocation!")
                    }(this, wn, yn, "_h"), a(e), fn.call(this);
                    try {
                        e(g(Rn, this, 1), g(On, this, 1))
                    } catch (e) {
                        On.call(this, e)
                    }
                }, (fn = function(e) {
                    this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1
                }).prototype = function(e, t, n) {
                    for (var i in t) n && e[i] ? e[i] = t[i] : k(e, i, t[i]);
                    return e
                }(wn.prototype, {
                    then: function(e, t) {
                        var n = kn(jt(this, wn));
                        return n.ok = "function" != typeof e || e, n.fail = "function" == typeof t && t, n.domain = En ? bn.domain : void 0, this._c.push(n), this._a && this._a.push(n), this._s && Pn(this, !1), n.promise
                    },
                    catch: function(e) {
                        return this.then(void 0, e)
                    }
                }), vn = function() {
                    var e = new fn;
                    this.promise = e, this.resolve = g(Rn, e, 1), this.reject = g(On, e, 1)
                }, an.f = kn = function(e) {
                    return e === wn || e === pn ? new vn(e) : hn(e)
                }), x(x.G + x.W + x.F * !Tn, {
                    Promise: wn
                }), le(wn, yn),
                function(e) {
                    var t = "function" == typeof m[e] ? m[e] : p[e];
                    s && t && !t[cn] && E.f(t, cn, {
                        configurable: !0,
                        get: function() {
                            return this
                        }
                    })
                }(yn), pn = m[yn], x(x.S + x.F * !Tn, yn, {
                    reject: function(e) {
                        var t = kn(this);
                        return (0, t.reject)(e), t.promise
                    }
                }), x(x.S + !0 * x.F, yn, {
                    resolve: function(e) {
                        return un(this === pn ? wn : this, e)
                    }
                }), x(x.S + x.F * !(Tn && function(e, t) {
                    if (!t && !dn) return !1;
                    var n = !1;
                    try {
                        var i = [7],
                            r = i[ln]();
                        r.next = function() {
                            return {
                                done: n = !0
                            }
                        }, i[ln] = function() {
                            return r
                        }, e(i)
                    } catch (e) {}
                    return n
                }(function(e) {
                    wn.all(e).catch(Sn)
                })), yn, {
                    all: function(e) {
                        var a = this,
                            t = kn(a),
                            s = t.resolve,
                            u = t.reject,
                            n = sn(function() {
                                var i = [],
                                    r = 0,
                                    o = 1;
                                qt(e, !1, function(e) {
                                    var t = r++,
                                        n = !1;
                                    i.push(void 0), o++, a.resolve(e).then(function(e) {
                                        n || (n = !0, i[t] = e, --o || s(i))
                                    }, u)
                                }), --o || s(i)
                            });
                        return n.e && u(n.v), t.promise
                    },
                    race: function(e) {
                        var t = this,
                            n = kn(t),
                            i = n.reject,
                            r = sn(function() {
                                qt(e, !1, function(e) {
                                    t.resolve(e).then(n.resolve, i)
                                })
                            });
                        return r.e && i(r.v), n.promise
                    }
                }), x(x.P + x.R, "Promise", {
                    finally: function(t) {
                        var n = jt(this, m.Promise || p.Promise),
                            e = "function" == typeof t;
                        return this.then(e ? function(e) {
                            return un(n, t()).then(function() {
                                return e
                            })
                        } : t, e ? function(e) {
                            return un(n, t()).then(function() {
                                throw e
                            })
                        } : t)
                    }
                }), x(x.S, "Promise", {
                    try: function(e) {
                        var t = an.f(this),
                            n = sn(e);
                        return (n.e ? t.reject : t.resolve)(n.v), t.promise
                    }
                });
            var In = m.Promise,
                Mn = n(i(function(e) {
                    e.exports = {
                        default: In,
                        __esModule: !0
                    }
                })),
                Dn = Object.assign,
                Nn = !Dn || d(function() {
                    var e = {},
                        t = {},
                        n = Kn(),
                        i = "abcdefghijklmnopqrst";
                    return e[n] = 7, i.split("").forEach(function(e) {
                        t[e] = e
                    }), 7 != Dn({}, e)[n] || Object.keys(Dn({}, t)).join("") != i
                }) ? function(e, t) {
                    for (var n = fe(e), i = arguments.length, r = 1, o = De.f, a = Ne.f; r < i;)
                        for (var s, u = M(arguments[r++]), c = o ? Q(u).concat(o(u)) : Q(u), l = c.length, d = 0; d < l;) a.call(u, s = c[d++]) && (n[s] = u[s]);
                    return n
                } : Dn;
            x(x.S + x.F, "Object", {
                assign: Nn
            });
            var Fn = m.Object.assign,
                Bn = n(i(function(e) {
                    e.exports = {
                        default: Fn,
                        __esModule: !0
                    }
                })),
                qn = n(i(function(e, t) {
                    t.__esModule = !0, t.default = function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }
                }));
            x(x.S + x.F * !s, "Object", {
                defineProperty: E.f
            });
            var Un = m.Object,
                jn = function(e, t, n) {
                    return Un.defineProperty(e, t, n)
                },
                Vn = i(function(e) {
                    e.exports = {
                        default: jn,
                        __esModule: !0
                    }
                });
            n(Vn);
            var Hn = n(i(function(e, t) {
                    t.__esModule = !0;
                    var r = function(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }(Vn);
                    t.default = function() {
                        function i(e, t) {
                            for (var n = 0; n < t.length; n++) {
                                var i = t[n];
                                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), (0, r.default)(e, i.key, i)
                            }
                        }
                        return function(e, t, n) {
                            return t && i(e.prototype, t), n && i(e, n), e
                        }
                    }()
                })),
                Wn = {
                    SETUP_DONE: "SETUP_DONE",
                    NOT_SETUP: "NOT_SETUP"
                },
                zn = {
                    CONNECTED: "#E5E500",
                    DISCONNECTED: "#00ADEF"
                },
                Gn = function() {
                    function e() {
                        qn(this, e), this.version = "1.2.30", this.remotePlayer = null, this.remotePlayerController = null, this.CastContextEventType = null, this.RemotePlayerEventType = null, this.CastState = Wn, this.SessionState = null, this.PlayerState = null, this.isLoadingMedia = !1
                    }
                    return Hn(e, [{
                        key: "init",
                        value: function() {
                            var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                                t = e.receiverApplicationId,
                                n = void 0 === t ? "" : t,
                                i = e.resumeSavedSession,
                                r = void 0 === i || i,
                                o = e.language,
                                a = void 0 === o ? null : o,
                                s = e.autoJoinPolicy,
                                u = void 0 === s ? "TAB_AND_ORIGIN_SCOPED" : s;
                            if (!this.isGCastApiAvailable) throw new Error("CAF is not available. Call setup() first.");
                            if ("string" != typeof n || "" === n.trim()) throw new Error("Parameter 'receiverApplicationId' must be valid.");
                            switch (u) {
                                case chrome.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED:
                                case chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED:
                                case chrome.cast.AutoJoinPolicy.PAGE_SCOPED:
                                    break;
                                default:
                                    u = chrome.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED
                            }
                            return this.CastContextEventType = cast.framework.CastContextEventType, this.RemotePlayerEventType = cast.framework.RemotePlayerEventType, this.CastState = Bn(this.CastState, cast.framework.CastState), this.SessionState = cast.framework.SessionState, this.PlayerState = chrome.cast.media.PlayerState, cast.framework.CastContext.getInstance().setOptions({
                                receiverApplicationId: n.trim(),
                                resumeSavedSession: r,
                                language: a,
                                autoJoinPolicy: u
                            }), this.isInitialized ? this.remotePlayerController : this.initRemotePlayer()
                        }
                    }, {
                        key: "initRemotePlayer",
                        value: function() {
                            if (!this.isGCastApiAvailable) throw new ReferenceError("CAF is not available. Call setup() first.");
                            return this.remotePlayer = new cast.framework.RemotePlayer, this.remotePlayerController = new cast.framework.RemotePlayerController(this.remotePlayer), this.remotePlayerController
                        }
                    }, {
                        key: "setup",
                        value: function() {
                            var o = this,
                                e = (0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}).loadLibrary,
                                n = void 0 === e || e;
                            return new Mn(function(i, r) {
                                if (o.isGCastApiAvailable) return o.AutoJoinPolicy = chrome.cast.AutoJoinPolicy, void i(!0);
                                window.__onGCastApiAvailable = function(e, t) {
                                    if (t) {
                                        var n = new Error(t);
                                        r(n)
                                    } else o.AutoJoinPolicy = chrome.cast.AutoJoinPolicy, i(e)
                                };
                                try {
                                    if (!1 === n) throw new ReferenceError("Cast is not available. Make sure the library has been loaded.");
                                    o.loadLibrary() || i(!1)
                                } catch (e) {
                                    var t = new Error(e);
                                    r(t)
                                }
                            })
                        }
                    }, {
                        key: "loadLibrary",
                        value: function() {
                            if (this.isGCastApiAvailable) return !0;
                            if (null !== window.chrome && void 0 !== window.chrome && "Google Inc." === window.navigator.vendor) {
                                var e = "//www.gstatic.com/cv/js/sender/v1/cast_sender.js";
                                if (!(0 < document.querySelectorAll('script[src^="' + e + '"]').length)) {
                                    e += "?loadCastFramework=1";
                                    var t = document.createElement("script");
                                    return t.type = "text/javascript", t.src = e, t.async = !0, document.head.appendChild(t), !0
                                }
                            }
                            return !1
                        }
                    }, {
                        key: "loadMedia",
                        value: function(e) {
                            var t = this,
                                n = e.contentId,
                                i = e.currentTime,
                                r = void 0 === i ? 0 : i,
                                o = e.duration,
                                a = void 0 === o ? 0 : o,
                                s = e.requestCustomData,
                                u = void 0 === s ? null : s,
                                c = e.mediaCustomData,
                                l = void 0 === c ? null : c,
                                d = e.autoRequest,
                                f = void 0 !== d && d;
                            return n ? this.isSessionEstablished ? this.loadMediaOnSession(this.currentSession, {
                                contentId: n,
                                currentTime: r,
                                duration: a,
                                requestCustomData: u,
                                mediaCustomData: l
                            }) : !0 !== f ? Mn.reject(new TypeError("Option 'autoRequest' must be true when session is not connected.")) : this.requestSession().then(function(e) {
                                return t.loadMediaOnSession(e, {
                                    contentId: n,
                                    currentTime: r,
                                    duration: a,
                                    requestCustomData: u,
                                    mediaCustomData: l
                                })
                            }).catch(function(e) {
                                return Mn.reject(new Error(e))
                            }) : Mn.reject(new TypeError("Option 'contentId' must be valid."))
                        }
                    }, {
                        key: "loadMediaOnSession",
                        value: function(r, e) {
                            var o = this,
                                a = arguments,
                                s = e.contentId,
                                t = e.currentTime,
                                u = void 0 === t ? 0 : t,
                                c = e.duration,
                                n = e.requestCustomData,
                                l = void 0 === n ? null : n,
                                i = e.mediaCustomData,
                                d = void 0 === i ? null : i;
                            return new Mn(function(e, t) {
                                if (!r && r instanceof cast.framework.CastSession) t(new ReferenceError("Session must be cast.framework.CastSession."));
                                else {
                                    var n = r.getSessionState();
                                    if (n !== o.SessionState.SESSION_STARTING && n !== o.SessionState.SESSION_STARTED && n !== o.SessionState.SESSION_RESUMED) return t(new ReferenceError("Session must be established."));
                                    o.isLoadingMedia = !0;
                                    var i = o._createLoadRequest(s, u, c, l, d);
                                    r.loadMedia(i).then(function() {
                                        o.isLoadingMedia = !1, e.apply(o, a)
                                    }).catch(function(e) {
                                        o.isLoadingMedia = !1, t(new Error(e))
                                    })
                                }
                            })
                        }
                    }, {
                        key: "requestSession",
                        value: function() {
                            var n = this;
                            return new Mn(function(e, t) {
                                n.isSessionEstablished ? e(n.currentSession) : n.castContext ? n.castContext.requestSession().then(function() {
                                    e(n.currentSession)
                                }).catch(function(e) {
                                    t(new Error(e))
                                }) : t(new Error("CastContext is not available. Call setup() first."))
                            })
                        }
                    }, {
                        key: "sendMessage",
                        value: function(e) {
                            var t = this,
                                n = e.namespace,
                                i = e.data,
                                r = void 0 === i ? {} : i,
                                o = e.autoRequest,
                                a = void 0 !== o && o;
                            return this.isSessionEstablished ? this.sendMessageOnSession(this.currentSession, {
                                namespace: n,
                                data: r
                            }) : !0 !== a ? Mn.reject(new TypeError("Option 'autoRequest' must be true when session is not connected.")) : this.requestSession().then(function(e) {
                                return t.sendMessageOnSession(e, {
                                    namespace: n,
                                    data: r
                                })
                            }).catch(function(e) {
                                return Mn.reject(new Error(e))
                            })
                        }
                    }, {
                        key: "sendMessageOnSession",
                        value: function(i, e) {
                            var r = this,
                                o = arguments,
                                a = e.namespace,
                                t = e.data,
                                s = void 0 === t ? {} : t;
                            return new Mn(function(e, t) {
                                if (!i && i instanceof cast.framework.CastSession) t(new ReferenceError("Session must be cast.framework.CastSession."));
                                else {
                                    var n = i.getSessionState();
                                    if (n !== r.SessionState.SESSION_STARTING && n !== r.SessionState.SESSION_STARTED && n !== r.SessionState.SESSION_RESUMED) return t(new ReferenceError("Session must be established."));
                                    i.sendMessage(a, s).then(function() {
                                        e.apply(r, o)
                                    }).catch(function(e) {
                                        t(new Error(e))
                                    })
                                }
                            })
                        }
                    }, {
                        key: "createCastButton",
                        value: function(i) {
                            var e = document.createElement("button", "google-cast-button");
                            return i && i.style && (null === i.style["--disconnected-color"] && (i.style["--disconnected-color"] = zn.DISCONNECTED), null === i.style["--connected-color"] && (i.style["--connected-color"] = zn.CONNECTED)), i && Lt(i).forEach(function(t) {
                                if ("string" == typeof i[t]) e.setAttribute(t, i[t]);
                                else if ("style" === t && "object" === Tt(i[t])) {
                                    var n = "";
                                    Lt(i[t]).forEach(function(e) {
                                        n += e + ":" + i[t][e] + ";"
                                    }), e.setAttribute(t, n)
                                }
                            }), e
                        }
                    }, {
                        key: "_createLoadRequest",
                        value: function(e, t, n, i, r) {
                            var o = new chrome.cast.media.MediaInfo(e.toString());
                            o.customData = r, o.duration = n;
                            var a = new chrome.cast.media.LoadRequest(o);
                            return a.customData = i, a.currentTime = t || 0, a
                        }
                    }, {
                        key: "isGCastApiAvailable",
                        get: function() {
                            return !!("undefined" != typeof cast && cast && cast.framework && cast.framework.VERSION)
                        }
                    }, {
                        key: "castState",
                        get: function() {
                            return this.castContext ? this.castContext.getCastState() : this.isGCastApiAvailable ? this.CastState.SETUP_DONE : this.CastState.NOT_SETUP
                        }
                    }, {
                        key: "versionGCastApi",
                        get: function() {
                            return this.isGCastApiAvailable ? cast.framework.VERSION : null
                        }
                    }, {
                        key: "castContext",
                        get: function() {
                            return this.isGCastApiAvailable ? cast.framework.CastContext.getInstance() : null
                        }
                    }, {
                        key: "currentSession",
                        get: function() {
                            if (this.castContext) return this.castContext.getCurrentSession()
                        }
                    }, {
                        key: "currentSessionObj",
                        get: function() {
                            var e = this.currentSession;
                            return e ? e.getSessionObj() : null
                        }
                    }, {
                        key: "isInitialized",
                        get: function() {
                            return !(!this.isGCastApiAvailable || !this.remotePlayerController)
                        }
                    }, {
                        key: "isSessionEstablished",
                        get: function() {
                            var e = this.currentSessionObj;
                            return !!e && e.status === chrome.cast.SessionStatus.CONNECTED
                        }
                    }, {
                        key: "isCastConnected",
                        get: function() {
                            return this.castState === this.CastState.CONNECTED
                        }
                    }]), e
                }(),
                Yn = new Gn;
            t.Chromecast = Gn, t.chromecast = Yn, t.CastState = Wn, t.CastButtonColor = zn, t.AutoJoinPolicy = {
                CUSTOM_CONTROLLER_SCOPED: "custom_controller_scoped",
                TAB_AND_ORIGIN_SCOPED: "tab_and_origin_scoped",
                ORIGIN_SCOPED: "origin_scoped",
                PAGE_SCOPED: "page_scoped"
            }
        });
    e(ld);
    var dd = ld.Chromecast,
        fd = (ld.chromecast, ld.CastState, ld.CastButtonColor, ld.AutoJoinPolicy, new ud("Chromecast")),
        hd = qo(new(function(e) {
            function a() {
                return O(this, a),
                    function(e, t) {
                        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !t || "object" != typeof t && "function" != typeof t ? e : t
                    }(this, (a.__proto__ || Object.getPrototypeOf(a)).apply(this, arguments))
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(a, dd), R(a, [{
                key: "init",
                value: function() {
                    var t = this,
                        e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                        n = e.appId,
                        i = void 0 === n ? od.id : n,
                        r = e.chromecastPlayer,
                        o = void 0 === r ? null : r;
                    return fd.log("initializing", {
                        version: this.version,
                        appId: i,
                        chromecastPlayer: o
                    }), this.chromecastPlayer = o, this.setup().then(function(e) {
                        return e && (function e(t, n, i) {
                            null === t && (t = Function.prototype);
                            var r = Object.getOwnPropertyDescriptor(t, n);
                            if (void 0 === r) {
                                var o = Object.getPrototypeOf(t);
                                return null === o ? void 0 : e(o, n, i)
                            }
                            if ("value" in r) return r.value;
                            var a = r.get;
                            return void 0 !== a ? a.call(i) : void 0
                        }(a.prototype.__proto__ || Object.getPrototypeOf(a.prototype), "init", t).call(t, {
                            receiverApplicationId: i,
                            autoJoinPolicy: t.AutoJoinPolicy.PAGE_SCOPED
                        }), t.chromecastPlayer && t.chromecastPlayer.init()), e
                    }).catch(function(e) {
                        return t.fire(sd.error, e), I.reject(e)
                    })
                }
            }, {
                key: "dispose",
                value: function() {
                    this.chromecastPlayer = null
                }
            }, {
                key: "chromecastPlayer",
                get: function() {
                    return this._chromecastPlayer
                },
                set: function(e) {
                    if (e && !(e instanceof pd)) throw new SyntaxError("An invalid ChromecastPlayer was specified");
                    this.chromecastPlayer && this.chromecastPlayer.dispose(), this._chromecastPlayer = e
                }
            }]), a
        }())),
        vd = new ud("ChromecastPlayer"),
        pd = function() {
            function r(e) {
                var t = e.player,
                    n = e.textAlert,
                    i = void 0 === n ? null : n;
                O(this, r), this.textAlert = i, this.player = t, this._onControlSeek = this.onControlSeek.bind(this), this._onChangeVolume = this.onChangeVolume.bind(this), this._onPlayOrPausePressed = this.onPlayOrPausePressed.bind(this), this._onConfigChanged = this.onConfigChanged.bind(this), this._onReset = this.onReset.bind(this), this._onPlayerStateChanged = this.onPlayerStateChanged.bind(this), this._onCurrentTimeChanged = this.onCurrentTimeChanged.bind(this), this._onIsConnectedChanged = this.onIsConnectedChanged.bind(this), this._onSessionStateChanged = this.onSessionStateChanged.bind(this), this._onIsMediaLoadedChanged = this.onIsMediaLoadedChanged.bind(this), this._onVolumeLevelChanged = this.onVolumeLevelChanged.bind(this), this._onIsMutedChanged = this.onIsMutedChanged.bind(this), this._onCaptionsChanged = this.onCaptionsChanged.bind(this), this._onMessageReceived = this.onMessageReceived.bind(this), this._preventPlayerDefaultEvent = this.preventPlayerDefaultEvent.bind(this), this.endVideo = Ju(this._endVideo, 500)
            }
            return R(r, [{
                key: "loadMedia",
                value: function() {
                    var t = this,
                        e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                        n = e.contentId,
                        i = e.currentTime,
                        r = void 0 === i ? null : i,
                        o = e.duration,
                        a = void 0 === o ? null : o,
                        s = e.token,
                        u = void 0 === s ? null : s,
                        c = e.autoRequest,
                        l = void 0 !== c && c,
                        d = e.autoCaption,
                        f = void 0 === d || d,
                        h = e.autoDisconnect,
                        v = void 0 === h || h;
                    if (hd.isLoadingMedia) return vd.log("loadMedia", {
                        isLoadingMedia: hd.isLoadingMedia
                    }), I.resolve(!1);
                    n = n || this.player.config.video.id;
                    var p = Number(r) || this.telecine.currentTime - 2;
                    p < 0 && (p = 0), a = Number(a) || this.duration, u = u || this.player.config.user.vimeo_api_client_token, this.isEndOfVideo && (r = 0, this._isEndOfVideo = !1);
                    var m = {
                        contentId: n,
                        currentTime: p,
                        duration: a,
                        requestCustomData: {
                            token: u,
                            tokenType: "jwt"
                        },
                        autoRequest: l
                    };
                    return vd.log("loadMedia", m), hd.loadMedia(m).then(function() {
                        return hd.fire(sd.mediaLoadedSuccess), t.addRemotePlayerListenersOnPlaying(), t.player.events.fire(gn.PLAY_INITIATED), t.player.events.fire(cs.hideOutro), t._isOutroRendered = !1, f && t.onCaptionsChanged(t.player.backbone.enabledTextTrack), t.telecine.paused || t.telecine.pause(), !0
                    }).catch(function(e) {
                        return vd.error("loadMedia", e), hd.fire(sd.mediaLoadedFailed, e), v && t.endCurrentSession(), I.reject(e)
                    })
                }
            }, {
                key: "init",
                value: function() {
                    this.removeInitListeners(), this.addInitListeners()
                }
            }, {
                key: "addInitListeners",
                value: function() {
                    this.addSessionStateListener(), this.addIsConnectedListener()
                }
            }, {
                key: "endCurrentSession",
                value: function() {
                    var e = !(0 < arguments.length && void 0 !== arguments[0]) || arguments[0];
                    hd.castContext && hd.castContext.endCurrentSession(e)
                }
            }, {
                key: "syncTelecine",
                value: function() {
                    !this.isOutroRendered && this.telecine.paused && (this.telecine.currentTime = this.lastCurrentTime, this.syncTime())
                }
            }, {
                key: "stopTelecine",
                value: function() {
                    vd.log("stopTelecine"), this.player.events.fire(cs.reset)
                }
            }, {
                key: "enableUI",
                value: function() {
                    if (this.textAlert) {
                        var e = hd.currentSessionObj && hd.currentSessionObj.receiver;
                        e && this.textAlert.show("Casting on " + e.friendlyName)
                    }
                    this.preview.show()
                }
            }, {
                key: "disableUI",
                value: function() {
                    this.textAlert && this.textAlert.hide(), this.isOutroRendered || (this.preview.hide(), this.telecine.show())
                }
            }, {
                key: "syncTime",
                value: function() {
                    var e = this.lastCurrentTime / this.duration;
                    vd.log("onCurrentTimeChanged", {
                        currentTime: this.lastCurrentTime,
                        duration: this.duration,
                        percent: e
                    }), hd.fire(sd.timeUpdated, {
                        currentTime: this.lastCurrentTime,
                        duration: this.duration,
                        percent: e
                    }), 0 < e && this.player.events.fire(Pe.TIME_UPDATE, {
                        currentTime: this.lastCurrentTime,
                        duration: this.duration,
                        timeProgress: e
                    })
                }
            }, {
                key: "_endVideo",
                value: function() {
                    var e = this;
                    return vd.log("onVideoEnded", {
                        currentTime: this.lastCurrentTime,
                        duration: this.duration
                    }), this._isEndOfVideo = !0, this.removeRemotePlayerListenersOnPlaying(), this.isLooped ? this.loadMedia().catch(function() {
                        e.showOutro()
                    }) : this.showOutro(), hd.fire(sd.ended), !0
                }
            }, {
                key: "showOutro",
                value: function() {
                    vd.log("showOutro", {
                        isOutroRendered: this.isOutroRendered
                    }), this.isOutroRendered || (this._isOutroRendered = !0, this.player.events.fire(cs.showOutro))
                }
            }, {
                key: "dispose",
                value: function() {
                    this.endCurrentSession(), this.removeAllRemoteListeners()
                }
            }, {
                key: "onIsMediaLoadedChanged",
                value: function(e) {
                    vd.log("onMediaLoadedChanged", {
                        value: e.value,
                        isTimeEnded: this.isTimeEnded,
                        lastCurrentTime: this.lastCurrentTime
                    }), !1 === e.value ? this.isTimeEnded && this.endVideo() : this.telecine.paused || this.telecine.pause()
                }
            }, {
                key: "onPlayerStateChanged",
                value: function(e) {
                    switch (vd.log(e.type, {
                        value: e.value,
                        isTimeEnded: this.isTimeEnded,
                        lastCurrentTime: this.lastCurrentTime
                    }), null === e.value && this.isTimeEnded && this.endVideo(), e.value) {
                        case hd.PlayerState.PLAYING:
                            hd.fire(sd.playing);
                            break;
                        case hd.PlayerState.PAUSED:
                            hd.fire(sd.paused);
                            break;
                        case hd.PlayerState.BUFFERING:
                            hd.fire(sd.buffering);
                            break;
                        case hd.PlayerState.IDLE:
                        default:
                            hd.fire(sd.idle)
                    }
                }
            }, {
                key: "onVolumeLevelChanged",
                value: function(e) {
                    vd.log(e.type, e), this.player.events.fire(cs.changeVolume, e.value, !0)
                }
            }, {
                key: "onIsMutedChanged",
                value: function(e) {
                    vd.log(e.type, e), this.player.events.fire(cs.changeVolume, e.value ? 0 : hd.remotePlayer.volumeLevel, !0)
                }
            }, {
                key: "onCurrentTimeChanged",
                value: function(e) {
                    0 < e.value && (this._lastCurrentTime = e.value), this.syncTime(), this.isTimeEnded && this.endVideo()
                }
            }, {
                key: "onChangeVolume",
                value: function(e) {
                    this.volumeLevel = e
                }
            }, {
                key: "onCaptionsChanged",
                value: function(e) {
                    var t = hd.currentSession;
                    t && t && t.sendMessage(ad, {
                        action: "setActiveByLanguage",
                        value: e && e.language
                    })
                }
            }, {
                key: "onSessionStateChanged",
                value: function(e) {
                    switch (vd.log(e.type, e), e.sessionState) {
                        case hd.SessionState.SESSION_STARTING:
                            this.addPreventLocalPlayerEvents();
                            break;
                        case hd.SessionState.SESSION_RESUMED:
                        case hd.SessionState.SESSION_STARTED:
                            this.loadMedia();
                            break;
                        case hd.SessionState.SESSION_ENDING:
                        case hd.SessionState.SESSION_ENDED:
                            break;
                        case hd.SessionState.SESSION_START_FAILED:
                            this.removePreventLocalPlayerEvents()
                    }
                    hd.fire(sd.sessionStateChanged, e.sessionState)
                }
            }, {
                key: "onIsConnectedChanged",
                value: function(e) {
                    vd.log("onIsConnectedChanged", e), e.value ? this.onConnected() : this.onDisconnected()
                }
            }, {
                key: "onConnected",
                value: function() {
                    vd.log("onConnected"), this.removePreventLocalPlayerEvents(), this.stopTelecine(), this.addLocalPlayerListeners(), this.addRemotePlayerListenersOnIdle(), this.addMessageListener(), this.enableUI(), hd.fire(sd.connected)
                }
            }, {
                key: "onDisconnected",
                value: function() {
                    vd.log("onDisconnected"), this.syncTelecine(), this.removeRemotePlayerListeners(), this.removeLocalPlayerListeners(), this.removeMessageListener(), this.disableUI(), hd.fire(sd.disconnected)
                }
            }, {
                key: "onConfigChanged",
                value: function() {
                    this.loadMedia()
                }
            }, {
                key: "onReset",
                value: function() {
                    this.loadMedia()
                }
            }, {
                key: "onPlayOrPausePressed",
                value: function() {
                    vd.log("onPlayOrPausePressed"), this.isEndOfVideo ? this.loadMedia() : this.isPlayingOrPaused && hd.remotePlayerController.playOrPause(), this.player.events.halt()
                }
            }, {
                key: "onControlSeek",
                value: function(e, t) {
                    !t && e && (1 < e && (e = 1), t = this.duration * e), vd.log("onControlSeek", t), this.currentTime = t, this.player.events.halt()
                }
            }, {
                key: "addSessionStateListener",
                value: function() {
                    hd.castContext && hd.castContext.addEventListener(hd.CastContextEventType.SESSION_STATE_CHANGED, this._onSessionStateChanged)
                }
            }, {
                key: "addMessageListener",
                value: function() {
                    var e = hd.currentSession;
                    e && e.addMessageListener(ad, this._onMessageReceived)
                }
            }, {
                key: "onMessageReceived",
                value: function(e, t) {
                    t = JSON.parse(t), vd.log(e, t), "MEDIA_FINISHED" === t.type && ("END_OF_STREAM" === t.endedReason ? this.endVideo() : "ERROR" === t.endedReason && (this.endCurrentSession(), hd.fire(sd.error, new Error("Chromecast encountered an error and media finished."))))
                }
            }, {
                key: "addIsConnectedListener",
                value: function() {
                    hd.remotePlayerController && hd.remotePlayerController.addEventListener(hd.RemotePlayerEventType.IS_CONNECTED_CHANGED, this._onIsConnectedChanged)
                }
            }, {
                key: "addPreventLocalPlayerEvents",
                value: function() {
                    this.player.events.prependOn([ds.playButtonPressed, ds.pauseButtonPressed, ds.scrubbingStarted, ds.scrubbingEnded, gn.BUFFER_STARTED, gn.BUFFER_ENDED, cs.seek, ds.volumeChanged, ds.captionsChanged, ds.configChanged, cs.reset], this._preventPlayerDefaultEvent)
                }
            }, {
                key: "addRemotePlayerListenersOnIdle",
                value: function() {
                    this.removeRemotePlayerListenersOnIdle(), this.addIsMediaLoadedChangedListener(), this.addVolumeLevelChangedListener()
                }
            }, {
                key: "addLocalPlayerListeners",
                value: function() {
                    this.player.events.prependOn(ds.playButtonPressed, this._onPlayOrPausePressed), this.player.events.prependOn(ds.pauseButtonPressed, this._onPlayOrPausePressed), this.player.events.prependOn(ds.scrubbingStarted, this._preventPlayerDefaultEvent), this.player.events.prependOn(ds.scrubbingEnded, this._preventPlayerDefaultEvent), this.player.events.prependOn(gn.BUFFER_STARTED, this._preventPlayerDefaultEvent), this.player.events.prependOn(gn.BUFFER_ENDED, this._preventPlayerDefaultEvent), this.player.events.prependOn(cs.seek, this._onControlSeek), this.player.events.prependOn(ds.volumeChanged, this._onChangeVolume), this.player.events.on(ds.captionsChanged, this._onCaptionsChanged), this.player.events.on(ds.configChanged, this._onConfigChanged), this.player.events.on(cs.reset, this._onReset)
                }
            }, {
                key: "preventPlayerDefaultEvent",
                value: function() {
                    this.player.events.halt()
                }
            }, {
                key: "addCurrentTimeChangedListener",
                value: function() {
                    hd.remotePlayerController && hd.remotePlayerController.addEventListener(hd.RemotePlayerEventType.CURRENT_TIME_CHANGED, this._onCurrentTimeChanged)
                }
            }, {
                key: "addIsMediaLoadedChangedListener",
                value: function() {
                    hd.remotePlayerController && hd.remotePlayerController.addEventListener(hd.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED, this._onIsMediaLoadedChanged)
                }
            }, {
                key: "addPlayerStateChangedListener",
                value: function() {
                    hd.remotePlayerController && hd.remotePlayerController.addEventListener(hd.RemotePlayerEventType.PLAYER_STATE_CHANGED, this._onPlayerStateChanged)
                }
            }, {
                key: "addVolumeLevelChangedListener",
                value: function() {
                    hd.remotePlayerController && (hd.remotePlayerController.addEventListener(hd.RemotePlayerEventType.VOLUME_LEVEL_CHANGED, this._onVolumeLevelChanged), hd.remotePlayerController.addEventListener(hd.RemotePlayerEventType.IS_MUTED_CHANGED, this._onIsMutedChanged))
                }
            }, {
                key: "addRemotePlayerListenersOnPlaying",
                value: function() {
                    this.removeRemotePlayerListenersOnPlaying(), this.addCurrentTimeChangedListener(), this.addPlayerStateChangedListener()
                }
            }, {
                key: "removeRemotePlayerListenersOnIdle",
                value: function() {
                    this.removeIsMediaLoadedChangedListener(), this.removeVolumeLevelChangedListener()
                }
            }, {
                key: "removeInitListeners",
                value: function() {
                    hd.castContext && hd.castContext.removeEventListener(hd.CastContextEventType.SESSION_STATE_CHANGED, this._onSessionStateChanged), hd.remotePlayerController && hd.remotePlayerController.removeEventListener(hd.RemotePlayerEventType.IS_CONNECTED_CHANGED, this._onIsConnectedChanged)
                }
            }, {
                key: "removeRemotePlayerListenersOnPlaying",
                value: function() {
                    this.removeCurrentTimeChangedListener(), this.removePlayerStateChangedListener()
                }
            }, {
                key: "removeMessageListener",
                value: function() {
                    var e = hd.currentSession;
                    e && e.removeMessageListener(ad, this._onMessageReceived)
                }
            }, {
                key: "removeCurrentTimeChangedListener",
                value: function() {
                    hd.remotePlayerController && hd.remotePlayerController.removeEventListener(hd.RemotePlayerEventType.CURRENT_TIME_CHANGED, this._onCurrentTimeChanged)
                }
            }, {
                key: "removeIsMediaLoadedChangedListener",
                value: function() {
                    hd.remotePlayerController && hd.remotePlayerController.removeEventListener(hd.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED, this._onIsMediaLoadedChanged)
                }
            }, {
                key: "removePlayerStateChangedListener",
                value: function() {
                    hd.remotePlayerController && hd.remotePlayerController.removeEventListener(hd.RemotePlayerEventType.PLAYER_STATE_CHANGED, this._onPlayerStateChanged)
                }
            }, {
                key: "removeVolumeLevelChangedListener",
                value: function() {
                    hd.remotePlayerController && (hd.remotePlayerController.removeEventListener(hd.RemotePlayerEventType.VOLUME_LEVEL_CHANGED, this._onVolumeLevelChanged), hd.remotePlayerController.removeEventListener(hd.RemotePlayerEventType.IS_MUTED_CHANGED, this._onIsMutedChanged))
                }
            }, {
                key: "removePreventLocalPlayerEvents",
                value: function() {
                    this.player.events.off([ds.playButtonPressed, ds.pauseButtonPressed, ds.scrubbingStarted, ds.scrubbingEnded, gn.BUFFER_STARTED, gn.BUFFER_ENDED, cs.seek, ds.volumeChanged, ds.captionsChanged, ds.configChanged, cs.reset], this._preventPlayerDefaultEvent)
                }
            }, {
                key: "removeLocalPlayerListeners",
                value: function() {
                    this.player.events.off(ds.playButtonPressed, this._onPlayOrPausePressed), this.player.events.off(ds.pauseButtonPressed, this._onPlayOrPausePressed), this.player.events.off(ds.scrubbingStarted, this._preventPlayerDefaultEvent), this.player.events.off(ds.scrubbingEnded, this._preventPlayerDefaultEvent), this.player.events.off(gn.BUFFER_STARTED, this._preventPlayerDefaultEvent), this.player.events.off(gn.BUFFER_ENDED, this._preventPlayerDefaultEvent), this.player.events.off(cs.seek, this._onControlSeek), this.player.events.off(ds.volumeChanged, this._onChangeVolume), this.player.events.off(ds.captionsChanged, this._onCaptionsChanged), this.player.events.off(ds.configChanged, this._onConfigChanged), this.player.events.off(cs.reset, this._onReset)
                }
            }, {
                key: "removeRemotePlayerListeners",
                value: function() {
                    this.removeRemotePlayerListenersOnPlaying(), this.removeRemotePlayerListenersOnIdle()
                }
            }, {
                key: "removeAllRemoteListeners",
                value: function() {
                    this.removeRemotePlayerListeners(), this.removeInitListeners()
                }
            }, {
                key: "textAlert",
                get: function() {
                    return this._textAlert
                },
                set: function(e) {
                    if (e && !(e instanceof cd)) throw new SyntaxError("An invalid TextAlert was specified");
                    this._textAlert = e
                }
            }, {
                key: "player",
                get: function() {
                    return this._player
                },
                set: function(e) {
                    if ("object" !== (void 0 === e ? "undefined" : M(e))) throw new SyntaxError("An invalid Player was specified");
                    if ("object" !== M(e.events)) throw new SyntaxError("An invalid Player without events was specified");
                    this._player = e, this.telecine = e.telecine, this.preview = e.preview, this.config = e.config
                }
            }, {
                key: "config",
                get: function() {
                    return this._config
                },
                set: function(e) {
                    if ("object" !== (void 0 === e ? "undefined" : M(e))) throw new SyntaxError("An invalid Player without config was specified");
                    if ("object" !== M(e.user)) throw new SyntaxError("An invalid Player without user was specified");
                    if ("object" !== M(e.embed)) throw new SyntaxError("An invalid Player without embed was specified");
                    if ("object" !== M(e.video) || "number" != typeof e.video.id || "number" != typeof e.video.duration) throw new SyntaxError("An invalid Player without video was specified");
                    this._config = e
                }
            }, {
                key: "telecine",
                get: function() {
                    return this._telecine
                },
                set: function(e) {
                    if ("object" !== (void 0 === e ? "undefined" : M(e)) || "number" != typeof e.currentTime || "function" != typeof e.hide || "function" != typeof e.show) throw new SyntaxError("An invalid Player without telecine was specified");
                    this._telecine = e
                }
            }, {
                key: "preview",
                get: function() {
                    return this._preview
                },
                set: function(e) {
                    if ("object" !== (void 0 === e ? "undefined" : M(e)) || "function" != typeof e.hide) throw new SyntaxError("An invalid Player without preview was specified");
                    this._preview = e
                }
            }, {
                key: "lastCurrentTime",
                get: function() {
                    return this._lastCurrentTime || 0
                }
            }, {
                key: "isTimeEnded",
                get: function() {
                    return this.lastCurrentTime + .5 >= this.duration
                }
            }, {
                key: "isOutroRendered",
                get: function() {
                    return this._isOutroRendered || !1
                }
            }, {
                key: "isLooped",
                get: function() {
                    return this.player.config.embed.loop
                }
            }, {
                key: "isEndOfVideo",
                get: function() {
                    return this._isEndOfVideo || !1
                }
            }, {
                key: "currentTime",
                set: function(e) {
                    hd.remotePlayer && hd.remotePlayerController && (hd.remotePlayer.currentTime = e, hd.remotePlayerController.seek(), this._lastCurrentTime = e)
                }
            }, {
                key: "volumeLevel",
                set: function(e) {
                    hd.remotePlayer && hd.remotePlayerController && (hd.remotePlayer.volumeLevel = e, hd.remotePlayerController.setVolumeLevel())
                }
            }, {
                key: "duration",
                get: function() {
                    return this.player.config.video.duration
                }
            }, {
                key: "isPlayingOrPaused",
                get: function() {
                    return hd.remotePlayer ? hd.remotePlayer.playerState === hd.PlayerState.PLAYING || hd.remotePlayer.playerState === hd.PlayerState.PAUSED : null
                }
            }, {
                key: "isIdle",
                get: function() {
                    return hd.remotePlayer ? null === hd.remotePlayer.playerState || hd.remotePlayer.playerState === hd.PlayerState.IDLE : null
                }
            }]), r
        }(),
        md = function() {
            function n(e, t) {
                O(this, n), e.doNotTrackEnabled || (this.player = e, this.store = t, this.initialConfigLoadTime = this.player.config.request.timestamp, this.playerLoadTime = nd(), this.endpoint = this._getFresnelEndpoint(), this.startAttemptLogged = !1, this.startupTimeLogged = !1, this.startPlayTime = null, this.currentlyBuffering = !1, this.lastBufferTime = null, this.totalBufferDuration = 0, this.qualityPickedLogged = !1, this.backToAutoLogged = !1, this.lastVideoBitrate = null, this.lastAudioBitrate = null, this.currentQuality = "auto", this.currentStream = {}, this.lastProfileId = null, this.lastTargetProfileId = null, this.currentlyPlaying = !1, this.playedTo = 0, this.autoplayType = this.player.config.embed.autoplay, this.akamaiEdgeIp = null, this.quicVersion = null, this.akamaiCacheDebug = null, this.lastIntervalTime = Zl(), this.bufferCount = 0, this.isScrubbing = !1, this.currentMinuteWatchedTime = 0, this.totalMinutesWatched = 0, this.hasEnded = !1, this.droppedFramePercent = 0, this.droppedFrames = 0, this.forcedEmbedQuality = "none", this.sessionPlaybackDuration = 0, this.fullscreen = !1, this.qualityUpSwitchCount = 0, this.qualityDownSwitchCount = 0, this.stayedOnAuto = !0, this.livestreamOnline = !1, this.playedProfiles = {}, this.profiles = {}, this.speeds = [], this.bufferOccupancies = [], this.targetProfiles = {}, this.targetProfileId = {}, this.previousCaptionsID = null, this.score = new rd(this.player), this.endpoint && (setInterval(this._updatePlaybackDuration.bind(this), 500), this._initializeEvents(), this._initMinuteWatchedTimer()))
            }
            return R(n, [{
                key: "_initializeEvents",
                value: function() {
                    var n = this;
                    this.player.events.on(gn.PLAY_INITIATED, this._onPlayInitiated.bind(this)), this.player.events.on(Pe.TIME_UPDATE, this._onPlayProgress.bind(this)), this.player.events.on(Pe.PLAY, this._onPlayed.bind(this)), this.player.events.on(gn.BUFFER_STARTED, this._onBufferStarted.bind(this)), this.player.events.on(gn.BUFFER_ENDED, this._onBufferEnded.bind(this)), this.player.events.on(ds.error, this._onError.bind(this)), this.player.events.on(ds.errorLinkPressed, this._onErrorLinkPressed.bind(this)), this.player.events.on(ds.didEnterFullscreen, this._onEnterFullscreen.bind(this)), this.player.events.on(ds.didExitFullscreen, this._onExitFullscreen.bind(this)), this.player.events.on(ds.ended, this._onEnded.bind(this)), this.player.events.on(ds.alertVisibilityChanged, this._onAlertVisibilityChanged.bind(this)), this.player.events.on(ds.configChanged, this._resetMetrics.bind(this)), this.player.events.on(ds.overlayOpened, this._onOverlayOpened.bind(this)), this.player.events.on(ds.scrubbingStarted, this._onScrubbingStarted.bind(this)), this.player.events.on(ds.scrubbingEnded, this._onScrubbingEnded.bind(this)), this.player.events.on(ds.playbackRateChanged, this._onPlaybackRateChanged.bind(this)), this.player.events.on(cs.changeQuality, this._onChangeQuality.bind(this)), this.player.events.on(cs.seek, this._onSeek.bind(this)), this.player.events.on(cs.turnCaptionsOn, this._onCaptionsEnabled.bind(this)), this.player.events.on(cs.turnCaptionsOff, this._onCaptionsDisabled.bind(this)), this.player.events.on(Ce.STREAM_CHANGE, this._onStreamChanged.bind(this)), this.player.events.on(Ce.STREAM_TARGET_CHANGE, this._onStreamTargetChange.bind(this)), this.player.events.on(gn.FORCED_QUALITY, this._onForcedQuality.bind(this)), new I(function(e, t) {
                        n.player.telecine && e(), n.player.events.on(ds.telecineReady, function() {
                            e()
                        })
                    }).then(function() {
                        n._send(Nl), n.player.telecine.on(Ce.MANIFEST_TIMEOUT, n._onManifestTimeout.bind(n)), n.player.telecine.on(Pe.CAN_PLAY, n._onCanPlay.bind(n)), n.player.telecine.on(Ce.MANIFEST_LOADED, n._onManifestLoaded.bind(n)), n.player.telecine.on(Ce.BUFFER_OCCUPANCY, n._onBufferOccupancyChange.bind(n)), n.player.telecine.on(Pe.PAUSE, n._onPaused.bind(n)), n.player.telecine.on(xe.STREAM_ONLINE, n._onLivestreamOnline.bind(n)), n.player.telecine.on(xe.STREAM_OFFLINE, n._onLivestreamOffline.bind(n)), n.player.telecine.on(xe.EVENT_ENDED, n._onLiveEventEnded.bind(n)), n.player.telecine.on(oe.MEDIASESSION_PLAY, n._onMediaSessionPlay.bind(n)), n.player.telecine.on(oe.MEDIASESSION_PAUSE, n._onMediaSessionPause.bind(n)), n.player.telecine.on(oe.MEDIASESSION_SEEK_FORWARD, n._onMediaSessionSeekForward.bind(n)), n.player.telecine.on(oe.MEDIASESSION_SEEK_BACKWARD, n._onMediaSessionSeekBackward.bind(n)), n.player.telecine.on(Ce.BANDWIDTH, n._onAdaptiveBandwidth.bind(n)), n.player.telecine.on(Ce.DROPPED_FRAMES, n._onDroppedFrames.bind(n)), n.player.telecine.on(Ce.DOWNLOAD_END, n._onSegmentDownloaded.bind(n)), n.player.telecine.on(Ce.AV_DURATION_MISMATCH, n._onVideoDurationMismatch.bind(n))
                    }).catch(function() {}), Lu(function(e) {
                        n._onVideoExit()
                    }), hd.on(sd.connected, this._onChromecastConnected.bind(this)), hd.on(sd.disconnected, this._onChromecastDisconnected.bind(this))
                }
            }, {
                key: "_initMinuteWatchedTimer",
                value: function() {
                    var e = this,
                        t = Math.floor(60 * Math.random());
                    setInterval(function() {
                        e.currentlyPlaying && (!e.store.get(Vc) || e.store.get(Yc) || e.livestreamOnline) && (e.currentMinuteWatchedTime++, 0 !== e.totalMinutesWatched ? 60 <= e.currentMinuteWatchedTime && (e.currentMinuteWatchedTime = 0, e.totalMinutesWatched++, e._send(Ol)) : e.currentMinuteWatchedTime === t && (e.currentMinuteWatchedTime = 0, e.totalMinutesWatched++, e._send(Ol)))
                    }, 1e3)
                }
            }, {
                key: "_onChromecastConnected",
                value: function() {
                    this._send(hl)
                }
            }, {
                key: "_onChromecastDisconnected",
                value: function() {
                    this._send(vl)
                }
            }, {
                key: "_onLivestreamOnline",
                value: function() {
                    this.livestreamOnline = !0
                }
            }, {
                key: "_onLivestreamOffline",
                value: function() {
                    this.livestreamOnline = !1
                }
            }, {
                key: "_onMediaSessionPlay",
                value: function() {
                    this._send(ml)
                }
            }, {
                key: "_onMediaSessionPause",
                value: function() {
                    this._send(gl)
                }
            }, {
                key: "_onMediaSessionSeekForward",
                value: function() {
                    this._send(yl)
                }
            }, {
                key: "_onMediaSessionSeekBackward",
                value: function() {
                    this._send(_l)
                }
            }, {
                key: "_getBufferState",
                value: function() {
                    var e = [];
                    if (this.player.telecine)
                        for (var t = this.player.telecine.buffered, n = 0; n < t.length; n++) e.push([t.start(n), t.end(n)]);
                    return e
                }
            }, {
                key: "_updatePlaybackDuration",
                value: function() {
                    this.currentlyPlaying && (this.sessionPlaybackDuration += ed(this.lastIntervalTime) / 1e3), this.lastIntervalTime = Zl()
                }
            }, {
                key: "_onPaused",
                value: function() {
                    this.currentlyPlaying && (this.currentlyPlaying = !1, this._send(Rl))
                }
            }, {
                key: "_isVOD",
                value: function() {
                    return !!this.player.config.video.vod && 0 !== this.player.config.video.vod
                }
            }, {
                key: "_getOrigin",
                value: function() {
                    var e = document.createElement("a");
                    return e.href = this.player.config.request.referrer, e.origin || e.protocol.replace(":", "") + "://" + e.host
                }
            }, {
                key: "_getFresnelEndpoint",
                value: function() {
                    var e = "?session-id=" + this.player.config.request.session,
                        t = this.player.config.request.flags.log_to_es || this.player.config.user.mod ? "&es=1" : "";
                    return this.player.config.request.urls.fresnel + e + t
                }
            }, {
                key: "_onVideoExit",
                value: function() {
                    this.currentlyBuffering && (this.totalBufferDuration += ed(this.lastBufferTime) / 1e3);
                    var e = {
                        startup: this.score.startupTimeScore,
                        rebuffer: this.score.rebufferScore,
                        failure: this.score.failureScore,
                        quality: this.score.videoQualityScore,
                        overall: this.score.overallScore
                    };
                    this.startAttemptLogged && this._send(Al, {
                        vxs: e
                    }, !1)
                }
            }, {
                key: "_getGlobalProperties",
                value: function() {
                    var e = this.player.telecine.video ? this.player.telecine.video.currentFile : {},
                        t = e.id,
                        n = void 0 === t ? 0 : t,
                        i = e.mime,
                        r = void 0 === i ? us.h264 : i,
                        o = e.metadata,
                        a = (o = void 0 === o ? {} : o).profile,
                        s = void 0 === a ? null : a,
                        u = !1,
                        c = !1,
                        l = this._getProfileUsage(),
                        d = this._getBufferOccupancy();
                    switch (r) {
                        case us.dash:
                            0 === e.restrictedStreamIndexes.length && (u = !0), so(this.player.config, "request.files.dash.separate_av") && (c = !0);
                            var f = this.currentStream,
                                h = f.id;
                            n = void 0 === h ? 0 : h;
                            var v = f.profile;
                            s = void 0 === v ? null : v;
                            break;
                        case us.hls:
                            u = !0
                    }
                    var p = {
                        account_type: this.player.config.video.owner ? this.player.config.video.owner.account_type : null,
                        api_version: this.player.config.embed.api || null,
                        app_id: this.player.config.embed.app_id ? String(this.player.config.embed.app_id) : null,
                        audio_bitrate: this.player.telecine.getBitrateAtTime(this.player.telecine.currentTime, "audio"),
                        auto: u,
                        autoplay: !!this.autoplayType,
                        average_buffer_occupancy: d.average || 0,
                        average_speed: l.average_speed || 0,
                        background: !!this.player.config.embed.settings.background,
                        buffer_count: this.bufferCount,
                        buffer_duration: Math.round(100 * this.totalBufferDuration) / 100,
                        buffer_ratio: this._getBufferRatio(),
                        cdn: e.metadata ? e.metadata.cdn : "akamai",
                        client_time: Zl(),
                        clip_id: this.player.config.video.id,
                        context: this.player.config.embed.context,
                        current_buffer_occupancy: this.bufferOccupancies[this.bufferOccupancies.length - 1],
                        delivery: "live" !== vs[r] ? vs[r] : "dash",
                        device_pixel_ratio: window.devicePixelRatio || 1,
                        drm: this.player.config.request.drm || !1,
                        dropped_frames: this.droppedFrames,
                        dropped_frame_percent: this.droppedFramePercent,
                        embed: !this.player.config.embed.on_site,
                        ended: this.hasEnded,
                        forced_embed_quality: this.forcedEmbedQuality,
                        fullscreen: this.fullscreen,
                        highest_available_profile: l.highest_available_profile ? String(l.highest_available_profile) : null,
                        highest_profile: l.highest_profile ? String(l.highest_profile) : null,
                        is_buffering: this.currentlyBuffering,
                        is_mod: !!this.player.config.user.mod,
                        is_spatial: !(!Oi.spatialPlayback || !this.player.config.video.spatial),
                        live: this.store.get(Yc) || !1,
                        logged_in: !!this.player.config.user.logged_in,
                        looping: !!this.player.config.embed.loop,
                        max_buffer_occupancy: isFinite(d.max) ? d.max : 0,
                        max_speed: isFinite(l.max_speed) ? l.max_speed : 0,
                        mime: this.player.telecine.video && this.player.telecine.video.currentFile.mime || null,
                        min_buffer_occupancy: isFinite(d.min) ? d.min : 0,
                        min_speed: isFinite(l.min_speed) ? l.min_speed : 0,
                        minutes_watched: this.totalMinutesWatched,
                        most_used_profile: l.most_used_profile ? String(l.most_used_profile) : null,
                        origin: e.metadata ? e.metadata.origin : "",
                        playback_rate: this.player.telecine.playbackRate,
                        player_width: this.player.element.querySelector(".vp-video").getBoundingClientRect().width,
                        player_height: this.player.element.querySelector(".vp-video").getBoundingClientRect().height,
                        profile_id: s ? String(s) : null,
                        quality: this.currentStream ? this.currentStream.quality : null,
                        quality_downswitch_count: this.qualityDownSwitchCount,
                        quality_upswitch_count: this.qualityUpSwitchCount,
                        quality_switch_count: this.qualityUpSwitchCount + this.qualityDownSwitchCount,
                        referrer: this._getOrigin(),
                        resume_time: this.player.config.user.progress || null,
                        separate_av: c,
                        session_id: this.player.config.request.session,
                        session_playback_duration: Math.round(100 * this.sessionPlaybackDuration) / 100,
                        stayed_on_auto: this.stayedOnAuto,
                        ttfb: this._getTimeToFirstByte(),
                        version: this.player.config.request.build.js,
                        video_bitrate: this.player.telecine.getBitrateAtTime(this.player.telecine.currentTime, "video"),
                        video_duration: this.player.config.video.duration,
                        video_file_id: Number.isInteger(Number(n)) ? parseInt(n, 10) : null,
                        video_time: this.player.telecine.currentTime,
                        vod: this._isVOD(),
                        vuid: Ac("vuid")
                    };
                    if (this.player.config.request.ab_tests)
                        for (var m in this.player.config.request.ab_tests) {
                            var g = this.player.config.request.ab_tests[m];
                            for (var y in p[m + "_test"] = 1, p[m + "_group"] = g.group, g.data) p[m + "_data_" + y] = g.data[y]
                        }
                    return p
                }
            }, {
                key: "_send",
                value: function(e, t) {
                    var n = !(2 < arguments.length && void 0 !== arguments[2]) || arguments[2],
                        i = this._getGlobalProperties();
                    for (var r in t) t.hasOwnProperty(r) && (i[r] = t[r]);
                    i.name = e, i.event_time = this.initialConfigLoadTime + td(this.playerLoadTime);
                    var o = [i],
                        a = JSON.stringify(o);
                    if (!navigator.sendBeacon || !navigator.sendBeacon(this.endpoint, a)) {
                        var s = new XMLHttpRequest;
                        s.open("POST", this.endpoint, n), s.setRequestHeader("Content-Type", "text/plain"), s.send(a)
                    }
                }
            }, {
                key: "_getProfileUsage",
                value: function() {
                    var i = this,
                        e = {},
                        r = Zl(),
                        t = Jl("asc"),
                        n = "MediaSourceScanner" === this.player.telecine.currentScanner,
                        o = [];
                    "HTMLScanner" === this.player.telecine.currentScanner && (o = so(this.player.config, "request.files.progressive") || so(this.player.config, "request.files.hls") || []), n && (o = so(this.player.config, "request.files.dash.streams", []));
                    var a = ke(o).sort(t).map(function(e) {
                            return e.profile
                        }),
                        s = -1,
                        u = 0,
                        c = null;
                    if (Object.keys(this.profiles).forEach(function(e) {
                            var t = a.indexOf(parseInt(e, 10));
                            s < t && (s = t);
                            var n = i.profiles[e].reduce(function(e, t) {
                                return ((t.end || r) - t.start) / 1e3 + e
                            }, 0);
                            u < n && (u = n, c = e)
                        }), e.highest_profile = a[s], e.highest_available_profile = a[a.length - 1], e.most_used_profile = c, n) {
                        e.max_speed = Math.round(Math.max.apply(Math, this.speeds)) / 1e3, e.min_speed = Math.round(Math.min.apply(Math, this.speeds)) / 1e3;
                        var l = this.speeds.reduce(function(e, t) {
                            return e + t
                        }, 0);
                        e.average_speed = Math.round(l / this.speeds.length) / 1e3
                    }
                    return e
                }
            }, {
                key: "_getBufferOccupancy",
                value: function() {
                    var e = {};
                    if (0 < this.bufferOccupancies.length) {
                        e.max = Math.max.apply(Math, this.bufferOccupancies), e.min = Math.min.apply(Math, this.bufferOccupancies);
                        var t = this.bufferOccupancies.reduce(function(e, t) {
                            return e + t
                        }, 0);
                        e.average = Math.round(t / this.bufferOccupancies.length * 100) / 100
                    }
                    return e
                }
            }, {
                key: "_getTimeToFirstByte",
                value: function() {
                    var e = -1;
                    if (void 0 !== window.performance && "function" == typeof window.performance.getEntriesByType) {
                        var t = window.performance.getEntriesByType("resource");
                        if (t) {
                            var n = t.filter(function(e) {
                                return ".m4s" === e.name.split("?")[0].substr(-4)
                            });
                            e = n.map(function(e) {
                                return e.responseStart - e.connectStart
                            }).reduce(function(e, t) {
                                return e + t
                            }, 0) / (n.length || 1)
                        }
                    }
                    return e
                }
            }, {
                key: "_getBufferRatio",
                value: function() {
                    var e = this.totalBufferDuration / (this.totalBufferDuration + this.sessionPlaybackDuration) * 100;
                    return isNaN(e) ? 0 : Math.round(100 * e) / 100
                }
            }, {
                key: "_onPlayInitiated",
                value: function() {
                    var i = this;
                    this.startAttemptLogged || hd.isCastConnected || this.player.performDelegateAction(ls.playLog, function(e) {
                        var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                        i.autoplayType = t.continuous ? 1 : i.player.config.embed.autoplay;
                        var n = Oi.iOS || Oi.iPhone || Oi.windowsPhone || Oi.browser.bb10 || Oi.mobileAndroid || Oi.android;
                        i.autoplayType = i.livestreamOnline && !n ? 1 : i.player.config.embed.autoplay, i._send(Fl), i.startAttemptLogged = !0, i.startPlayTime = Zl()
                    })
                }
            }, {
                key: "_onPlayed",
                value: function(e) {
                    this.currentlyPlaying = !0, this.isScrubbing || this._send(Il)
                }
            }, {
                key: "_onPlayProgress",
                value: function(e) {
                    var t = e.currentTime;
                    if (this.playedTo = t, !this.startupTimeLogged && !hd.isCastConnected) {
                        this.startupTimeLogged = !0;
                        var n = {
                            time: ed(this.startPlayTime) / 1e3
                        };
                        this.akamaiEdgeIp && (n.akamai_edge_ip = this.akamaiEdgeIp), this.quicVersion && (n.quic_version = this.quicVersion), this.akamaiCacheDebug && (n.akamai_cache_debug = this.akamaiCacheDebug), n.manifest_load_durations = this.player.telecine.manifestLoadDurations, n.successful_segment_count = this.player.telecine.successfulSegments.length, n.failed_segment_count = this.player.telecine.failedSegments.length, this._send(ql, n), this._captionsInitCheck()
                    }
                }
            }, {
                key: "_onCanPlay",
                value: function() {
                    this.isScrubbing || this._send(Sl)
                }
            }, {
                key: "_onManifestLoaded",
                value: function() {
                    this._send(xl)
                }
            }, {
                key: "_onBufferOccupancyChange",
                value: function(e) {
                    this.bufferOccupancies.push(e)
                }
            }, {
                key: "_onBufferStarted",
                value: function() {
                    this.startupTimeLogged && !this.isScrubbing && (this.lastBufferTime || (this.bufferCount++, this.lastBufferTime = Zl(), this._send(El, {
                        lower_profile_available: this.player.telecine.isLowerProfileAvailable
                    })), this.currentlyBuffering = !0)
                }
            }, {
                key: "_onBufferEnded",
                value: function() {
                    if (this.lastBufferTime && this.startupTimeLogged && (!this.isScrubbing || this.currentlyBuffering)) {
                        var e = ed(this.lastBufferTime) / 1e3;
                        this.totalBufferDuration += e, this._send(wl, {
                            duration: e
                        }), this.currentlyBuffering = !1, this.lastBufferTime = null
                    } else this.lastBufferTime = null
                }
            }, {
                key: "_onEnterFullscreen",
                value: function() {
                    this.fullscreen = !0, this._send(Pl)
                }
            }, {
                key: "_onExitFullscreen",
                value: function() {
                    this.fullscreen = !1, this._send(Pl)
                }
            }, {
                key: "_onDroppedFrames",
                value: function(e) {
                    var t = e.dropped / e.total * 100;
                    this.droppedFramePercent = Math.round(100 * t) / 100, this.droppedFrames = e.dropped
                }
            }, {
                key: "_onChangeQuality",
                value: function(e) {
                    "auto" !== e && (this.stayedOnAuto = !1), this.player.telecine.video.currentFile.mime === us.dash && ("auto" === e || this.qualityPickedLogged ? "auto" === e && this.qualityPickedLogged && !this.backToAutoLogged && (this._send(jl, {
                        quality: this.currentQuality,
                        auto: 1
                    }), this.backToAutoLogged = !0) : (this._send(Vl, {
                        quality: e,
                        auto: 0
                    }), this.qualityPickedLogged = !0), this.currentQuality = e)
                }
            }, {
                key: "_onStreamChanged",
                value: function(e, t, n) {
                    var i = (this.currentStream = e).profile ? e.profile : e.id,
                        r = Zl();
                    if (this.profiles[i] = this.profiles[i] || [], this.lastProfileId) {
                        var o = this.profiles[this.lastProfileId].length - 1;
                        this.profiles[this.lastProfileId][o] && (this.profiles[this.lastProfileId][o].end = r)
                    }
                    this.lastVideoBitrate && (n[t].bitrate > this.lastVideoBitrate ? this.qualityUpSwitchCount += 1 : this.qualityDownSwitchCount += 1), this.profiles[i].push({
                        start: r
                    }), this.playedProfiles[i] = {
                        bitrate: n[t].bitrate,
                        width: n[t].width,
                        height: n[t].height
                    }, this._send(Ul, {
                        previous_audio_bitrate: this.lastAudioBitrate,
                        previous_video_bitrate: this.lastVideoBitrate,
                        previous_profile_id: String(this.lastProfileId)
                    }), this.lastProfileId = i, this.lastVideoBitrate = n[t].bitrate, this.lastAudioBitrate = n[t].audioBitrate
                }
            }, {
                key: "_onSeek",
                value: function() {
                    this.currentlyPlaying = !1
                }
            }, {
                key: "_captionsInitCheck",
                value: function() {
                    this.previousCaptionsID || null !== this.player.config.request.cookie.captions && "null" !== this.player.config.request.cookie.captions && this._onCaptionsEnabled(this.player.config.request.cookie.captions)
                }
            }, {
                key: "_onCaptionsEnabled",
                value: function(e) {
                    this.previousCaptionsID !== e && (this.previousCaptionsID = e, this._send(dl, {
                        captions_id: String(e)
                    }))
                }
            }, {
                key: "_onCaptionsDisabled",
                value: function() {
                    this.previousCaptionsID && (this.previousCaptionsID = null, this._send(fl))
                }
            }, {
                key: "_onScrubbingStarted",
                value: function() {
                    this._send(Hl), this.isScrubbing = !0
                }
            }, {
                key: "_onScrubbingEnded",
                value: function() {
                    this.isScrubbing = !1, this._send(Wl)
                }
            }, {
                key: "_onEnded",
                value: function(e) {
                    this.currentlyPlaying = !1, this.hasEnded = !0, this._send(Tl)
                }
            }, {
                key: "_onLiveEventEnded",
                value: function() {
                    this.currentlyBuffering && (this.currentlyBuffering = !1, this.lastBufferTime = null, this._send(wl, {
                        duration: 0
                    }))
                }
            }, {
                key: "_onAlertVisibilityChanged",
                value: function(e, t) {
                    e ? this._send(cl) : this._send(ll)
                }
            }, {
                key: "_onError",
                value: function(e) {
                    var t = {
                        error_type: e,
                        error_reason: 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null
                    };
                    this.startupTimeLogged ? this._send(Ml, t) : this.startAttemptLogged ? this._send(Bl, t) : this._send(Cl, t)
                }
            }, {
                key: "_onErrorLinkPressed",
                value: function(e, t) {
                    this._send(pl, {
                        error_type: t,
                        error_url: e
                    })
                }
            }, {
                key: "_onStreamTargetChange",
                value: function(e, t, n) {
                    var i = e.profile ? e.profile : e.id,
                        r = n[t].bitrate,
                        o = Zl();
                    if (this.targetProfileId[i] = this.targetProfileId[i] || [], this.lastTargetProfileId) {
                        var a = this.targetProfileId[this.lastTargetProfileId].length - 1;
                        this.targetProfileId[this.lastTargetProfileId][a] && (this.targetProfileId[this.lastTargetProfileId][a].end = o)
                    }
                    this.targetProfileId[i].push({
                        start: o
                    }), this.targetProfiles[i] = {
                        bitrate: r,
                        width: n[t].width,
                        height: n[t].height
                    }, this.lastTargetProfileId = i
                }
            }, {
                key: "_onForcedQuality",
                value: function(e) {
                    this.forcedEmbedQuality = e
                }
            }, {
                key: "_onAdaptiveBandwidth",
                value: function(e) {
                    var t = e.speed;
                    this.speeds.push(t), 500 < this.speeds.length && this.speeds.shift()
                }
            }, {
                key: "_onSegmentDownloaded",
                value: function(e) {
                    e.identifier;
                    var t = e.data.headers;
                    "akamai-edge-ip" in t && (this.akamaiEdgeIp = t["akamai-edge-ip"]), "quic-version" in t && (this.quicVersion = t["quic-version"]), "x-vim-cachebc" in t && (this.akamaiCacheDebug = t["x-vim-cachebc"])
                }
            }, {
                key: "_onVideoDurationMismatch",
                value: function(e) {
                    this._send(kl, {
                        duration_difference: Math.round(100 * e) / 100
                    })
                }
            }, {
                key: "_onOverlayOpened",
                value: function(e) {
                    "email-capture" === e && this._send(bl, {
                        slate_type: "email"
                    })
                }
            }, {
                key: "_onPlaybackRateChanged",
                value: function(e, t) {
                    this._send(Dl, {
                        previous_playback_rate: t
                    })
                }
            }, {
                key: "_onManifestTimeout",
                value: function() {
                    this._send(Ll)
                }
            }, {
                key: "_resetMetrics",
                value: function() {
                    this.startAttemptLogged = !1, this.startupTimeLogged = !1, this.qualityPickedLogged = !1, this.backToAutoLogged = !1, this.lastProfileId = null, this.lastTargetProfileId = null, this.lastAudioBitrate = null, this.lastVideoBitrate = null, this.currentlyPlaying = !1, this.playedTo = 0, this.autoplayType = this.player.config.embed.autoplay, this.playerLoadTime = nd(), this.endpoint = this._getFresnelEndpoint(), this.currentQuality = "auto", this.akamaiEdgeIp = null, this.quicVersion = null, this.akamaiCacheDebug = null, this.bufferCount = 0, this.currentMinuteWatchedTime = 0, this.totalMinutesWatched = 0, this.hasEnded = !1, this.droppedFramePercent = 0, this.droppedFrames = 0, this.currentlyBuffering = !1, this.fullscreen = !1, this.qualityUpSwitchCount = 0, this.qualityDownSwitchCount = 0, this.playedProfiles = {}, this.profiles = {}, this.speeds = [], this.bufferOccupancies = [], this.targetProfiles = {}, this.targetProfileId = {}, this.forcedEmbedQuality = "none", this.sessionPlaybackDuration = 0, this.stayedOnAuto = !0
                }
            }]), n
        }(),
        gd = function() {
            function i(e, t, n) {
                O(this, i), this.player = e, this.element = t, this.store = n, this.muxClient = null, this._canTrack() && this._loadMuxEmbed()
            }
            return R(i, [{
                key: "_canTrack",
                value: function() {
                    return !this.player.doNotTrackEnabled && this.store.get(Yc)
                }
            }, {
                key: "_loadMuxEmbed",
                value: function() {
                    var e = this,
                        t = "vp-mux-client";
                    if (!document.getElementById(t)) {
                        var n = document.createElement("script");
                        n.setAttribute("id", t), n.setAttribute("src", this.player.config.request.urls.mux_url), n.onreadystatechange = n.onload = function() {
                            e.store.get("ui.liveEvent.isLiveStarted") && e._monitor(), e._setUpPlayerEvents()
                        }, document.getElementsByTagName("head")[0].appendChild(n)
                    }
                }
            }, {
                key: "_setUpPlayerEvents",
                value: function() {
                    var t = this;
                    this.player.events.on(ds.configChanged, function() {
                        t._canTrack() && t._monitor()
                    }), this.store.watch("ui.liveEvent.isLiveStarted", function(e) {
                        e && t._monitor()
                    })
                }
            }, {
                key: "_monitor",
                value: function() {
                    if ("undefined" != typeof mux) {
                        var e = this.player.telecine.video ? this.player.telecine.video.currentFile : {},
                            t = this.element.querySelector(".vp-telecine").getElementsByTagName("video")[0];
                        null !== this.muxClient && mux.destroyMonitor(t), this.muxClient = mux.monitor(t, {
                            debug: !1,
                            data: {
                                property_key: "dev" === this.player.config.request.build.js ? "kghblrf3bb9uk33lv58ompm3k" : "md0ig7ssl8unl2kpl0h6p0drn",
                                player_name: "Vimeo Player",
                                player_init_time: Date.now(),
                                player_version: this.player.config.request.build.js,
                                video_title: this.player.config.video.title,
                                video_id: this.player.config.video.id,
                                video_duration: 1e3 * this.player.config.video.duration,
                                video_cdn: e.metadata ? e.metadata.cdn : "akamai",
                                video_stream_type: this.store.get(Yc) ? "live" : "vod"
                            }
                        })
                    }
                }
            }]), i
        }();

    function yd() {
        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
            t = arguments[1],
            n = t.type,
            i = t.payload;
        switch (n) {
            case qc:
                return N({}, e, i.video.liveEvent);
            case Rc:
                return N({}, e, i);
            case Ic:
                return N({}, e, {
                    ingest: N({}, e.ingest, {
                        startTime: i
                    })
                });
            default:
                return e
        }
    }
    var _d = function(e) {
            return Vc(e) && e.liveEvent.ingest ? e.liveEvent.ingest.scheduledStartTime : null
        },
        bd = function(e) {
            return Vc(e) && e.liveEvent.ingest && e.liveEvent.ingest.startTime ? e.liveEvent.ingest.startTime : null
        },
        wd = Object.freeze({
            default: yd,
            dashLiveUrl: function(e) {
                return Vc(e) && e.liveEvent.playback ? e.liveEvent.playback.dash_noredirect : null
            },
            hlsLiveUrl: function(e) {
                return Vc(e) && e.liveEvent.playback ? e.liveEvent.playback.hls : null
            },
            scheduledLiveStartTime: _d,
            liveStartTime: bd
        });

    function Ed(v, p) {
        var r, u, m, o, c, t, n = 0,
            l = 1e3,
            g = {};

        function d() {
            return Date.now ? Date.now() : (new Date).getTime()
        }

        function i() {
            r = !1, u = v.telecine ? v.telecine.currentTime : 0, c = o = m = 0, t = !1
        }

        function y(r, o, a, s) {
            v.verifyConfig().then(function() {
                var e = o;
                e.signature = v.config.request.signature, e.session = v.config.request.session, e.time = v.config.request.timestamp, e.expires = v.config.request.expires;
                var t = JSON.stringify(e),
                    n = "https://" + v.config.player_url + r;
                if (null === e.sessionTime && (Ou.captureBreadcrumb("sessionTime is null breadcrumbs", {
                        endpoint: r,
                        allParams: e
                    }), Ou.captureException("sessionTime is null when making stats request")), navigator.sendBeacon && navigator.sendBeacon(n, t)) return !0;
                var i = new XMLHttpRequest;
                return i.open("POST", n, !a), i.setRequestHeader("Content-Type", "text/plain;charset=UTF-8"), i.withCredentials = !0, i.onload = function() {
                    200 !== i.status && s < 2 && setTimeout(function() {
                        y(r, o, a, s + 1)
                    }, 1e3)
                }, i.send(t), i
            }).catch(function(e) {})
        }

        function f(a, s, u) {
            var c = v.telecine.currentFile || {},
                e = c.id,
                l = void 0 === e ? 0 : e,
                t = c.mime,
                d = void 0 === t ? us.h264 : t,
                n = c.metadata,
                i = (n = void 0 === n ? {} : n).profile,
                f = void 0 === i ? -1 : i;
            if (d === us.dash) {
                var r = g,
                    o = r.id;
                l = void 0 === o ? 0 : o;
                var h = r.profile;
                f = void 0 === h ? -1 : h
            }
            v.performDelegateAction(ls.playLog, function(e) {
                var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
                    n = function(e) {
                        y(a, N({
                            referrer: v.config.request.referrer,
                            embed: !v.config.embed.on_site,
                            context: v.config.embed.context,
                            autoplay: t.continuous ? 2 : v.config.embed.autoplay,
                            loop: v.config.embed.loop ? 1 : 0,
                            id: v.config.video.id,
                            vodId: v.config.video.vod && v.config.video.vod.id ? v.config.video.vod.id : null,
                            vodSaleId: v.config.video.vod && v.config.video.vod.sale_id ? v.config.video.vod.sale_id : null,
                            sessionTime: Fs(m),
                            videoShape: v.config.video.spatial ? "mono" !== v.config.video.spatial.stereo_mode ? 2 : 1 : 0,
                            spatialPlayback: function() {
                                var e = v.telecine.getEffectByName("ThreeSixtyEffect");
                                return Oi.spatialPlayback && e ? e.isStereo() ? 2 : 1 : 0
                            }(),
                            userId: v.config.user.id,
                            userAccountType: v.config.user.account_type,
                            userIsMod: v.config.user.mod ? 1 : 0,
                            ownerId: v.config.video.owner.id,
                            ownerAccountType: v.config.video.owner.account_type,
                            privacy: v.config.video.privacy,
                            rating: v.config.video.rating ? v.config.video.rating.id : null,
                            type: _s[v.telecine.currentScanner],
                            videoFileId: Number.isInteger(Number(l)) ? l : 0,
                            delivery: vs[d],
                            profileId: f,
                            quality: c.metadata ? c.metadata.quality : null,
                            duration: Fs(v.config.video.duration),
                            seconds: Fs(s)
                        }, e, {
                            playbackRate: v.telecine.playbackRate
                        }), u)
                    },
                    i = p.get(Yc) ? 1 : 0,
                    r = p.get(bd),
                    o = {
                        isLive: i
                    };
                if (i) {
                    if (!r) return void Ds("https://" + v.config.vimeo_url + "/live_event/status?clip_id=" + v.config.video.id).then(function(e) {
                        var t = JSON.parse(e);
                        return t && t.ingest && (p.dispatch(Nc(t.ingest.start_time)), r = p.get(bd)), r && (o.liveStartTime = r), n(o), t
                    }).catch(function(e) {});
                    o.liveStartTime = r
                }
                n(o)
            })
        }

        function h() {
            var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 0,
                t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1],
                n = !(2 < arguments.length && void 0 !== arguments[2]) || arguments[2];
            if (v.playLoggingEnabled) {
                var i = d();
                n && i < o + l || (o = i, n && !v.config.request.flags.partials || r || f("/log/partial", e, t))
            }
        }

        function _(e, t) {
            if (!v.doNotTrackEnabled) {
                t = t || {};
                var n = {
                    referrer: v.config.request.referrer,
                    embed: !v.config.embed.on_site,
                    context: v.config.embed.context,
                    id: v.config.video.id,
                    vodId: v.config.video.vod && v.config.video.vod.id ? v.config.video.vod.id : null,
                    vodSaleId: v.config.video.vod && v.config.video.vod.sale_id ? v.config.video.vod.sale_id : null,
                    userId: v.config.user.id,
                    userAccountType: v.config.user.account_type,
                    ownerId: v.config.video.owner ? v.config.video.owner.id : 0,
                    duration: Fs(v.config.video.duration),
                    seconds: Fs(v.telecine.currentTime),
                    playbackRate: v.telecine.playbackRate
                };
                for (var i in t) t.hasOwnProperty(i) && (n[i] = t[i]);
                y("/log/" + e, n)
            }
        }
        return i(),
            function() {
                v.events.on(Pe.TIME_UPDATE, function(e) {
                    var t = e.currentTime,
                        n = (e.duration, e.timeProgress, e.playbackRate),
                        i = Math.floor(t);
                    !r && c + l < d() && (u < t && (m += (t - u) / n), u = t), i % 30 == 0 && h(t)
                }), v.events.on(ds.playbackRateChanged, function(e, t) {
                    _("playback_rate_change", {
                        oldPlaybackRate: t
                    }), h(v.telecine.currentTime)
                }), v.events.on(gn.PLAY_INITIATED, function() {
                    !t && v.playLoggingEnabled && (t = !0, f("/log/play", 0))
                }), v.events.on(ds.paused, function(e) {
                    v.telecine.ended || h(e)
                }), v.events.on(Pe.SEEKED, function(e) {
                    var t = e.currentTime;
                    n = t, r || h(n)
                }), v.events.on(ds.scrubbingStarted, function() {
                    c = d(), r = !0
                }), v.events.on(ds.scrubbingEnded, function() {
                    u = v.telecine.currentTime, r = !1, h(n)
                }), v.events.on(ds.prefsButtonPressed, function() {
                    h(v.telecine.currentTime)
                }), v.events.on(ds.ended, function() {
                    m += v.config.video.duration - u, h(v.config.video.duration, !1, !1)
                }), v.events.on(Ce.STREAM_CHANGE, function(e) {
                    g = e
                });
                var o = [],
                    a = !1,
                    s = 1e3;

                function e() {
                    o.length && v.performDelegateAction(ls.playLog, function(e) {
                        y("/log/spatial", {
                            embed: !v.config.embed.on_site,
                            id: v.config.video.id,
                            context: v.config.embed.context,
                            ownerId: v.config.video.owner ? v.config.video.owner.id : 0,
                            referrer: v.config.request.referrer,
                            vodId: v.config.video.vod && v.config.video.vod.id ? v.config.video.vod.id : null,
                            vodSaleId: v.config.video.vod && v.config.video.vod.sale_id ? v.config.video.vod.sale_id : null,
                            motionLog: JSON.stringify(o)
                        }, !1)
                    })
                }
                v.events.on(re.MOTION_START, function() {
                    a = !0,
                        function e() {
                            var t = v.telecine.getEffectByName("ThreeSixtyEffect").currentCoordinates,
                                n = Math.round(100 * t.lat) / 100,
                                i = Math.round(100 * t.long) / 100,
                                r = {
                                    sessionTime: m,
                                    videoTime: v.telecine.currentTime,
                                    coordinates: {
                                        lat: n,
                                        lon: i
                                    }
                                };
                            o.push(r), setTimeout(function() {
                                a && e()
                            }, s)
                        }()
                }), v.events.on(re.MOTION_END, function() {
                    a = !1, e()
                }), v.events.on(ds.loadVideo, function() {
                    e(), o = []
                }), Lu(function() {
                    v.telecine && 0 < v.telecine.currentTime && (h(v.telecine.currentTime, !0, !1), e())
                })
            }(), v.doNotTrackEnabled || ([{
                type: "share_press",
                event: ds.shareButtonPressed
            }, {
                type: "facebook_press",
                event: ds.facebookButtonPressed
            }, {
                type: "twitter_press",
                event: ds.twitterButtonPressed
            }, {
                type: "tumblr_press",
                event: ds.tumblrButtonPressed
            }, {
                type: "email_press",
                event: ds.emailButtonPressed
            }, {
                type: "embed_press",
                event: ds.embedButtonPressed
            }, {
                type: "login_success",
                event: ds.userLoggedIn
            }, {
                type: "airplay",
                event: ds.airPlayActivated
            }, {
                type: "vod_press",
                event: ds.vodButtonPressed
            }, {
                type: "collection_press",
                event: ds.collectionsButtonPressed
            }, {
                type: "email_capture_submitted",
                event: ds.emailCaptureSubmitted
            }].forEach(function(e) {
                v.events.on(e.event, function(e) {
                    return function() {
                        _(e)
                    }
                }(e.type))
            }), v.events.on(ds.outroDisplayed, function(e) {
                var t = {
                    outroType: v.config.embed.outro,
                    ownerAccountType: v.config.video.owner.account_type,
                    playerWidth: v.element.clientWidth,
                    playerHeight: v.element.clientHeight
                };
                e && e.length && (t.outroVideos = e.join(",")), _("outro_displayed", t)
            }).on(ds.outroVideoPressed, function(e) {
                _("outro_video_press", {
                    ownerAccountType: v.config.video.owner.account_type,
                    videoId: e
                })
            }).on(ds.followButtonPressed, function() {
                _("outro_follow_press", {
                    add: !v.config.user.following
                })
            }).on(ds.outroCtaPressed, function(e) {
                _("outro_cta_press", {
                    ownerAccountType: v.config.video.owner.account_type,
                    link: e
                })
            }).on(ds.outroLinkPressed, function(e) {
                _("outro_link_press", {
                    ownerAccountType: v.config.video.owner.account_type,
                    link: e
                })
            }).on(ds.outroImagePressed, function(e) {
                _("outro_image_press", {
                    ownerAccountType: v.config.video.owner.account_type,
                    link: e
                })
            }).on(ds.likeButtonPressed, function() {
                _("like_press", {
                    add: !v.config.user.liked
                })
            }).on(ds.watchLaterButtonPressed, function() {
                _("watch_later_press", {
                    add: !v.config.user.watch_later
                })
            }).on(ds.popupOpened, function(e) {
                0 === e.indexOf("login-") && _("login_attempt")
            }).on(ds.captionsChanged, function(e, t) {
                t || (e ? _("text_track_change", {
                    textTrackLanguage: e.language,
                    textTrackKind: e.kind
                }) : _("text_track_change"))
            }).on(ds.badgePressed, function(e) {
                1 !== e && 12 !== e || _("badge_press", {
                    badgeId: e
                })
            }).on(ds.overlayOpened, function(e) {
                "email-capture" === e && _("email_capture_displayed")
            }).on(ds.overlayClosed, function(e) {
                "email-capture" === e && _("email_capture_dismissed")
            }).on(ds.cardPressed, function(e) {
                _("card_press", {
                    ownerAccountType: v.config.video.owner.account_type,
                    cardId: e,
                    cardType: "link"
                })
            }).on(ds.cardDisplayed, function(e, t) {
                v.config.embed.editor || _("card_displayed", {
                    ownerAccountType: v.config.video.owner.account_type,
                    cardId: e,
                    cardType: t.url ? "link" : "text"
                })
            })), v.events.on(ds.configChanged, function(e) {
                e && i()
            }), v.events.fire(ds.statsModuleReady), {}
    }

    function Sd() {
        return function(e) {
            return function() {
                var o = e.apply(void 0, arguments),
                    r = Ps();

                function t(e, t) {
                    return (e = [].concat(e)).map(function(e) {
                        return t(o.createGetter(e))
                    })
                }
                return N({}, o, {
                    watch: function(e, i) {
                        return t(e, function(e) {
                            var t = r.get({
                                selector: e,
                                listener: i
                            });
                            if (!t) {
                                var n = function(n, i) {
                                    var r = n(o.getState());
                                    return o.subscribe(function() {
                                        var e = n(o.getState());
                                        if (r !== e) {
                                            var t = r;
                                            i(r = e, t, o.getState())
                                        }
                                    })
                                }(e, i);
                                t = r.insert({
                                    selector: e,
                                    listener: i,
                                    unsubscribe: n
                                })
                            }
                            return t.unsubscribe
                        })
                    },
                    unwatch: function(e, n) {
                        return t(e, function(e) {
                            var t = r.get({
                                selector: e,
                                listener: n
                            });
                            return t && t.unsubscribe()
                        })
                    }
                })
            }
        }
    }
    var kd = function(e, t) {
        return null == e || e != e ? t : e
    };

    function Td() {
        var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
        return function(e) {
            return function() {
                var i = e.apply(void 0, arguments);

                function n() {
                    return t
                }
                var r = Kr(function(t) {
                    if (nr(t)) return t;
                    var e = so(n(), t);
                    return nr(e) ? e : function(e) {
                        return so(e, t)
                    }
                });
                return N({}, i, {
                    getSelectors: n,
                    createGetter: r,
                    get: function(e, t) {
                        var n = (e = r(e))(i.getState());
                        return void 0 !== t && (n = kd(n, t)), n
                    }
                })
            }
        }
    }
    var Ad = {
        settings: {}
    };

    function Pd(e, t) {
        return e === t
    }

    function Cd(e) {
        var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : Pd,
            n = null,
            i = null;
        return function() {
            return function(e, t, n) {
                if (null === t || null === n || t.length !== n.length) return !1;
                for (var i = t.length, r = 0; r < i; r++)
                    if (!e(t[r], n[r])) return !1;
                return !0
            }(t, n, arguments) || (i = e.apply(null, arguments)), n = arguments, i
        }
    }
    var xd = function(u) {
        for (var e = arguments.length, c = Array(1 < e ? e - 1 : 0), t = 1; t < e; t++) c[t - 1] = arguments[t];
        return function() {
            for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[n];
            var i = 0,
                r = t.pop(),
                o = function(e) {
                    var t = Array.isArray(e[0]) ? e[0] : e;
                    if (!t.every(function(e) {
                            return "function" == typeof e
                        })) {
                        var n = t.map(function(e) {
                            return typeof e
                        }).join(", ");
                        throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: [" + n + "]")
                    }
                    return t
                }(t),
                a = u.apply(void 0, [function() {
                    return i++, r.apply(null, arguments)
                }].concat(c)),
                s = Cd(function() {
                    for (var e = [], t = o.length, n = 0; n < t; n++) e.push(o[n].apply(null, arguments));
                    return a.apply(null, e)
                });
            return s.resultFunc = r, s.recomputations = function() {
                return i
            }, s.resetRecomputations = function() {
                return i = 0
            }, s
        }
    }(Cd);

    function Ld() {
        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
            t = arguments[1],
            n = t.type,
            i = t.payload;
        switch (n) {
            case qc:
                return N({}, e, i.video);
            default:
                return e
        }
    }
    var Od = function(e) {
            return e.video.width
        },
        Rd = function(e) {
            return e.video.height
        },
        Id = xd(Od, Rd, function(e, t) {
            return t / e
        }),
        Md = Object.freeze({
            default: Ld,
            width: Od,
            height: Rd,
            ratio: Id
        }),
        Dd = "PLAYER_RESIZE",
        Nd = function(e, t) {
            return {
                type: Dd,
                payload: {
                    width: e,
                    height: t
                }
            }
        },
        Fd = {
            xxs: 0,
            xs: 390,
            sm: 600,
            md: 960,
            lg: 1280,
            xl: 1600,
            xxl: 1920
        };

    function Bd() {
        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
            t = arguments[1];
        switch (t.type) {
            case Dd:
                return N({}, e, {
                    width: t.payload.width,
                    height: t.payload.height
                });
            default:
                return e
        }
    }
    var qd = function(e) {
            return lf(e)
        },
        Ud = function(e) {
            return e.embed.transparent ? Math.round(Math.min((e.ui.player.height - qd(e)) / Id(e), e.ui.player.width)) : e.ui.player.width
        },
        jd = function(e) {
            return e.embed.transparent ? Math.round(Math.min(e.ui.player.width * Id(e) + qd(e), e.ui.player.height)) : e.ui.player.height
        },
        Vd = function(e) {
            return Ud(e)
        },
        Hd = function(e) {
            return jd(e) - qd(e)
        },
        Wd = function(e) {
            return (e.ui.player.width - Ud(e)) / 2
        },
        zd = function(e) {
            return (e.ui.player.height - jd(e)) / 2
        },
        Gd = xd(Ud, jd, Wd, zd, function(e, t, n, i) {
            return {
                width: e,
                height: t,
                x: n,
                y: i
            }
        }),
        Yd = function(e) {
            var t = Vd(e),
                n = Hd(e),
                i = bc(e.embed.settings.customLogo) && t < 300 || n < 169,
                r = !bc(e.embed.settings.customLogo) && (t < 338 || n < 190);
            return i || r
        },
        Kd = function(e) {
            var t = Vd(e),
                n = bc(e.embed.settings.customLogo) && t < 375,
                i = !bc(e.embed.settings.customLogo) && t < 450;
            return n || i
        },
        Xd = function(e) {
            var t = Vd(e);
            return Fd.xxs <= t && t < Fd.xs
        },
        $d = function(e) {
            var t = Vd(e);
            return Fd.xs <= t && t < Fd.sm
        },
        Jd = function(e) {
            var t = Vd(e);
            return Fd.sm <= t && t < Fd.md
        },
        Qd = function(e) {
            var t = Vd(e);
            return Fd.md <= t && t < Fd.lg
        },
        Zd = function(e) {
            var t = Vd(e);
            return Fd.lg <= t && t < Fd.xl
        },
        ef = function(e) {
            var t = Vd(e);
            return Fd.xl <= t && t < Fd.xxl
        },
        tf = function(e) {
            var t = Vd(e);
            return Fd.xxl <= t
        },
        nf = Object.freeze({
            breakpoints: Fd,
            default: Bd,
            innerBottom: qd,
            layoutWidth: Ud,
            layoutHeight: jd,
            innerWidth: Vd,
            innerHeight: Hd,
            layoutX: Wd,
            layoutY: zd,
            layout: Gd,
            isTinyMode: Yd,
            isMiniMode: Kd,
            mode: function(e) {
                return Yd(e) ? "tiny" : Kd(e) ? "mini" : "normal"
            },
            xxs: Xd,
            xs: $d,
            sm: Jd,
            md: Qd,
            lg: Zd,
            xl: ef,
            xxl: tf,
            breakpoint: function(t) {
                var n = {
                    xxs: Xd,
                    xs: $d,
                    sm: Jd,
                    md: Qd,
                    lg: Zd,
                    xl: ef,
                    xxl: tf
                };
                return Object.keys(Fd).find(function(e) {
                    return n[e](t)
                })
            }
        });

    function rf() {
        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
            t = arguments[1];
        switch (t.type) {
            case Qu:
                return N({}, e, {
                    width: t.payload.width,
                    height: t.payload.height
                });
            default:
                return e
        }
    }
    var of = Object.freeze({
        default: rf,
        scaleFactor: function(e) {
            return Rs({
                width: e.ui.preview.width,
                height: e.ui.preview.height,
                elementWidth: Vd(e),
                elementHeight: Hd(e)
            }).scaleFactor
        }
    }), af = "CARDS_SET_SIZE", sf = function(e) {
        return {
            type: af,
            payload: e
        }
    };

    function uf() {
        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
            t = arguments[1];
        switch (t.type) {
            case af:
                return N({}, e, {
                    size: t.payload
                });
            default:
                return e
        }
    }
    var cf = function(e) {
            return 0 < e.ui.cards.size && 200 <= e.ui.player.width && e.ui.player.width < 415
        },
        lf = function(e) {
            return cf(e) ? 60 : 0
        },
        df = Object.freeze({
            default: uf,
            isCarouselVisible: cf,
            isCardsThumbVisible: function(e) {
                return 0 < e.ui.cards.size && 300 <= e.ui.player.width
            },
            getCarouselHeight: lf
        }),
        ff = Object.freeze({
            scaleFactor: function(e) {
                return Rs({
                    width: e.video.width,
                    height: e.video.height,
                    elementWidth: Vd(e),
                    elementHeight: Hd(e)
                }).scaleFactor
            }
        }),
        hf = Object.freeze({
            size: function(e) {
                return Math.max(10, Math.round(.045 * Hd(e)))
            }
        }),
        vf = Object.freeze({
            isLinkTitleVisible: function(e) {
                var t = e.ui;
                return 360 <= t.player.width && 203 <= t.player.height || 415 <= t.player.width
            },
            isLinkDescriptionVisible: function(e) {
                var t = e.ui;
                return 360 <= t.player.width && 340 <= t.player.height || 415 <= t.player.width && 234 <= t.player.height
            }
        }),
        pf = Object.freeze({
            isEmailCaptureVisible: function(e) {
                var t = e.ui;
                return 300 <= t.player.width && 169 <= t.player.height
            }
        }),
        mf = function(e) {
            return Vd(e) < 415
        },
        gf = Object.freeze({
            isPrefsMenuCentered: mf,
            hasPrefsMenuCarousel: function(e) {
                return mf(e) || Oi.touch
            }
        });

    function yf() {
        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
            t = arguments[1];
        return {
            player: Bd(e.player, t),
            preview: rf(e.preview, t),
            cards: uf(e.cards, t),
            liveEvent: jc(e.liveEvent, t)
        }
    }
    var _f = Object.freeze({
        default: yf,
        player: nf,
        preview: of ,
        video: ff,
        liveEvent: Xc,
        cards: df,
        outro: vf,
        overlay: pf,
        controlbar: gf,
        captions: hf
    });

    function bf() {
        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
            t = arguments[1],
            n = N({}, function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                    t = arguments[1];
                switch (t.type) {
                    case qc:
                        return N({}, e, t.payload);
                    default:
                        return e
                }
            }(e, t), {
                embed: function() {
                    var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : Ad,
                        t = arguments[1],
                        n = t.type,
                        i = t.payload;
                    switch (n) {
                        case qc:
                            return N({}, e, i.embed);
                        default:
                            return e
                    }
                }(e.embed, t),
                video: Ld(e.video, t),
                liveEvent: yd(e.liveEvent, t)
            });
        return N({}, n, {
            ui: yf(e.ui, t, n)
        })
    }
    var wf = Object.freeze({
        default: bf,
        video: Md,
        liveEvent: wd,
        ui: _f
    });

    function Ef(e, t, n) {
        var i = !1,
            r = !1;

        function o(e) {
            n.style.fontSize = e + "px"
        }

        function a() {
            n.classList.add("hidden"), n.setAttribute("hidden", "")
        }

        function s() {
            "picture-in-picture" !== e.telecine.presentationMode && (e.config.embed.settings.background || (n.classList.remove("hidden"), n.removeAttribute("hidden")))
        }
        return e.events.on(gn.CUE_CHANGED, function(e) {
            var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : [];
            if (function() {
                    for (var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : []; n.firstChild;) n.removeChild(n.firstChild);
                    if (e.length) {
                        var i = document.createDocumentFragment();
                        e.forEach(function(e) {
                            var t = document.createElement("span"),
                                n = e.html;
                            t.innerHTML = n, i.appendChild(t)
                        }), n.appendChild(i)
                    }
                }(t), t.length) return i ? void s() : void(r = !0);
            a()
        }).on(ds.captionsChanged, function(e) {
            if (e) return n.setAttribute("lang", e.language), void n.setAttribute("dir", e.rtl ? "rtl" : "ltr");
            n.removeAttribute("dir"), n.removeAttribute("lang")
        }).on(gn.PLAY_INITIATED, function() {
            i = !0, r && (r = !1, s())
        }).on(gn.PICTURE_IN_PICTURE_ACTIVATED, function() {
            a()
        }).on(gn.PICTURE_IN_PICTURE_DEACTIVATED, function() {
            s()
        }).on(cs.reset, function() {
            i = !1, a()
        }), t.watch("ui.captions.size", o), o(t.get("ui.captions.size")), e.events.on(ds.controlBarVisibilityChanged, function(e) {
            e ? n.classList.add("with-controls") : n.classList.remove("with-controls")
        }), e.events.on(ds.overlayOpened, function() {
            n.classList.add("invisible")
        }).on(ds.overlayClosed, function() {
            n.classList.remove("invisible")
        }), e.events.on(ds.ended, function() {
            "nothing" !== e.config.embed.outro && n.classList.add("invisible")
        }).on([Pe.PLAY, ds.scrubbingStarted], function() {
            n.classList.remove("invisible")
        }), {}
    }
    var Sf = t(function(e) {
        ! function() {
            var n = {
                templates: {},
                render: function(e, t) {
                    return n.templates[e] ? n.templates[e].call(n, t || {}) : ""
                },
                map: {
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#39;",
                    "/": "&#x2F;"
                },
                escape: function(e) {
                    return e.replace(/[&<>"'\/]/g, function(e) {
                        return n.map[e]
                    })
                },
                helpers: {}
            };
            n.templates.stream_studder = function(e) {
                var t = "<h3> ";
                return t += this.render("icon_warning") || "", t += ' <span>Having issues? <button type="button" class="player-alert-button-link button-link" aria-label="Switch to auto" data-alert-autofocus data-close data-context="suggestion">Switch to Auto</button> for smoother streaming.</span></h3>'
            }, n.templates.warning_alert = function(e) {
                var t = "<h3> ";
                return t += this.render("icon_warning") || "", t += " <span>" + e.strings.text + "<span></h3>"
            }, n.templates.buffer_pattern = function(e) {
                return '<pattern id="' + e.id + '" patternUnits="userSpaceOnUse" x="0" y="0" width="10" height="10" viewBox="0 0 10 10"><line x1="5" y1="-1" x2="-5" y2="10" stroke-width="2" stroke="#666" stroke-linecap="butt" /><line x1="10" y1="-1" x2="0" y2="10" stroke-width="2" stroke="#666" stroke-linecap="butt" /><line x1="15" y1="-1" x2="5" y2="10" stroke-width="2" stroke="#666" stroke-linecap="butt" /></pattern>'
            }, n.templates.card = function(e) {
                var t = '<div class="card';
                return e.className && (t += " " + e.className), e.teaser && (t += " card-hasDetail"), t += '"> ', e.url && (t += '<a class="card-link" href="' + e.url + '" target="_blank" rel="noopener">'), t += ' <div class="card-inner"> ', e.image && (t += ' <div class="card-imageWrap js-cardImageWrap"><img class="card-image" src="' + e.image + '" alt=""></div> '), t += ' <div class="card-body"><h3 class="card-text card-text--title"><span>', t += this.escape(e.headline) || "", t += "</span> ", e.url && (t += this.render("icon_card_arrow") || ""), t += " </h3> ", e.teaser && (t += ' <p class="card-text card-text--detail"> ', t += this.escape(e.teaser) || "", t += " </p> "), t += " </div></div> ", e.url && (t += "</a>"), t += "</div>"
            }, n.templates.compass = function(e) {
                var t = '<svg viewBox="0 0 36 36"> ';
                return 1 == e.version ? t += ' <circle class="compass-background" r="18" cx="18" cy="18"></circle><path class="compass-slice" transform="rotate(-45, 18, 18)" d="M0,0 m18,18 l12,0 A12,12 0 0,0 18,6 z"/><circle fill="none" class="compass-ring" stoke-width="3" r="14.5" cx="18" cy="18"></circle><polygon class="compass-dimple" points="16,3.5 18,1 20,3.5"/> ' : t += ' <circle class="compass-background" r="18" cx="18" cy="18"></circle><path class="compass-slice" transform="rotate(-30, 18, 18)" d="M0,0 m18,18 l13,0 A13,13 0 0,0 11.500000000000004,6.741669750802297 z"/><circle class="compass-centercircle" r="3" cx="18" cy="18"></circle><path class="compass-line" stroke-linecap="round" d="M0,18 L36,18 z" /> ', t += "</svg>"
            }, n.templates.controlbar_trailer = function(e) {
                var t = '<button type="button" class="play trailer rounded-box" title="' + e.strings.playTrailer + '" aria-label="' + e.strings.playTrailer + '"><div><span class="play-icon">';
                return t += this.render("icon_play") || "", t += "</span><p>" + e.text + "</p></div></button>", e.vimeoLogo.show && (t += ' <div class="logo"> ', e.vimeoLogo.showLink && (t += ' <a href="' + e.vimeoLogo.url + '"', e.targetBlank && (t += ' target="_blank" rel="noopener"'), t += ' title="' + e.strings.watchOnVimeo + '" aria-label="' + e.strings.watchOnVimeo + '" data-clip-link> '), t += this.render("logo") || "", e.vimeoLogo.showLink && (t += " </a> "), t += " </div>"), t += "", e.customLogo && (t += ' <div class="custom-logo', e.customLogo.sticky && (t += " sticky"), t += '" style="width:' + e.customLogo.width + "px;height:" + e.customLogo.height + 'px"> ', e.customLogo.showLink && (t += '<a href="' + e.customLogo.url + '" target="_blank" rel="noopener">'), t += ' <img src="' + e.customLogo.img + '" alt=""> ', e.customLogo.showLink && (t += "</a>"), t += " </div>"), t += ""
            }, n.templates.controlbar = function(e) {
                var t = '<button type="button" class="play rounded-box state-' + e.playState + '" title="' + e.strings.play + '" data-title-play="' + e.strings.play + '" data-title-pause="' + e.strings.pause + '" data-title-replay="' + e.strings.replay + '" aria-label="' + e.strings.play + '"><div class="tiny-bars"><svg width="100%" height="100%" viewBox="0 0 65 40"><defs><clipPath id="rounded-border"><rect height="100%" width="100%" x="0" y="0" rx="5"/></clipPath> ';
                return t += this.render("buffer_pattern", {
                    id: "tiny-buffer"
                }) || "", t += ' </defs><g clip-path="url(#rounded-border)"><rect class="buffer hidden" height="3" width="110%" x="0" y="37" fill="url(#tiny-buffer)"/><rect class="loaded" height="3" width="0" x="0" y="37" fill="#666"/><rect class="played fill" height="3" width="0" x="0" y="37"/></g></svg></div><div class="play-icon">', t += this.render("icon_play") || "", t += '</div><div class="pause-icon">', t += this.render("icon_pause") || "", t += '</div><div class="replay-icon">', t += this.render("icon_replay") || "", t += '</div></button><div class="play-bar rounded-box"> ', t += this.render("live_status") || "", t += this.render("live_viewer_count") || "", t += ' <div class="vp-progress"><div class="loaded', e.rawDuration < 60 && (t += " short-video"), t += '" role="progressbar" aria-label="' + e.strings.loadedBar + '" aria-valuemin="0" aria-valuemax="' + e.rawDuration + '" aria-valuenow="0"></div><div class="played" role="progressbar" aria-label="' + e.strings.playedBar + '" aria-valuemin="0" aria-valuemax="' + e.rawDuration + '" aria-valuenow="0"></div><div class="cuepoints"></div><div class="thumb-preview invisible hidden" role="presentation" aria-hidden="true"><div class="thumb"></div></div><div class="ghost-timecode invisible hidden" role="presentation" aria-hidden="true"><div class="box">00:00</div></div><div class="timecode" role="presentation" aria-hidden="true"><div class="box">' + e.duration + "</div></div></div> ", e.volume && (t += ' <div class="volume" role="slider" title="' + e.strings.volume + '" aria-label="' + e.strings.volume + '" aria-valuemin="0" aria-valuemax="1" tabindex="0"><div></div><div></div><div></div><div></div><div></div></div> '), e.castButton && (t += ' <google-cast-launcher class="vp-cast-button" title="' + e.strings.chromecast + '"></google-cast-launcher> '), e.ccButton && (t += ' <button type="button" class="toggle cc ' + (e.ccOn ? "on" : "off") + '" title="' + e.strings.captions + '"> ', t += this.render("icon_cc") || "", t += " </button> "), e.prefsButton && (t += ' <button type="button" class="vp-prefs js-prefs" title="' + e.strings.prefs + '" aria-label="' + e.strings.prefs + '"> ', t += this.render("icon_gear") || "", t += " </button> "), e.airplayButton && (t += ' <button type="button" class="toggle airplay off hidden" title="' + e.strings.airPlay + '" data-title-off="' + e.strings.airPlay + '" data-title-on="' + e.strings.airPlayOff + '" hidden> ', t += this.render("icon_airplay") || "", t += " </button> "), e.stereoscopicButton && (t += ' <button type="button" class="toggle stereoscopic off" title="' + e.strings.stereoscopic + '" data-title-off="' + e.strings.stereoscopic + '" data-title-on="' + e.strings.stereoscopicOff + '"> ', t += this.render("icon_stereoscopic") || "", t += " </button> "), t += ' <button type="button" class="pip hidden enter" title="' + e.strings.pipEnter + '" data-title-enter="' + e.strings.pipEnter + '" data-title-return="' + e.strings.pipReturn + '" hidden> ', t += this.render("icon_pip") || "", t += ' </button><button type="button" class="fullscreen', e.fullscreenButton || (t += " only-in-fullscreen"), t += '" title="' + e.strings.enterFullscreen + '" data-title-fullscreen="' + e.strings.enterFullscreen + '" data-title-unfullscreen="' + e.strings.exitFullscreen + '" aria-label="' + e.strings.fullscreen + '"><div class="fullscreen-icon">', t += this.render("icon_fullscreen") || "", t += '</div><div class="unfullscreen-icon">', t += this.render("icon_unfullscreen") || "", t += "</div></button> ", e.vimeoLogo.show && (t += ' <div class="logo"> ', e.vimeoLogo.showLink && (t += ' <a href="' + e.vimeoLogo.url + '"', e.targetBlank && (t += ' target="_blank" rel="noopener"'), t += ' title="' + e.strings.watchOnVimeo + '" aria-label="' + e.strings.watchOnVimeo + '" data-clip-link> '), t += this.render("logo") || "", e.vimeoLogo.showLink && (t += " </a> "), t += " </div> "), t += "</div> ", e.customLogo && (t += ' <div class="custom-logo', e.customLogo.sticky && (t += " sticky"), t += '" style="max-width:' + e.customLogo.width + "px;height:" + e.customLogo.height + 'px"> ', e.customLogo.showLink && (t += '<a href="' + e.customLogo.url + '" target="_blank" rel="noopener">'), t += ' <img src="' + e.customLogo.img + '" alt=""> ', e.customLogo.showLink && (t += "</a>"), t += " </div>"), t += ' <div class="vp-menubar js-menubar"></div>'
            }, n.templates.debug_panel = function(e) {
                var t = "<div class='vp-stats-debug-values'> ";
                return t += this.render("debug_values", e) || "", t += "</div>", e.hideCloseButton || (t += '<button type="button" class="vp-stats-debug-close" aria-label="Close stats debug panel">', t += this.render("icon_close") || "", t += "</button>"), t += '<input type="text" class="vp-stats-debug-code">', e.isCopyDisabled || (t += '<button type="button" class="vp-copy-session vp-copy-session-hidden js-copySessionButton"><span class="vp-copy-label">Copy Debug Key</span></button>'), t += ""
            }, n.templates.debug_values = function(e) {
                var t = '<p><span class="vp-stats-debug-label">Clip ID:</span><span class="vp-stats-debug-value stats-debug-clip-id">' + e.clipId + "</span></p>";
                return e.isDash && e.profileId && (t += '<p><span class="vp-stats-debug-label">Profile ID:</span><span class="vp-stats-debug-value stats-debug-profile-id">' + e.profileId + "</span></p>"), t += '<p><span class="vp-stats-debug-label">Delivery:</span><span class="vp-stats-debug-value stats-debug-delivery">' + e.delivery + "</span></p>", e.resolution && (t += '<p><span class="vp-stats-debug-label">Playing:</span><span class="vp-stats-debug-value stats-debug-resolution">' + e.resolution + "</span></p>"), t += '<p><span class="vp-stats-debug-label">Embed size:</span><span class="vp-stats-debug-value stats-debug-dimensions">' + e.embedSize + "</span></p>", e.isDash && (t += '<p><span class="vp-stats-debug-label">Separate AV:</span><span class="vp-stats-debug-value stats-debug-test-group">' + e.separateAudioVideo + "</span></p>"), t += "", e.testGroup && (t += '<p><span class="vp-stats-debug-label">Tests:</span><span class="vp-stats-debug-value stats-debug-test-group">' + e.testGroup + "</span></p>"), t += "", (e.isDash || e.isLive) && (t += '<p><span class="vp-stats-debug-label">Dropped frames:</span><span class="vp-stats-debug-value stats-debug-dropped-frames">' + e.droppedFrames + " / " + e.totalFrames + " - " + e.droppedFramesPercent + "</span></p>"), t += "", (e.isDash || e.isLive) && (t += '<p><span class="vp-stats-debug-label">Bandwidth:</span><span class="vp-stats-debug-value stats-debug-bandwidth">' + e.bandwidthKbps + '</span><span class="vp-stats-debug-bandwidth-minmax"> (<span class="vp-stats-debug-value vp-stats-debug-bandwidth-min">' + e.bandwidthMinKbps + '</span><span class="vp-stats-debug-value vp-stats-debug-bandwidth-max">' + e.bandwidthMaxKbps + '</span>) </span></p><div class="vp-stats-debug-time-series"> ' + e.bandwidthSeriesSvg + "</div>"), t += "", e.displayBufferOccupancy && (t += '<p><span class="vp-stats-debug-label">Buffer Occupancy:</span><span class="vp-stats-debug-value vp-stats-debug-buffer-percent">' + e.bufferOccupancyPercent + '</span></p><div class="vp-stats-debug-buffer-occupancy"> ' + e.bufferOccupancySvg + "</div>"), t += "", e.sessionId && (t += '<p><span class="vp-stats-debug-label">Debug Key:</span><br><span class="vp-stats-debug-value vp-stats-debug-session-id">' + e.sessionId + "</span></p>"), t
            }, n.templates.icon_airplay = function(e) {
                return '<svg class="airplay-icon" viewBox="0 0 44 36" tabindex="-1"><polygon class="fill" points="0,0 44,0 44,27 34.5,27 31,23 40,23 40,4 4,4 4,23 13,23 9.5,27 0,27"/><polygon class="fill" points="7,36 22,18 37,36"/></svg>'
            }, n.templates.icon_back = function(e) {
                return '<svg class="icon-back" viewBox="0 0 64 64" preserveAspectRatio="xMidYMid" tabindex="-1"><path class="fill" d="M0 32l32 32v-20h32l0-24h-32v-20z"/></svg>'
            }, n.templates.icon_broken_heart = function(e) {
                return '<svg class="unlike-icon" viewBox="0 0 110 81" preserveAspectRatio="xMidYMid" tabindex="-1"><path class="fill" d="M82.496 1c-14.594 0-23.198 10.043-25.948 14.48l-6.77 10.727 13.661 8.543-13.661 12.535 5.695 15.348-9.686-15.348 11.389-11.975-11.969-7.402s4.22-14.27 4.621-15.521c.782-2.438.782-2.438-.813-3.289-5.516-2.944-12.608-8.098-21.509-8.098-16.299 0-27.506 15.037-27.506 27.885 0 12.795 12.562 22.558 22.245 27.592 9.186 4.771 30.601 18.349 32.755 24.523 2.154-6.174 23.57-19.752 32.753-24.523 9.684-5.034 22.247-14.797 22.247-27.592 0-12.848-11.208-27.885-27.504-27.885z"/></svg>'
            }, n.templates.icon_card_arrow = function(e) {
                return '<svg class="card-arrow" viewBox="0 0 10 10" preserveAspectRatio="xMidYMid" tabindex="-1"><polygon class="fill" points="10 8.337 10 0 1.663 0 1.663 1.603 7.263 1.603 0 8.866 1.134 10 8.397 2.737 8.397 8.337"/></svg>'
            }, n.templates.icon_cc = function(e) {
                return '<svg viewBox="0 0 20 14" tabindex="-1"><path class="fill" fill-rule="evenodd" clip-rule="evenodd" d="M17 0h-14c-1.657 0-3 1.343-3 3v8c0 1.656 1.343 3 3 3h14c1.657 0 3-1.344 3-3v-8c0-1.657-1.343-3-3-3zm-7.271 8.282c-.145.923-.516 1.686-1.105 2.268-.597.591-1.369.89-2.294.89-1.138 0-2.049-.402-2.706-1.195-.647-.786-.975-1.866-.975-3.215 0-1.458.372-2.603 1.105-3.403.65-.708 1.487-1.067 2.487-1.067 1.33 0 2.321.482 2.947 1.435.34.53.526 1.072.553 1.611l.013.236h-1.984l-.044-.169c-.092-.355-.207-.622-.343-.793-.239-.298-.591-.443-1.076-.443-.483 0-.856.209-1.14.641-.298.455-.449 1.12-.449 1.977 0 .851.156 1.49.466 1.898.298.395.666.588 1.122.588.469 0 .814-.16 1.058-.491.138-.183.255-.472.351-.856l.042-.17h2.013l-.041.258zm7.582 0c-.145.923-.516 1.686-1.104 2.268-.598.591-1.369.89-2.294.89-1.139 0-2.049-.402-2.707-1.195-.646-.785-.975-1.865-.975-3.214 0-1.458.372-2.603 1.106-3.403.649-.708 1.485-1.067 2.486-1.067 1.33 0 2.32.482 2.946 1.435.34.53.526 1.072.554 1.611l.012.236h-1.9829999999999999l-.043-.169c-.092-.355-.208-.623-.344-.793-.238-.298-.591-.443-1.076-.443-.483 0-.856.209-1.139.641-.299.455-.45 1.12-.45 1.977 0 .851.157 1.49.467 1.898.299.395.666.588 1.121.588.469 0 .814-.16 1.058-.491.138-.183.256-.472.352-.856l.042-.17h2.012l-.041.257z"/></svg>'
            }, n.templates.icon_check = function(e) {
                return '<svg class="check-icon" viewBox="0 0 12 12"><path class="fill" d="M10.9 2.9l-.7-.7c-.2-.2-.6-.2-.8-.1L5 6.6 2.6 4.1c-.2-.1-.6-.1-.7 0l-.8.8c-.1.1-.1.5 0 .7l3.1 3.1c.4.4 1 .4 1.4 0l5.1-5.1c.3-.2.3-.6.2-.7z"/></svg>'
            }, n.templates.icon_clock = function(e) {
                return '<svg class="watch-later-icon" viewBox="0 0 20 20" preserveAspectRatio="xMidYMid" tabindex="-1"><polyline class="fill hour-hand" points="9.64,4.68 10.56,4.68 11.28,11.21 8.93,11.21 9.64,4.68" /><polyline class="fill minute-hand" points="14.19,13.65 13.7,14.14 8.58,10.4 10.44,8.5 14.19,13.65" /><circle class="stroke" cx="10" cy="10" r="8" stroke-width="2" /></svg>'
            }, n.templates.icon_close_new = function(e) {
                return '<svg class="icon-close-new" viewBox="0 0 16 16" preserveAspectRatio="xMidYMid" tabindex="-1"><path class="fill" d="M8.001 9.416l6.437 6.437a.497.497 0 0 0 .713-.001l.7-.7a.503.503 0 0 0 .002-.714L9.416 8.001l6.437-6.436a.497.497 0 0 0-.001-.713l-.7-.7a.503.503 0 0 0-.714-.002L8.001 6.587 1.565.15a.497.497 0 0 0-.713.001l-.7.7a.503.503 0 0 0-.002.714L6.587 8 .15 14.438a.497.497 0 0 0 .001.713l.7.7a.503.503 0 0 0 .714.002L8 9.416z"/></svg>'
            }, n.templates.icon_close = function(e) {
                return '<svg class="icon-close" viewBox="0 0 64 64" preserveAspectRatio="xMidYMid" tabindex="-1"><path class="fill" d="M60 48.796l-16.812-16.796 16.812-16.796-11.204-11.204-16.796 16.804-16.804-16.804-11.196 11.204 16.796 16.796-16.796 16.796 11.196 11.204 16.804-16.804 16.796 16.804z"/></svg>'
            }, n.templates.icon_collections = function(e) {
                return '<svg class="collections-icon" viewBox="0 0 24 24" tabindex="-1"><path class="fill" d="M24 12c0-.3-.1-.6-.4-.8l-2.7-2.3 2.4-1c.4-.1.7-.5.7-.9 0-.3-.1-.6-.4-.8l-7-6c-.1-.1-.4-.2-.6-.2-.1 0-.3 0-.4.1l-15 6c-.3.1-.6.5-.6.9 0 .3.1.6.4.8l2.7 2.3-2.4 1c-.4.1-.7.5-.7.9 0 .3.1.6.4.8l2.7 2.3-2.4 1c-.4.1-.7.5-.7.9 0 .3.1.6.4.8l7 6c.1.1.4.2.6.2.1 0 .3 0 .4-.1l15-6c.4-.1.6-.5.6-.9 0-.3-.1-.6-.4-.8l-2.7-2.3 2.4-1c.4-.1.7-.5.7-.9zm-8.2-9.8l5.3 4.5-12.9 5.1-5.3-4.5 12.9-5.1zm5.3 14.5L8.2 21.8l-5.3-4.5 1.9-.8 2.6 2.2c.1.2.4.3.6.3.1 0 .3 0 .4-.1l10.5-4.2 2.2 2zm-12.9.1l-5.3-4.5 1.9-.8 2.6 2.2c.1.2.4.3.6.3.1 0 .3 0 .4-.1l10.5-4.2 2.3 1.9-13 5.2z"/></svg>'
            }, n.templates.icon_embed = function(e) {
                return '<svg class="embed-icon" viewBox="0 0 55 48" preserveAspectRatio="xMidYMid" tabindex="-1"><polygon class="fill" points="16.019,16.385 11.968,13.131 0,24.543 12.082,35.955 16.132,32.703 7.439,24.543"/><polygon class="fill" points="42.92,13.131 38.868,16.384 47.561,24.542 38.981,32.701 43.033,35.955 55,24.542"/><polygon class="fill" points="24.083,39.221 28.76,39.221 36.243,8.351 31.566,8.351"/></svg>'
            }, n.templates.icon_facebook = function(e) {
                return '<svg class="facebook-icon" viewBox="0 0 64 64" preserveAspectRatio="xMidYMid" tabindex="-1"><path class="fill" d="M35.992 64h-11.992v-32h-8v-11.028l8-0.004-0.013-6.497c0-8.997 2.44-14.471 13.037-14.471h8.824v11.030h-5.514c-4.127 0-4.325 1.541-4.325 4.418l-0.016 5.52h9.918l-1.169 11.028-8.741 0.004-0.008 32z"/></svg>'
            }, n.templates.icon_follow = function(e) {
                return '<svg class="icon icon-follow" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid" tabindex="-1"><defs><clipPath id="icon-mask--check"><rect x="0" y="0" width="24" height="24" /></clipPath></defs><path class="icon-path icon-path--plus fill" d="M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z"/><path class="icon-path icon-path--check fill" d="M9 21.035l-9-8.638 2.791-2.87 6.156 5.874 12.21-12.436 2.843 2.817z" clip-path="url(#icon-mask--check)"/><path class="icon-path icon-path--close fill" d="M23.954 21.03l-9.184-9.095 9.092-9.174-2.832-2.807-9.09 9.179-9.176-9.088-2.81 2.81 9.186 9.105-9.095 9.184 2.81 2.81 9.112-9.192 9.18 9.1z"/></svg>'
            }, n.templates.icon_fullscreen = function(e) {
                return '<svg viewBox="0 0 12 12" preserveAspectRatio="xMidYMid" tabindex="-1"><polyline class="fill" points="6,6 5.9,2 4.9,3 2.9,1 1,2.9 3,4.9 2,5.9" transform="translate(6,6)" /><polyline class="fill" points="6,6 5.9,2 4.9,3 2.9,1 1,2.9 3,4.9 2,5.9" transform="translate(6,6) rotate(90)" /><polyline class="fill" points="6,6 5.9,2 4.9,3 2.9,1 1,2.9 3,4.9 2,5.9" transform="translate(6,6) rotate(180)" /><polyline class="fill" points="6,6 5.9,2 4.9,3 2.9,1 1,2.9 3,4.9 2,5.9" transform="translate(6,6) rotate(270)" /></svg>'
            }, n.templates.icon_gear = function(e) {
                return '<svg class="icon-gear" viewBox="0 0 19 16" preserveAspectRatio="xMidYMid" tabindex="-1"><defs><clipPath id="icon-gear-mask-hd"><polygon points="19 9.422 19 0 0 0 0 16 4.996 16 6 9.422 19 9.422"/></clipPath><clipPath id="icon-gear-mask-4k"><polygon points="19 0 0 0 0 16 .656 16 7.641 9.422 19 9.422"/></clipPath></defs><g class="icon-gear-group"><path class="icon-gear-cog fill" d="M8.75,0 L7.25,0 C6.69771525,0 6.25,0.44771525 6.25,1 L6.25,1.71 C6.24203899,2.03670262 6.03616565,2.32571712 5.73,2.44 C5.22486505,2.64787629 4.75048268,2.92375823 4.32,3.26 C4.06726048,3.46530794 3.71530155,3.4969447 3.43,3.34 L2.81,3 C2.57947626,2.86645499 2.30519371,2.83041629 2.04799634,2.89987835 C1.79079898,2.96934041 1.57195122,3.13856029 1.44,3.37 L1.44,3.37 L0.69,4.67 C0.438460777,5.14101477 0.601355467,5.72655514 1.06,6 L1.06,6 L1.68,6.36 C1.95609578,6.53006064 2.1022252,6.84996558 2.05,7.17 C1.97585362,7.71080372 1.97585362,8.25919628 2.05,8.8 C2.1022252,9.12003442 1.95609578,9.43993936 1.68,9.61 L1.06,10 C0.828560291,10.1319512 0.65934041,10.350799 0.589878348,10.6079963 C0.520416285,10.8651937 0.556454987,11.1394763 0.69,11.37 L0.69,11.37 L1.44,12.67 C1.72842942,13.137733 2.34023095,13.2851012 2.81,13 L2.81,13 L3.43,12.64 C3.71530155,12.4830553 4.06726048,12.5146921 4.32,12.72 C4.75048268,13.0562418 5.22486505,13.3321237 5.73,13.54 C6.03616565,13.6542829 6.24203899,13.9432974 6.25,14.27 L6.25,15 C6.25,15.5522847 6.69771525,16 7.25,16 L8.75,16 C9.30228475,16 9.75,15.5522847 9.75,15 L9.75,14.29 C9.75796101,13.9632974 9.96383435,13.6742829 10.27,13.56 C10.7751349,13.3521237 11.2495173,13.0762418 11.68,12.74 C11.9327395,12.5346921 12.2846984,12.5030553 12.57,12.66 L13.19,13.02 C13.4205237,13.153545 13.6948063,13.1895837 13.9520037,13.1201217 C14.209201,13.0506596 14.4280488,12.8814397 14.56,12.65 L14.56,12.65 L15.31,11.35 C15.5746773,10.8743026 15.4102265,10.2742794 14.94,10 L14.94,10 L14.32,9.64 C14.0439042,9.46993936 13.8977748,9.15003442 13.95,8.83 C14.0241464,8.28919628 14.0241464,7.74080372 13.95,7.2 C13.8977748,6.87996558 14.0439042,6.56006064 14.32,6.39 L14.94,6.03 C15.1714397,5.89804878 15.3406596,5.67920102 15.4101217,5.42200366 C15.4795837,5.16480629 15.443545,4.89052374 15.31,4.66 L15.31,4.66 L14.56,3.36 C14.426372,3.13025585 14.2067828,2.96315821 13.9497298,2.89561144 C13.6926768,2.82806466 13.4193087,2.86562606 13.19,3 L13.19,3 L12.57,3.36 C12.2846984,3.5169447 11.9327395,3.48530794 11.68,3.28 C11.2495173,2.94375823 10.7751349,2.66787629 10.27,2.46 C9.96383435,2.34571712 9.75796101,2.05670262 9.75,1.73 L9.75,1 C9.75,0.73478351 9.64464316,0.480429597 9.45710678,0.292893219 C9.2695704,0.10535684 9.01521649,-8.8817842e-16 8.75,0 Z M10.5,8 C10.5,9.38071187 9.38071187,10.5 8,10.5 C6.61928813,10.5 5.5,9.38071187 5.5,8 C5.5,6.61928813 6.61928813,5.5 8,5.5 C9.38071187,5.5 10.5,6.61928813 10.5,8 Z" /></g><g class="icon-gear-text icon-gear-text-hd"><polygon class="fill" points="10.17 12.38 10.46 10.43 12.22 10.43 11.36 16 9.6 16 9.95 13.76 8.09 13.76 7.77 16 6.01 16 6.85 10.43 8.61 10.43 8.32 12.38"/><path class="fill" d="M17.82,11.23 C17.65,10.98 17.32,10.43 15.93,10.43 L13.37,10.43 L12.51,16 L15.09,16 C16.1538092,16.0719871 17.159097,15.5065128 17.65,14.56 C18.1567595,13.5192032 18.2181336,12.3169925 17.82,11.23 Z M15.9,14.42 C15.6125419,14.6349311 15.2582986,14.7412041 14.9,14.72 L14.48,14.72 L14.9,11.72 L15.35,11.72 C15.6806309,11.6794538 16.0108877,11.7981978 16.24,12.04 C16.4818058,12.8447587 16.357466,13.7151373 15.9,14.42 Z"/></g><g class="icon-gear-text icon-gear-text-4k"><polygon class="fill" points="11.82 10.29 13.58 10.29 13.19 12.17 13.19 12.17 15.19 10.27 17.48 10.27 14.75 12.62 16.36 16 14.36 16 13.36 13.78 12.76 14.32 12.39 16 10.63 16"/><path class="fill" d="M7.86,14.9 L5.31,14.9 L5.61,13.41 L8.78,10.41 L10.36,10.41 L9.72,13.51 L10.44,13.51 L10.18,14.87 L9.45,14.87 L9.22,16 L7.63,16 L7.86,14.9 Z M8.19,13.54 L8.54,12 L8.54,12 L6.94,13.58 L8.19,13.54 Z"/></g></svg>'
            }, n.templates.icon_heart = function(e) {
                return '<svg class="like-icon" viewBox="0 0 110 81" preserveAspectRatio="xMidYMid" tabindex="-1"><path class="fill" d="M82.496 1c-14.698 0-25.969 11.785-27.496 13.457-1.526-1.672-12.798-13.457-27.494-13.457-16.299 0-27.506 15.037-27.506 27.885 0 12.795 12.562 22.558 22.245 27.592 9.186 4.771 30.601 18.349 32.755 24.523 2.154-6.174 23.57-19.752 32.755-24.523 9.684-5.034 22.245-14.797 22.245-27.592 0-12.848-11.206-27.885-27.504-27.885z"/></svg>'
            }, n.templates.icon_line_arrow = function(e) {
                return '<svg class="icon-lineArrow" viewBox="0 0 24 15"><polygon class="fill" points="21 0 24 3.057 12 15 0 3.057 3 0 12 9"/></svg>'
            }, n.templates.icon_live_viewers = function(e) {
                return '<svg width="12px" height="14px" viewBox="0 0 12 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Live-tag/viewers" transform="translate(-5.000000, -4.000000)" fill="#FFFFFF"><g id="Icon/viewers-person"><circle id="Oval-8" cx="11" cy="7" r="3"></circle><path d="M9,12 L13,12 C15.209139,12 17,13.790861 17,16 L17,18 L5,18 L5,16 C5,13.790861 6.790861,12 9,12 Z" id="Rectangle-25"></path></g></g></g></svg>'
            }, n.templates.icon_lock = function(e) {
                return '<svg viewBox="0 0 46 76" preserveAspectRatio="xMidYMid" tabindex="-1"><path class="fill bolt" d="M5,42v-15C8,5 39,5 42,27v30h-7v-30C32,14 15,14 12,27v15z"/><rect class="fill" x="0" y="41" height="35" width="46" rx="4" ry="4"/></svg>'
            }, n.templates.icon_mail = function(e) {
                return '<svg class="mail-icon" viewBox="0 0 72 72" preserveAspectRatio="xMidYMid" tabindex="-1"><path class="fill" d="M71.754,57.6C71.9,57.169,72,56.718,72,56.241V16.759c0-0.453-0.092-0.881-0.225-1.291l-23.487,19.86L71.754,57.6z"/><path class="fill" d="M35.999,40.118l6.187-4.971l3.131-2.516L68.9,12.693c-0.387-0.113-0.789-0.193-1.213-0.193H4.312c-0.424,0-0.827,0.08-1.215,0.194l23.599,19.949l3.132,2.517L35.999,40.118z"/><path class="fill" d="M67.688,60.5c0.405,0,0.791-0.074,1.164-0.18L45.157,37.843l-9.159,7.361l-9.145-7.351L3.15,60.322C3.522,60.426,3.907,60.5,4.312,60.5H67.688z"/><path class="fill" d="M0.226,15.468C0.092,15.878,0,16.307,0,16.759v39.482c0,0.478,0.099,0.929,0.247,1.356l23.476-22.261L0.226,15.468z"/></svg>'
            }, n.templates.icon_pause = function(e) {
                return '<svg viewBox="0 0 20 20" preserveAspectRatio="xMidYMid" tabindex="-1"><rect class="fill" width="6" height="20" x="0" y="0" /><rect class="fill" width="6" height="20" x="12" y="0" /></svg>'
            }, n.templates.icon_pip = function(e) {
                return '<svg class="pip-icon" viewBox="0 0 16 12"><polygon class="fill" points="6 8 1 8 1 1 14 1 14 6 15 6 15 0 0 0 0 9 6 9 6 8"/><rect class="fill" x="7" y="7" width="9" height="5"/><polyline class="fill enter" transform="translate(4, 4) rotate(180) translate(-4, -4)" points="5.33 2 5.33 3 3.67 3 5.67 5 5 5.67 3 3.67 3 5.33 2 5.33 2 2"/><polyline class="fill return" points="5.33 2 5.33 3 3.67 3 5.67 5 5 5.67 3 3.67 3 5.33 2 5.33 2 2"/></svg>'
            }, n.templates.icon_play = function(e) {
                return '<svg viewBox="0 0 20 20" preserveAspectRatio="xMidYMid" tabindex="-1"><polygon class="fill" points="1,0 20,10 1,20" /></svg>'
            }, n.templates.icon_prev = function(e) {
                return '<svg class="icon-prev" viewBox="0 0 27 48" preserveAspectRatio="xMidYMid" tabindex="-1"><path class="fill" d="M7.243,24L26.414,4.828c0.781-0.781,0.781-2.047,0-2.828L25,0.586 c-0.781-0.781-2.047-0.781-2.828,0L0.879,21.879c-1.172,1.172-1.172,3.071,0,4.243l21.293,21.293c0.781,0.781,2.047,0.781,2.828,0 L26.414,46c0.781-0.781,0.781-2.047,0-2.828L7.243,24z"/></svg>'
            }, n.templates.icon_replay = function(e) {
                return '<svg viewBox="-387 605 16 16" preserveAspectRatio="xMidYMid"><path class="fill" d="M-387 606v4c0 .6.4 1 1 1h4c.6 0 1-.4 1-1s-.4-1-1-1h-1.5c1.1-1.2 2.7-2 4.5-2 3.3 0 6 2.7 6 6s-2.7 6-6 6c-2.3 0-4.4-1.3-5.4-3.4-.2-.5-.8-.7-1.3-.5-.5.2-.7.8-.5 1.3 1.3 2.8 4.2 4.6 7.2 4.6 4.4 0 8-3.6 8-8s-3.6-8-8-8c-2.3 0-4.5 1-6 2.7V606c0-.6-.4-1-1-1s-1 .4-1 1z"></path></svg>'
            }, n.templates.icon_share = function(e) {
                return '<svg class="share-icon" viewBox="0 0 20 20" preserveAspectRatio="xMidYMid" tabindex="-1"><polygon class="fill" points="20,0 0,12 5,15 17,4 7,16 7,19 9,17 14,20"/></svg>'
            }, n.templates.icon_spin = function(e) {
                return '<svg class="vp-spin-trace" viewBox="0 0 50 50"><circle cx="50%" cy="50%" r="20"></circle></svg><svg class="vp-spin-circle" viewBox="0 0 50 50"><circle cx="50%" cy="50%" r="20"></circle></svg>'
            }, n.templates.icon_stereoscopic = function(e) {
                return '<svg viewBox="0 0 20 13" tabindex="-1"><path class="fill" d="M 18.74,0 1.2,0 C 0.55,0 0,0.57 0,1.27 L 0,11.73 C 0,12.43 0.55,13 1.23,13 L 6,13 c 0.54,0 1,-0.32 1.16,-0.79 L 8.55,8.74 C 8.79,8.16 9.35,7.75 10,7.75 c 0.65,0 1.21,0.41 1.45,0.99 l 1.39,3.47 c 0.19,0.47 0.62,0.79 1.11,0.79 l 4.79,0 C 19.45,13 20,12.43 20,11.73 L 20,1.27 C 20,0.57 19.45,0 18.74,0 M 5.22,8.58 C 4,8.58 3,7.55 3,6.29 3,5 4,4 5.22,4 6.44,4 7.43,5 7.43,6.29 7.43,7.55 6.44,8.58 5.22,8.58 m 9.56,0 C 13.56,8.58 12.57,7.55 12.57,6.29 12.57,5.03 13.56,4 14.78,4 16,4 17,5.03 17,6.29 17,7.55 16,8.58 14.78,8.58 Z" /></svg>'
            }, n.templates.icon_tumblr = function(e) {
                return '<svg class="tumblr-icon" viewBox="0 0 12 20" tabindex="-1"><path class="fill" d="M7.865,19.958 C3.629,19.958 2.02,16.834 2.02,14.627 L2.02,8.105 L0,8.105 L0,5.527 C3.027,4.436 3.756,1.705 3.927,0.149 C3.938,0.042 4.022,0 4.07,0 L6.994,0 L6.994,5.084 L10.987,5.084 L10.987,8.105 L6.979,8.105 L6.979,14.318 C6.993,15.149 7.291,16.287 8.815,16.287 C8.843,16.287 8.872,16.287 8.9,16.286 C9.43,16.272 10.14,16.118 10.511,15.941 L11.471,18.788 C11.11,19.317 9.481,19.932 8.015,19.957 C7.964,19.958 7.915,19.958 7.865,19.958"/></svg>'
            }, n.templates.icon_twitter = function(e) {
                return '<svg class="twitter-icon" viewBox="0 0 274 223" preserveAspectRatio="xMidYMid" tabindex="-1"><path class="fill" d="M85.98,222 C54.305,222 24.822,212.715 0,196.801 C4.388,197.319 8.853,197.584 13.38,197.584 C39.658,197.584 63.843,188.617 83.039,173.574 C58.495,173.121 37.781,156.905 30.644,134.621 C34.068,135.276 37.582,135.627 41.196,135.627 C46.312,135.627 51.267,134.942 55.974,133.66 C30.314,128.508 10.981,105.838 10.981,78.662 C10.981,78.426 10.981,78.191 10.985,77.957 C18.548,82.158 27.196,84.681 36.391,84.972 C21.341,74.914 11.438,57.746 11.438,38.287 C11.438,28.008 14.204,18.373 19.032,10.089 C46.696,44.023 88.025,66.353 134.641,68.692 C133.685,64.587 133.188,60.306 133.188,55.91 C133.188,24.935 158.302,-0.178 189.279,-0.178 C205.411,-0.178 219.988,6.634 230.22,17.535 C242.996,15.019 255,10.351 265.837,3.924 C261.649,17.021 252.756,28.013 241.175,34.955 C252.521,33.599 263.331,30.584 273.39,26.123 C265.87,37.371 256.36,47.25 245.402,55.158 C245.51,57.563 245.564,59.982 245.564,62.414 C245.564,136.533 189.148,222 85.98,222"/></svg>'
            }, n.templates.icon_unfullscreen = function(e) {
                return '<svg viewBox="0 0 12 12" preserveAspectRatio="xMidYMid" tabindex="-1"><polyline class="fill" points="-1,-1 -1.1,-5 -2.1,-4 -4.1,-6 -6,-4.1 -4,-2.1 -5,-1.1" transform="translate(6,6) "/><polyline class="fill" points="-1,-1 -1.1,-5 -2.1,-4 -4.1,-6 -6,-4.1 -4,-2.1 -5,-1.1" transform="translate(6,6) rotate(90)" /><polyline class="fill" points="-1,-1 -1.1,-5 -2.1,-4 -4.1,-6 -6,-4.1 -4,-2.1 -5,-1.1" transform="translate(6,6) rotate(180)" /><polyline class="fill" points="-1,-1 -1.1,-5 -2.1,-4 -4.1,-6 -6,-4.1 -4,-2.1 -5,-1.1" transform="translate(6,6) rotate(270)" /></svg>'
            }, n.templates.icon_vod_download = function(e) {
                return '<svg class="vod-download-icon" viewBox="0 0 32 32" tabindex="-1"><path class="fill" d="M21.707 24.707l-5 5c-.39.39-1.024.39-1.414 0l-5-5c-.39-.39-.39-1.024 0-1.414l1.06-1.06c.392-.392 1.025-.392 1.415 0L14 23.462V15c0-.552.448-1 1-1h2c.552 0 1 .448 1 1v8.464l1.232-1.232c.39-.39 1.024-.39 1.414 0l1.06 1.06c.392.39.392 1.025 0 1.415z"/><path class="fill" d="M27.894 12.31c.063-.43.106-.864.106-1.31 0-4.97-4.03-9-9-9-3.6 0-6.7 2.12-8.138 5.175C10.175 6.75 9.368 6.5 8.5 6.5 6.015 6.5 4 8.515 4 11c0 .445.067.874.187 1.28C1.76 13.05 0 15.318 0 18c0 3.314 2.686 6 6 6h1c0-2.42 1.718-4.436 4-4.9V15c0-2.21 1.79-4 4-4h2c2.21 0 4 1.79 4 4v4.1c2.282.464 4 2.48 4 4.9h1c3.314 0 6-2.686 6-6 0-2.65-1.72-4.896-4.106-5.69z"/></svg>'
            }, n.templates.icon_vod_rent = function(e) {
                return '<svg class="vod-rent-icon" viewBox="0 0 32 32" tabindex="-1"><path class="fill" d="M23 11H9c-.552 0-1 .448-1 1v8c0 .552.448 1 1 1h14c.552 0 1-.448 1-1v-8c0-.552-.448-1-1-1z"/><path class="fill" d="M32 22V10c-2.76 0-5-2.24-5-5H5c0 2.76-2.24 5-5 5v12c2.76 0 5 2.24 5 5h22c0-2.76 2.24-5 5-5zm-6-1c0 1.105-.895 2-2 2H8c-1.105 0-2-.895-2-2V11c0-1.105.895-2 2-2h16c1.105 0 2 .895 2 2v10z"/></svg>'
            }, n.templates.icon_vod_subscribe = function(e) {
                return '<svg class="vod-subscribe-icon" viewBox="0 0 32 32" tabindex="-1"><path class="fill" d="M20 9v2c0 .552.448 1 1 1h10c.552 0 1-.448 1-1V1c0-.552-.448-1-1-1h-2c-.552 0-1 .448-1 1v4.445C24.98 2.01 20.523-.128 15.558.005 7.293.23.413 6.96.018 15.216-.42 24.41 6.905 32 16 32c8.47 0 15.404-6.583 15.964-14.912.04-.585-.413-1.088-1-1.088H28.96c-.514 0-.956.388-.994.9C27.506 23.107 22.326 28 16 28 9.217 28 3.748 22.37 4.01 15.53 4.246 9.284 9.47 4.147 15.72 4.003 19.38 3.92 22.674 5.483 24.926 8H21c-.552 0-1 .448-1 1z"/><path class="fill" d="M13 20v-8l8 4"/></svg>'
            }, n.templates.icon_vod = function(e) {
                return '<svg class="vod-icon" viewBox="0 0 21 23" tabindex="-1"><path class="fill" d="M19.602,4.716l-7.665-4.385C11.169-0.108,9.91-0.111,9.139,0.327L1.4,4.721C0.63,5.158,0,6.234,0,7.112v8.776c0,0.878,0.63,1.955,1.398,2.393l0.526,0.3l7.176,4.09c0.77,0.438,2.028,0.438,2.798,0l7.702-4.39c0.77-0.438,1.4-1.516,1.4-2.393V7.112C21,6.234,20.37,5.156,19.602,4.716z M7.336,15.761L7.337,7.24l8.008,4.26L7.336,15.761z"/></svg>'
            }, n.templates.icon_warning = function(e) {
                return '<svg class="warning-icon" tabindex="-1" width="36" height="32.326" viewBox="287.915 380.297 36 32.326"><path d="M309.646 382.963c-2.052-3.555-5.41-3.555-7.462 0L288.79 406.16c-2.05 3.555-.372 6.463 3.732 6.463h26.786c4.104 0 5.783-2.908 3.73-6.463l-13.392-23.197zm-2 23.224c0 .983-.804 1.788-1.788 1.788-.983 0-1.788-.805-1.788-1.788 0-.984.805-1.79 1.788-1.79s1.79.805 1.788 1.79zm-.317-7.76c-.254 2.604-.916 4.735-1.472 4.735-.557 0-1.22-2.13-1.477-4.735-.255-2.604-.464-5.72-.464-6.925 0-1.204.87-2.19 1.935-2.19 1.066 0 1.936.986 1.936 2.19s-.205 4.32-.457 6.925z"/></svg>'
            }, n.templates.live_status = function(e) {
                return '<div class="vp-live-status"><div class="vp-live-status-circle offline"></div><span>LIVE</span></div>'
            }, n.templates.live_viewer_count = function(e) {
                var t = '<div class="vp-live-viewer-count"><div class="vp-live-viewer-count-person"> ';
                return t += this.render("icon_live_viewers") || "", t += ' </div><span class="vp-live-viewer-count-value">0</span></div>'
            }, n.templates.logo = function(e) {
                return '<svg viewBox="0 0 140 40" preserveAspectRatio="xMidYMid" role="img" aria-label="Vimeo" tabindex="-1"><title>Vimeo</title><g><path class="fill logo-v" d="M31.277 18.832c-.14 3.052-2.27 7.229-6.39 12.531-4.259 5.536-7.863 8.306-10.811 8.306-1.825 0-3.371-1.687-4.633-5.059l-2.529-9.275c-.938-3.372-1.943-5.06-3.019-5.06-.234 0-1.054.494-2.458 1.477l-1.474-1.901c1.546-1.358 3.071-2.717 4.572-4.078 2.062-1.783 3.609-2.72 4.642-2.814 2.438-.234 3.938 1.433 4.502 5.001.608 3.851 1.03 6.246 1.266 7.182.704 3.195 1.476 4.791 2.321 4.791.657 0 1.641-1.037 2.954-3.108 1.312-2.072 2.015-3.649 2.109-4.732.188-1.789-.516-2.686-2.109-2.686-.75 0-1.522.173-2.318.514 1.54-5.044 4.481-7.495 8.823-7.355 3.22.095 4.737 2.184 4.552 6.266z"/><path class="fill logo-i" d="M50.613 28.713c-1.313 2.484-3.119 4.733-5.417 6.748-3.143 2.718-6.285 4.076-9.425 4.076-1.456 0-2.57-.469-3.343-1.406-.773-.938-1.137-2.153-1.09-3.653.045-1.548.526-3.938 1.441-7.173.914-3.232 1.373-4.967 1.373-5.201 0-1.218-.423-1.828-1.266-1.828-.282 0-1.079.494-2.393 1.477l-1.618-1.901c1.501-1.358 3.001-2.717 4.502-4.078 2.017-1.783 3.518-2.72 4.504-2.814 1.546-.14 2.684.314 3.411 1.367.726 1.052.996 2.417.81 4.098-.61 2.852-1.268 6.472-1.972 10.864-.046 2.01.681 3.014 2.182 3.014.656 0 1.827-.693 3.518-2.083 1.406-1.156 2.555-2.243 3.447-3.262l1.336 1.755zm-6.12-25.016c-.047 1.168-.633 2.288-1.76 3.361-1.266 1.212-2.767 1.82-4.501 1.82-2.672 0-3.963-1.166-3.869-3.499.045-1.213.76-2.381 2.144-3.501 1.384-1.119 2.919-1.68 4.609-1.68.984 0 1.805.387 2.462 1.155.656.772.961 1.553.915 2.344z"/><path class="fill logo-m" d="M94.543 28.713c-1.314 2.484-3.117 4.733-5.416 6.748-3.145 2.718-6.285 4.076-9.426 4.076-3.051 0-4.527-1.687-4.432-5.06.045-1.501.338-3.306.877-5.415.539-2.108.832-3.748.879-4.921.049-1.779-.492-2.673-1.623-2.673-1.223 0-2.682 1.456-4.375 4.362-1.788 3.05-2.754 6.003-2.894 8.861-.095 2.02.103 3.568.592 4.645-3.272.096-5.565-.444-6.873-1.617-1.171-1.032-1.708-2.742-1.614-5.135.045-1.501.276-3.001.69-4.502.414-1.5.644-2.837.69-4.011.095-1.734-.54-2.604-1.9-2.604-1.177 0-2.444 1.339-3.806 4.011-1.361 2.673-2.113 5.465-2.253 8.371-.094 2.627.074 4.456.503 5.486-3.219.096-5.505-.582-6.857-2.035-1.122-1.214-1.634-3.06-1.539-5.54.044-1.214.258-2.911.645-5.084.386-2.175.603-3.87.647-5.087.093-.841-.119-1.263-.633-1.263-.281 0-1.079.475-2.393 1.424l-1.687-1.901c.234-.184 1.71-1.545 4.432-4.078 1.969-1.828 3.306-2.766 4.009-2.812 1.219-.095 2.204.409 2.954 1.511s1.126 2.38 1.126 3.834c0 .469-.047.915-.14 1.336.703-1.077 1.523-2.017 2.463-2.814 2.156-1.874 4.572-2.931 7.245-3.166 2.298-.187 3.938.352 4.925 1.617.795 1.033 1.17 2.511 1.125 4.433.329-.28.681-.586 1.056-.915 1.078-1.267 2.133-2.273 3.164-3.023 1.736-1.267 3.541-1.97 5.418-2.112 2.25-.187 3.867.35 4.852 1.611.844 1.028 1.219 2.5 1.127 4.415-.047 1.309-.363 3.213-.949 5.712-.588 2.501-.879 3.936-.879 4.31-.049.982.047 1.659.279 2.034.236.373.797.559 1.689.559.656 0 1.826-.693 3.518-2.083 1.406-1.156 2.555-2.243 3.447-3.262l1.337 1.757z"/><path class="fill logo-e" d="M120.922 28.642c-1.361 2.249-4.033 4.495-8.02 6.743-4.971 2.856-10.012 4.284-15.125 4.284-3.797 0-6.52-1.267-8.16-3.797-1.172-1.735-1.734-3.797-1.688-6.189.045-3.797 1.736-7.407 5.064-10.832 3.658-3.75 7.973-5.627 12.945-5.627 4.596 0 7.033 1.873 7.314 5.615.188 2.384-1.125 4.842-3.938 7.368-3.004 2.76-6.781 4.515-11.328 5.263.842 1.169 2.109 1.752 3.799 1.752 3.375 0 7.059-.855 11.045-2.574 2.859-1.207 5.111-2.461 6.754-3.76l1.338 1.754zm-15.969-7.345c.045-1.259-.469-1.89-1.547-1.89-1.406 0-2.83.969-4.283 2.906-1.451 1.936-2.201 3.789-2.248 5.562-.025 0-.025.305 0 .911 2.295-.839 4.287-2.122 5.971-3.849 1.357-1.491 2.06-2.707 2.107-3.64z"/><path class="fill logo-o" d="M140.018 23.926c-.189 4.31-1.781 8.031-4.783 11.169-3.002 3.137-6.73 4.706-11.186 4.706-3.705 0-6.52-1.195-8.441-3.585-1.404-1.777-2.182-4.001-2.32-6.668-.236-4.029 1.217-7.729 4.361-11.101 3.377-3.746 7.619-5.618 12.732-5.618 3.281 0 5.766 1.102 7.457 3.301 1.594 2.015 2.32 4.614 2.18 7.796zm-7.95-.264c.047-1.269-.129-2.434-.527-3.49-.4-1.057-.975-1.587-1.725-1.587-2.391 0-4.361 1.293-5.906 3.877-1.316 2.115-2.02 4.371-2.111 6.766-.049 1.176.164 2.21.633 3.104.514 1.032 1.242 1.549 2.182 1.549 2.109 0 3.914-1.244 5.416-3.735 1.267-2.068 1.945-4.23 2.038-6.484z"/></g></svg>'
            }, n.templates.menu_list_panel = function(e) {
                var t = '<div class="vp-panel vp-panel-open vp-panel--' + e.id + '"><div class="vp-panel-title"><button type="button" class="vp-panel-button js-panelTitleButton" tabindex="0"><span class="vp-panel-button-text">' + e.title + '</span><span class="vp-panel-stat"><span class="vp-panel-stat-text js-panelStatText">' + e.active + "</span> ";
                t += this.render("icon_line_arrow") || "", t += ' </span></button></div><div class="vp-panel-itemsWrap"><ul class="vp-panel-items js-panelItems"> ';
                for (var n = 0; n < e.items.length; n++) t += ' <li class="vp-panel-item', e.items[n].active && (t += " vp-panel-item-on"), t += '" tabindex="0" role="menuitemradio" aria-checked="', e.items[n].active ? t += "true" : t += "false", t += '"> ' + e.items[n].label + " </li> ";
                return t += ' </ul><div class="vp-indicator"></div></div></div>'
            }, n.templates.menu = function(e) {
                var t = '<div class="vp-menu vp-menu-hidden vp-menu-invisible" role="menu" hidden><button type="button" class="vp-menu-close js-menuClose" aria-label="' + e.strings.close + '">';
                return t += this.render("icon_close_new") || "", t += "</button></div>"
            }, n.templates.outer = function(e) {
                var t = '<div class="vp-player-layout"><div class="vp-player-inner"><div class="vp-video-wrapper"><div class="vp-video"><div class="vp-telecine"></div></div><div class="vp-preview"></div><div class="vp-shade vp-shade-invisible"></div><div class="vp-spin vp-spin-invisible"> ';
                return t += this.render("icon_spin") || "", t += ' </div></div><div class="vp-text-alert-wrapper hidden"><div class="vp-alert-text"></div><div class="vp-alert-time"><div class="vp-live-start-time-title"></div><div class="vp-live-start-time-body"></div><div class="vp-live-start-time-footer"></div></div></div><div class="vp-target"></div><div class="vp-captions hidden with-controls" hidden aria-live="assertive"><span></span></div><div class="vp-cards-wrapper"><div class="vp-cards"></div></div><div class="vp-outro-wrapper hidden" hidden><div class="vp-outro" role="dialog" aria-live="assertive"></div></div><div class="vp-controls-wrapper"><div class="vp-title" role="contentinfo"></div><div class="vp-controls"></div><div class="vp-sidedock hidden" role="toolbar" hidden></div></div><div class="vp-overlay-wrapper hidden" hidden><div class="vp-overlay-bg"></div><div class="vp-overlay-cell"><div class="vp-overlay" role="dialog" aria-live="assertive"></div><div class="vp-overlay-icon-wrapper hidden"><div class="vp-overlay-icon"></div></div><div class="vp-overlay-logo logo"></div></div><nav><button type="button" class="vp-nav-prevButton js-back cloaked" aria-label="' + e.strings.back + '">', t += this.render("icon_prev") || "", t += '</button><button type="button" class="vp-nav-closeButton js-close" aria-label="' + e.strings.close + '">', t += this.render("icon_close_new") || "", t += '</button></nav></div><div class="notification-wrapper hidden" hidden><div class="notification-cell"><div class="notification" role="dialog" aria-live="assertive"></div></div></div><div class="vp-stats-debug rounded-box hidden" aria-hidden="true" hidden></div></div></div>'
            }, n.templates.sidedock = function(e) {
                var t = "";
                return e.vodButton && (t += ' <div class="box" data-vod-expiring="' + e.vodPurchaseInfo.expiring + '" data-vod-purchased="' + e.purchased + '"><button type="button" class="vod-button rounded-box', e.purchased && (t += " on"), e.vodPurchaseInfo.expiring && (t += " expiring"), t += '" data-product-id="' + e.vodPurchaseInfo.product_id + '"><div class="vod-button-inner"><span class="vod-label">' + e.vodDisplayLabel + "</span> ", t += this.render("icon_vod") || "", t += ' </div></button></div><div class="sidedock-inner">'), e.likeButton && (t += ' <div class="box"><label class="rounded-box hidden like-label" role="presentation"><span>' + (e.liked ? e.strings.unlike : e.strings.like) + '</span></label><button type="button" class="like-button rounded-box', e.liked && (t += " on"), t += '" aria-label="', e.loggedOut ? t += "" + e.strings.likeLoggedOut : t += "" + (e.liked ? e.strings.unlike : e.strings.like), t += '" data-label-add="' + e.strings.like + '" data-label-add-logged-out="' + e.strings.likeLoggedOut + '" data-label-remove="' + e.strings.unlike + '"> ', t += this.render("icon_heart") || "", t += " </button></div>"), e.watchLaterButton && (t += ' <div class="box"><label class="rounded-box hidden watch-later-label" role="presentation"><span>' + (e.addedToWatchLater ? e.strings.watchLaterRemove : e.strings.watchLaterAdd) + '</span></label><button type="button" class="watch-later-button rounded-box', e.addedToWatchLater && (t += " on"), t += '" aria-label="', e.loggedOut ? t += "" + e.strings.watchLaterLoggedOut : t += "" + (e.addedToWatchLater ? e.strings.watchLaterRemove : e.strings.watchLaterAdd), t += '" data-label-add="' + e.strings.watchLaterAdd + '" data-label-add-logged-out="' + e.strings.watchLaterAddLoggedOut + '" data-label-remove="' + e.strings.watchLaterRemove + '"> ', t += this.render("icon_clock") || "", t += " </button></div>"), e.collectionsButton && (t += ' <div class="box"><label class="rounded-box hidden collections-label" role="presentation"><span>' + e.strings.collections + '</span></label><button type="button" class="collections-button rounded-box" aria-label="' + e.strings.collections + '"> ', t += this.render("icon_collections") || "", t += " </button></div>"), e.shareButton && (t += ' <div class="box"><label class="rounded-box hidden share-label" role="presentation"><span>' + e.strings.share + '</span></label><button type="button" class="share-button rounded-box" aria-label="' + e.strings.share + '"> ', t += this.render("icon_share") || "", t += " </button></div>"), e.vodButton && (t += " </div>"), t += ""
            }, n.templates.app_redirect = function(e) {
                var t = '<div class="vp-overlay-content"> ';
                return e.strings.title && (t += ' <div class="app-redirect-title">' + e.strings.title + "</div> "), e.hideRedirectButton || (t += ' <div class="' + (e.strings.title ? "" : "app-redirect--topspace") + '"><a class="app-redirect-button" href="' + e.redirectUrl + '" role="button"', e.newWindow && (t += ' data-new-window="1" target="_blank" rel="noopener"'), t += ">" + e.strings.buttonText + "</a></div> "), e.strings.ignoreText && (t += ' <div class="app-redirect-ignore">' + e.strings.ignoreText + "</div> "), e.strings.bottomText && (t += ' <div class="app-redirect-bottom-text">' + e.strings.bottomText + "</div> "), t += "</div>"
            }, n.templates.email_capture = function(e) {
                var t = '<div class="vp-email-capture-wrapper"><div class="vp-email-capture"> ';
                return e.customLogo && (t += ' <div class="vp-email-capture-logoWrap"><img src="', t += this.escape(e.customLogo) || "", t += '" alt="" class="vp-email-capture-logo"></div> '), t += ' <h1 class="vp-email-capture-title">', t += this.escape(e.text) || "", t += "</h1> ", e.subtitle && (t += ' <p class="vp-email-capture-subtitle">', t += this.escape(e.subtitle) || "", t += "</p> "), t += ' <form class="vp-email-capture-form" action="' + e.action + '" method="post" novalidate><div class="vp-validation-bubble hidden"><div class="vp-validation-bubble-arrowClipper"><div class="vp-validation-bubble-arrow"></div></div><div class="vp-validation-bubble-message"></div></div><input class="vp-email-capture-form-input vp-email-capture-form-input--email" type="email" name="email" placeholder="' + e.strings.email + '" aria-label="' + e.strings.email + '" required aria-required="true"><input class="vp-email-capture-form-input" type="text" name="name" placeholder="' + e.strings.fullName + '" aria-label="' + e.strings.fullName + '" pattern="^[^!@#$%^*+=?<>]+$" maxlength="180"><input type="hidden" name="referrer" value="' + e.referrer + '"><input type="hidden" name="signature" value=""><input type="hidden" name="time" value=""><input type="hidden" name="expires" value=""><div class="vp-email-capture-form-buttons"><input class="vp-email-capture-form-button vp-email-capture-form-button--reset" type="button" value="' + e.strings.nothanks + '"> ', e.allowSkip && (t += ' <input class="vp-email-capture-form-button vp-email-capture-form-button--cancel" type="button" value="' + e.strings.nothanks + '"> '), t += ' <input class="vp-email-capture-form-button vp-email-capture-form-button--submit" type="submit" value="' + e.strings.submit + '"></div></form></div><div class="vp-email-capture-confirm vp-email-capture-confirm-hidden"><div class="vp-email-capture-confirm-box"><h1 class="vp-email-capture-confirm-title">', t += this.escape(e.confirmation) || "", t += "</h1></div></div></div>"
            }, n.templates.error = function(e) {
                var t = '<div class="vp-overlay-content error"> ';
                return e.title && (t += " <h1>" + e.title + "</h1> "), e.message && (t += " <p>" + e.message + "</p> "), t += "</div>"
            }, n.templates.help = function(e) {
                var t = '<div class="vp-overlay-content help"><h1>' + e.strings.title + '</h1><dl><div class="volume-up secondary"><dt class="arrow"></dt><dd>' + e.strings.volumeUp + '</dd></div><div class="volume-down secondary"><dt class="arrow"></dt><dd>' + e.strings.volumeDown + '</dd></div><div class="scrub-forward secondary"><dt class="arrow"></dt><dd>' + e.strings.scrubForward + '</dd></div><div class="scrub-backwards secondary"><dt class="arrow"></dt><dd>' + e.strings.scrubBackwards + '</dd></div><div class="like"><dt>L</dt><dd>' + e.strings.like + '</dd></div><div class="share"><dt>S</dt><dd>' + e.strings.share + '</dd></div><div class="watch-later"><dt>W</dt><dd>' + e.strings.watchLater + '</dd></div><div class="toggle-captions"><dt>C</dt><dd>' + e.strings.captions + '</dd></div><div class="toggle-prefs"><dt>H</dt><dd>' + e.strings.prefs + '</dd></div><div class="fullscreen"><dt>F</dt><dd>' + e.strings.fullscreen + "</dd></div> ";
                return e.onSite || (t += '<div class="view-on-vimeo"><dt>V</dt><dd>' + e.strings.viewOnVimeo + "</dd></div>"), t += " </dl></div>"
            }, n.templates.outro_email = function(e) {
                var t = '<div class="vp-outro-bg"';
                return e.bgimage && (t += ' style="background-image: url(' + e.bgimage + ');"'), t += '></div><div class="vp-outro-content vp-outro-content--email vp-outro-shade js-outro-content"></div>'
            }, n.templates.outro_image = function(e) {
                var t = '<div class="vp-outro-content vp-outro-content--image js-outro-content"> ';
                return e.url && (t += '<a class="vp-outro-imageLink js-imageLink" href="' + e.url + '" target="_blank" rel="noopener">'), e.bgimage && (t += '<div class="vp-outro-image" style="background-image: url(' + e.bgimage + ');"', e.alt_text && (t += ' aria-label="', t += this.escape(e.alt_text) || "", t += '" role="img"'), t += "></div>"), e.url && (t += "</a>"), t += "</div>"
            }, n.templates.outro_link = function(e) {
                var t = '<div class="vp-outro-bg"';
                return e.bgimage && (t += ' style="background-image: url(' + e.bgimage + ');"'), t += '></div><div class="vp-outro-content vp-outro-content--link vp-outro-shade js-outro-content"><div class="vp-outro-linkWrapper js-outro-linkWrapper"> ', e.title && (t += '<h1 class="vp-outro-textTitle js-outro-title">', t += this.escape(e.title) || "", t += "</h1>"), e.description && (t += '<p class="vp-outro-textDescription js-outro-text">', t += this.escape(e.description) || "", t += "</p>"), e.text && e.url && (t += ' <div class="vp-outro-buttonWrap"><a class="vp-outro-button js-cta" href="' + e.url + '" target="_blank" rel="noopener" title="', t += this.escape(e.text) || "", t += '"><span>', t += this.escape(e.text) || "", t += "</span></a></div> "), e.text2 && e.url2 && (t += ' <div class="vp-outro-linkWrap js-outro-linkWrap"><a class="vp-outro-link js-link" href="' + e.url2 + '" target="_blank" rel="noopener" title="', t += this.escape(e.text2) || "", t += '">', t += this.escape(e.text2) || "", t += "</a></div> "), t += " </div></div>"
            }, n.templates.outro_nothing = function(e) {
                return '<div class="vp-outro-bg"></div><div class="vp-outro-content vp-outro-content--nothing vp-outro-shade js-outro-content"></div>'
            }, n.templates.outro_share = function(e) {
                var t = '<div class="vp-outro-bg"';
                return e.bgimage && (t += ' style="background-image: url(' + e.bgimage + ');"'), t += '></div><div class="vp-outro-content vp-outro-content--share vp-outro-shade js-outro-content"></div><nav class="panel-nav"><button type="button" class="vp-nav-prevButton js-back cloaked" aria-label="' + e.strings.back + '">', t += this.render("icon_prev") || "", t += "</button></nav>"
            }, n.templates.outro_staticimage = function(e) {
                var t = '<div class="vp-outro-content vp-outro-content--staticImage js-outro-content"><div class="vp-outro-staticImageWrapper"> ';
                return e.url && (t += '<a class="vp-outro-staticImageLink" href="' + e.url + '" target="_blank" rel="noopener">'), t += ' <img class="vp-outro-staticImage" src="' + e.svg_url + '"> ', e.url && (t += "</a>"), t += " </div></div>"
            }, n.templates.outro_text = function(e) {
                return '<div class="vp-outro-content vp-outro-content--text vp-outro-shade js-outro-content"><div class="vp-outro-textWrapper"><div class="vp-outro-text">' + e.text + "</div></div></div>"
            }, n.templates.outro_videos = function(e) {
                var t = '<div class="vp-outro-bg"';
                e.bgimage && (t += ' style="background-image: url(' + e.bgimage + ');"'), t += '></div><div class="vp-outro-content vp-outro-content--videos vp-outro-shade js-outro-content"> ';
                for (var n = 0, i = e.contexts.length; n < i; n++) {
                    var r = e.contexts[n];
                    t += ' <div class="vp-outro-videosSection vp-outro-videosSection--' + r.videos.length, r.promoted && (t += " vp-outro-videosSection--promoted"), t += '"><div class="vp-outro-videosHeaderWrapper"><header class="vp-outro-videosHeader"><h1 class="vp-outro-videosTitle">' + r.context + "</h1> ", e.showFollowButton && !r.promoted && (t += ' <div class="vp-outro-followWrap js-outro-followWrap"><button type="button" class="vp-outro-follow js-outro-follow" aria-label="' + e.strings.follow + '" aria-pressed="', e.following ? t += "true" : t += "false", t += '"> ', t += this.render("icon_follow") || "", t += ' <span class="vp-outro-follow-text" data-label-follow="' + e.strings.follow + '" data-label-following="' + e.strings.following + '" data-label-unfollow="' + e.strings.unfollow + '"></span></button></div> '), t += ' </header></div><ul class="vp-outro-videos vp-outro-videos--' + r.videos.length + '"> ';
                    for (var o = 0, a = r.videos.length; o < a; o++) t += ' <li><a class="vp-outro-videoLink js-videoLink', 1 == n && (t += " hovered"), t += '" href="' + r.videos[o].url + '"', e.target && (t += ' target="_blank" rel="noopener"'), t += ' data-video-id="' + r.videos[o].id + '" aria-label="', t += this.escape(r.videos[o].fullTitle) || "", t += '" title="', t += this.escape(r.videos[o].fullTitle) || "", t += '"><div class="vp-outro-imgWrapper"><img src="' + r.videos[o].thumbnail + '" alt="" width="295" height="166"></div><header class="vp-outro-videoHeader"><h1 class="vp-outro-videoTitle">', t += this.escape(r.videos[o].title) || "", t += "</h1> ", r.videos[o].byline && (t += ' <h2 class="vp-outro-videoByline">', t += this.escape(r.videos[o].byline) || "", t += "</h2> "), t += " </header></a> ";
                    t += " </ul></div> "
                }
                return t += "</div>"
            }, n.templates.outro_vod = function(e) {
                var t = '<div class="vp-outro-content vp-outro-content--vod vp-outro-shade js-outro-content"><div class="vp-outro-vodWrapper"><h1 class="vp-outro-vodHeader"><a href="' + e.url + '" target="_blank" rel="noopener">';
                t += this.escape(e.title) || "", t += "</a></h1> ";
                var n = e.countries,
                    i = e.country;
                if (this.helpers.isAvailableInCountry(n, i))
                    if (e.purchased) t += ' <a class="vp-outro-vodButton vp-outro-vodButton--watch js-vod-watch" role="button" href="' + e.url + '" target="_blank" rel="noopener">' + e.strings.watch + "</a> ";
                    else {
                        if (!e.isComingSoon) {
                            t += ' <ul class="vp-outro-vod"> ';
                            for (var r = 0, o = e.buttons.length; r < o; r++) {
                                t += ' <li class="vp-outro-vod-item"><a class="vp-outro-vodButton vp-outro-vodButton--' + e.buttons[r].type + ' js-vod-button" role="button" href="' + e.url + "#buy=" + e.buttons[r].product_id + '" target="_blank" rel="noopener" data-product-id="' + e.buttons[r].product_id + '" role="button"><div class="vp-outro-vodIcon"> ', "buy" === e.buttons[r].type ? t += this.render("icon_vod_download") || "" : "rent" === e.buttons[r].type ? t += this.render("icon_vod_rent") || "" : "subscribe" === e.buttons[r].type ? t += this.render("icon_vod_subscribe") || "" : t += this.render("icon_vod") || "", t += " </div> ";
                                var a = e.currency,
                                    s = e.buttons[r];
                                t += " <p>" + this.helpers.formatVodLabel(e.translationMap, "outro_string", a, s) + "</p></a></li> "
                            }
                            t += " </ul> "
                        }(e.isPreorder || e.isComingSoon) && (t += " <p>" + e.strings.preRelease + "</p> ")
                    }
                return t += " </div></div>"
            }, n.templates.password = function(e) {
                return '<div class="vp-overlay-content password form"><h1>' + e.strings.title + '</h1><p class="subtitle">' + e.strings.subtitle + '</p><form action="' + e.action + '" method="post" novalidate><div class="vp-validation-bubble hidden"><div class="vp-validation-bubble-arrow-clipper"><div class="vp-validation-bubble-arrow"></div></div><div class="vp-validation-bubble-message"></div></div><input type="password" name="password" placeholder="' + e.strings.password + '" required aria-required="true" aria-label="' + e.strings.password + '"><input type="submit" value="' + e.strings.watch + '"></form></div>'
            }, n.templates.private_locked = function(e) {
                return '<div class="vp-overlay-content login"><h1>' + e.strings.title + '</h1><p class="subtitle">' + e.strings.subtitle + '</p><a href="' + e.action + '" class="popup" target="_blank" rel="noopener" role="button" aria-label="' + e.strings.logInLabel + '">' + e.strings.logIn + "</a></div>"
            }, n.templates.private_unlocked = function(e) {
                return '<div class="vp-overlay-content form unlocked"><h1>' + e.strings.title + '</h1><p class="subtitle">' + e.strings.subtitle + '</p><button type="button">' + e.strings.watch + "</button></div>"
            }, n.templates.share = function(e) {
                var t = '<div class="vp-share-wrapper js-share"><section class="vp-share-screen vp-share-screen--share' + (e.embedOnly ? " cloaked" : "") + ' js-share-screen"><h1 class="vp-share-title vp-share-title--share">' + e.strings.share + '</h1><ul class="vp-share-buttons"><li class="vp-share-buttons-item"><a class="vp-share-button vp-share-button--facebook js-facebook" href="' + e.playerShareUrl + '/facebook" target="_blank" rel="noopener" title="' + e.strings.facebook + '" role="button" aria-label="' + e.strings.facebook + '">';
                return t += this.render("icon_facebook") || "", t += '</a><li class="vp-share-buttons-item"><a class="vp-share-button vp-share-button--twitter js-twitter" href="' + e.playerShareUrl + '/twitter" target="_blank" rel="noopener" title="' + e.strings.twitter + '" role="button" aria-label="' + e.strings.twitter + '">', t += this.render("icon_twitter") || "", t += '</a><li class="vp-share-buttons-item"><a class="vp-share-button vp-share-button--tumblr js-tumblr" href="' + e.playerShareUrl + '/tumblr" target="_blank" rel="noopener" title="' + e.strings.tumblr + '" role="button" aria-label="' + e.strings.tumblr + '">', t += this.render("icon_tumblr") || "", t += "</a> ", e.url && (t += ' <li class="vp-share-buttons-item"><a class="vp-share-button vp-share-button--email js-email" href="mailto:?subject=', t += encodeURIComponent(e.strings.emailSubject) || "", t += "&amp;body=", t += encodeURIComponent(e.strings.emailBody) || "", t += '" title="' + e.strings.email + '" role="button" aria-label="' + e.strings.email + '">', t += this.render("icon_mail") || "", t += "</a> "), t += " </ul> ", e.embed && (t += ' <ul class="vp-share-buttons"><li class="vp-share-buttons-item"><a class="vp-share-button vp-share-button--embed js-embed" href="' + e.url + '#share" target="_blank" rel="noopener" title="' + e.strings.embedCode + '" role="button" aria-label="' + e.strings.embedCode + '">', t += this.render("icon_embed") || "", t += "</a></li></ul> "), e.url && (t += ' <p class="vp-share-footnote vp-share-footnote--share"><a class="clip_url" href="' + e.shareUrl + '" target="_blank" rel="noopener">' + e.shareUrl + "</a></p> "), t += " </section> ", e.embed && (t += ' <section class="vp-share-screen vp-share-screen--embed' + (e.embedOnly ? "" : " cloaked") + ' js-embed-screen"><div class="vp-share-embedWrapper"><h1 class="vp-share-title vp-share-title--embed">' + e.strings.embedTitle + '</h1><p class="vp-share-subtitle vp-share-subtitle--embed">' + e.strings.embedSubtitle + '</p><div class="vp-share-embedCode form"><div><input class="vp-share-embedInput" type="text" name="embed_code" title="Embed code" value="' + e.embedCode + '" spellcheck="false" aria-readonly="true"', e.readOnly && (t += " readonly"), t += "></div> ", e.copyButton && (t += ' <button type="button" class="vp-share-embedCopy js-embedCopy" data-clipboard-text=\'' + e.embedCode + "' data-label=\"" + e.strings.copy + '" data-success-label="' + e.strings.copySuccess + '">' + e.strings.copy + "</button> "), t += " </div> ", e.customizeEmbed && (t += ' <p class="vp-share-footnote vp-share-footnote--embed">' + e.strings.customize + "</p> "), t += " </div></section> "), t += "</div>"
            }, n.templates.threesixty_reminder = function(e) {
                var t = '<div class="intro-wrap text-only"><div> ';
                return e.showArrows && (t += ' <div class="key-wrapper"><div class="key-row"><div class="key"><div class="arrow arrow-top"></div></div></div><div class="key-row"><div class="key"><div class="arrow arrow-left"></div></div><div class="key"><div class="arrow arrow-down"></div></div><div class="key"><div class="arrow arrow-right"></div></div></div></div> '), t += " <div>" + e.text + "</div></div></div>"
            }, n.templates.time_series_graph = function(e) {
                return '<svg width="' + e.width + '" height="' + e.height + '" viewBox="0 0 ' + e.width + " " + e.height + '"><g><polyline stroke="white" fill="none" points="' + e.points + '"></polyline></g><g> ' + e.markers + " </g></svg>"
            }, n.templates.title_byline_badge = function(e) {
                var t = "";
                return e.displayBadge && (t += "&nbsp;", e.link && (t += '<a tabindex="-1" href="' + e.link + '"', e.targetBlank && (t += ' target="_blank" rel="noopener"'), t += ">"), t += ' <span class="byline-badge ' + e.cssClass + '">' + e.cssClass + "</span>", e.link && (t += "</a>"), t += ""), t += ""
            }, n.templates.title_owner_byline = function(e) {
                var t = "";
                return e.linkToOwner ? (t += '<a href="' + e.ownerLink + '"', e.targetBlank && (t += ' target="_blank" rel="noopener"'), t += ">", t += this.escape(e.owner) || "", t += "</a>") : (t += '<span class="user">', t += this.escape(e.owner) || "", t += "</span>"), t += ""
            }, n.templates.title = function(e) {
                var t = '<header class="vp-title-header"> ';
                return e.badge && (t += ' <div class="badge', e.badge.shadow && (t += " shadow"), t += '"> ', e.badge.link && (t += '<a href="' + e.badge.link + '"', e.targetBlank && (t += ' target="_blank" rel="noopener"'), t += ">"), t += ' <img src="' + e.badge.img + '"', e.badge.offset && (t += ' style="margin-top:' + e.badge.offset.y + "px;margin-left:" + e.badge.offset.x + 'px"'), t += ' width="' + e.badge.width + '" height="' + e.badge.height + '" alt="' + e.badge.name + ' Badge"> ', e.badge.link && (t += "</a>"), t += " </div> "), e.showPortrait && (t += ' <div class="portrait" aria-hidden="true"> ', e.linkToOwner && (t += '<a tabindex="-1" href="' + e.ownerLink + '"', e.targetBlank && (t += ' target="_blank" rel="noopener"'), t += ">"), t += ' <img src="' + e.portraitImg + '" alt="" width="60" height="60"> ', e.linkToOwner && (t += "</a>"), t += " </div> "), t += ' <div class="headers"> ', e.showTitle && (t += " <h1> ", e.showTitleLink && (t += '<a href="' + e.titleLink + '"', e.targetBlank && (t += ' target="_blank" rel="noopener"'), t += " data-clip-link>"), t += this.escape(e.title) || "", e.showTitleLink && (t += "</a>"), e.is360 && (t += '<div class="threesix-badge-title">360</div>'), e.hasHDR && (t += '<div class="hashdr-badge-title">HDR</div>'), t += " </h1> "), e.showByline && (t += ' <div class="sub-title"><h2 class="byline-from">' + e.strings.byline + "</h2> ", e.is360 && !e.showTitle && (t += ' <div class="threesix-badge-byline">360</div> '), e.hasHDR && !e.showTitle && (t += ' <div class="hashdr-badge-byline">HDR</div> '), t += " </div> "), !e.is360 || e.showByline || e.showTitle || (t += ' <div class="threesix-badge-loner">360</div> '), !e.hasHDR || e.showByline || e.showTitle || (t += ' <div class="hashdr-badge-loner">HDR</div> '), t += " </div></header>"
            }, e.exports ? e.exports = n : window.Aftershave = n
        }()
    });

    function kf(e, t) {
        var n = 600,
            i = e.querySelector(".vp-shade"),
            r = e.querySelector(".vp-spin"),
            o = void 0;

        function a() {
            clearTimeout(o), o = setTimeout(function() {
                i.classList.remove("vp-shade-invisible"), r.classList.remove("vp-spin-invisible")
            }, n)
        }

        function s() {
            clearTimeout(o), i.classList.add("vp-shade-invisible"), r.classList.add("vp-spin-invisible")
        }
        return t.on(gn.BUFFER_STARTED, a), t.on([gn.BUFFER_ENDED, ds.paused], s), hd.on(sd.buffering, function() {
            r.classList.remove("vp-spin-invisible")
        }), hd.on([sd.playing, sd.paused], function() {
            clearTimeout(o), r.classList.add("vp-spin-invisible")
        }), hd.on(sd.connected, function() {
            i.classList.remove("vp-shade-invisible")
        }), hd.on(sd.disconnected, function() {
            s()
        }), {}
    }
    var Tf = function(r) {
            return function(i) {
                for (var e = arguments.length, t = Array(1 < e ? e - 1 : 0), n = 1; n < e; n++) t[n - 1] = arguments[n];
                return t.forEach(function(e) {
                    for (var t in e) {
                        var n = Object.getOwnPropertyDescriptor(e, t);
                        Object.defineProperty(i, t, Object.assign(n, r))
                    }
                }), i
            }
        }({
            enumerable: !0,
            configurable: !0,
            writeable: !1
        }),
        Af = function() {
            if ("undefined" != typeof Map) return Map;

            function i(e, n) {
                var i = -1;
                return e.some(function(e, t) {
                    return e[0] === n && (i = t, !0)
                }), i
            }
            return function() {
                function e() {
                    this.__entries__ = []
                }
                var t = {
                    size: {
                        configurable: !0
                    }
                };
                return t.size.get = function() {
                    return this.__entries__.length
                }, e.prototype.get = function(e) {
                    var t = i(this.__entries__, e),
                        n = this.__entries__[t];
                    return n && n[1]
                }, e.prototype.set = function(e, t) {
                    var n = i(this.__entries__, e);
                    ~n ? this.__entries__[n][1] = t : this.__entries__.push([e, t])
                }, e.prototype.delete = function(e) {
                    var t = this.__entries__,
                        n = i(t, e);
                    ~n && t.splice(n, 1)
                }, e.prototype.has = function(e) {
                    return !!~i(this.__entries__, e)
                }, e.prototype.clear = function() {
                    this.__entries__.splice(0)
                }, e.prototype.forEach = function(e, t) {
                    void 0 === t && (t = null);
                    for (var n = 0, i = this.__entries__; n < i.length; n += 1) {
                        var r = i[n];
                        e.call(t, r[1], r[0])
                    }
                }, Object.defineProperties(e.prototype, t), e
            }()
        }(),
        Pf = "undefined" != typeof window && "undefined" != typeof document && window.document === document,
        Cf = "undefined" != typeof global && global.Math === Math ? global : "undefined" != typeof self && self.Math === Math ? self : "undefined" != typeof window && window.Math === Math ? window : Function("return this")(),
        xf = "function" == typeof requestAnimationFrame ? requestAnimationFrame.bind(Cf) : function(e) {
            return setTimeout(function() {
                return e(Date.now())
            }, 1e3 / 60)
        },
        Lf = ["top", "right", "bottom", "left", "width", "height", "size", "weight"],
        Of = "undefined" != typeof MutationObserver,
        Rf = function() {
            this.connected_ = !1, this.mutationEventsAdded_ = !1, this.mutationsObserver_ = null, this.observers_ = [], this.onTransitionEnd_ = this.onTransitionEnd_.bind(this), this.refresh = function(e, t) {
                var n = !1,
                    i = !1,
                    r = 0;

                function o() {
                    n && (n = !1, e()), i && s()
                }

                function a() {
                    xf(o)
                }

                function s() {
                    var e = Date.now();
                    if (n) {
                        if (e - r < 2) return;
                        i = !0
                    } else i = !(n = !0), setTimeout(a, t);
                    r = e
                }
                return s
            }(this.refresh.bind(this), 20)
        };
    Rf.prototype.addObserver = function(e) {
        ~this.observers_.indexOf(e) || this.observers_.push(e), this.connected_ || this.connect_()
    }, Rf.prototype.removeObserver = function(e) {
        var t = this.observers_,
            n = t.indexOf(e);
        ~n && t.splice(n, 1), !t.length && this.connected_ && this.disconnect_()
    }, Rf.prototype.refresh = function() {
        this.updateObservers_() && this.refresh()
    }, Rf.prototype.updateObservers_ = function() {
        var e = this.observers_.filter(function(e) {
            return e.gatherActive(), e.hasActive()
        });
        return e.forEach(function(e) {
            return e.broadcastActive()
        }), 0 < e.length
    }, Rf.prototype.connect_ = function() {
        Pf && !this.connected_ && (document.addEventListener("transitionend", this.onTransitionEnd_), window.addEventListener("resize", this.refresh), Of ? (this.mutationsObserver_ = new MutationObserver(this.refresh), this.mutationsObserver_.observe(document, {
            attributes: !0,
            childList: !0,
            characterData: !0,
            subtree: !0
        })) : (document.addEventListener("DOMSubtreeModified", this.refresh), this.mutationEventsAdded_ = !0), this.connected_ = !0)
    }, Rf.prototype.disconnect_ = function() {
        Pf && this.connected_ && (document.removeEventListener("transitionend", this.onTransitionEnd_), window.removeEventListener("resize", this.refresh), this.mutationsObserver_ && this.mutationsObserver_.disconnect(), this.mutationEventsAdded_ && document.removeEventListener("DOMSubtreeModified", this.refresh), this.mutationsObserver_ = null, this.mutationEventsAdded_ = !1, this.connected_ = !1)
    }, Rf.prototype.onTransitionEnd_ = function(e) {
        var t = e.propertyName;
        void 0 === t && (t = ""), Lf.some(function(e) {
            return !!~t.indexOf(e)
        }) && this.refresh()
    }, Rf.getInstance = function() {
        return this.instance_ || (this.instance_ = new Rf), this.instance_
    }, Rf.instance_ = null;
    var If = function(e, t) {
            for (var n = 0, i = Object.keys(t); n < i.length; n += 1) {
                var r = i[n];
                Object.defineProperty(e, r, {
                    value: t[r],
                    enumerable: !1,
                    writable: !1,
                    configurable: !0
                })
            }
            return e
        },
        Mf = function(e) {
            return e && e.ownerDocument && e.ownerDocument.defaultView || Cf
        },
        Df = jf(0, 0, 0, 0);

    function Nf(e) {
        return parseFloat(e) || 0
    }

    function Ff(n) {
        for (var e = [], t = arguments.length - 1; 0 < t--;) e[t] = arguments[t + 1];
        return e.reduce(function(e, t) {
            return e + Nf(n["border-" + t + "-width"])
        }, 0)
    }

    function Bf(e) {
        var t = e.clientWidth,
            n = e.clientHeight;
        if (!t && !n) return Df;
        var i = Mf(e).getComputedStyle(e),
            r = function(e) {
                for (var t = {}, n = 0, i = ["top", "right", "bottom", "left"]; n < i.length; n += 1) {
                    var r = i[n],
                        o = e["padding-" + r];
                    t[r] = Nf(o)
                }
                return t
            }(i),
            o = r.left + r.right,
            a = r.top + r.bottom,
            s = Nf(i.width),
            u = Nf(i.height);
        if ("border-box" === i.boxSizing && (Math.round(s + o) !== t && (s -= Ff(i, "left", "right") + o), Math.round(u + a) !== n && (u -= Ff(i, "top", "bottom") + a)), ! function(e) {
                return e === Mf(e).document.documentElement
            }(e)) {
            var c = Math.round(s + o) - t,
                l = Math.round(u + a) - n;
            1 !== Math.abs(c) && (s -= c), 1 !== Math.abs(l) && (u -= l)
        }
        return jf(r.left, r.top, s, u)
    }
    var qf = "undefined" != typeof SVGGraphicsElement ? function(e) {
        return e instanceof Mf(e).SVGGraphicsElement
    } : function(e) {
        return e instanceof Mf(e).SVGElement && "function" == typeof e.getBBox
    };

    function Uf(e) {
        return Pf ? qf(e) ? function(e) {
            var t = e.getBBox();
            return jf(0, 0, t.width, t.height)
        }(e) : Bf(e) : Df
    }

    function jf(e, t, n, i) {
        return {
            x: e,
            y: t,
            width: n,
            height: i
        }
    }
    var Vf = function(e) {
        this.broadcastWidth = 0, this.broadcastHeight = 0, this.contentRect_ = jf(0, 0, 0, 0), this.target = e
    };
    Vf.prototype.isActive = function() {
        var e = Uf(this.target);
        return (this.contentRect_ = e).width !== this.broadcastWidth || e.height !== this.broadcastHeight
    }, Vf.prototype.broadcastRect = function() {
        var e = this.contentRect_;
        return this.broadcastWidth = e.width, this.broadcastHeight = e.height, e
    };
    var Hf = function(e, t) {
            var n = function(e) {
                var t = e.x,
                    n = e.y,
                    i = e.width,
                    r = e.height,
                    o = "undefined" != typeof DOMRectReadOnly ? DOMRectReadOnly : Object,
                    a = Object.create(o.prototype);
                return If(a, {
                    x: t,
                    y: n,
                    width: i,
                    height: r,
                    top: n,
                    right: t + i,
                    bottom: r + n,
                    left: t
                }), a
            }(t);
            If(this, {
                target: e,
                contentRect: n
            })
        },
        Wf = function(e, t, n) {
            if (this.activeObservations_ = [], this.observations_ = new Af, "function" != typeof e) throw new TypeError("The callback provided as parameter 1 is not a function.");
            this.callback_ = e, this.controller_ = t, this.callbackCtx_ = n
        };
    Wf.prototype.observe = function(e) {
        if (!arguments.length) throw new TypeError("1 argument required, but only 0 present.");
        if ("undefined" != typeof Element && Element instanceof Object) {
            if (!(e instanceof Mf(e).Element)) throw new TypeError('parameter 1 is not of type "Element".');
            var t = this.observations_;
            t.has(e) || (t.set(e, new Vf(e)), this.controller_.addObserver(this), this.controller_.refresh())
        }
    }, Wf.prototype.unobserve = function(e) {
        if (!arguments.length) throw new TypeError("1 argument required, but only 0 present.");
        if ("undefined" != typeof Element && Element instanceof Object) {
            if (!(e instanceof Mf(e).Element)) throw new TypeError('parameter 1 is not of type "Element".');
            var t = this.observations_;
            t.has(e) && (t.delete(e), t.size || this.controller_.removeObserver(this))
        }
    }, Wf.prototype.disconnect = function() {
        this.clearActive(), this.observations_.clear(), this.controller_.removeObserver(this)
    }, Wf.prototype.gatherActive = function() {
        var t = this;
        this.clearActive(), this.observations_.forEach(function(e) {
            e.isActive() && t.activeObservations_.push(e)
        })
    }, Wf.prototype.broadcastActive = function() {
        if (this.hasActive()) {
            var e = this.callbackCtx_,
                t = this.activeObservations_.map(function(e) {
                    return new Hf(e.target, e.broadcastRect())
                });
            this.callback_.call(e, t, e), this.clearActive()
        }
    }, Wf.prototype.clearActive = function() {
        this.activeObservations_.splice(0)
    }, Wf.prototype.hasActive = function() {
        return 0 < this.activeObservations_.length
    };
    var zf = void 0 !== Ae ? new Ae : new Af,
        Gf = function(e) {
            if (!(this instanceof Gf)) throw new TypeError("Cannot call a class as a function.");
            if (!arguments.length) throw new TypeError("1 argument required, but only 0 present.");
            var t = Rf.getInstance(),
                n = new Wf(e, t, this);
            zf.set(this, n)
        };
    ["observe", "unobserve", "disconnect"].forEach(function(t) {
        Gf.prototype[t] = function() {
            return (e = zf.get(this))[t].apply(e, arguments);
            var e
        }
    });
    var Yf = void 0 !== Cf.ResizeObserver ? Cf.ResizeObserver : Gf;

    function Kf(t, i, r) {
        var a = r.querySelector(".vp-player-layout");

        function e() {
            var e = Ls(r),
                t = e.width,
                n = e.height;
            return i.dispatch(Nd(t, n))
        }

        function n(e) {
            t.fire(ds.spaceChanged, [{
                bottom: e
            }])
        }

        function o(e) {
            var t = Ts(js, Math.round),
                n = t(e.x),
                i = t(e.y),
                r = t(e.width),
                o = t(e.height);
            ! function e(t, n, i) {
                if (void 0 !== i) t.style[n] = i;
                else if (ks(n)) t.setAttribute("style", n);
                else
                    for (var r in n) e(t, r, n[r])
            }(a, {
                left: n,
                top: i,
                width: r,
                height: o
            })
        }
        i.watch("ui.player.layout", o), i.watch("ui.player.innerBottom", n), new Yf(e).observe(r), e()
    }

    function Xf(e, t, n) {
        this.constructorName = "MessageApiError", this.message = e, this.name = t, this.source = n
    }
    if (Xf.prototype = new Error, "object" == typeof process && "function" == typeof process.nextTick) process.nextTick;
    else if ("function" == typeof I) {
        var $f = I.resolve();
        $f.then.bind($f)
    } else "function" == typeof setImmediate ? setImmediate : setTimeout;

    function Jf(e, t) {
        return null != t && (t.constructor === e || t instanceof e)
    }(function(e) {
        var t = Math[e]
    })("round"),
    function(e, t) {
        for (var n = this, i = arguments.length, r = new Array(2 < i ? i - 2 : 0), o = 2; o < i; o++) r[o - 2] = arguments[o];
        (function i(r) {
            return r.length >= e ? t.apply(n, r) : function() {
                for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                return i(r.concat(t))
            }
        })(r)
    }(2, function(e, t) {
        return e(t), t
    });

    function Qf(e) {
        return e
    }

    function Zf(e) {
        if (!e || "" === e) return {};
        if ("object" == typeof e) return e;
        try {
            return JSON.parse(e)
        } catch (e) {
            return {}
        }
    }

    function eh(e) {}

    function th() {
        return (th = Object.assign || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = arguments[t];
                for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
            }
            return e
        }).apply(this, arguments)
    }
    var nh = function(r) {
        return function(i) {
            for (var e = arguments.length, t = new Array(1 < e ? e - 1 : 0), n = 1; n < e; n++) t[n - 1] = arguments[n];
            return t.forEach(function(e) {
                for (var t in e) {
                    var n = Object.getOwnPropertyDescriptor(e, t);
                    Object.defineProperty(i, t, th(n, r))
                }
            }), i
        }
    }({
        enumerable: !0,
        configurable: !0,
        writeable: !1
    });
    var ih = {
            captureException: function(e) {},
            captureMessage: function(e) {},
            captureBreadcrumb: function() {}
        },
        rh = ih;
    var oh = {
        set: function(e) {
            rh = th({}, ih, e)
        },
        captureException: function(e, t) {
            return rh.captureException(e, t)
        },
        captureMessage: function(e, t) {
            return rh.captureMessage(e, t)
        },
        captureBreadcrumb: function(e, t, n, i) {
            return void 0 === n && (n = "backbone"), void 0 === i && (i = "info"), rh.captureBreadcrumb(e, t, n, i)
        }
    };

    function ah(e) {
        var n = function(e) {
                var t = document.referrer || e.request.referrer;
                try {
                    t = decodeURIComponent(t)
                } catch (e) {
                    t = unescape(t)
                }
                return t
            }(e),
            o = {},
            a = {},
            s = {
                parseMessage: Zf,
                buildMessage: Qf,
                logError: eh
            },
            t = {};
        var i = {
            get methods() {
                return o
            },
            extendMethods: function() {
                for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                nh.apply(void 0, [o].concat(t))
            },
            get listeners() {
                return t
            },
            set listeners(e) {
                t = e
            },
            emit: function(e) {
                for (var t = arguments.length, n = new Array(1 < t ? t - 1 : 0), i = 1; i < t; i++) n[i - 1] = arguments[i];
                if (function() {
                        if (a) {
                            for (var e, t, n = arguments.length, i = new Array(n), r = 0; r < n; r++) i[r] = arguments[r];
                            if (a.global && a.global.length)
                                for (e = 0; e < a.global.length; e++)
                                    if (!(t = a.global[e]).apply(t, i)) return !1;
                            var o = i[0];
                            if (a.event && a.event[o] && a.event[o].length)
                                for (e = 0; e < a.event[o].length; e++)
                                    if (!(t = a.event[o][e]).apply(t, i)) return !1
                        }
                        return !0
                    }.apply(void 0, [e].concat(n))) {
                    var r = {
                        event: e
                    };
                    n && n[0] && (r.data = n[0]), u(r)
                }
            },
            filter: function(e, t) {
                !t && Jf(Function, e) && (t = e, e = null), e ? function(e, t) {
                    a.event = a.event || {}, a.event[e] = a.event[e] || [], a.event[e].push(t)
                }(e, t) : function(e) {
                    a.global = a.global || [], a.global.push(e)
                }(t)
            },
            hooks: function() {
                for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                return nh.apply(void 0, [s].concat(t))
            }
        };

        function r(e) {
            if (e.source === window.parent) {
                var t = s.parseMessage(e.data),
                    n = t.method,
                    i = t.value;
                if (void 0 !== n) try {
                    var r = function(e, t) {
                        if (!e) return null;
                        e = e.replace("api_", "");
                        var n = Object.getOwnPropertyDescriptor(t, e);
                        if (n && Jf(Function, n.value)) return n.value;
                        if (n && Jf(Function, n.get)) return n.get;
                        var i = e.substr(0, 3),
                            r = e.substr(3, 1).toLowerCase() + e.substr(4);
                        return n = Object.getOwnPropertyDescriptor(t, r), "get" === i && n && Jf(Function, n.get) ? n.get : "set" === i && n && Jf(Function, n.set) ? n.set : null
                    }(n, o);
                    if (!r) throw new Xf("" + e + " is not a valid method. Valid methods are: " + function(i) {
                        return Object.keys(i).reduce(function(e, t) {
                            var n = Object.getOwnPropertyDescriptor(i, t);
                            return Jf(Function, n.value) ? e.push(t) : (Jf(Function, n.get) && e.push("get" + t.charAt(0).toUpperCase() + t.slice(1)), Jf(Function, n.set) && e.push("set" + t.charAt(0).toUpperCase() + t.slice(1))), e
                        }, []).sort()
                    }(o).join(", ") + ".", "TypeError", n);
                    oh.captureBreadcrumb("API message received", t, "api"), I.resolve(r.call(e, i)).then(function(e) {
                        return u({
                            method: n,
                            value: function(e, t) {
                                return null == t || t != t ? e : t
                            }(i, e)
                        })
                    }).catch(s.logError)
                } catch (e) {
                    s.logError(e)
                }
            }
        }

        function u(e) {
            if (window.postMessage && window.parent.postMessage && (e = s.buildMessage(e), window.parent != window)) try {
                var t = n && "null" !== n ? n : "*";
                window.parent.postMessage(e, t)
            } catch (e) {}
        }
        return window.addEventListener("message", r, !1), i
    }

    function sh() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[n];
        if (1 === t.length && t[0] instanceof sh) {
            var i = t[0];
            return this.red = i.red, this.green = i.green, this.blue = i.blue, this.alpha = i.alpha, this.hue = i.hue, this.saturation = i.saturation, this.lightness = i.lightness, this
        }
        if (1 === t.length) {
            if ("string" == typeof t[0] && 0 <= t[0].indexOf("rgb")) return this.rgba = function(e) {
                var t = /rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(,\s*([\d.]+))?\)/.exec(e);
                if (!t) throw new Error("Invalid rgb value");
                return {
                    red: parseInt(t[1], 10),
                    green: parseInt(t[2], 10),
                    blue: parseInt(t[3], 10),
                    alpha: parseFloat(t[5]) || 1
                }
            }(t[0]), this;
            if (! function(e) {
                    return "string" == typeof(e = e.replace("#", "")) && (3 === e.length || 6 === e.length) && !isNaN(parseInt(e, 16))
                }("" + t[0])) throw new Error("Invalid hex value");
            return this.hex = t[0], this
        }
        if (3 === t.length || 4 === t.length) {
            for (var r = 0; r < 3; r++)
                if (isNaN(parseInt(t[r], 10)) || parseInt(t[r], 10) < 0 || 255 < parseInt(t[r], 10)) throw new Error("Invalid rgb value");
            if (t[3] && parseFloat(t[3]) < 0 || 1 < parseFloat(t[3])) throw new Error("Invalid alpha value");
            return this.rgba = {
                red: t[0],
                green: t[1],
                blue: t[2],
                alpha: parseFloat(t[3]) || 1
            }, this
        }
        throw new Error("Invalid color")
    }

    function uh(e, t) {
        switch (e.view) {
            case bs.privateLocked:
                throw new Xf("The video is private.", "PrivacyError", t);
            case bs.privatePassword:
                throw new Xf("The video is password-protected. The viewer must enter the password first.", "PasswordError", t);
            case bs.error:
                throw new Xf(e.message, "NotFoundError", t)
        }
    }

    function ch(r) {
        var o = 3,
            e = r.config.embed.on_site,
            i = void 0,
            a = qo(),
            s = r.config.embed.api,
            t = !1,
            n = !1,
            u = null,
            c = !1,
            l = null,
            d = null,
            f = void 0;
        var h = {
            ping: function() {
                return r.config.video.id
            },
            on: function(e, t) {
                e in Es && (e = Es[e]), e in Ss && (e = Ss[e]);
                var n = Vs(ws);
                if (n.indexOf(e) < 0) throw new Xf("" + e + " is not a valid event. Valid events are: " + n.join(", ") + ".", "TypeError", "on");
                t && a.on(e, t), i && (i.listeners[e] = !0), e === ws.LOADED && C()
            },
            off: function(e, t) {
                t && a.off(e, t), i && (i.listeners[e] = !1)
            },
            play: function() {
                uh(r.config, "play"), r.events.fire(ds.playButtonPressed)
            },
            pause: function() {
                uh(r.config, "pause"), r.events.fire(ds.pauseButtonPressed)
            },
            loadVideo: function(e) {
                try {
                    r.loadVideo(e)
                } catch (e) {
                    throw new Xf("An error occurred loading the video.", "Error", "loadVideo")
                }
                return e
            },
            unload: function() {
                r.config.view !== bs.main && r.config.view !== bs.privateUnlocked || r.events.fire(cs.reset)
            },
            addCuePoint: function(e) {
                var t = e.data,
                    n = parseFloat(e.time);
                if (isNaN(n) || n < 0 || n > r.config.video.duration) throw new Xf("Cue point time must be positive number less than the duration of the video (" + Fs(r.config.video.duration) + ").", "RangeError", "addCuePoint");
                try {
                    var i = r.backbone.telecine.addCuePoint(n, t);
                    return setTimeout(function() {
                        r.events.fire(ds.cuePointAdded, i)
                    }, 0), i.id
                } catch (e) {
                    if ("CuePointsNotSupported" === e.name) throw new Xf("Cue points are not supported in the current player.", "UnsupportedError", "addCuePoint");
                    throw new Xf("Unable to add cue point", "InvalidCuePoint", "addCuePoint")
                }
            },
            removeCuePoint: function(t) {
                var e = r.backbone.telecine.cuePoints.filter(function(e) {
                    return e.id === t
                })[0];
                if (!e) throw new Xf("Cue point " + t + " was not found.", "InvalidCuePoint", "removeCuePoint");
                r.backbone.removeCuePoint(e), setTimeout(function() {
                    r.events.fire(ds.cuePointRemoved, e)
                }, 0)
            },
            enableTextTrack: function(e) {
                var t = e.language,
                    n = e.kind,
                    i = void 0 === n ? null : n;
                return r.backbone.enableTextTrack(t, i), s < 3 ? null : new I(function(n, e) {
                    r.events.once(ds.captionsChanged, function(e, t) {
                        n({
                            label: e.label,
                            language: e.language,
                            kind: e.kind
                        })
                    })
                })
            },
            get autopause() {
                return !!r.config.embed.autopause
            },
            set autopause(e) {
                r.config.embed.autopause = !!e
            },
            get color() {
                return r.config.embed.color.replace("#", "")
            },
            set color(e) {
                if (r.config.embed.settings.color && !r.config.embed.on_site) throw new Xf("The creator of the video has chosen to always use " + new sh(r.config.embed.color).hex + ".", "EmbedSettingsError", "setColor");
                try {
                    var t = new sh(e);
                    r.events.fire(cs.changeColor, t.hex)
                } catch (e) {
                    throw new Xf("The color should be 3- or 6-digit hex value.", "TypeError", "setColor")
                }
                var n = new sh(23, 35, 34, .75);
                if (n.contrast(t).ratio < 3) {
                    var i = t.clone().lighten(5, 3, n);
                    throw new Xf(t.hex + " does not meet minimum contrast ratio. We recommend using brighter colors. (You could try " + i.hex + " instead.) See WCAG 2.0 guidelines: http://www.w3.org/TR/WCAG/#visual-audio-contrast", "ContrastError", "setColor")
                }
            },
            get cuePoints() {
                return r.backbone.telecine.cuePoints.map(function(e) {
                    return {
                        time: e.time,
                        data: e.data,
                        id: e.id
                    }
                })
            },
            get currentTime() {
                return r.backbone && .1 < r.backbone.currentTime ? Fs(r.backbone.currentTime) : 0
            },
            set currentTime(e) {
                if (e = parseFloat(e), isNaN(e) || e < 0 || e > r.config.video.duration) throw new Xf("Seconds must be a positive number less than the duration of the video (" + Fs(r.config.video.duration) + ").", "RangeError", "setCurrentTime");
                r.events.fire(cs.seek, null, e), r.events.fire(ds.mousedOver), 2 < s && r.events.once(Pe.SEEKED, function(e) {
                    var t = e.currentTime;
                    i.emit({
                        method: "setCurrentTime",
                        value: t
                    })
                })
            },
            get duration() {
                return Fs(r.config.video.duration)
            },
            get ended() {
                return !!r.backbone.ended
            },
            get loop() {
                return !!r.config.embed.loop
            },
            set loop(e) {
                r.events.fire(cs.changeLoop, e)
            },
            get paused() {
                return !(r.backbone && "paused" in r.backbone) || !!r.backbone.paused
            },
            get playbackRate() {
                return r.backbone ? r.backbone.playbackRate : 1
            },
            set playbackRate(e) {
                if (!r.config.embed.settings.speed) throw new Xf("Setting the playback rate is not enabled for this video.", "Error", "setPlaybackRate");
                if (isNaN(e) || e < ys.low || e > ys.high) throw new Xf("Playback rate should be a number between " + ys.low + " and " + ys.high + ".", "RangeError", "setPlaybackRate");
                r.events.fire(cs.changePlaybackRate, e)
            },
            get textTracks() {
                return (r.telecine ? r.telecine.video.textTracks : []).map(function(e) {
                    return {
                        label: e.label,
                        language: e.language,
                        kind: e.kind,
                        mode: e === l ? "showing" : "disabled"
                    }
                })
            },
            get videoEmbedCode() {
                return r.config.video.embed_code
            },
            get videoHeight() {
                return r.telecine.videoHeight || r.config.video.height
            },
            get videoId() {
                return r.config.video.id
            },
            get videoTitle() {
                return r.config.video.title
            },
            get videoWidth() {
                return r.telecine.videoWidth || r.config.video.width
            },
            get videoUrl() {
                if (!r.config.video.url) throw new Xf("The URL is not available because of the videos privacy settings.", "PrivacyError", "getVideoUrl");
                return r.config.video.url
            },
            get volume() {
                var e = Fs(r.config.request.cookie.volume);
                return 1 === s ? Math.round(100 * e) : e
            },
            set volume(e) {
                if (e = parseFloat(e), 1 === s && (e /= 100), isNaN(e) || e < 0 || 1 < e) throw new Xf("Volume should be a number between 0 and 1.", "RangeError", "setVolume");
                d = e;
                r.events.fire(cs.changeVolume, e, !0)
            },
            get _like() {
                return !!r.config.user.liked
            },
            set _like(e) {
                if (r.config.embed.on_site) {
                    if (r.config.user.liked === e) return;
                    r.events.fire(ds.likeButtonPressed, e)
                }
            },
            get _watchLater() {
                return !!r.config.user.watch_later
            },
            set _watchLater(e) {
                if (r.config.embed.on_site) {
                    if (r.config.user.watch_later === e) return;
                    r.events.fire(ds.watchLaterButtonPressed, e)
                }
            },
            _setOutro: function(e, t) {
                r.config.embed.outro !== e ? (r.events.fire(cs.hideOutro), setTimeout(function() {
                    r.config.embed.outro = e, r.events.fire(cs.showOutro, e, t)
                }, 400)) : r.events.fire(cs.showOutro, e, t)
            },
            _hideOutro: function() {
                r.events.fire(cs.hideOutro)
            },
            _setEmailCapture: function(e) {
                if (e) {
                    if (r.config.embed.email = r.config.embed.email || {}, r.config.embed.email.position = e.position.toLowerCase(), "after" === e.position.toLowerCase()) return r.config.embed.outro = "email", void r.events.fire(cs.showOutro, "email", {
                        version: 2,
                        data: e
                    });
                    r.config.embed.email.timecode = e.timecode, e.nohide = !0, e.noblur = !0, h._showOverlay("email-capture", e)
                } else h._unsetEmailCapture()
            },
            _unsetEmailCapture: function() {
                r.config.embed.outro && (r.events.fire(cs.hideOutro), delete r.config.embed.outro), r.config.embed.email && (r.events.fire(cs.hideOverlay, {
                    unmakeModal: !0
                }), delete r.config.embed.email)
            },
            _showOverlay: function(e, t) {
                r.events.fire(cs.showOverlay, e, t)
            },
            _setEmbedEditor: function(e) {
                r.config.embed.editor = !!e
            },
            _setEmbedSetting: function(e, t) {
                r.config.embed.on_site && (t = "object" === (void 0 === t ? "undefined" : M(t)) ? t : Number(t), "badge" === e && (t ? t = f : f = r.config.embed.settings.badge), r.config.embed.settings[e] = t, r.events.fire(ds.embedSettingChanged, e, t), r.events.fire(cs.reset), r.events.fire(ds.configChanged, !1, r.config))
            },
            _toggleDebugHud: function() {
                r.events.fire(ds.debugButtonPressed)
            },
            get _fieldOfView() {
                var e = r.telecine.getEffectByName("ThreeSixtyEffect");
                if (r.telecine && !e) throw new Xf("Field of view is not available in the current player.", "UnsupportedError", "getFieldOfView");
                return e.fieldOfView
            },
            set _fieldOfView(e) {
                var t = r.telecine.getEffectByName("ThreeSixtyEffect");
                if (r.telecine && !t) throw new Xf("Field of view is not available in the current player.", "UnsupportedError", "setFieldOfView");
                r.telecine.getEffectByName("ThreeSixtyEffect").fieldOfView = e
            },
            get _coordinates() {
                var e = r.telecine.getEffectByName("ThreeSixtyEffect");
                if (r.telecine && !e) throw new Xf("Coordinates are not available in the current player.", "UnsupportedError", "getCoordinates");
                return e.currentCoordinates
            },
            set _coordinates(e) {
                var t = r.telecine.getEffectByName("ThreeSixtyEffect");
                if (r.telecine && !t) throw new Xf("Coordinates are not available in the current player.", "UnsupportedError", "setCoordinates");
                try {
                    r.telecine.getEffectByName("ThreeSixtyEffect").currentCoordinates = e
                } catch (e) {
                    throw new Xf(e.message, "RangeError", "setCoordinates")
                }
            },
            addEventListener: function() {
                h.on.apply(h, arguments)
            },
            removeEventListener: function() {
                h.off.apply(h, arguments)
            },
            seekTo: function(e) {
                h.currentTime = e
            },
            changeColor: function(e) {
                h.color = e
            }
        };
        var v = function(t, n) {
            return function() {
                var e = n ? n.apply(void 0, arguments) : void 0;
                i && i.emit(t, e), a.fire(t, e)
            }
        };

        function p(e) {
            return n ? null : (n = !0, {
                seconds: Fs(e, o),
                percent: Fs(e / r.config.video.duration, o),
                duration: Fs(r.config.video.duration, o)
            })
        }

        function m(e) {
            return n = !1, {
                seconds: Fs(e, o),
                percent: Fs(e / r.config.video.duration, o),
                duration: Fs(r.config.video.duration, o)
            }
        }

        function g() {
            return n = !1, {
                seconds: Fs(r.config.video.duration, o),
                percent: 1,
                duration: Fs(r.config.video.duration, o)
            }
        }

        function y(e) {
            var t = e.currentTime,
                n = e.duration,
                i = e.timeProgress;
            return {
                seconds: Fs(t, o),
                percent: Fs(i, o),
                duration: Fs(n, o)
            }
        }

        function _(e) {
            var t = e.loaded,
                n = e.duration,
                i = e.loadProgress,
                r = {
                    seconds: Fs(t, o),
                    percent: Fs(i, o),
                    duration: Fs(n, o)
                };
            return s < 3 && (r.bytesLoaded = -1, r.bytesTotal = -1), r
        }

        function b(e) {
            var t = e.currentTime,
                n = e.duration,
                i = e.timeProgress;
            return {
                seconds: Fs(t, o),
                percent: Fs(i, o),
                duration: Fs(n, o)
            }
        }

        function w(e) {
            return {
                volume: Fs(e, o)
            }
        }

        function E(e) {
            return {
                playbackRate: e
            }
        }

        function S(e) {
            var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : [],
                n = e || {},
                i = n.language,
                r = void 0 === i ? null : i,
                o = n.label,
                a = void 0 === o ? null : o,
                s = n.kind;
            return {
                label: a,
                language: r,
                kind: void 0 === s ? null : s,
                cues: t
            }
        }

        function k(e) {
            var t = (l = e) || {},
                n = t.language,
                i = void 0 === n ? null : n,
                r = t.label,
                o = void 0 === r ? null : r,
                a = t.kind;
            return {
                label: o,
                language: i,
                kind: void 0 === a ? null : a
            }
        }

        function T(e) {
            return {
                time: e.time,
                data: e.data,
                id: e.id
            }
        }

        function A(e) {
            return {
                visible: e
            }
        }

        function P(e) {
            d && setTimeout(function() {
                r.events.fire(cs.changeVolume, d, !0)
            }, 0), e.isNewVideo && C()
        }

        function C() {
            i.emit(ws.LOADED, c ? null : (c = !0, {
                id: r.config.video.id
            }))
        }

        function x(e) {
            return u = e, t ? L(function(e) {
                switch (e) {
                    case "BrowserNotSupported":
                    case "FilesNotPlayable":
                    case "MediaSrcNotSupportedError":
                        return new Xf("This video is not supported in this browser.", "NotSupportedError");
                    case "FileError":
                        return new Xf("There was an error loading the files for this video.", "FileError")
                }
                return new Xf("An error occurred during playback.", "PlaybackError")
            }(u)) : null
        }

        function L(e) {
            var t = {
                message: "An error occurred.",
                name: "Error",
                method: e.source
            };
            return "ApiError" === e.constructorName && (t = {
                message: e.message,
                name: e.name,
                method: e.source
            }), t
        }

        function O() {
            t = !0, i && i.emit(ws.READY), u && (i && i.emit(ws.ERROR, x(u)), u = null)
        }

        function R() {
            u = null, c = !1
        }
        return e || ((i = new ah(r.config)).listeners = Vs(ws).reduce(function(e, t) {
            return N({}, e, D({}, t, !1))
        }, {}), i.listeners[ws.READY] = !0, i.listeners[ws.ERROR] = !0, i.filter(function(e) {
            return i.listeners[e]
        })), i && (i.extendMethods(h), i.hooks({
            error: function(e) {
                i.emit(ws.ERROR, L(e))
            },
            parseMessage: function(t) {
                if (!t || "" === t) return {};
                if (1 === s && (t = t.replace("api_", "")), tr(t)) return t;
                try {
                    return s = 2, JSON.parse(t)
                } catch (e) {
                    var r = {};
                    return t.split("&").forEach(function(e) {
                        try {
                            var t = e.split("="),
                                n = decodeURIComponent(t[0]),
                                i = decodeURIComponent(t[1]);
                            if ("id" === n) return;
                            "params" === n && (n = "value"), i = i.split(",")[0], r[n] = i
                        } catch (e) {}
                    }), s = 1, r
                }
            },
            buildMessage: function(e) {
                r.config.embed.player_id && (e.player_id = r.config.embed.player_id);
                try {
                    1 === s ? e = function(e) {
                        var t = e.event;
                        for (var n in Es)
                            if (Es[n] === e.event) {
                                t = n;
                                break
                            }
                        var i = "method=" + encodeURIComponent(t || e.method) + "&params=",
                            r = [];
                        if (void 0 !== e.value) r.push(encodeURIComponent(e.value));
                        else if ("object" === M(e.data))
                            for (var o in e.data) r.push(encodeURIComponent(e.data[o]));
                        else void 0 !== e.data && r.push(encodeURIComponent(e.data));
                        return e.player_id && r.push(e.player_id), i += r.join(",")
                    }(e) : 2 === s && (e = function(e) {
                        if (e.event) {
                            for (var t in Ss)
                                if (Ss[t] === e.event) {
                                    e.event = t;
                                    break
                                }
                            "cuechange" === e.event && (e.data.text = e.data.cues[0].text, e.data.html = e.data.cues[0].html, delete e.data.cues)
                        }
                        return JSON.stringify(e)
                    }(e)), tr(e) && "ready" === e.event && (e = JSON.stringify(e))
                } catch (e) {}
                return e
            }
        })), r.events.on(gn.BUFFER_STARTED, v(ws.BUFFER_START)), r.events.on(gn.BUFFER_ENDED, v(ws.BUFFER_END)), r.events.on(gn.CUE_CHANGED, v(ws.CUE_CHANGE, S)), r.events.on(Ce.CUE_POINT, v(ws.CUEPOINT, T)), r.events.on(ds.ended, v(ws.ENDED, g)), r.events.on(ds.error, v(ws.ERROR, h.getError)), r.events.on(xe.EVENT_ENDED, v(ws.LIVE_EVENT_ENDED)), r.events.on(xe.EVENT_STARTED, v(ws.LIVE_EVENT_STARTED)), r.events.on(xe.STREAM_OFFLINE, v(ws.LIVE_STREAM_OFFLINE)), r.events.on(xe.STREAM_ONLINE, v(ws.LIVE_STREAM_ONLINE)), r.events.on(re.MOTION_END, v(ws.MOTION_END)), r.events.on(re.MOTION_START, v(ws.MOTION_START)), r.events.on(ds.paused, v(ws.PAUSE, m)), r.events.on(Pe.PLAY, v(ws.PLAY, p)), r.events.on(ds.playbackRateChanged, v(ws.PLAYBACK_RATE_CHANGE, E)), r.events.on(Pe.PROGRESS, v(ws.PROGRESS, _)), r.events.on(Pe.SEEKED, v(ws.SEEKED, b)), r.events.on(ds.captionsChanged, v(ws.TEXT_TRACK_CHANGE, k)), r.events.on(Pe.TIME_UPDATE, v(ws.TIME_UPDATE, y)), r.events.on(ds.volumeChanged, v(ws.VOLUME_CHANGE, w)), r.events.on(ds.controlBarVisibilityChanged, v(ws.CONTROL_BAR_VISIBILITY_CHANGED, A)), r.events.on(ds.configChanged, P), r.events.once(ds.ready, O), r.events.on(cs.reset, R), !r.doNotTrackEnabled && i && r.events.on(ds.emailCaptureSuccess, function() {
            i.emit({
                event: "emailcapture"
            })
        }), r.events.on(ds.spaceChanged, function() {
            var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
            i && (i.listeners[Event.spaceChanged] = !0, i.emit({
                event: "spacechange",
                data: e
            }))
        }), r.events.fire(ds.apiModuleReady), h
    }

    function lh(e) {
        var i = e.element,
            t = e.delegate,
            o = void 0 === t ? {} : t,
            n = e.cssLoadedPromise,
            r = void 0 === n ? I.resolve(null) : n;
        e.name;
        li.set(Ou);
        var a = Lo(bf, Oo(Sd(), Td(wf), function() {
                for (var e = arguments.length, u = Array(e), t = 0; t < e; t++) u[t] = arguments[t];
                return function(s) {
                    return function(e, t, n) {
                        var i, r = s(e, t, n),
                            o = r.dispatch,
                            a = {
                                getState: r.getState,
                                dispatch: function(e) {
                                    return o(e)
                                }
                            };
                        return i = u.map(function(e) {
                            return e(a)
                        }), o = Oo.apply(void 0, i)(r.dispatch), Ro({}, r, {
                            dispatch: o
                        })
                    }
                }
            }.apply(void 0, []))),
            s = qo(),
            v = new ju({
                events: s
            }),
            u = ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function(e) {
                return (e ^ 16 * Math.random() >> e / 4).toString(16)
            });
        i.classList.add("player-" + u), i.classList.add("loading"), i.id || (i.id = "player" + u), i.innerHTML = Sf.render("outer", {
            strings: {
                back: "Back",
                close: "Close overlay"
            }
        });
        var c = i.querySelector(".vp-telecine");
        if (Oi.iOS) {
            var l = document.createElement("video");
            c.appendChild(l);
            try {
                l.setAttribute("muted", ""), l.setAttribute("playsinline", ""), l.load()
            } catch (e) {
                Ou.captureException(e)
            }
        }
        var d = null,
            f = null,
            h = null,
            p = null,
            m = null,
            g = null,
            y = null,
            _ = {},
            b = void 0,
            w = new I(function(e, t) {
                b = e
            }).then(function() {
                return s.fire(ds.ready), null
            }),
            E = {
                get config() {
                    return v.config
                },
                set config(e) {
                    v.config = e
                },
                get delegate() {
                    return o
                },
                set delegate(e) {
                    o = e
                },
                ready: function(e) {
                    if (!e) return w;
                    w.then(function() {
                        return e()
                    }).catch(function(e) {
                        Ou.captureException(e)
                    })
                },
                get sessionId() {
                    return v.config.request.session
                }
            };

        function S(e) {
            var t = e.old,
                n = e.loaded;
            if (!t);
            if (window.parent !== window) {
                var i = "Private Video on Vimeo";
                n.view !== bs.main && n.view !== bs.privateUnlocked || (i = n.video.title + " from " + n.video.owner.name + " on Vimeo"), document.title = i, history && history.replaceState && n.video && t && history.replaceState({
                    id: n.video.id
                }, "", "/video/" + n.video.id + window.location.search)
            }
            if (n.view !== bs.main && n.view !== bs.privateUnlocked) throw new Error("Config not authorized: " + n.view);
            t && t.embed && t.embed.color !== n.embed.color && s.fire(cs.changeColor, n.embed.color), p && p.reset();
            var r = !t || !t.video || t.video.id !== n.video.id || t.video.version.current !== n.video.version.current;
            return m = null, s.fire(cs.reset), a.dispatch(Uc(n)), s.fire(ds.configChanged, r, n), e
        }

        function k(e) {
            if ("opacity" === e.propertyName) {
                var t = document.querySelector(".vp-placeholder");
                t && (il(t).off("transitionend", k), t.parentNode.removeChild(t))
            }
        }

        function T() {
            window.requestAnimationFrame(function() {
                ! function() {
                    var e = document.querySelector(".vp-placeholder");
                    e && (il(e).on("transitionend", k), e.classList.add("vp-placeholder-fadeout"))
                }(), i.classList.remove("loading")
            }), b()
        }

        function A(e) {
            return r.then(function() {
                if (x(e), f && f.resetThumbnail(), "function" != typeof _.authorizationHandler) throw new Error("Config was not authorized.");
                return _.authorizationHandler(T)
            }).then(function(e) {
                v.config = e;
                return m = null, a.dispatch(Uc(v.config)), s.fire(cs.reset), s.fire(ds.configChanged, !0, v.config), e
            })
        }

        function P() {
            var e = document.location.hash,
                t = function(e) {
                    var t = e.match(/\ba?t=([0-9hms:]+)/);
                    null !== t && (e = t[1]);
                    var n = !1,
                        i = 0,
                        r = 0,
                        o = 0;
                    if ((t = e.match(/^([0-9]+)$/)) && t.length && (n = !0, o = t[1]), !1 === n && null !== (t = e.match(/^(?:([0-9]+)h)?(?:([0-9]+)m)?(?:([0-9]+)s)?/)) && "" !== t[0]) {
                        n = !0;
                        var a = Te(t, 4),
                            s = a[1];
                        i = void 0 === s ? 0 : s;
                        var u = a[2];
                        r = void 0 === u ? 0 : u;
                        var c = a[3];
                        o = void 0 === c ? 0 : c
                    }
                    if (!1 === n && null !== (t = e.match(/^([0-9:]+)/))) {
                        n = !0;
                        var l = e.split(":").reverse(),
                            d = Te(l, 3);
                        o = d[0];
                        var f = d[1];
                        r = void 0 === f ? 0 : f;
                        var h = d[2];
                        i = void 0 === h ? 0 : h
                    }
                    return n ? 60 * parseInt(i, 10) * 60 + 60 * parseInt(r, 10) + parseInt(o, 10) : null
                }(e);
            null !== t && (v.config.embed.time = Is(t, 0, v.config.video.duration), -1 !== e.indexOf("at=") && history && history.replaceState && history.replaceState("", "", window.location.pathname + window.location.search))
        }

        function C(e) {
            P(), s.on(ds.userLogIn, function(t) {
                    v.reload().then(function(e) {
                        if (!v.config.user.logged_in) return s.fire(ds.loginFailure), e;
                        switch (s.fire(ds.userLoggedIn, t), t) {
                            case "like":
                                v.config.user.liked && s.fire(ds.liked);
                                break;
                            case "watch-later":
                                v.config.user.watch_later && s.fire(ds.addedToWatchLater);
                                break;
                            case "private":
                                s.fire(ds.privateUnlocked)
                        }
                        return e
                    }).catch(function(e) {
                        Ou.captureException(e)
                    })
                }), s.on(ds.userLoggedOut, function() {
                    v.reload().catch(function(e) {
                        Ou.captureException(e)
                    })
                }),
                function(e) {
                    new Kf(s, a, i), f = new kc(e, a, i.querySelector(".vp-preview")), s.on([gn.BUFFER_ENDED, Pe.PLAYING], function() {
                        f.hide()
                    }), d = new _i(c, v.config), new nl(e, a, i.querySelector(".vp-video-wrapper")), new Ef(e, a, i.querySelector(".vp-captions")), new md(e, a), new Ed(e, a), new gd(e, i, a), new kf(i, s), p = new xc(e), e.config.request.ab_tests && e.config.request.ab_tests.chromecast && e.config.request.ab_tests.chromecast.group && function(e) {
                        if (e.config.video.spatial) return;
                        var t = new pd({
                            textAlert: new cd(i),
                            player: e
                        });
                        hd.init({
                            chromecastPlayer: t
                        }), hd.on([sd.error, sd.mediaLoadedFailed], function(e) {
                            Ou.captureException(e)
                        })
                    }(e);
                    x(e)
                }(e)
        }

        function x(e) {
            h || (h = new ch(e), Tf(E, h), oh.set(Ou))
        }
        var L = {
            get store() {
                return a
            },
            get config() {
                return v.config
            },
            get element() {
                return i
            },
            get events() {
                return s
            },
            get uuid() {
                return u
            },
            get expose() {
                return E
            },
            get backbone() {
                return d
            },
            get telecine() {
                return d && d.telecine
            },
            get preview() {
                return f
            },
            get doNotTrackEnabled() {
                return v.config.embed.dnt || v.config.request.flags.dnt
            },
            get playLoggingEnabled() {
                return v.config.embed.log_plays && v.config.request.flags.plays
            },
            init: function(e, t) {
                return g || (_ = t, g = v.load(e).then(S).catch(function(e) {
                    return A(L)
                }).then(function() {
                    return Ou.setUp(v.config), null
                }).then(function() {
                    return "function" == typeof _.initializationHandler ? I.resolve(t.initializationHandler()) : null
                }).then(function() {
                    return C(L), "function" == typeof _.postInitializationHandler ? I.resolve(t.postInitializationHandler()) : null
                }).then(function() {
                    return I.all([f.thumbnailPromise, r])
                }).then(T).catch(function(e) {
                    Ou.captureException(e)
                }))
            },
            loadVideo: function(e, t) {
                if (y === e && m) return m;
                if (t && t.video_version) {
                    var n = v.config.video.version.available;
                    if (!n || !Array.isArray(n)) return I.reject("No available video versions");
                    if (-1 === (n = n.map(function(e) {
                            return e.id
                        })).indexOf(t.video_version)) return I.reject("Invalid version id specified")
                }
                return s.fire(ds.loadVideo), y = e, i.classList.add("loading"), m = v.load(e, t).then(S).catch(function(e) {
                    return Ou.captureException(e), A(L)
                }).then(function(e) {
                    var t = f.loadThumbnail();
                    return I.resolve(t)
                }).then(T)
            },
            performDelegateAction: function(e) {
                var t, n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : function() {},
                    i = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : [],
                    r = void 0;
                if (o && o[e.will] && !1 === (r = (t = o)[e.will].apply(t, [v.config.video.id].concat(i)))) return;
                n.apply(void 0, [v.config.video.id].concat(i, [r])), o && o[e.did] && o[e.did]()
            },
            ready: function() {
                return w
            },
            verifyConfig: function() {
                return v.verify()
            },
            updatePhpTokens: function() {
                return new I(function(t, n) {
                    var e = v.config.user,
                        i = e.vimeo_api_client_token,
                        r = e.vimeo_api_interaction_tokens,
                        o = !1;
                    if (i) try {
                        o = 0 <= td(JSON.parse(atob(i.split(".")[1])).exp)
                    } catch (e) {
                        return void n("Failed to parse PHP client token expiration")
                    }
                    if (r) try {
                        var a = JSON.parse(atob(r.likes.split(".")[1])).exp,
                            s = JSON.parse(atob(r.watch_later.split(".")[1])).exp,
                            u = JSON.parse(atob(r.following.split(".")[1])).exp;
                        o = 0 <= td(a) || 0 <= td(s) || 0 <= td(u)
                    } catch (e) {
                        return void n("Failed to parse PHP interaction tokens expiration")
                    }
                    if (o) {
                        var c = v.config.request,
                            l = c.signature,
                            d = c.session,
                            f = c.timestamp,
                            h = c.expires;
                        Ds("https://" + v.config.player_url + "/video/" + v.config.video.id + "/token/refresh?signature=" + l + "&session=" + d + "&time=" + f + "&expires=" + h).then(function(e) {
                            return e = JSON.parse(e), v.config.user.vimeo_api_client_token = e ? e.vimeo_api_client_token : null, v.config.user.vimeo_api_interaction_tokens = e ? e.vimeo_api_interaction_tokens : null, t()
                        }).catch(function(e) {
                            n("Failed to refresh JWT token: " + e)
                        })
                    } else t()
                })
            }
        };
        return L
    }
    sh.prototype = {
        get complement() {
            var e = this.clone();
            return e.rgb = {
                red: 255 - this.red,
                green: 255 - this.green,
                blue: 255 - this.blue
            }, e
        },
        get hex() {
            return sh.rgbToHex(this.red, this.green, this.blue)
        },
        set hex(e) {
            return this.rgba = sh.hexToRgb(e), this
        },
        get hsl() {
            return "hsl(" + this.hue + "," + this.saturation + "%," + Math.round(this.lightness) + "%)"
        },
        set hsl(e) {
            this.hue = e.hue, this.saturation = e.saturation, this.lightness = e.lightness;
            var t = sh.hslToRgb(e.hue, e.saturation, e.lightness);
            return this.red = t.red, this.green = t.green, this.blue = t.blue, this.alpha = t.alpha, this
        },
        get luminance() {
            function e(e) {
                return e <= .03928 ? e / 12.92 : Math.pow((e + .055) / 1.055, 2.4)
            }
            return .2126 * e(this.red / 255) + .7152 * e(this.green / 255) + .0722 * e(this.blue / 255)
        },
        get rgb() {
            return "rgb(" + this.red + "," + this.green + "," + this.blue + ")"
        },
        set rgb(e) {
            return this.rgba = e, this
        },
        get rgba() {
            return "rgba(" + this.red + "," + this.green + "," + this.blue + "," + this.alpha + ")"
        },
        set rgba(e) {
            this.red = e.red, this.green = e.green, this.blue = e.blue, this.alpha = e.alpha || 1;
            var t = sh.rgbToHsl(e.red, e.green, e.blue);
            return this.hue = t.hue, this.saturation = t.saturation, this.lightness = t.lightness, this
        },
        get yiq() {
            return (299 * this.red + 587 * this.green + 114 * this.blue) / 1e3
        },
        clone: function() {
            return new sh(this)
        },
        lighten: function(e, t, n) {
            if (this.hsl = {
                    hue: this.hue,
                    saturation: this.saturation,
                    lightness: this.lightness + e
                }, t && n)
                for (var i = n.contrast(this).ratio; i < t && (this.lighten(5), i = n.contrast(this).ratio, !(100 <= this.lightness)););
            return this
        },
        darken: function(e, t, n) {
            if (this.hsl = {
                    hue: this.hue,
                    saturation: this.saturation,
                    lightness: this.lightness - e
                }, t && n)
                for (var i = n.contrast(this).ratio; i < t && (this.darken(5), i = n.contrast(this).ratio, !(this.lightness <= 0)););
            return this
        },
        overlayOn: function(e) {
            if (1 <= this.alpha) return this;
            var t = this.clone();
            return t.rgba = {
                red: t.red * this.alpha + e.red * e.alpha * (1 - this.alpha),
                green: t.green * this.alpha + e.green * e.alpha * (1 - this.alpha),
                blue: t.blue * this.alpha + e.blue * e.alpha * (1 - this.alpha),
                alpha: t.alpha + e.alpha * (1 - this.alpha)
            }, t
        },
        contrast: function(e) {
            var t = this.alpha;
            if (1 <= t) {
                e.alpha < 1 && (e = e.overlayOn(this));
                var n = this.luminance + .05,
                    i = e.luminance + .05,
                    r = n / i;
                return n < i && (r = 1 / r), {
                    ratio: r = Math.round(10 * r) / 10,
                    error: 0,
                    min: r,
                    max: r
                }
            }
            var o = this.overlayOn(sh.white).contrast(e).ratio,
                a = this.overlayOn(sh.black).contrast(e).ratio,
                s = Math.max(o, a),
                u = {
                    red: Math.min(Math.max(0, (e.red - this.red * t) / (1 - t)), 255),
                    green: Math.min(Math.max(0, (e.green - this.green * t) / (1 - t)), 255),
                    blue: Math.min(Math.max(0, (e.blue - this.blue * t) / (1 - t)), 255)
                },
                c = this.clone();
            c.rgb = u;
            var l = this.overlayOn(c).contrast(e).ratio;
            return {
                ratio: Math.round((l + s) / 2 * 10) / 10,
                error: Math.round((s - l) / 2 * 10) / 10,
                min: l,
                max: s,
                closest: c,
                farthest: a === s ? sh.white : sh.black
            }
        },
        wcagAACompliant: function(e) {
            return 4.5 <= this.contrast(e).ratio
        },
        wcagAAACompliant: function(e) {
            return 7 <= this.contrast(e).ratio
        },
        yiqContrastColor: function() {
            return 120 <= this.yiq ? new sh(0, 0, 0) : new sh(255, 255, 255)
        }
    }, sh.hexToRgb = function(e) {
        var t;
        return 3 === (e = String(e)).length || 4 === e.length ? (t = /^#?([A-Fa-f0-9])([A-Fa-f0-9])([A-Fa-f0-9])$/i.exec(e)) && (t[1] += t[1], t[2] += t[2], t[3] += t[3]) : t = /^#?([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})$/i.exec(e), t ? {
            red: parseInt(t[1], 16),
            green: parseInt(t[2], 16),
            blue: parseInt(t[3], 16),
            alpha: 1
        } : null
    }, sh.rgbToHex = function(e, t, n) {
        return "#" + ((1 << 24) + (Math.round(e) << 16) + (Math.round(t) << 8) + Math.round(n)).toString(16).slice(1)
    }, sh.rgbToHsl = function(e, t, n) {
        e /= 255, t /= 255, n /= 255;
        var i, r = Math.max(e, t, n),
            o = Math.min(e, t, n),
            a = (r + o) / 2,
            s = a;
        if (r === o) return {
            hue: 0,
            saturation: 0,
            lightness: 100 * s
        };
        var u = r - o;
        return i = .5 < s ? u / (2 - r - o) : u / (r + o), r === e ? a = (t - n) / u + (t < n ? 6 : 0) : r === t ? a = (n - e) / u + 2 : r === n && (a = (e - t) / u + 4), a /= 6, {
            hue: Math.round(360 * a),
            saturation: Math.round(100 * i),
            lightness: Math.round(100 * s)
        }
    }, sh.hslToRgb = function(e, t, n) {
        function i(e, t, n) {
            return n < 0 && (n += 1), 1 < n && (n -= 1), 6 * n < 1 ? e + 6 * (t - e) * n : 2 * n < 1 ? t : 3 * n < 2 ? e + 6 * (2 / 3 - n) * (t - e) : e
        }
        if (e /= 360, n /= 100, 0 === (t /= 100)) return {
            red: Math.floor(255 * n),
            green: Math.floor(255 * n),
            blue: Math.floor(255 * n)
        };
        var r = n < .5 ? n * (1 + t) : n + t - t * n,
            o = 2 * n - r;
        return {
            red: Math.floor(255 * i(o, r, e + 1 / 3)),
            green: Math.floor(255 * i(o, r, e)),
            blue: Math.floor(255 * i(o, r, e - 1 / 3))
        }
    }, sh.hslToHex = function(e, t, n) {
        var i = sh.hslToRgb(e, t, n);
        return sh.rgbToHex(i.red, i.green, i.blue)
    }, sh.white = new sh("fff"), sh.black = new sh("000");
    var dh = t(function(x) {
        ! function(r, a, o) {
            var t = /i(Pad|Phone|Pod)/.test(navigator.userAgent) && 7 <= parseInt(navigator.userAgent.replace(/^.*OS (\d+)_(\d+).*$/, "$1.$2"), 10),
                s = function() {
                    var e = a.createElement("video"),
                        t = {
                            request: ["requestFullscreen", "webkitRequestFullscreen", "webkitRequestFullScreen", "mozRequestFullScreen", "msRequestFullscreen"],
                            exit: ["exitFullscreen", "webkitCancelFullScreen", "webkitExitFullscreen", "mozCancelFullScreen", "msExitFullscreen"],
                            enabled: ["fullscreenEnabled", "webkitFullscreenEnabled", "mozFullScreenEnabled", "msFullscreenEnabled"],
                            element: ["fullscreenElement", "webkitFullscreenElement", "webkitCurrentFullScreenElement", "mozFullScreenElement", "msFullscreenElement"],
                            change: ["fullscreenchange", "webkitfullscreenchange", "mozfullscreenchange", "MSFullscreenChange"],
                            error: ["fullscreenerror", "webkitfullscreenerror", "mozfullscreenerror", "MSFullscreenError"]
                        },
                        n = {};
                    for (var i in t)
                        for (var r = 0, o = t[i].length; r < o; r++)
                            if (t[i][r] in e || t[i][r] in a || "on" + t[i][r].toLowerCase() in a) {
                                n[i] = t[i][r];
                                break
                            }
                    return n
                }(),
                u = {
                    ENTER: "enter",
                    EXIT: "exit",
                    CHANGE: "change",
                    ERROR: "error"
                },
                i = [],
                c = {},
                l = null;

            function d() {
                var t = Array.prototype.slice.apply(arguments),
                    e = t.shift();
                c[e].forEach(function(e) {
                    "function" == typeof e && e.apply(e, t)
                })
            }

            function e(n) {
                return function(e, t) {
                    -1 !== i.indexOf(e) && n.call(this, e, t)
                }
            }

            function f(e) {
                var t = null;
                if ("VIDEO" === e.tagName) t = e;
                else {
                    var n = e.getElementsByTagName("video");
                    n[0] && (t = n[0])
                }
                return t
            }
            Object.keys(u).forEach(function(e) {
                i.push(u[e]), c[u[e]] = []
            });
            var h = null,
                v = null,
                p = function() {},
                m = [],
                g = !1,
                y = !1,
                n = -1 !== navigator.userAgent.indexOf("Chrome"),
                _ = -1 !== navigator.userAgent.indexOf("Android"),
                b = -1 !== navigator.userAgent.indexOf("Safari"),
                w = -1 !== navigator.userAgent.indexOf("Apple");

            function E(t) {
                var n = f(t);
                if (n && n.webkitEnterFullscreen) {
                    try {
                        n.readyState < n.HAVE_METADATA ? (n.addEventListener("loadedmetadata", function e() {
                            n.removeEventListener("loadedmetadata", e, !1);
                            try {
                                n.webkitEnterFullscreen(), v = !!n.getAttribute("controls")
                            } catch (e) {
                                return P("cannot_enter_fullscreen", t)
                            }
                        }, !1), n.load()) : (n.webkitEnterFullscreen(), v = !!n.getAttribute("controls")), h = n
                    } catch (e) {
                        return P("not_supported", t)
                    }
                    return !0
                }
                return P(void 0 === s.request ? "not_supported" : "not_enabled", t)
            }

            function S() {
                C.element || (A(), k())
            }

            function k() {
                o && "webkitfullscreenchange" === s.change && r.removeEventListener("resize", S, !1)
            }
            n && _ && (g = parseInt(navigator.userAgent.replace(/^.*Chrome\/(\d+).*$/, "$1"), 10) || !0), b && w && !n && !_ && (y = parseFloat(navigator.userAgent.replace(/^.*Version\/(\d+)\.(\d+).*$/, "$1.$2")) || !0);
            var T = function(e) {
                    var t = m[m.length - 1];
                    t && (e !== t.element && e !== h || !t.hasEntered) && ("VIDEO" === e.tagName && (h = e), 1 === m.length && C.onenter(C.element), t.enter.call(t.element, e || t.element), t.hasEntered = !0, d(u.ENTER, C.element))
                },
                A = function() {
                    !h || v || t || (h.setAttribute("controls", "controls"), h.removeAttribute("controls")), v = h = null;
                    var e = m.pop();
                    e && (e.exit.call(e.element), d(u.EXIT, e.element), !o && l && 0 === r.scrollY && r.scrollTo(0, l), C.element || (m.forEach(function(e) {
                        e.exit.call(e.element), d(u.EXIT, e.element)
                    }), m = [], C.onexit()))
                },
                P = function(e, t) {
                    if (0 < m.length) {
                        var n = m.pop();
                        t = t || n.element, n.error.call(t, e), C.onerror(t, e), d(u.ERROR, t, e)
                    }
                },
                C = {
                    request: function(t, e, n, i) {
                        if (t = t || a.body, m.push({
                                element: t,
                                enter: e || p,
                                exit: n || p,
                                error: i || p
                            }), void 0 === s.request) return E(t);
                        if (o && !1 === a[s.enabled]) return E(t);
                        if (!1 !== g && g < 32) return E(t);
                        if (o && void 0 === s.enabled) return s.enabled = "webkitFullscreenEnabled", t[s.request](), void setTimeout(function() {
                            a[s.element] ? a[s.enabled] = !0 : (a[s.enabled] = !1, E(t))
                        }, 250);
                        try {
                            !o && r && (l = r.scrollY), t[s.request](), 5.1 <= y && setTimeout(function() {
                                a[s.element] || P(o ? "not_enabled" : "not_allowed", t)
                            }, 100)
                        } catch (e) {
                            P("not_enabled", t)
                        }
                    },
                    exit: function() {
                        k(), !a[s.exit] && C.element ? C.element[s.exit]() : a[s.exit]()
                    },
                    toggle: function(e, t, n, i) {
                        C.element ? C.exit() : C.request(e, t, n, i)
                    },
                    videoEnabled: function(e) {
                        if (C.enabled) return !0;
                        var t = f(e = e || a.body);
                        return !(!t || void 0 === t.webkitSupportsFullscreen) && (t.readyState < t.HAVE_METADATA ? "maybe" : t.webkitSupportsFullscreen)
                    },
                    on: e(function(e, t) {
                        c[e].push(t)
                    }),
                    off: e(function(e, t) {
                        var n = c[e].indexOf(t); - 1 < n && c[e].splice(n, 1)
                    }),
                    onenter: p,
                    onexit: p,
                    onchange: p,
                    onerror: p
                };
            try {
                Object.defineProperties(C, {
                    element: {
                        enumerable: !0,
                        get: function() {
                            return h && h.webkitDisplayingFullscreen ? h : a[s.element] || null
                        }
                    },
                    enabled: {
                        enumerable: !0,
                        get: function() {
                            return "webkitCancelFullScreen" === s.exit && !o || !(!1 !== g && g < 32) && (a[s.enabled] || !1)
                        }
                    }
                })
            } catch (e) {
                C.element = null, C.enabled = !1
            }
            s.change && a.addEventListener(s.change, function(e) {
                if (C.onchange(C.element), d(u.CHANGE, C.element), C.element) {
                    var t = m[m.length - 2];
                    t && t.element === C.element ? A() : (T(C.element), o && "webkitfullscreenchange" === s.change && r.addEventListener("resize", S, !1))
                } else A()
            }, !1), a.addEventListener("webkitbeginfullscreen", function(e) {
                var t = !0;
                if (0 < m.length)
                    for (var n = 0, i = m.length; n < i; n++) {
                        if (f(m[n].element) === e.srcElement) {
                            t = !1;
                            break
                        }
                    }
                t && m.push({
                    element: e.srcElement,
                    enter: p,
                    exit: p,
                    error: p
                }), C.onchange(e.srcElement), d(u.CHANGE, C.srcElement), T(e.srcElement)
            }, !0), a.addEventListener("webkitendfullscreen", function(e) {
                C.onchange(e.srcElement), d(u.CHANGE, e.srcElement), A(e.srcElement)
            }, !0), s.error && a.addEventListener(s.error, function(e) {
                P("not_allowed")
            }, !1), x.exports ? x.exports = C : r.BigScreen = C
        }(window, document, self !== top)
    });

    function fh(e, t, o, a) {
        var s = !1;
        a = "function" == typeof t ? o : a, o = "function" == typeof t ? t : o;
        var n = function(e) {
                var t = !0;
                if (e.changedTouches) {
                    var n = e.changedTouches[0].pageX - window.pageXOffset,
                        i = e.changedTouches[0].pageY - window.pageYOffset,
                        r = document.elementFromPoint(n, i);
                    null !== r && this.contains(r) && (t = o.call(this, e))
                }
                return "function" == typeof a && a.call(this, e), s = !0, t
            },
            i = function(e) {
                if (!s) return o.call(this, e);
                s = !1
            };
        (t = "function" == typeof t ? null : t) ? il(e).on("click", t, i).on("touchend", t, n): il(e).on("click", i).on("touchend", n)
    }

    function hh(e, n) {
        var t = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : [],
            i = [],
            r = void 0,
            o = void 0,
            a = !1;

        function s() {
            return r.classList.contains("vp-menu-carousel")
        }

        function u() {
            var t = 1 < i.length && !s();
            i.forEach(function(e) {
                e.setCollapsible(t), e.resetCarousel(s())
            })
        }

        function c(e) {
            i.push(e), r.appendChild(e.element), u(), e.on("open", l), e.on(["open", "close"], d), e.on(["openEnd", "closeEnd"], f), e.on("select", p)
        }

        function l(e) {
            i.filter(function(e) {
                return e.isOpen()
            }).forEach(function(e) {
                return e.close()
            })
        }

        function d(e) {
            a = !0, y()
        }

        function f(e) {
            a = !1
        }

        function h() {
            return n && "true" === n.getAttribute("aria-expanded")
        }

        function v(t) {
            h() || (t = t || n.contains(document.activeElement), n.setAttribute("aria-expanded", "true"), r.removeAttribute("hidden"), e.events.fire(ds.menuVisibilityChanged, !0, o), g(), u(), r.classList.remove("vp-menu-hidden"), window.requestAnimationFrame(function() {
                if (r.classList.remove("vp-menu-invisible"), t) {
                    var e = _();
                    0 < e.length && e[0].focus()
                }
            }))
        }

        function p() {
            s() || m()
        }

        function m() {
            h() && (n.setAttribute("aria-expanded", "false"), e.events.fire(ds.menuVisibilityChanged, !1, o), r.classList.add("vp-menu-invisible"))
        }

        function g() {
            var e = Ls(r),
                t = window.getComputedStyle(r),
                n = parseFloat(t.fontSize);
            if (e.bottom - r.scrollHeight < 10) {
                var i = e.bottom - 10;
                return r.style.height = i / n + "em", void r.classList.add("vp-menu-scroll")
            }
            r.style.height = "auto", r.classList.remove("vp-menu-scroll")
        }

        function y() {
            g(), a && requestAnimationFrame(y)
        }

        function _() {
            return i.reduce(function(e, t) {
                return e.concat(t.getTabindexItems())
            }, [])
        }
        return r = function() {
            var e = document.createElement("div");
            return e.innerHTML = Sf.render("menu", {
                strings: {
                    close: "Close menu"
                }
            }), e.children[0]
        }(), t.forEach(c), fh(r, ".js-menuClose", m), il(window).on("resize", g), il(r).on("transitionend", function(e) {
            this === r && "opacity" === e.propertyName && r.classList.contains("vp-menu-invisible") && (r.classList.add("vp-menu-hidden"), r.setAttribute("hidden", ""))
        }), il(document).on("click", function(e) {
            null !== n && (!h() || n.contains(e.target) || r.contains(e.target) || m())
        }), window.addEventListener("blur", m, !1), o = {
            element: r,
            button: n,
            isCentered: function() {
                return r.classList.contains("vp-menu-center")
            },
            isVisible: h,
            show: v,
            hide: m,
            toggle: function(e) {
                return h() ? (m(), !1) : (v(e), !0)
            },
            setPanelModes: u,
            addPanel: c,
            getPanel: function(t) {
                return i.find(function(e) {
                    return e.id === t
                })
            },
            getTabindexItems: _,
            destroy: function() {
                il(window).off("resize", g)
            }
        }
    }

    function vh(r) {
        qo(this);
        var o = this,
            a = {
                x: 0,
                y: 0
            },
            s = {
                x: 0,
                y: 0
            },
            u = {
                x: 0,
                y: 0
            },
            c = void 0,
            l = void 0,
            d = void 0,
            i = 0;

        function f(e) {
            r.style[Oi.transitionProperty + "Duration"] = e
        }

        function h(e) {
            var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 0,
                n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : r.children.length - 1,
                i = -Math.round(e / v());
            return Math.min(Math.max(i, t), n)
        }

        function t() {
            return !1
        }

        function v() {
            var e = r.children[0],
                t = getComputedStyle(e);
            return e.offsetWidth + parseInt(t.marginLeft, 10) + parseInt(t.marginRight, 10)
        }

        function p(e) {
            var t = [e.clientX, e.clientY],
                n = t[0],
                i = t[1];
            if (e.targetTouches && 0 < e.targetTouches.length) {
                var r = [e.touches[0].pageX, e.touches[0].pageY];
                n = r[0], i = r[1]
            }
            return {
                x: n,
                y: i
            }
        }

        function n(e) {
            e.stopImmediatePropagation();
            var t = p(e),
                n = t.x,
                i = t.y;
            s.x = n - a.x, s.y = i - a.y, c = !1, (d = function(i) {
                return function(e) {
                    var t = e ? "on" : "off",
                        n = {
                            pointerdown: ["pointermove", "pointerup"],
                            MSPointerDown: ["pointermove", "pointerup"],
                            touchstart: ["touchmove", "touchend"],
                            mousedown: ["mousemove", "mouseup"]
                        };
                    il(window)[t](n[i.type][0], m), il(window)[t](n[i.type][1], g)
                }
            }(e))(!0), f("0ms")
        }

        function m(e) {
            var t = p(e),
                n = t.x,
                i = t.y;
            if (u.x = a.x, u.y = a.y, a.x = n - s.x, a.y = i - s.y, Math.abs(a.x - u.x) >= .15 * Math.abs(a.y - u.y)) return e.preventDefault(), c = !0, o.fire("touchMove"), l = Date.now(), void w(a.x);
            d(!1), y(h(a.x))
        }

        function g(e) {
            if (e.stopImmediatePropagation(), d(!1), c) {
                e.preventDefault();
                var t = a.x - u.x,
                    n = Date.now() - l + 1;
                return a.x += 50 * t / n, y(h(a.x)), void o.fire("touchEnded")
            }! function(e) {
                e.preventDefault();
                var t = Us(e.target, r.children);
                if (-1 !== t) {
                    if (t !== i) return y(t);
                    o.fire("tap", t)
                }
            }(e)
        }

        function y(e) {
            b(e), o.fire("slide", e)
        }

        function _() {
            b(i, "0ms")
        }

        function b(e) {
            var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "",
                n = v(); - 1 !== e && 0 < n && (f(t), a.x = -e * n, w(a.x))
        }

        function w(e) {
            var t = h(e, -1, r.children.length);
            t !== i && (o.fire("focus", t), i = t), r.style[Oi.transformProperty] = "translateX(" + e + "px)"
        }
        return {
            setUp: function(e) {
                il(r).on(Oi.pointerEvents ? "pointerdown" : ["touchstart", "mousedown"], n), il(r).on("click", "a", t), il(window).on("resize", _), _(),
                    function(e) {
                        void 0 !== e && b(e, "0ms")
                    }(e)
            },
            show: function(e) {
                b(qs(e))
            },
            resize: _,
            destroy: function() {
                il(r).off(Oi.pointerEvents ? "pointerdown" : ["touchstart", "mousedown"], n), il(r).off("click", "a", t), il(window).off("resize", _), r.style.removeProperty(Oi.transformProperty)
            },
            on: this.on
        }
    }

    function ph(n) {
        var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
            r = qo(),
            e = t.id,
            o = t.items,
            a = void 0,
            s = void 0,
            i = void 0,
            u = !1,
            c = void 0,
            l = void 0;

        function d(e) {
            var t = ke(a.querySelectorAll(".vp-panel-item"));
            return t[e] || t
        }

        function f() {
            return a.classList.contains("vp-panel-collapsible")
        }

        function h() {
            return a.classList.contains("vp-panel-open")
        }

        function v() {
            if (f()) {
                r.fire("open", c), n.events.fire(ds.menuPanelOpened, !0, c), s.removeAttribute("hidden"), a.classList.add("vp-panel-open");
                var e = window.getComputedStyle(a),
                    t = parseFloat(e.fontSize);
                a.style.height = a.scrollHeight / t + "em";
                var i = Oi.transitionProperty + "Delay";
                d().forEach(function(e, t) {
                    var n = 40 * t + 100;
                    e.style[i] = n + "ms", e.classList.add("vp-panel-item-in")
                })
            }
        }

        function p() {
            f() && (r.fire("close", c), n.events.fire(ds.menuPanelClosed, !1, c), a.classList.remove("vp-panel-open"), a.style.removeProperty("height"))
        }

        function m(e) {
            return e.preventDefault(), h() ? p() : v()
        }

        function g(e) {
            r.fire("select", o[e].id)
        }

        function y(e) {
            r.fire("select", o[e].id)
        }

        function _(e) {
            if (!u) {
                var t = Us(e.target, d());
                r.fire("select", o[t].id)
            }
        }

        function b(e) {
            if ("keypress" === e.type && 13 === e.which || "keydown" === e.type && 32 === e.which) {
                var t = Us(e.target, d());
                if (-1 !== t) return r.fire("select", o[t].id), !1
            }
            return null
        }

        function w() {
            return o.find(function(e) {
                return e.active
            })
        }
        return t = Object.assign(t, {
            get active() {
                return w() ? w().label : ""
            }
        }), a = function() {
            var e = document.createElement("div");
            return e.innerHTML = Sf.render("menu_list_panel", t), e.children[0]
        }(), s = a.querySelector(".js-panelItems"), (i = new vh(s)).on("slide", g), i.on("tap", y), fh(a, ".js-panelTitleButton", m), fh(a, "li", _), il(a).on("keydown", b), il(a).on("keypress", b), il(a).on("transitionend", function(e) {
            e.target === a && (h() ? r.fire("openEnd", c) : (s.setAttribute("hidden", ""), d().forEach(function(e, t) {
                e.classList.remove("vp-panel-item-in")
            }), r.fire("closeEnd", c)))
        }), c = {
            id: e,
            element: a,
            setCollapsible: function(e) {
                e !== f() && (a.classList.toggle("vp-panel-open", !e), a.classList.toggle("vp-panel-collapsible", e), e ? s.setAttribute("hidden", "") : (s.removeAttribute("hidden"), a.style.removeProperty("height")))
            },
            resetCarousel: function(e) {
                if (u = e, l = a.querySelector(".vp-indicator"), i.destroy(), l.classList.remove("vp-indicator-visible"), u) {
                    var t = o.findIndex(function(e) {
                        return e.active
                    });
                    i.setUp(t), i.on("touchMove", function() {
                        l.classList.add("vp-indicator-inactive")
                    }), i.on("touchEnded", function() {
                        l.classList.remove("vp-indicator-inactive")
                    }), l.classList.add("vp-indicator-visible")
                }
            },
            pinTitle: function() {
                a.classList.add("vp-panel-pinTitle")
            },
            isOpen: h,
            open: v,
            close: p,
            setActiveItem: function(t) {
                var e = o.findIndex(function(e) {
                    return e.active
                });
                if (-1 !== e) {
                    o[e].active = !1;
                    var n = d(e);
                    n.classList.remove("vp-panel-item-on"), n.setAttribute("aria-checked", "false")
                }
                var i = o.findIndex(function(e) {
                    return "" + e.id == "" + t
                });
                if (-1 !== i) {
                    o[i].active = !0;
                    var r = d(i);
                    r.classList.add("vp-panel-item-on"), r.setAttribute("aria-checked", "true"), a.querySelector(".js-panelStatText").innerHTML = o[i].label
                }
                l.classList.remove("vp-indicator-inactive")
            },
            setTitleStat: function(e) {
                w() && "auto" !== w().id || (a.querySelector(".js-panelStatText").innerHTML = e)
            },
            getTabindexItems: function() {
                return ke(a.querySelectorAll('.vp-panel-collapsible button[tabindex="0"], .vp-panel-open li[tabindex="0"]'))
            },
            on: r.on,
            off: r.off
        }
    }

    function mh() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[n];
        (function(t) {
            yh(t);
            for (var e = arguments.length, n = Array(1 < e ? e - 1 : 0), i = 1; i < e; i++) n[i - 1] = arguments[i];
            n.forEach(function(e) {
                _h(e), e.classList.remove(t)
            })
        }).apply(void 0, ["hidden"].concat(t))
    }

    function gh() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[n];
        (function(t) {
            yh(t);
            for (var e = arguments.length, n = Array(1 < e ? e - 1 : 0), i = 1; i < e; i++) n[i - 1] = arguments[i];
            n.forEach(function(e) {
                _h(e), e.classList.add(t)
            })
        }).apply(void 0, ["hidden"].concat(t))
    }

    function yh(e) {
        if ("" === (e = String(e))) throw new SyntaxError("An invalid string was specified");
        if (/\s/.test(e)) throw new SyntaxError("String contains invalid character")
    }

    function _h(e) {
        if (! function(e) {
                return null != e && e instanceof HTMLElement
            }(e)) throw new SyntaxError("An invalid HTMLElement was specified")
    }

    function bh(e, t, n) {
        return e = String(e), new Array(t - e.length + 1).join(n || "0") + e
    }

    function wh(e, t) {
        var n = Math.floor(e / 3600 % 60),
            i = Math.floor(e / 60 % 60);
        if (e = Math.floor(e % 60), t) {
            var r = e + " second" + (1 === e ? "" : "s");
            return 0 < i && (r = i + " minute" + (1 === i ? "" : "s") + ", " + r), 0 < n && (r = n + " hour" + (1 === n ? "" : "s") + ", " + r), r
        }
        return (0 < n ? n + ":" : "") + bh(i, 2) + ":" + bh(e, 2)
    }

    function Eh(h, f, v) {
        var n, p, l, d, m, g, y, _, b, w, E, S, k, T, A, P, C, x, L, O, R, t, I, M, D, N, i = !1,
            F = !1,
            B = !1,
            o = !1,
            r = !1,
            u = !1,
            e = !1,
            q = !1,
            U = !1,
            a = !1,
            c = !1,
            j = !0,
            V = !1,
            H = !1,
            s = null,
            W = null,
            z = [],
            G = null,
            Y = null,
            K = !1,
            X = !1,
            $ = f.get(zc),
            J = [],
            Q = [],
            Z = h.config.embed.autoplay && h.config.request.flags.autohide_controls,
            ee = [{
                id: .5,
                label: "0.5x"
            }, {
                id: 1,
                label: "Normal"
            }, {
                id: 1.25,
                label: "1.25x"
            }, {
                id: 1.5,
                label: "1.5x"
            }, {
                id: 2,
                label: "2x"
            }];

        function te() {
            W = s = null
        }

        function ne() {
            if (!W) {
                var e = Ls(y).left,
                    t = parseInt(window.getComputedStyle(y, "").borderLeftWidth, 10);
                W = e + t
            }
            return W
        }

        function ie() {
            if (!s) {
                var e = Ls(y).right,
                    t = parseInt(window.getComputedStyle(y, "").borderRightWidth, 10);
                s = e - t
            }
            return s
        }

        function re(e) {
            var t = ne(),
                n = ie() - t,
                i = e - t;
            return h.config.user.progress && i <= 10 && !F ? 0 : Is(i / n, 0, 1)
        }

        function oe(e) {
            var t = z,
                n = Array.isArray(t),
                i = 0;
            for (t = n ? t : t[Symbol.iterator]();;) {
                var r;
                if (n) {
                    if (i >= t.length) break;
                    r = t[i++]
                } else {
                    if ((i = t.next()).done) break;
                    r = i.value
                }
                var o = r,
                    a = Ls(o),
                    s = a.left,
                    u = a.right;
                if (s <= e && e <= u) return parseFloat(o.getAttribute("data-time")) / h.config.video.duration
            }
            return re(e)
        }

        function ae(e, t) {
            F && !c && (t = t || h.config.video.duration * e || 0, window.requestAnimationFrame(function() {
                se(e, t), ue(e, t)
            }))
        }

        function se(e, t) {
            (!f.get(Vc) || V && 0 !== t) && (f.get(Yc) && (e = 100), S.style.left = Math.min(Fs(100 * e), 100) + "%", k.innerHTML = wh(t), S.style.display = "block")
        }

        function ue(e, t) {
            f.get(Yc) && (e = 100);
            var n = Math.min(Fs(100 * e), 100);
            w.style.width = n + "%", w.setAttribute("aria-valuenow", Fs(t)), w.setAttribute("aria-valuetext", wh(Math.round(t), !0) + " played"), m.setAttribute("width", n + "%")
        }

        function ce(e, t) {
            f.get(Yc) && (e = 100);
            var n = Math.min(Fs(100 * e), 100);
            b.style.width = n + "%", b.setAttribute("aria-valuenow", Fs(t)), b.setAttribute("aria-valuetext", wh(t, !0) + " loaded"), d.setAttribute("width", n + "%")
        }

        function le() {
            return F = !0, H && (j = !1, v.classList.add("invisible"), ye(), ve()), p.classList.contains("state-playing") ? (h.events.fire(ds.pauseButtonPressed), de()) : (h.events.fire(ds.playButtonPressed), fe()), !Oi.android
        }

        function de() {
            V = !1, p.classList.remove("state-playing"), p.classList.add("state-paused");
            var e = p.getAttribute("data-title-play");
            p.setAttribute("title", e), p.setAttribute("aria-label", e)
        }

        function fe() {
            V = !0, H && ye(), p.classList.remove("state-paused"), p.classList.add("state-playing");
            var e = p.getAttribute("data-title-pause");
            p.setAttribute("title", e), p.setAttribute("aria-label", e)
        }

        function he() {
            j && (i || (F && a || o || Z) && (B || (!K && !X || o) && (o && h.config.view === bs.privateUnlocked || e || r || (j = !1, h.events.fire(ds.controlBarVisibilityChanged, j), v.classList.add("invisible")))))
        }

        function ve() {
            j || o || (v.classList.remove("hidden"), v.removeAttribute("hidden"), setTimeout(function() {
                j = !0, h.events.fire(ds.controlBarVisibilityChanged, j), v.classList.remove("invisible")
            }, 0))
        }

        function pe(e) {
            return Q.push(e), _.appendChild(e.element), e
        }

        function me(t) {
            Q = Q.filter(function(e) {
                return e !== t
            }), _.removeChild(t.element), t.destroy()
        }

        function ge() {
            var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 1;
            if (x) {
                var n, t = e / (1 / L.length),
                    i = Math.ceil(t),
                    r = t % 1;
                r <= .33 && (n = "fill1"), .33 < r && r <= .66 && (n = "fill2"), L.forEach(function(e, t) {
                    e.classList.remove("fill0"), e.classList.remove("fill1"), e.classList.remove("fill2"), t === i - 1 && r && r <= .66 ? e.classList.add(n) : i - 1 < t && e.classList.add("fill0")
                }), x.setAttribute("aria-valuenow", e.toFixed(3)), x.setAttribute("aria-valuetext", Math.round(100 * e) + "%")
            }
        }

        function ye() {
            if (h.config.view === bs.main || h.config.view === bs.privateUnlocked) {
                var e = h.config.embed.settings,
                    t = {
                        show: e.logo,
                        showLink: !!h.config.video.url,
                        url: h.config.video.url
                    },
                    n = function() {
                        if (!h.config.embed.settings.custom_logo) return null;
                        var e = h.config.embed.settings.custom_logo,
                            t = e.img;
                        return 2 <= Oi.devicePixelRatio && (t = t.replace(/(mw|mh)=(\d+)/g, function(e, t, n) {
                            return t + "=" + 2 * parseInt(n, 10)
                        })), {
                            showLink: null !== e.url,
                            url: Bu(e.url),
                            img: t,
                            sticky: e.sticky,
                            width: e.width,
                            height: e.height
                        }
                    }();
                if (!h.config.embed.settings.watch_trailer || F || V || h.config.embed.autoplay || !h.config.embed.on_site) {
                    var i = !h.backbone || h.backbone.supportsSettingVolume,
                        r = !h.backbone || h.backbone.supportsTextTracks,
                        o = !1;
                    h.config.request.ab_tests && h.config.request.ab_tests.chromecast && h.config.request.ab_tests.chromecast.group && (o = Oi.browser.chrome && (void 0 === e.chromecast || e.chromecast) && !h.config.video.spatial);
                    var a = "text_tracks" in h.config.request && h.config.request.text_tracks.length,
                        s = {
                            targetBlank: 0 === h.config.embed.on_site,
                            playState: V ? "playing" : "paused",
                            volume: i && e.volume,
                            ccButton: r && a,
                            castButton: o,
                            ccOn: null !== Y,
                            prefsButton: !0,
                            airplayButton: Oi.airPlay,
                            stereoscopicButton: "disable" !== h.config.video.privacy && Oi.stereoscopic && h.config.video.spatial,
                            fullscreenButton: e.fullscreen,
                            vimeoLogo: t,
                            duration: wh(h.config.video.duration),
                            rawDuration: h.config.video.duration,
                            strings: {
                                play: "Play",
                                pause: "Pause",
                                loadedBar: "loaded",
                                playedBar: "played",
                                volume: "Volume (use up/down arrow keys to change)",
                                captions: "Choose captions",
                                prefs: "Settings",
                                airPlay: "Choose an AirPlay device",
                                airPlayOff: "Turn off AirPlay",
                                pipEnter: "Enter Picture-in-Picture",
                                pipReturn: "Exit Picture-in-Picture",
                                fullscreen: "Fullscreen",
                                chromecast: "Cast",
                                enterFullscreen: "Enter full screen",
                                exitFullscreen: "Exit full screen",
                                watchOnVimeo: "Watch on vimeo.com",
                                stereoscopic: "Enable stereoscopic playback",
                                stereoscopicOff: "Disable stereoscopic playback"
                            }
                        };
                    if (n && (s.customLogo = n), h.config.video.live_event && Oi.iOS && (s.prefsButton = !1), v.classList.remove("trailer"), H = !1, v.innerHTML = Sf.render("controlbar", s), p = v.querySelector(".play"), l = p.querySelector(".buffer"), d = p.querySelector(".loaded"), m = p.querySelector(".played"), g = v.querySelector(".play-bar"), y = v.querySelector(".vp-progress"), _ = v.querySelector(".js-menubar"), b = g.querySelector(".loaded"), w = g.querySelector(".played"), E = g.querySelector(".cuepoints"), S = v.querySelector(".timecode"), k = S.querySelector(".box"), T = v.querySelector(".ghost-timecode"), A = T.querySelector(".box"), P = v.querySelector(".thumb-preview"), C = v.querySelector(".thumb"), (x = v.querySelector(".volume")) && (L = ke(x.querySelectorAll("div")), ge(h.config.request.cookie.volume)), R = v.querySelector(".play-bar .cc"), O = v.querySelector(".js-prefs"), I = v.querySelector(".pip"), Oi.airPlay && (M = v.querySelector(".airplay")), Oi.stereoscopic && h.config.video.spatial && (D = v.querySelector(".stereoscopic")), N = v.querySelector(".fullscreen"), B = !1, F || Ee(), j && h.events.fire(ds.controlBarVisibilityChanged, j), Z && he(), _e(), f.get(Yc)) {
                        var u = v.querySelector(".vp-live-status");
                        u.style.display = "block";
                        var c = u.querySelector(".vp-live-status-circle");
                        $ ? (c.classList.remove("offline"), c.classList.add("online"), O && O.classList.remove("hidden")) : (c.classList.add("offline"), c.classList.remove("online"), O && O.classList.add("hidden")), k.style.cursor = "default", y.classList.add("disabled")
                    }
                } else ! function(e, t) {
                    v.classList.add("trailer");
                    var n = {
                        vimeoLogo: e,
                        text: h.config.video.vod.button_text || "Watch Trailer",
                        strings: {
                            playTrailer: "Play Trailer",
                            watchOnVimeo: "Watch on vimeo.com"
                        }
                    };
                    t && (n.customLogo = t);
                    v.innerHTML = Sf.render("controlbar_trailer", n), p = v.querySelector(".play"), H = !0
                }(t, n)
            }
        }

        function _e() {
            if (f.get(Yc)) {
                var e = V && 0 < h.config.duration;
                S.style.display = e ? "block" : "none"
            }
        }

        function be() {
            var o;

            function a(e) {
                if (c = !1, o === e.pointerId && !1 !== e.isPrimary) {
                    var t = e.clientX;
                    e.targetTouches && 0 < e.targetTouches.length && (t = e.targetTouches[0].clientX, e.preventDefault());
                    var n = oe(t);
                    ae(n), h.events.fire(cs.seek, n)
                }
            }

            function s(e) {
                var t = e.type;
                "pointerup" === t || "MSPointerUp" === t ? il(v).off("pointermove", ".vp-progress", a).off("pointerup", ".vp-progress", s) : "touchend" === e.type ? il(v).off("touchmove", a).off("touchend", s) : il(document).off("mousemove", a).off("mouseup", s), h.events.fire(ds.scrubbingEnded), h.element.classList.remove("scrubbing")
            }
            h.events.on(Pe.TIME_UPDATE, function(e) {
                var t = e.currentTime,
                    n = e.timeProgress;
                c && (0 === h.config.embed.time || 0 < h.config.embed.time && t >= h.config.embed.time) && (c = !1), r || ae(n, t)
            }), h.events.on(ds.scrubbingStarted, function(e) {
                r = !0, u = e
            }), h.events.on(ds.scrubbingEnded, function() {
                u = r = !1
            }), h.events.on(Pe.SEEKED, function(e) {
                var t = e.timeProgress;
                u && ae(t)
            }), f.get(Vc) && !f.get(Gc) || (il(v).on(Oi.pointerEvents ? "pointerdown" : ["touchstart", "mousedown"], ".vp-progress", function(e) {
                if (!e.button || 2 !== e.button) {
                    h.element.classList.add("scrubbing"), h.events.fire(ds.scrubbingStarted);
                    var t = e.type;
                    if ("pointerdown" === t || "MSPointerDown" === t) {
                        o = e.pointerId;
                        try {
                            e.target.msSetPointerCapture ? e.target.msSetPointerCapture(o) : e.target.setPointerCapture(o)
                        } catch (e) {}
                        il(v).on("pointermove", ".vp-progress", a).on("pointerup", ".vp-progress", s)
                    } else "touchstart" === t ? il(v).on("touchmove", a).on("touchend", s) : il(document).on("mousemove", a).on("mouseup", s);
                    var n = e.clientX;
                    e.targetTouches && 0 < e.targetTouches.length && (n = e.targetTouches[0].clientX, e.preventDefault());
                    var i = oe(n);
                    if (F) ae(i);
                    else {
                        var r = h.config.video.duration * i;
                        se(i, r), ue(i, r), c = !0
                    }
                    return h.events.fire(cs.seek, i, null), !1
                }
            }), h.events.on(cs.setTime, function(e, t) {
                e = Is(e, 0, h.config.video.duration), t || (t = e / h.config.video.duration), window.requestAnimationFrame(function() {
                    se(t, e), ue(t, e)
                })
            }))
        }

        function we(e) {
            var t = Ls(h.element.querySelector(".vp-player-inner")),
                n = Ls(e.button),
                i = Ls(e.element.parentElement),
                r = Ls(e.element),
                o = 0,
                a = n.right - n.width / 2 + r.width / 2;
            a < i.right && (o = i.right - a);
            var s = window.getComputedStyle(e.element),
                u = parseFloat(s.fontSize);
            if (e.isCentered()) {
                var c = t.right - i.right,
                    l = t.bottom - i.bottom,
                    d = (t.width - r.width) / 2,
                    f = (t.height - r.height) / 2;
                e.element.style.right = (d - c) / u + "em", e.element.style.bottom = (f - l) / u + "em"
            } else e.element.style.right = o / u + "em", e.element.style.bottom = i.height / u + "em"
        }

        function Ee() {
            var e = h.config.user.progress,
                t = e / h.config.video.duration;
            !e || h.config.embed.autoplay || h.config.embed.time || H || (se(t, e), ue(t, e), c = !0)
        }

        function Se() {
            f.get(Vc) && !f.get(Gc) && (h.events.on(xe.STREAM_ONLINE, function() {
                $ = !0, ye()
            }), h.events.on(xe.STREAM_OFFLINE, function() {
                $ = !1, ye()
            }))
        }
        return ye(), fh(v, ".play, .replay", le), h.events.on([gn.PLAY_INITIATED, ds.playButtonPressed], fe), h.events.on([ds.pauseButtonPressed, ds.paused, cs.reset], de), h.events.on(ds.error, function(e) {
                "telecine-file-error" !== e && de()
            }), h.events.on(Pe.PLAY, function() {
                fe()
            }), h.events.on(ds.ended, function() {
                c = !1, de(), ae(1)
            }), h.events.on(ds.overlayOpened, function(e) {
                "not-supported" === e && de()
            }), f.get(Vc) && !$ && (p.classList.add("hidden"), h.events.once(xe.STREAM_ONLINE, function() {
                p.classList.remove("hidden")
            })), be(), h.events.on([gn.BUFFER_STARTED, gn.UI_BUFFER_STARTED], function() {
                l.setAttribute("class", l.getAttribute("class").replace(/\s+hidden/, "")), e = !0, Z || ve()
            }), h.events.on(gn.BUFFER_ENDED, function() {
                b.classList.remove("hidden"), f.get(Yc) && w.classList.remove("hidden"), l.setAttribute("class", l.getAttribute("class") + " hidden"), e = !1
            }),
            function() {
                var e = void 0,
                    u = null;

                function c() {
                    return e || (e = h.verifyConfig().then(function(e) {
                        return Sc(e.thumb_preview.url)
                    })), e.then(function(e) {
                        var t = h.config.request.thumb_preview;
                        return C.style.backgroundImage || (C.style.width = t.frame_width / 2 + "px", C.style.height = t.frame_height / 2 + "px", C.style.backgroundImage = "url(" + t.url + ")", C.style.backgroundSize = t.width / 2 + "px " + t.height / 2 + "px"), e
                    })
                }

                function t(e) {
                    if (e.target === g) {
                        var t = re(e.clientX);
                        ae(t), h.events.fire(cs.seek, t)
                    }
                }

                function l(e) {
                    return T.classList.contains("hidden") || (P.classList.remove("hidden"), window.requestAnimationFrame(function() {
                        window.requestAnimationFrame(function() {
                            P.classList.remove("invisible")
                        })
                    })), e
                }

                function n(t) {
                    if (h.config.request.thumb_preview && null === u) {
                        var e = Ls(y).width,
                            n = document.querySelector(".player").clientHeight;
                        if (!(u = 215 <= n && 185 <= e)) return void P.classList.add("hidden");
                        c().then(l).catch(function() {})
                    }
                    if (U) {
                        var i = function(e) {
                                var t = z,
                                    n = Array.isArray(t),
                                    i = 0;
                                for (t = n ? t : t[Symbol.iterator]();;) {
                                    var r;
                                    if (n) {
                                        if (i >= t.length) break;
                                        r = t[i++]
                                    } else {
                                        if ((i = t.next()).done) break;
                                        r = i.value
                                    }
                                    var o = r,
                                        a = Ls(o),
                                        s = a.left,
                                        u = a.right,
                                        c = a.width;
                                    if (s <= e && e <= u) return {
                                        clientX: s + c / 2,
                                        snappedTo: o
                                    }
                                }
                                return {
                                    clientX: e,
                                    snappedTo: null
                                }
                            }(t.clientX),
                            r = i.clientX,
                            o = i.snappedTo,
                            a = re(r),
                            s = h.config.video.duration * a;
                        z.forEach(function(e) {
                            return e.classList.toggle("active", e === o)
                        }), h.config.request.thumb_preview && u && c().then(function(e) {
                            var t = function(e) {
                                    var t = h.config.video.duration / h.config.request.thumb_preview.frames,
                                        n = Math.min(h.config.request.thumb_preview.frames - 1, Math.ceil(e / t)),
                                        i = n % h.config.request.thumb_preview.columns,
                                        r = Math.floor(n / h.config.request.thumb_preview.columns);
                                    return [-i * h.config.request.thumb_preview.frame_width / 2, -r * h.config.request.thumb_preview.frame_height / 2]
                                }(s),
                                n = Te(t, 2),
                                i = n[0],
                                r = n[1];
                            return window.requestAnimationFrame(function() {
                                C.style.backgroundPosition = i + "px " + r + "px"
                            }), e
                        }).catch(function() {}), window.requestAnimationFrame(function() {
                            A.innerHTML = wh(s);
                            var e = (100 * a).toFixed(3);
                            T.style.left = e + "%",
                                function(e) {
                                    var t = function() {
                                            var e = Ls(p).left,
                                                t = Ls(g).right,
                                                n = Ls(P).width,
                                                i = e + Math.ceil(n / 2),
                                                r = t - Math.ceil(n / 2),
                                                o = ne(),
                                                a = ie() - o;
                                            return [(i - o) / a, (r - o) / a]
                                        }(),
                                        n = Te(t, 2),
                                        i = n[0],
                                        r = n[1],
                                        o = (100 * Math.max(i, Math.min(r, e))).toFixed(3);
                                    P.style.left = o + "%"
                                }(a), t.clientX > ie() + 10 && !P.contains(document.elementFromPoint(t.clientX, t.clientY)) && d()
                        })
                    }
                }

                function d() {
                    T && (T.classList.add("invisible"), P.classList.add("invisible")), U = !1, il(g).off("click", t)
                }
                f.get(Vc) && !f.get(Gc) || il(v).on("mouseenter", ".vp-progress", function(e) {
                    U || q || (T.classList.remove("hidden"), U = !0, n(e), window.requestAnimationFrame(function() {
                        window.requestAnimationFrame(function() {
                            T.classList.remove("invisible")
                        })
                    }), h.config.request.thumb_preview && u && c().then(l).catch(function() {}), il(g).on("click", t))
                }).on("mousemove", ".play-bar", n).on("mouseleave", ".play-bar", d), il(v).on("transitionend", ".ghost-timecode", function(e) {
                    "opacity" === e.propertyName && "0" === window.getComputedStyle(this, "").opacity && (T.classList.add("hidden"), P.classList.add("hidden"))
                }, !1), h.events.on(ds.mousedOut, d), h.events.on(ds.configChanged, function() {
                    e = null
                })
            }(),
            function() {
                var r;

                function o(e) {
                    var t = e.clientX;
                    e.targetTouches && (t = e.targetTouches[0].clientX, e.preventDefault());
                    var n = s(t);
                    h.events.fire(cs.changeVolume, n), ge(n)
                }

                function a(e) {
                    q = !1, h.events.fire(ds.volumeScrubbingEnded), h.element.classList.remove("scrubbing");
                    var t = e.type;
                    "pointerup" === t || "MSPointerUp" === t ? il(v).off("pointermove", ".volume", o).off("pointerup", ".volume", a) : "touchend" === e.type ? il(document).off("touchmove", o).off("touchend", a) : il(document).off("mousemove", o).off("mouseup", a), x.setAttribute("tabindex", x.getAttribute("data-tabindex")), x.removeAttribute("data-tabindex")
                }

                function s(e) {
                    var t = Ls(x).left;
                    return Is((e - t) / (Ls(x).right - t), 0, 1)
                }
                il(v).on("mousemove", ".volume", function(e) {
                    var t = e.srcElement;
                    if (-1 === L.indexOf(t)) {
                        var n = Ls(x),
                            i = e.clientX,
                            r = n.bottom - 2;
                        if (t = document.elementFromPoint(i, r), -1 === L.indexOf(t)) return
                    }
                    t.classList.add("hover"), window.requestAnimationFrame(function() {
                        window.requestAnimationFrame(function() {
                            t.classList.remove("hover"), t.classList.add("animate")
                        })
                    })
                }), il(v).on("transitionend", ".volume div", function(e) {
                    "height" === e.propertyName && this.classList.remove("animate")
                }), il(document).on("contextmenu", ".volume", function() {
                    this.blur()
                }), il(v).on(Oi.pointerEvents ? "pointerdown" : ["touchstart", "mousedown"], ".volume", function(e) {
                    if (1 === e.which) {
                        x.setAttribute("data-tabindex", x.getAttribute("tabindex")), x.removeAttribute("tabindex"), q = !0, h.element.classList.add("scrubbing"), h.events.fire(ds.volumeScrubbingStarted);
                        var t = e.type;
                        if ("pointerdown" === t || "MSPointerDown" === t) {
                            r = e.pointerId;
                            try {
                                e.target.msSetPointerCapture ? e.target.msSetPointerCapture(r) : e.target.setPointerCapture(r)
                            } catch (e) {}
                            il(v).on("pointermove", ".volume", o).on("pointerup", ".volume", a)
                        } else "touchstart" === t ? il(document).on("touchmove", o).on("touchend", a) : il(document).on("mousemove", o).on("mouseup", a);
                        var n = e.clientX;
                        e.targetTouches && (n = e.targetTouches[0].clientX);
                        var i = s(n);
                        h.events.fire(cs.changeVolume, i), ge(i)
                    }
                }), h.events.on(ds.volumeChanged, function(e) {
                    !q && L && ge(e)
                }).on([cs.enableVolume, cs.disableVolume], function() {
                    ye()
                })
            }(), fh(v, ".cc", function() {
                h.events.fire(ds.ccButtonPressed)
            }), h.events.on(ds.ccButtonPressed, function(e) {
                t ? t.toggle(e) : (t = pe(function(e) {
                    var i = [];
                    "text_tracks" in h.config.request && (h.config.request.text_tracks.forEach(function(e) {
                        var t = "CC" === e.label.substring(e.label.length - 2),
                            n = "captions" !== e.kind || t ? "" : " CC";
                        i.push({
                            label: e.label + n,
                            id: "" + e.id,
                            active: Y === "" + e.id
                        })
                    }), i.push({
                        label: "None",
                        id: "off",
                        active: null === Y
                    }));
                    var t = new ph(h, {
                        items: i,
                        id: "cc",
                        title: "Closed Captions"
                    });
                    return t.on("select", function(e) {
                        "off" !== e ? h.events.fire(cs.turnCaptionsOn, e) : h.events.fire(cs.turnCaptionsOff)
                    }), new hh(h, e, [t])
                }(R))).show(e)
            }), h.events.on(ds.captionsChanged, function(e) {
                e ? function(e) {
                    Y = e, t && t.getPanel("cc") && (t.getPanel("cc").setActiveItem(e), setTimeout(function() {
                        t.hide()
                    }, 100)), R && (R.classList.add("on"), R.classList.remove("off"))
                }(e.id) : (Y = null, t && t.getPanel("cc") && (t.getPanel("cc").setActiveItem("off"), setTimeout(function() {
                    t.hide()
                }, 100)), R && (R.classList.add("off"), R.classList.remove("on")))
            }).on(ds.controlBarVisibilityChanged, function(e) {
                e || t && t.hide()
            }).on([cs.enableCaptions, cs.disableCaptions], function() {
                ye()
            }),
            function() {
                var i = void 0,
                    s = void 0,
                    u = null;

                function c() {
                    if (h.telecine.video.currentFile.mime === us.dash) {
                        var e = h.config.request.files.dash.streams,
                            t = ke(e).sort(Jl()).filter(Kl(e)).filter(Xl(J)).map(function(e) {
                                var t = Gl(e);
                                return {
                                    id: t,
                                    label: Ql(e),
                                    active: i === t
                                }
                            });
                        return t.unshift({
                            id: "auto",
                            label: "Auto",
                            active: !i || "auto" === i
                        }), t
                    }
                    var n = h.telecine.video.files;
                    return ke(n).filter(function(t) {
                        return function(e) {
                            return vs[e.mime] === t
                        }
                    }("progressive")).filter(Kl(n)).sort(Jl()).filter(Xl(J)).map(function(e) {
                        return {
                            label: Gl(e),
                            id: Gl(e),
                            active: i === e.metadata.quality
                        }
                    })
                }
                fh(v, ".js-prefs", function() {
                    h.events.fire(ds.prefsButtonPressed)
                }), h.events.on(ds.prefsButtonPressed, function(e) {
                    if (O) {
                        if (!G) return void(G = pe(function() {
                            var e = [],
                                t = new ph(h, {
                                    id: "quality",
                                    title: "Quality",
                                    items: u || c()
                                });
                            if (t.on("select", function(e) {
                                    h.events.fire(cs.changeQuality, e)
                                }), s && t.setTitleStat(s), t.pinTitle(), e.push(t), h.telecine.supportsPlaybackRate && h.config.embed.settings.speed) {
                                var n = ee.map(function(e) {
                                        return e.active = e.id === h.telecine.playbackRate, e
                                    }),
                                    i = new ph(h, {
                                        id: "speed",
                                        title: "Speed",
                                        items: n
                                    });
                                i.on("select", function(e) {
                                    h.events.fire(cs.changePlaybackRate, e)
                                }), i.pinTitle(), e.push(i)
                            }
                            var r = new hh(h, O, e);

                            function o(e) {
                                r.element.classList.toggle("vp-menu-center", e), h.events.fire(ds.menuCentered, r.isCentered(), r)
                            }

                            function a(e) {
                                r.element.classList.toggle("vp-menu-carousel", e), r.setPanelModes()
                            }
                            return f.watch("ui.controlbar.isPrefsMenuCentered", o), f.watch("ui.controlbar.hasPrefsMenuCarousel", a), o(f.get("ui.controlbar.isPrefsMenuCentered")), a(f.get("ui.controlbar.hasPrefsMenuCarousel")), r
                        }())).show(e);
                        G.toggle(e)
                    }
                }), h.events.on(ds.qualityChanged, function(e) {
                    i = e, G && G.getPanel("quality") && G.getPanel("quality").setActiveItem(e)
                }), h.events.on(Ce.STREAM_CHANGE, function(e) {
                    var t = e.quality || e.height + "p";
                    s = t, G && G.getPanel("quality") && G.getPanel("quality").setTitleStat(Ql(e))
                }), h.events.on(ds.playbackRateChanged, function(e) {
                    G && G.getPanel("speed") && G.getPanel("speed").setActiveItem(e)
                }), h.events.on(xe.REPRESENTATIONS_AVAILABLE, function(e) {
                    var t = e.video.map(function(e) {
                        return e.height.toString()
                    });
                    i = null, u = function(e) {
                        var t = e.sort(Jl()).map(function(e) {
                            var t = e + "p";
                            return {
                                id: t,
                                label: t,
                                active: i === t
                            }
                        });
                        return t.unshift({
                            id: "auto",
                            label: "Auto",
                            active: !i || "auto" === i
                        }), t
                    }(t), G && (me(G), G = null)
                }), h.events.on(ds.hevcRestrictedStreams, function(e) {
                    J = e
                })
            }(), fh(v, ".pip", function() {
                "picture-in-picture" !== h.telecine.presentationMode ? h.events.fire(cs.activatePictureInPicture) : h.events.fire(cs.deactivatePictureInPicture)
            }), h.events.on(gn.PICTURE_IN_PICTURE_AVAILABLE, function() {
                I && (I.classList.remove("hidden"), I.hidden = !1, te())
            }).on(gn.PICTURE_IN_PICTURE_NOT_AVAILABLE, function() {
                I && (I.classList.add("hidden"), I.hidden = !0, te())
            }).on(gn.PICTURE_IN_PICTURE_ACTIVATED, function() {
                X = !0, I && (I.classList.add("return"), I.classList.remove("enter"), I.setAttribute("title", I.getAttribute("data-title-return")))
            }).on(gn.PICTURE_IN_PICTURE_DEACTIVATED, function() {
                X = !1, I && (I.classList.add("enter"), I.classList.remove("return"), I.setAttribute("title", I.getAttribute("data-title-enter")))
            }), Oi.airPlay && (fh(v, ".airplay", function() {
                h.events.fire(ds.airPlayButtonPressed)
            }), h.events.on(ds.airPlayAvailable, function() {
                M && (M.classList.remove("hidden"), M.hidden = !1, te())
            }).on(ds.airPlayNotAvailable, function() {
                M && (M.classList.add("hidden"), M.hidden = !0, te())
            }).on(ds.airPlayActivated, function() {
                K = !0, M && (M.classList.remove("off"), M.classList.add("on"), M.setAttribute("title", M.getAttribute("data-title-on"))), ve()
            }).on(ds.airPlayDeactivated, function() {
                K = !1, M && (M.classList.remove("on"), M.classList.add("off"), M.setAttribute("title", M.getAttribute("data-title-off")))
            })), fh(v, ".fullscreen", function() {
                h.events.fire(ds.fullscreenButtonPressed)
            }), h.events.on(ds.didEnterFullscreen, function() {
                i = !1, v.classList.remove("tiny"), N && N.setAttribute("title", N.getAttribute("data-title-unfullscreen"))
            }), h.events.on(ds.didExitFullscreen, function(e) {
                if (N) {
                    var t = N.cloneNode(!0);
                    N.parentNode.replaceChild(t, N), (N = t).setAttribute("title", N.getAttribute("data-title-fullscreen"))
                }
                e || (i = !0), n && v.classList.add("tiny")
            }), h.events.on([ds.mousedOver, ds.scrubbingStarted, cs.changeVolume], ve).on([ds.mousedOut, ds.mouseTimeout], he).on(ds.willEnterFullscreen, function() {
                B = !1, he()
            }).on(ds.willExitFullscreen, function() {
                B = !1
            }).on(ds.targetTimeReached, function() {
                a = !0, he()
            }).on(cs.changeVolume, function(e, t) {
                t || ve()
            }), il(v).on(["pointerenter", "pointerleave", "mouseenter", "mouseleave"], [".play", ".play-bar", ".custom-logo", ".vp-menu"], function(e) {
                "pointerType" in e ? "mouse" !== e.pointerType && e.pointerType !== e.MSPOINTER_TYPE_MOUSE || (B = "pointerenter" === e.type || "MSPointerEnter" === e.type) : Oi.touch || (B = "mouseover" === e.type)
            }), il(v).on("transitionend", function(e) {
                this === v && "opacity" === e.propertyName && v.classList.contains("invisible") && (v.classList.add("hidden"), v.setAttribute("hidden", ""))
            }), h.events.on(ds.overlayOpened, function(e) {
                if ("not-supported" !== e && "private-unlocked" !== e && "help" !== e) o = !0, he();
                else
                    for (var t = v.querySelectorAll("a, button, input, [tabindex]"), n = 0, i = t.length; n < i; n++) {
                        var r = t[n].getAttribute("tabindex");
                        r && t[n].setAttribute("data-tabindex", r), t[n].setAttribute("tabindex", "-1")
                    }
            }).on(ds.overlayClosed, function() {
                o = !1, ve();
                for (var e = v.querySelectorAll("[tabindex]"), t = 0, n = e.length; t < n; t++) {
                    var i = e[t].getAttribute("data-tabindex");
                    i && "null" !== i ? e[t].setAttribute("tabindex", i) : e[t].removeAttribute("tabindex"), e[t].removeAttribute("data-tabindex")
                }
            }), h.events.on(ds.outroDisplayed, function() {
                v.classList.add("controls-outro")
            }).on(ds.outroHidden, function() {
                v.classList.remove("controls-outro")
            }),
            function() {
                function t() {
                    Q.filter(function(e) {
                        return e.isVisible()
                    }).forEach(function(e) {
                        return e.hide()
                    })
                }
                h.events.on([ds.menuCentered, ds.menuVisibilityChanged], function(e, t) {
                    we(t), t.isCentered() && t.isVisible() && v.classList.add("controls-centerMenu"), t.isCentered() && t.isVisible() || v.classList.remove("controls-centerMenu")
                }).on(ds.didExitFullscreen, t).on(ds.controlBarVisibilityChanged, function(e) {
                    e || t()
                }), il(window).on("resize", function() {
                    Q.forEach(we)
                })
            }(), h.events.on(ds.configChanged, function(e, t) {
                Se(), be(), ye(), h.config.view === bs.privateUnlocked && ve(), te()
            }), h.events.on(cs.reset, function() {
                window.requestAnimationFrame(function() {
                    _e(), se(0, h.config.video.duration), ue(0, 0), ce(0, 0)
                }), ve(), a = i = c = q = r = B = F = !1, t && (me(t), t = null), G && (me(G), G = null)
            }), il(window).on("resize", function() {
                te()
            }), Ee(), h.events.on(ds.enteredTinyMode, function() {
                n = !0, v.classList.add("tiny")
            }).on(ds.enteredMiniMode, function() {
                n = !1, v.classList.remove("tiny")
            }).on(ds.enteredNormalMode, function() {
                n = !1, v.classList.remove("tiny")
            }),
            function() {
                if (h.config.embed.on_site) {
                    var i = new Ae;
                    h.events.on(ds.cuePointAdded, function(e) {
                        if (e.data.visible) {
                            var t = document.createElement("div");
                            t.setAttribute("id", "cuepoint-" + e.id), t.setAttribute("data-time", e.time), t.classList.add("cuepoint"), t.classList.add("out"), t.appendChild(document.createElement("div"));
                            var n = e.time / h.config.video.duration * 100;
                            t.style.left = n + "%", i.set(e, t), E.appendChild(t), z = ke(v.querySelectorAll(".cuepoint")), window.requestAnimationFrame(function() {
                                return t.classList.remove("out")
                            })
                        }
                    }), h.events.on(ds.cuePointRemoved, function(e) {
                        var t = i.get(e);
                        t && (i.delete(e), t.classList.add("out"))
                    }), il(v).on("transitionend", ".cuepoint", function(e) {
                        this.classList.contains("out") && (E.removeChild(this), z = ke(v.querySelectorAll(".cuepoint")))
                    })
                }
            }(), D && (fh(v, ".stereoscopic", function() {
                h.events.fire(ds.stereoscopicButtonPressed)
            }), D.classList.remove("hidden"), D.hidden = !1), Se(), hd.on(sd.connected, function() {
                gh(O)
            }), hd.on(sd.disconnected, function() {
                mh(O)
            }), hd.on(sd.playing, fe), hd.on([sd.error, sd.idle, sd.paused, sd.ended, sd.disconnected], de), h.events.on(gn.PLAY_INITIATED, function() {
                h.events.on(Pe.PROGRESS, function(e) {
                    var t = e.loaded,
                        n = (e.duration, e.loadProgress);
                    i || window.requestAnimationFrame(function() {
                        ce(n, t)
                    })
                }), F = !0;
                var e = h.config.embed.time || h.telecine.currentTime;
                ae(e / h.config.video.duration, e), c = !0
            }), h.events.fire(ds.controlBarModuleReady), {}
    }
    var Sh = function() {
            function s(e, t) {
                var n = this,
                    i = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 1;
                O(this, s), qo(this), this.version = i, this.visible = !1;
                var r = this._wrap = document.createElement("div");
                r.classList.add("compass-wrapper"), r.innerHTML = Sf.render("compass", {
                    version: i
                }), r.classList.add("cloaked"), e.appendChild(r), t && r.addEventListener("click", t), this._layerSlice = r.querySelector(".compass-slice"), this._lineSlice = r.querySelector(".compass-line");
                var o = function() {
                        n._mouseIn = !0
                    },
                    a = function(e) {
                        return function() {
                            setTimeout(function() {
                                n._mouseIn || (n.fade(), n._mouseIn = !1)
                            }, e)
                        }
                    };
                il(this._wrap).on("mousein", o).on("pointerin", o).on("mouseout", a(1e3)).on("pointerout", a(1e3)), a(2500)()
            }
            return R(s, [{
                key: "setAngle",
                value: function(e, t) {
                    var n = this;
                    this._animationFrame && window.cancelAnimationFrame(this._animationFrame);
                    var i = 0;
                    1 === this.version ? i = -45 : 2 === this.version && (i = -30);
                    var r = "" + (i + t),
                        o = (e + 85) / 170;
                    this._animationFrame = window.requestAnimationFrame(function() {
                        n._layerSlice.setAttribute("transform", "rotate(" + r + ", 18, 18)"), n._lineSlice && n._lineSlice.setAttribute("d", n._getLinePath(o, 18))
                    })
                }
            }, {
                key: "_getLinePath",
                value: function(e, t) {
                    var n = 2 * t - Math.round(2 * t * e),
                        i = (2 * t - 2 * Math.sqrt(2 * n * t - Math.pow(n, 2))) / 2;
                    return "M" + (i + 5) + "," + n + " L" + (2 * t - i - 5) + "," + n + " z"
                }
            }, {
                key: "reveal",
                value: function() {
                    var e = this;
                    this._wrap.classList.remove("cloaked"), window.requestAnimationFrame(function() {
                        e._wrap.classList.add("in")
                    }), this.visible = !0
                }
            }, {
                key: "fade",
                value: function() {
                    this._wrap.classList.add("fade"), this.visible = !0
                }
            }, {
                key: "hide",
                value: function() {
                    var t = this;
                    this._wrap.classList.remove("in"), this._wrap.classList.remove("fade"), this._wrap.classList.add("leaving");
                    il(this._wrap).on("transitionend", function e() {
                        "opacity" === event.propertyName && (t._wrap.classList.remove("leaving"), t._wrap.classList.add("cloaked"), t.visible = !1), il(t._wrap).off("transitionend", e)
                    })
                }
            }, {
                key: "updatePosition",
                value: function(e) {
                    if (e) {
                        var t = Ls(e);
                        if (t.height < 265) return this._wrap.classList.remove("align-bottom"), void this._wrap.classList.add("hidden");
                        if (t.height < 336) return this._wrap.classList.remove("hidden"), void this._wrap.classList.add("align-bottom");
                        this._wrap.classList.remove("hidden"), this._wrap.classList.remove("align-bottom")
                    }
                }
            }, {
                key: "getWrapper",
                value: function() {
                    return this._wrap
                }
            }]), s
        }(),
        kh = 55,
        Th = 45;

    function Ah(d, a, f) {
        var i = null,
            u = Oi.touch ? 4500 : 2e3,
            c = !0,
            l = !0,
            h = !1,
            v = null,
            p = null,
            m = [],
            g = !1,
            y = null,
            _ = null,
            o = !0,
            b = !1,
            n = !1,
            t = !1,
            s = !1,
            r = 1.75,
            w = f.querySelector(".vp-target"),
            E = f.querySelector(".vp-sidedock"),
            S = f.querySelector(".vp-controls"),
            k = f.querySelector(".vp-title"),
            T = f.querySelector(".vp-video"),
            A = d.config.embed.autoplay && d.config.request.flags.autohide_controls;

        function P() {
            clearTimeout(i), i = null
        }

        function C() {
            s && (clearTimeout(i), i = setTimeout(L, u))
        }

        function x() {
            dh.element && dh.element.classList.contains("js-player-fullscreen") && (h || (f.classList.add("player-cursor-hide"), h = l = !0))
        }

        function L(e) {
            (b || o) && (t || (P(), document.activeElement && document.body.classList.contains("showfocus") && (E.contains(document.activeElement) || S.contains(document.activeElement)) || (d.events.fire(e ? ds.mousedOut : ds.mouseTimeout), l = !0, Oi.spatialPlayback && d.config.video.spatial || (w.classList.add("hidden"), w.setAttribute("hidden", "")), c = !0, x())))
        }

        function O() {
            b && o || (d.events.fire(ds.mousedOver), w.classList.remove("hidden"), w.removeAttribute("hidden")), C()
        }

        function R() {
            b || o ? f.removeAttribute("tabindex") : b || o || n || f.setAttribute("tabindex", "0")
        }

        function e() {
            d.events.on([Pe.TIME_UPDATE, Pe.SEEKED], function e(t) {
                var n = t.currentTime;
                r <= n && null === i && (d.events.fire(ds.targetTimeReached), d.events.off([Pe.TIME_UPDATE, Pe.SEEKED], e))
            })
        }

        function I() {
            T.classList.remove("threesixty-video"), d.element.classList.remove("grabbable"), d.element.classList.remove("grabbing"), v && v.hide()
        }

        function M() {
            var e = function(e) {
                return function() {
                    p && e.apply(void 0, arguments)
                }
            };
            d.events.on(cs.revealSpatialControls, e(function() {
                d.element.classList.add("grabbable"), v && v.updatePosition(d.element), !v || v.visible || p.isStereo() || v.reveal()
            })), d.events.on(ds.ended, e(function() {
                I()
            })), d.events.on(re.CAMERA_UPDATE, e(function(e) {
                v && v.setAngle(e.lat, e.lon)
            })), d.events.on(gn.PLAY_INITIATED, e(function() {
                d.config.video.spatial && function() {
                    function n(e) {
                        y && (y.innerHTML = Sf.render("threesixty_reminder", e))
                    }
                    var e = d.telecine.getEffectByName("ThreeSixtyEffect");
                    d.config.embed.settings.spatial_compass ? (v || (v = new Sh(d.element.querySelector(".vp-controls-wrapper"), function() {
                        e.snapToCenter()
                    })), v.updatePosition(d.element), v.reveal()) : v && v.hide();
                    d.events.once(ds.firstTimeUpdate, function() {
                            var e = d.config.embed.cards,
                                t = e && e.length && e[0].timecode < 15;
                            t || (m.push(setTimeout(function() {
                                n({
                                    showArrows: !1,
                                    text: Oi.android ? "Look around" : "Click and drag to look around"
                                }), B(y), N(y), setTimeout(function() {
                                    return F(y)
                                }, 3e3)
                            }, 7e3)), Oi.android || m.push(setTimeout(function() {
                                n({
                                    showArrows: !1,
                                    text: Oi.android ? "Look around" : "Use arrow keys to see more"
                                }), B(y), N(y), setTimeout(function() {
                                    return F(y)
                                }, 3e3)
                            }, 14e3)))
                        }),
                        function() {
                            var e = f;
                            if (y) return;
                            var t = y = document.createElement("div");
                            t.classList.add("cloaked"), t.classList.add("player-alert-round"), t.classList.add("player-alert-round--top"), t.classList.add("player-alert-round--threesixty"), e.appendChild(t)
                        }()
                }()
            })), d.events.on(ds.stereoscopicButtonPressed, e(function() {
                D()
            }));
            var t = null,
                n = e(function(e) {
                    g || (g = !0, e.preventDefault(), d.element.classList.add("grabbing"), _ = {
                        x: e.clientX,
                        y: e.clientY
                    }, p.makeContact(_))
                }),
                i = e(function(e) {
                    g && (D(), p.move({
                        x: e.clientX,
                        y: e.clientY
                    }))
                }),
                r = e(function(e) {
                    g && (d.element.classList.remove("grabbing"), p.releaseContact(!1), g = !1)
                }),
                o = e(function(e) {
                    e.preventDefault(), p.isUserInteracting || (p.isUserInteracting = !0), null !== t && clearTimeout(t), D(), t = setTimeout(function() {
                        d.element.classList.remove("player-cursor-hide"), d.element.classList.add("grabbable"), p.isUserInteracting = !1
                    }, 500), d.element.classList.add("player-cursor-hide"), d.element.classList.remove("grabbable"), p.moveWheel({
                        x: e.deltaX,
                        y: e.deltaY
                    })
                }),
                a = e(function(e) {
                    g || (g = !0, p.makeContact({
                        x: e.touches[0].clientX,
                        y: e.touches[0].clientY
                    }))
                }),
                s = e(function(e) {
                    g && (e.preventDefault(), D(), p.move({
                        x: e.touches[0].clientX,
                        y: e.touches[0].clientY
                    }))
                }),
                u = e(function(e) {
                    p.releaseContact(!0), g = !1
                }),
                c = e(function(e) {
                    g || D(), p.moveDevice(e.alpha, e.beta, e.gamma, e.orientation)
                }),
                l = e(function(e) {
                    g = !1, d.element.classList.remove("grabbing"), p.abandonMotion()
                });
            d.events.once(gn.PLAY_INITIATED, function() {
                d.store.watch("ui.player.layout", function() {
                    v && v.updatePosition(d.element), p && p.adjustRenderSize(), g = !1
                }), Oi.android && window.addEventListener("deviceorientation", c, !1), Oi.pointerEvents ? (il(w).on("pointerdown", n), window.addEventListener("pointermove", i), window.addEventListener("pointerup", r), window.addEventListener("pointerleave", l)) : (il(w).on("touchstart", a).on("mousedown", n).on("wheel", o), window.addEventListener("touchmove", s), window.addEventListener("mousemove", i), window.addEventListener("mouseup", r), window.addEventListener("touchend", u), window.addEventListener("mouseleave", l))
            })
        }

        function D() {
            m.forEach(function(e) {
                return clearTimeout(e)
            }), m = []
        }

        function N(e) {
            e && (e.classList.remove("cloaked"), window.requestAnimationFrame(function() {
                e.classList.add("in")
            }))
        }

        function F(n) {
            n && (n.classList.add("leaving"), window.requestAnimationFrame(function() {
                il(n).on("transitionend", function e(t) {
                    "opacity" === t.propertyName && (n.classList.remove("in"), n.classList.remove("leaving"), n.classList.add("cloaked"), il(n).off("transitionend", e))
                })
            }))
        }

        function B(e) {
            60 < Ls(E).width ? e.classList.add("player-alert-bumpdown") : e.classList.remove("player-alert-bumpdown")
        }
        return function() {
                var s = !0;

                function t() {
                    O()
                }

                function n(e) {
                    if (u = 2e3, l) l = !1;
                    else if (h && (f.classList.remove("player-cursor-hide"), h = !1), 0 !== e.screenX && e.screenX !== screen.width - 1 && 0 !== e.screenY && e.screenY !== screen.height - 1) {
                        if (s = !0, Oi.spatialPlayback && d.config.video && d.config.video.spatial) {
                            var t = Ls(d.element),
                                n = e.clientX - t.left,
                                i = e.clientY - t.top,
                                r = 4 * Th,
                                o = i > d.element.clientHeight - kh,
                                a = n > d.element.clientWidth - Th && i < r;
                            if (g || !o && !a) return
                        }
                        c && O(), C()
                    } else P(), x(), s && (L(!0), s = !1)
                }

                function i() {
                    L(!0)
                }

                function r(e) {
                    var t = S.contains(e.target) || E.contains(e.target),
                        n = v && v.getWrapper().contains(e.target);
                    b && o || n ? t || !b && !o || L(!0) : O()
                }
                Oi.pointerEvents ? il(f).on("pointerenter", function(e) {
                    if ("mouse" === e.pointerType || e.pointerType === e.MSPOINTER_TYPE_MOUSE) return u = 2e3, t();
                    u = 4500, r(e)
                }).on("pointermove", function(e) {
                    if ("mouse" === e.pointerType || e.pointerType === e.MSPOINTER_TYPE_MOUSE) return n(e)
                }).on("pointerleave", function(e) {
                    if ("mouse" === e.pointerType || e.pointerType === e.MSPOINTER_TYPE_MOUSE) return i()
                }) : il(f).on("touchmove", function() {
                    u = 4500, C()
                }).on("touchend", r).on("mouseenter", t).on("mousemove", n).on("mouseleave", i)
            }(), d.events.on(Pe.PLAY, function(e) {
                A || 0 === e || O()
            }).on(ds.paused, O).on([gn.BUFFER_ENDED, ds.scrubbingEnded, ds.volumeChanged, ds.menuPanelOpened], C).on(gn.PLAY_INITIATED, function() {
                s = !0
            }), d.events.on(ds.menuVisibilityChanged, function(e) {
                e && C()
            }), d.events.on(ds.overlayOpened, R).on(ds.controlBarVisibilityChanged, function(e) {
                o = e, R()
            }).on(ds.sidedockVisibilityChanged, function(e) {
                b = e, R()
            }), d.events.on(ds.outroDisplayed, function() {
                t = !0, O()
            }).on(ds.outroHidden, function() {
                t = !1
            }),
            function() {
                var n = !1,
                    r = !1,
                    o = 0;
                d.events.on(ds.menuVisibilityChanged, function(e) {
                    r = e
                }), il(f).on(Oi.pointerEvents ? "pointerup" : "click", function(t) {
                    if (!r && 2 !== t.button && t.target.classList && function(e) {
                            return (e.classList.contains("vp-title") || e.classList.contains("vp-target") || k.contains(e.parentNode) && "HEADER" === e.parentNode.tagName || T.contains(e)) && !E.contains(e)
                        }(t.target)) {
                        var e = ("pointerup" === t.type || "MSPointerUp" === t.type) && "mouse" !== t.pointerType && t.pointerType !== t.MSPOINTER_TYPE_MOUSE,
                            n = s && Oi.spatialPlayback && d.config.video.spatial && p;
                        if (Oi.touch || e) {
                            var i = -1 !== d.telecine.supportedPresentationModes.indexOf("inline") && !Oi.mobileAndroid;
                            if (!n) {
                                if (s && i) return;
                                return void d.events.fire(ds.playButtonPressed)
                            }
                        }
                        1 == ++o && setTimeout(function() {
                            if (n) {
                                var e = _ && _.x === t.clientX && _.y === t.clientY;
                                return 1 === o && e && !Oi.mobileAndroid && d.events.fire(d.telecine.paused ? ds.playButtonPressed : ds.pauseButtonPressed), 1 !== o && d.telecine.getEffectByName("ThreeSixtyEffect").snapToCenter(), void(o = 0)
                            }
                            if (1 === o) {
                                if (a.get(Vc) && !a.get(zc)) return;
                                d.events.fire(d.telecine.paused ? ds.playButtonPressed : ds.pauseButtonPressed)
                            } else d.events.fire(ds.fullscreenButtonPressed);
                            o = 0
                        }, 200)
                    }
                }), il(f).on("mousedown", ".vp-video-wrapper", function(e) {
                    var t;
                    if (!n) return w.classList.remove("hidden"), w.removeAttribute("hidden"), 2 !== e.button && document.createEvent && ((t = document.createEvent("MouseEvents")).initMouseEvent("click", !0, !0, window, 1, 0, 0, 0, 0, !1, !1, !1, !1, 0, null), w.dispatchEvent(t)), !1
                }).on("contextmenu", ".vp-video", function(e) {
                    return w.classList.remove("hidden"), w.removeAttribute("hidden"), !1
                }), d.events.on(cs.toggleNativeControls, function(e) {
                    if (e) return n = !0, void w.classList.add("hidden");
                    n = !1, w.classList.remove("hidden")
                })
            }(),
            function() {
                var e, t;
                Oi.touch || (il(f).on("focus", "a, button, input, [tabindex]", function() {
                    t = this, clearTimeout(e), e = null, document.activeElement === this && O()
                }), il(f).on("blur", "a, button, input, [tabindex]", function() {
                    document.activeElement === this && (e = setTimeout(L, 50))
                }), f.addEventListener("focus", function(e) {
                    O(), t && t.focus()
                }, !1), d.events.on(ds.overlayOpened, function() {
                    n = !0, f.removeAttribute("tabindex")
                }), d.events.on(ds.overlayClosed, function() {
                    n = !1
                }))
            }(), d.events.on(ds.didEnterFullscreen, function(e) {
                x(), t && O()
            }).on(ds.didExitFullscreen, function(e) {
                c = !0, e ? L() : (O(), P())
            }), e(), d.events.on(cs.reset, function() {
                s = b = !(o = l = c = !0), e(), P()
            }), d.events.on(cs.attachSpatialPlaybackEvents, M), d.events.on(gn.SPATIAL_PLAYBACK_TOGGLED, function(e) {
                I(), p = e, D()
            }), {}
    }
    var Ph, Ch = "markers",
        xh = "dropped_frames",
        Lh = "total_frames",
        Oh = "bandwidth",
        Rh = "streams",
        Ih = "files",
        Mh = "video_dims",
        Dh = "min_bandwidth",
        Nh = "max_badwidth",
        Fh = "buffer_occupancy",
        Bh = "scanner",
        qh = ["clip_id", "profile_id", "player_size", xh, Lh, Oh, Ch, Rh, Ih, Mh, Dh, Nh, Fh, Bh],
        Uh = "upswitch",
        jh = "downswitch",
        Vh = "scannerchange",
        Hh = "filechange",
        Wh = "bufferstart",
        zh = "stalled",
        Gh = function() {
            function n(e) {
                var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : function() {};
                O(this, n), this.player = e, this.seriesStore = {}, this.telecineHandlers = {}, this.onDataChange = t
            }
            return R(n, [{
                key: "init",
                value: function() {
                    this._clearAllFields(), this._attachTelecineEventHandlers(), this._watchPlayerSize(), this._setDefaults()
                }
            }, {
                key: "reset",
                value: function() {
                    this._clearAllFields(), this._setDefaults(), this.onDataChange()
                }
            }, {
                key: "setToSeries",
                value: function(e, t) {
                    return this.seriesStore[e] = [t], this.onDataChange(), this.seriesStore[e]
                }
            }, {
                key: "addToSeries",
                value: function(e, t) {
                    this.seriesStore[e].push(t);
                    return 500 < this.seriesStore[e].length && this.seriesStore[e].splice(0, 25), this.onDataChange(), this.seriesStore[e]
                }
            }, {
                key: "getCurrent",
                value: function(e) {
                    return this.seriesStore[e].slice(-1)[0]
                }
            }, {
                key: "getFirst",
                value: function(e) {
                    return this.seriesStore[e][0]
                }
            }, {
                key: "getSeries",
                value: function(e) {
                    return this.seriesStore[e]
                }
            }, {
                key: "addMarker",
                value: function(e, t) {
                    var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {};
                    n.videoTime = this.player.telecine.currentTime, n.time = Date.now(), this.addToSeries(Ch, {
                        type: e,
                        title: t,
                        data: n
                    })
                }
            }, {
                key: "_attachTelecineEventHandlers",
                value: function() {
                    var n = this;
                    new I(function(e, t) {
                        n.player.telecine && e(), n.player.events.on(ds.telecineReady, function() {
                            e()
                        })
                    }).then(function() {
                        n.player.telecine.on(Ce.BANDWIDTH, n._onBandwidthChange.bind(n)), n.player.telecine.on(Ce.BUFFER_OCCUPANCY, n._onBufferOccupancyChange.bind(n)), n.player.telecine.on(Ce.CURRENT_FILE_CHANGE, n._onFileChange.bind(n)), n.player.telecine.on(Ce.DROPPED_FRAMES, n._onDroppedFrames.bind(n)), n.player.telecine.on(Pe.ENDED, n._onEnded.bind(n)), n.player.telecine.on(Ce.SCANNER_CHANGE, n._onScannerChange.bind(n)), n.player.telecine.on(Pe.SEEKED, n._onSeeked.bind(n)), n.player.telecine.on(Pe.STALLED, n._onStalled.bind(n)), n.player.telecine.on(Ce.STREAM_BUFFER_START, n._onStreamBufferStart.bind(n)), n.player.telecine.on(Ce.STREAM_CHANGE, n._onStreamChange.bind(n))
                    }).catch(function() {})
                }
            }, {
                key: "_watchPlayerSize",
                value: function() {
                    var r = this;
                    this.player.store.watch("ui.player.layout", function(e) {
                        var t = r.getCurrent(Mh),
                            n = r._getVideoDimensionsString(e);
                        r.addToSeries(Mh, n);
                        var i = t ? "Resized from " + t + " to " + n : "Resized to " + n;
                        r.addMarker("resize", i)
                    })
                }
            }, {
                key: "_getVideoDimensionsString",
                value: function(e) {
                    var t = Math.round(e.width) + "px",
                        n = Math.round(e.height) + "px",
                        i = window.devicePixelRatio && 1 < window.devicePixelRatio ? "@" + window.devicePixelRatio + "x" : "";
                    return t && n ? parseInt(t, 10) + "" + parseInt(n, 10) + " " + i : ""
                }
            }, {
                key: "_clearAllFields",
                value: function() {
                    this.seriesStore = qh.reduce(function(e, t) {
                        return e[t] = [], e
                    }, {})
                }
            }, {
                key: "_setDefaults",
                value: function() {
                    var e = this.player.telecine.currentFile;
                    this.addToSeries(Ih, e);
                    var t = this.player.telecine.currentScanner;
                    this.addToSeries(Bh, t), this.setToSeries(Dh, 0), this.setToSeries(Nh, 0);
                    var n = this.player.store.get("ui.player.layout"),
                        i = this._getVideoDimensionsString(n);
                    this.addToSeries(Mh, i)
                }
            }, {
                key: "_onBandwidthChange",
                value: function(e) {
                    var t = Math.round(100 * e.speed) / 100;
                    this.addToSeries(Oh, {
                        videoTime: this.player.telecine.currentTime,
                        time: Date.now(),
                        value: t
                    });
                    var n = this.getCurrent(Nh),
                        i = this.getCurrent(Dh);
                    (!i || t < i) && this.setToSeries(Dh, t), (!n || n < t) && this.setToSeries(Nh, t)
                }
            }, {
                key: "_onDroppedFrames",
                value: function(e) {
                    var t = e.dropped,
                        n = e.total;
                    this.setToSeries(Lh, n), this.setToSeries(xh, t)
                }
            }, {
                key: "_onSeeked",
                value: function() {
                    this.addMarker("seeked", "Seeked to " + this.player.telecine.currentTime)
                }
            }, {
                key: "_onEnded",
                value: function() {
                    this.addMarker("ended", "Ended")
                }
            }, {
                key: "_onStreamChange",
                value: function(e) {
                    var t = e.index,
                        n = e.streams[t],
                        i = this.player.config.request.files.dash.streams.find(function(e) {
                            return e.id === parseInt(n.id, 10)
                        }),
                        r = {
                            profile: void 0 !== i ? i.profile : null,
                            quality: void 0 !== i ? i.quality : n.height + "p",
                            bitrate: n.bitrate,
                            framerate: n.framerate,
                            height: n.height,
                            width: n.width
                        },
                        o = this.getCurrent(Rh),
                        a = o ? o.bitrate : null;
                    if (a !== r.bitrate && null !== a) {
                        var s = this._getResolutionString(o),
                            u = this._getResolutionString(r);
                        r.bitrate < a ? this.addMarker(jh, "Downswitch from " + s + " to " + u) : a < r.bitrate && this.addMarker(Uh, "Upswitch from " + s + " to " + u)
                    }
                    this.addToSeries(Rh, r)
                }
            }, {
                key: "_onFileChange",
                value: function() {
                    var e = this.getCurrent(Ih),
                        t = this.player.telecine.currentFile;
                    this.addToSeries(Ih, t);
                    var n = t.metadata.cdn,
                        i = e ? e.metadata.cdn : null,
                        r = e ? vs[e.mime] : null,
                        o = vs[t.mime],
                        a = "CDN to " + n + "/" + o;
                    i && (a = "CDN from " + i + "/" + r + " to " + n + "/" + o), this.addMarker(Hh, a)
                }
            }, {
                key: "_onBufferOccupancyChange",
                value: function(e) {
                    var t = Math.round(1e3 * e) / 1e3;
                    this.addToSeries(Fh, {
                        videoTime: this.player.telecine.currentTime,
                        time: Date.now ? Date.now() : (new Date).getTime(),
                        value: t
                    })
                }
            }, {
                key: "_onScannerChange",
                value: function() {
                    var e = this.getCurrent(Bh),
                        t = this.player.telecine.currentScanner;
                    this.setToSeries(Bh, t), e && this.addMarker(Vh, "Scanner change to " + t)
                }
            }, {
                key: "_onStreamBufferStart",
                value: function() {
                    this.addMarker(Wh, "Buffering")
                }
            }, {
                key: "_onStalled",
                value: function() {
                    this.addMarker(zh, "Stalled")
                }
            }, {
                key: "_getResolutionString",
                value: function(e) {
                    return e.width + "" + e.height + "@" + Math.round(e.framerate) + " " + Math.round(e.bitrate / 1e3).toLocaleString() + " Kbps"
                }
            }]), n
        }(),
        Yh = (D(Ph = {}, "seeked", "#0088cc"), D(Ph, "ended", "#503873"), D(Ph, Uh, "#5a9e02"), D(Ph, jh, "#d93636"), D(Ph, "resize", "#FF8A00"), D(Ph, Vh, "#e9ff00"), D(Ph, Hh, "#b5d3e2"), D(Ph, Wh, "#e812e0"), D(Ph, zh, "#f44283"), Ph),
        Kh = function(e, t, n) {
            return Math.min(Math.max(e, t), n)
        },
        Xh = function() {
            function i(e, t) {
                var n = this;
                O(this, i), this.element = e, this.player = t, this.initTime = new Date, this.templateExtra = {
                    openLinkText: "Open Link",
                    openLinkDisabled: !1,
                    openLinkHref: null
                };
                this.debugcollect = new Gh(t, function() {
                    n.updateDebugValues()
                }), this.debugcollect.init(), this.attachEvents(), this.openLinkNum = 0, this.active = !1, this.hiddenInTinyMode = !1, this.copied = !1, this.sessionId = null
            }
            return R(i, [{
                key: "render",
                value: function() {
                    if (this.active) {
                        var e = this._getTemplateData();
                        this.element.innerHTML = Sf.render("debug_panel", e)
                    }
                }
            }, {
                key: "updateDebugValues",
                value: function() {
                    if (this.active) {
                        var e = this._getTemplateData();
                        this.element.querySelector(".vp-stats-debug-values").innerHTML = Sf.render("debug_values", e)
                    }
                }
            }, {
                key: "resetData",
                value: function() {
                    this.debugcollect.reset(), this.render()
                }
            }, {
                key: "attachEvents",
                value: function() {
                    var e = this;
                    this.player.events.on(ds.debugButtonPressed, function() {
                        e.element.classList.contains("hidden") ? e.showPanel() : e.hidePanel()
                    }), fh(this.element, ".js-copySessionButton", this._copySessionId.bind(this)), this.player.events.on(ds.configChanged, function() {
                        e.resetData()
                    }), fh(this.element, ".vp-stats-debug-close", function() {
                        e.hidePanel()
                    }), this.player.store.watch("ui.player.mode", this.toggleVisibility.bind(this))
                }
            }, {
                key: "hidePanel",
                value: function() {
                    this.element.classList.add("hidden"), this.element.setAttribute("hidden", ""), this.element.setAttribute("aria-hidden", "true"), this.player.events.fire(ds.hudHidden), this.active = !1
                }
            }, {
                key: "showPanel",
                value: function() {
                    this.element.classList.remove("hidden"), this.element.removeAttribute("hidden"), this.element.setAttribute("aria-hidden", "false"), this.player.events.fire(ds.hudDisplayed), this.active = !0, this.render()
                }
            }, {
                key: "toggleVisibility",
                value: function(e) {
                    if ("tiny" === e && this.active) return this.hiddenInTinyMode = !0, void this.hidePanel();
                    this.hiddenInTinyMode && (this.showPanel(), this.hiddenInTinyMode = !1)
                }
            }, {
                key: "_getTemplateData",
                value: function() {
                    var e = this.debugcollect.getCurrent(Ih);
                    if (!e) return {};
                    var t = e.metadata,
                        n = this.debugcollect.getCurrent(Bh),
                        i = "MediaSourceScanner" === n,
                        r = "LiveScanner" === n,
                        o = this.debugcollect.getCurrent(Rh),
                        a = this.debugcollect.getCurrent(Oh),
                        s = new Date(1e3 * this.player.config.request.timestamp),
                        u = new Date(new Date - this.initTime + 1e3 * this.player.config.request.timestamp),
                        c = this.debugcollect.getCurrent(Mh),
                        l = o ? o.profile + ", " + Ql(o) : null,
                        d = vs[e.mime] + ", cdn: " + t.cdn,
                        f = o ? o.width + "" + o.height + "@" + Math.round(o.framerate) + " " + Math.round(o.bitrate / 1e3).toLocaleString() + " Kbps" : null,
                        h = !(!this.player.config.request.files || !this.player.config.request.files.dash) && this.player.config.request.files.dash.separate_av,
                        v = this._getTestGroups(),
                        p = this.debugcollect.getCurrent(Lh) || 0,
                        m = this.debugcollect.getCurrent(xh) || 0,
                        g = 0 !== p ? (m / p * 100).toFixed(2) + "%" : 0,
                        y = a ? Math.floor(a.value / 1e3).toLocaleString() + " Kbps" : 0,
                        _ = Math.floor(this.debugcollect.getCurrent(Dh) / 1e3).toLocaleString() + " Kbps",
                        b = Math.floor(this.debugcollect.getCurrent(Nh) / 1e3).toLocaleString() + " Kbps",
                        w = i || r ? this._getBandwidthSeries() : null,
                        E = i || r ? this._getGraphSVG(w) : null,
                        S = i && this.player.config.request.ab_tests && this.player.config.request.ab_tests.bba && this.player.config.request.ab_tests.bba.group,
                        k = this.debugcollect.getCurrent(Fh),
                        T = k ? Math.floor(100 * k.value).toLocaleString() + "%" : 0,
                        A = S ? this._getBufferOccupancySeries() : null,
                        P = S ? this._getGraphSVG(A) : null;
                    return {
                        sessionId: this.sessionId,
                        clipId: this.player.config.video.id,
                        isCopyDisabled: !!this.player.doNotTrackEnabled || this.player.config.embed.settings.background,
                        hideCloseButton: !!this.player.config.embed.settings.background,
                        delivery: d,
                        resolution: f,
                        embedSize: c,
                        isDash: i,
                        isLive: r,
                        profileId: l,
                        separateAudioVideo: h,
                        testGroup: v,
                        totalFrames: p,
                        droppedFrames: m,
                        droppedFramesPercent: g,
                        bandwidthKbps: y,
                        bandwidthMinKbps: _,
                        bandwidthMaxKbps: b,
                        startTime: s,
                        debugTime: u,
                        displayBufferOccupancy: S,
                        bufferOccupancyPercent: T,
                        bandwidthSeriesSvg: E,
                        bufferOccupancySvg: P,
                        openLinkText: this.templateExtra.openLinkText,
                        openLinkDisabled: this.templateExtra.openLinkDisabled,
                        openLinkHref: this.templateExtra.openLinkHref
                    }
                }
            }, {
                key: "_getTestGroups",
                value: function() {
                    var t = this;
                    return Object.keys(this.player.config.request.ab_tests).map(function(e) {
                        return e + ": " + t.player.config.request.ab_tests[e].group
                    }).join(", ")
                }
            }, {
                key: "_getBandwidthSeries",
                value: function() {
                    return {
                        timeSeries: this.debugcollect.getSeries(Oh),
                        max: this.debugcollect.getCurrent(Nh)
                    }
                }
            }, {
                key: "_getBufferOccupancySeries",
                value: function() {
                    return {
                        timeSeries: this.debugcollect.getSeries(Fh)
                    }
                }
            }, {
                key: "_getGraphSVG",
                value: function(e) {
                    for (var t = e.timeSeries, n = e.max || 1, i = t.length, r = i < 100 ? 0 : i - 100, o = t[r], a = t[i - 1], s = o ? o.time : 0, u = a ? a.time : 0, c = [], l = r; l < i; l++) {
                        var d = t[l],
                            f = (d.time - s) / (u - s) * 250,
                            h = 14 - 14 * d.value / n;
                        isNaN(h) && (h = 0), isNaN(f) && (f = 0), c.push(f + "," + Kh(h, 0, 14))
                    }
                    var v = {
                        height: 14,
                        width: 250,
                        points: c.join(" "),
                        markers: this._getMarkerSvgPart(s, u)
                    };
                    return Sf.render("time_series_graph", v)
                }
            }, {
                key: "_getMarkerSvgPart",
                value: function(i, r) {
                    var e = this.debugcollect.getSeries(Ch) || [];
                    return 0 === e.length ? null : e.map(function(e) {
                        var t = e.data.time;
                        if (t < i || r < t) return "";
                        var n = (t - i) / (r - i) * 250;
                        return isNaN(n) && (n = 0), "<g>\n                <title>" + e.title + '</title>\n                <line class="stats-debug-marker" x1="' + n + '" y1="0" x2="' + n + '" y2="14" stroke-width="1" stroke="' + Yh[e.type] + '" />\n            </g>'
                    }).join("")
                }
            }, {
                key: "_copySessionId",
                value: function() {
                    var e = this;
                    if (!this.isCopied) {
                        var t = this.element.querySelector(".vp-copy-label"),
                            n = document.createElement("textarea");
                        if (n.value = this.player.config.request.session, this.element.appendChild(n), n.select(), document.execCommand("copy")) {
                            t.innerHTML = "Copied", this.element.removeChild(n), this.isCopied = !0;
                            var i = setTimeout(function() {
                                t.innerHTML = "Copy Debug Key", clearTimeout(i), e.isCopied = !1
                            }, 2e3)
                        } else this.element.querySelector(".js-copySessionButton").style.display = "none", this.element.removeChild(n), this.sessionId = this.player.config.request.session, this.updateDebugValues()
                    }
                }
            }]), i
        }(),
        $h = function() {
            function t(e) {
                O(this, t), this.alertTextElement = e.querySelector(".vp-text-alert-wrapper"), this.alertContentTitle = this.alertTextElement.querySelector(".vp-live-start-time-title"), this.alertContentTime = this.alertTextElement.querySelector(".vp-live-start-time-body"), this.alertContentFooter = this.alertTextElement.querySelector(".vp-live-start-time-footer")
            }
            return R(t, [{
                key: "show",
                value: function(e, t, n) {
                    this.alertContentTitle.innerHTML = e, this.alertContentTime.innerHTML = t, this.alertContentFooter.innerHTML = n, this.alertContentTitle.classList.remove("hidden"), this.alertContentTime.classList.remove("hidden"), this.alertContentFooter.classList.remove("hidden"), this.alertTextElement.classList.remove("hidden")
                }
            }, {
                key: "hide",
                value: function() {
                    this.alertContentTitle.classList.add("hidden"), this.alertContentTime.classList.add("hidden"), this.alertContentFooter.classList.add("hidden"), this.alertTextElement.classList.add("hidden")
                }
            }]), t
        }(),
        Jh = function() {
            function i(e, t, n) {
                O(this, i), this.textAlert = new cd(e), this.timeAlert = new $h(e), this.player = t, this.store = n, this.startTime = new Date(this.store.get(_d, null)), this._setUpLiveEvents(), this._checkStatus()
            }
            return R(i, [{
                key: "hide",
                value: function() {
                    this.textAlert.hide(), this.timeAlert.hide()
                }
            }, {
                key: "_checkStatus",
                value: function() {
                    (this.store.get(Hc) || this.store.get(Wc)) && this._onLiveEventActive(), this.store.get(Gc) && this._onLiveStreamEnded()
                }
            }, {
                key: "_setUpLiveEvents",
                value: function() {
                    this.player.events.on(xe.EVENT_ACTIVE, this._onLiveEventActive.bind(this)), this.player.events.on(xe.STREAM_ONLINE, this._onLiveStreamOnline.bind(this)), this.player.events.on(xe.STREAM_OFFLINE, this._onLiveStreamOffline.bind(this)), this.player.events.once(xe.EVENT_ENDED, this._onLiveStreamEnded.bind(this))
                }
            }, {
                key: "_onLiveEventActive",
                value: function() {
                    6e4 < this._timeToEventStart() ? (this.textAlert.hide(), this._displayTimeAlert()) : (this.timeAlert.hide(), this.textAlert.show("This event hasn't started yet"))
                }
            }, {
                key: "_displayTimeAlert",
                value: function() {
                    var e = this._timeToDisplayText();
                    this.timeAlert.show(e[0], e[1], e[2]), (this.store.get(Hc) || this.store.get(Wc)) && setTimeout(this._checkStatus.bind(this), 3e4)
                }
            }, {
                key: "_timeToEventStart",
                value: function() {
                    return this.startTime - new Date
                }
            }, {
                key: "_timeToDisplayText",
                value: function() {
                    var e = this._timeToEventStart(),
                        t = (e / 6e4).toFixed(0),
                        n = (e / 36e5).toFixed(0),
                        i = (e / 864e5).toFixed(0),
                        r = (new Date).toDateString() === this.startTime.toDateString();
                    return 1 < i || !r ? ["This event is scheduled for", ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"][this.startTime.getMonth()] + " " + this.startTime.getDate(), "at " + id(this.startTime)] : 1 < n && r ? ["This event is scheduled for", "Today", "at " + id(this.startTime)] : ["This event will start in", t + " " + (1 < t ? "minutes" : "minute"), ""]
                }
            }, {
                key: "_onLiveStreamOnline",
                value: function() {
                    this.hide()
                }
            }, {
                key: "_onLiveStreamOffline",
                value: function() {
                    this.textAlert.show("Live stream offline"), Oi.iOS && dh.element && (this.player.events.fire(ds.willExitFullscreen), dh.exit())
                }
            }, {
                key: "_onLiveStreamEnded",
                value: function() {
                    this.textAlert.show("Live event ended")
                }
            }]), i
        }();

    function Qh(e, r) {
        var o, a = r.querySelector(".notification");

        function t(e, t) {
            if (null !== r.parentElement.offsetParent) {
                r.classList.remove("hidden"), r.removeAttribute("hidden"), r.setAttribute("data-name", e);
                var n = function(e) {
                        var t = "watchlater" === e || "unwatchlater" === e ? .5 : .4,
                            n = r.clientHeight;
                        return r.clientHeight > r.clientWidth && (n = r.clientWidth), {
                            height: Math.round(n * t),
                            width: Math.round(n * t * 1.6)
                        }
                    }(e),
                    i = "width:" + n.width + "px;height:" + n.height + "px";
                a.style.cssText = i, a.innerHTML = t, "watchlater" !== e && "unwatchlater" !== e || function(e, t) {
                    var n = e.querySelector(".hour-hand"),
                        i = e.querySelector(".minute-hand");
                    if (n && i) {
                        var r = t ? 1 : -1,
                            o = new Date,
                            a = Math.abs(o.getHours() - 12),
                            s = o.getMinutes(),
                            u = s / 60 * 360 - 135,
                            c = a / 12 * 360 + s / 60 * 5,
                            l = c + 45 * r,
                            d = u + 540 * r;
                        n.style[Oi.transformProperty] = "rotate(" + c + "deg)", i.style[Oi.transformProperty] = "rotate(" + u + "deg)", window.requestAnimationFrame(function() {
                            e.classList.add("animate"), Oi.browser.firefox || Oi.browser.opera || window.requestAnimationFrame(function() {
                                n.style[Oi.transformProperty] = "rotate(" + l + "deg)", i.style[Oi.transformProperty] = "rotate(" + d + "deg)"
                            })
                        })
                    }
                }(a, "watchlater" === e), clearTimeout(o), r.classList.remove("animate"), window.requestAnimationFrame(function() {
                    r.classList.remove("invisible"), o = setTimeout(s, 750)
                })
            }
        }

        function s() {
            r.classList.add("animate"), r.classList.add("invisible")
        }

        function n() {
            r.classList.remove("animate"), r.classList.remove("invisible"), r.classList.add("hidden"), r.setAttribute("hidden", ""), r.removeAttribute("data-name"), a.innerHTML = "", a.classList.remove("filled"), a.classList.remove("animate"), e.events.fire(ds.notificationHidden)
        }
        return il(r).on("transitionend", function(e) {
            a.contains(e.target) && "height" === e.propertyName ? setTimeout(s, 100) : e.target === r && "opacity" === e.propertyName && window.requestAnimationFrame(n)
        }), e.events.on(ds.liked, function(e) {
            e || t("like", Sf.render("icon_heart"))
        }), e.events.on(ds.unliked, function(e) {
            e || t("unlike", Sf.render("icon_broken_heart"))
        }), e.events.on(ds.addedToWatchLater, function(e) {
            e || t("watchlater", Sf.render("icon_clock"))
        }), e.events.on(ds.removedFromWatchLater, function(e) {
            e || t("unwatchlater", Sf.render("icon_clock"))
        }), e.events.fire(ds.notificationModuleReady), {}
    }
    var Zh = function(e, t, n) {
        var i = !0,
            r = !0;
        if ("function" != typeof e) throw new TypeError("Expected a function");
        return tr(n) && (i = "leading" in n ? !!n.leading : i, r = "trailing" in n ? !!n.trailing : r), Ju(e, t, {
            leading: i,
            maxWait: t,
            trailing: r
        })
    };
    var ev = function(t) {
            return function(e) {
                return null == t ? void 0 : t[e]
            }
        }({
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;"
        }),
        tv = /[&<>"']/g,
        nv = RegExp(tv.source);
    var iv = function(e) {
        return (e = io(e)) && nv.test(e) ? e.replace(tv, ev) : e
    };

    function rv(o, a) {
        var n = qo(),
            s = !1;

        function t(e) {
            Ms(e, "facebook", {
                width: 580,
                height: 400
            })
        }

        function i(e) {
            Ms(e, "twitter", {
                width: 550,
                height: 420
            })
        }

        function r(e) {
            Ms(e, "tumblr", {
                width: 540,
                height: 600
            })
        }
        var e = {
            get events() {
                return n
            },
            setup: function() {
                a.classList.remove("vp-share-embed-active", "vp-share-embed-only"), o.config.embed.settings.share && o.config.embed.settings.share.embed_only && a.classList.add("vp-share-embed-only");
                var e = a.querySelector(".js-embedCopy");
                e && (e.style.width = function(e, t) {
                    var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 2;
                    t = Object.keys(t).map(function(e) {
                        return t[e]
                    });
                    var i = e.cloneNode();
                    i.style.visibility = "hidden", i.style.padding = 0, e.parentElement.appendChild(i);
                    var r = t.map(function(e) {
                            return i.innerText = e, i.clientWidth
                        }),
                        o = Math.max.apply(Math, r),
                        a = window.getComputedStyle(e),
                        s = parseFloat(a.fontSize);
                    return e.parentElement.removeChild(i), (o + n) / s + "em"
                }(e, ["Copy", "Copied!"])), o.events.on(ds.facebookButtonPressed, t).on(ds.twitterButtonPressed, i).on(ds.tumblrButtonPressed, r)
            },
            destroy: function() {
                o.events.off(ds.facebookButtonPressed, t).off(ds.twitterButtonPressed, i).off(ds.tumblrButtonPressed, r)
            },
            getShareData: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                    t = o.config.video.title,
                    n = o.config.video.owner.name,
                    i = o.config.video.share_url;
                return s = document.queryCommandSupported && document.queryCommandSupported("copy"), e.template = Sf.render("share", {
                    url: o.config.video.url,
                    shareUrl: i,
                    playerShareUrl: "https://" + o.config.player_url + "/video/" + o.config.video.id + "/share",
                    title: t,
                    owner: n,
                    embed: "public" === o.config.video.embed_permission && o.config.embed.settings.embed,
                    embedOnly: o.config.embed.settings.share && o.config.embed.settings.share.embed_only,
                    embedCode: iv(o.config.video.embed_code),
                    copyButton: s || Oi.flash.installed,
                    customizeEmbed: !!o.config.video.url,
                    readOnly: !Oi.touch,
                    strings: {
                        share: "Share",
                        facebook: "Share on Facebook",
                        twitter: "Share on Twitter",
                        tumblr: "Share on Tumblr",
                        email: "Share via Email",
                        emailSubject: "Check out " + t + " from " + n + " on Vimeo",
                        emailBody: "Check out " + t + " from " + n + " on Vimeo.\n\nThe video is available for your viewing pleasure at " + i + "\n\nIf you like this video, make sure you share it, too!\n\nVimeo is filled with lots of amazing videos. See more at https://vimeo.com.",
                        embedCode: "Get embed code",
                        embedTitle: "Embed",
                        embedSubtitle: "Add this video to your site with the embed code below.",
                        copy: "Copy",
                        copySuccess: "Copied!",
                        customize: '<a href="' + o.config.video.url + '#embed" target="_blank" rel="noopener">Customize this embed</a> on Vimeo'
                    }
                }), o.config.embed.settings.share && o.config.embed.settings.share.embed_only && (e.wrapperClass = "embed-only"), e
            },
            showShareView: function() {
                a.querySelector(".js-share-screen").classList.remove("cloaked"), a.classList.remove("vp-share-embed-active"), n.fire(ds.shareViewShown)
            },
            showEmbedView: function() {
                o.config.embed.settings.share.embed_only || (a.querySelector(".js-embed-screen").classList.remove("cloaked"), a.classList.add("vp-share-embed-active")), n.fire(ds.embedViewShown)
            }
        };
        return function() {
            var t;

            function r() {
                o.events.fire(ds.embedCodeCopied);
                var e = a.querySelector(".js-embedCopy");
                e.innerHTML = e.getAttribute("data-success-label"), clearTimeout(t), t = setTimeout(function() {
                    e.innerHTML = e.getAttribute("data-label")
                }, 2e3)
            }
            il(a).on("transitionend", ".js-share-screen", function(e) {
                "opacity" === e.propertyName && "0" === window.getComputedStyle(this, "").opacity && (n.fire(ds.embedViewEnd), this.classList.add("cloaked"))
            }).on("transitionend", ".js-embed-screen", function(e) {
                "opacity" === e.propertyName && "0" === window.getComputedStyle(this, "").opacity && (n.fire(ds.shareViewEnd), this.classList.add("cloaked"), Ns(a))
            }).on("copy", "input[name=embed_code]", function() {
                o.events.fire(ds.embedCodeCopied)
            }), fh(a, ".js-facebook", function() {
                return o.events.fire(ds.facebookButtonPressed, this.href), xs(), !1
            }), fh(a, ".js-twitter", function() {
                return o.events.fire(ds.twitterButtonPressed, this.href), xs(), !1
            }), fh(a, ".js-tumblr", function() {
                return o.events.fire(ds.tumblrButtonPressed, this.href), xs(), !1
            }), fh(a, ".js-email", function() {
                return o.events.fire(ds.emailButtonPressed), window.top.location = this.href, xs(), !1
            }), fh(a, ".js-embed", function() {
                return o.events.fire(ds.embedButtonPressed), e.showEmbedView(), xs(), !1
            }), fh(a, ".js-embedCopy", function() {
                if (s) {
                    a.querySelector("input[name=embed_code]").select();
                    try {
                        document.execCommand("copy") && r()
                    } catch (e) {}
                    return document.activeElement.blur(), !1
                }
            }), Oi.touch ? il(a).on("focus", "input[name=embed_code]", function() {
                var e = this;
                setTimeout(function() {
                    e.setSelectionRange(0, 9999), e.setAttribute("readonly", "readonly")
                }, 0)
            }).on("blur", "input", function() {
                this.removeAttribute("readonly")
            }) : il(a).on("click", "input[name=embed_code]", function() {
                this.setSelectionRange(0, 9999)
            }), n.on(ds.embedViewShown, function() {
                function e() {
                    var e = a.querySelector(".js-embedCopy");
                    new ZeroClipboard(e, {
                        moviePath: o.config.request.urls.zeroclip_swf,
                        trustedDomains: ["*"],
                        allowScriptAccess: "always"
                    }).on("complete", r)
                }
                if (!s && Oi.flash.installed) {
                    var t = "zc_script_loaded";
                    if (!document.getElementById(t)) {
                        var n, i = document.createElement("script");
                        return i.setAttribute("id", t), i.setAttribute("src", o.config.request.urls.zeroclip_js), i.onreadystatechange = i.onload = function() {
                            n || e(), n = !0
                        }, void document.getElementsByTagName("head")[0].appendChild(i)
                    }
                    e()
                }
            })
        }(), e
    }

    function ov(a, s) {
        var e = qo(),
            n = void 0;

        function u(e) {
            if ("yes" === e.form.getAttribute("data-bubble")) {
                e.form.setAttribute("data-bubble", "no");
                var t = s.querySelector(".vp-validation-bubble");
                t.querySelector(".vp-validation-bubble-message").innerHTML = e.validationMessage || "There is an error with this input.";
                var n = Ls(e),
                    i = Ls(e.form);
                t.style.left = n.left - i.left + "px", t.style.top = n.height + 1 + "px", t.classList.remove("hidden"), e.focus(), window.requestAnimationFrame(function() {
                    t.classList.add("vp-validation-bubble-animate")
                }), r()
            }
        }

        function r(e) {
            var t = s.querySelector(".vp-validation-bubble");
            if (t) {
                if (e) return clearTimeout(n), void t.classList.remove("vp-validation-bubble-animate");
                clearTimeout(n), n = setTimeout(function() {
                    t.classList.remove("vp-validation-bubble-animate")
                }, 5e3)
            }
        }

        function c() {
            var e = (0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}).showBubble,
                t = void 0 === e || e,
                n = s.querySelector("input[type=email]"),
                i = s.querySelector("input[type=text]");
            return n.setAttribute("aria-invalid", "false"), n.setCustomValidity(""), n.checkValidity && !n.checkValidity() ? (n.setAttribute("aria-invalid", "true"), n.validity.valueMissing && n.setCustomValidity("Please enter your email."), n.validity.typeMismatch && n.setCustomValidity("Please enter a valid email."), t && u(n), !1) : (i.setAttribute("aria-invalid", "false"), i.setCustomValidity(""), i.checkValidity && !i.checkValidity() ? (i.setAttribute("aria-invalid", "true"), i.validity.typeMismatch && i.setCustomValidity("Please enter a valid name."), !1) : (r(!0), !0))
        }
        var l = function() {
            e.fire(ds.emailCaptureEnd)
        };

        function t(t) {
            if (!c()) return !1;
            var n = t.querySelector("input[type=email]"),
                i = t.querySelector("input[type=submit]"),
                r = {
                    signature: "signature",
                    time: "timestamp",
                    expires: "expires"
                };

            function o(e) {
                i.classList.remove("loading"), n.setCustomValidity("Uh oh. There was a problem. Please try again."), n.setAttribute("aria-invalid", "true"), u(n)
            }
            Object.keys(r).forEach(function(e) {
                    t.querySelector("input[name=" + e + "]").value = a.config.request[r[e]]
                }), i.classList.add("loading"),
                function(e, t, n) {
                    Ns(s);
                    var i = ke(e.querySelectorAll("input")).map(function(e) {
                            return e.name ? encodeURIComponent(e.name) + "=" + encodeURIComponent(e.value) : encodeURIComponent(e.value)
                        }).join("&"),
                        r = new XMLHttpRequest;
                    r.open(e.method, e.action + window.location.search, !0), r.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), r.withCredentials = !0, r.timeout = 3e3, r.onload = function() {
                        var e;
                        try {
                            e = JSON.parse(r.responseText)
                        } catch (e) {}
                        t(e, r)
                    }, r.onerror = function(e) {
                        n(e)
                    }, r.send(i)
                }(t, function(e, t) {
                    !1 !== e ? (a.config.embed.email = null, a.events.fire(ds.emailCaptureSuccess), function() {
                        var e = s.querySelector(".vp-email-capture"),
                            t = s.querySelector(".vp-email-capture-confirm");
                        e.classList.add("vp-email-capture-invisible"), t.classList.remove("vp-email-capture-confirm-hidden"), window.requestAnimationFrame(function() {
                            window.requestAnimationFrame(function() {
                                t.classList.add("in"), setTimeout(l, 2250)
                            })
                        })
                    }()) : o(t.status)
                }, o)
        }
        var i = {
            get events() {
                return e
            },
            getData: function() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                    t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
                    n = a.config.embed.email || {},
                    i = t.custom_logo || n.custom_logo;
                if (i) var r = Ec({
                    width: 150,
                    height: 75,
                    baseUrl: i,
                    webpSupport: a.config.request.flags.webp
                });
                return e.template = Sf.render("email_capture", {
                    allowSkip: t.allow_skip || n.allow_skip,
                    customLogo: r,
                    text: t.text || n.text || "",
                    action: "https://" + a.config.player_url + "/video/" + a.config.video.id + "/submit-email",
                    confirmation: t.confirmation || n.confirmation || "Thanks! Your email was successfully submitted.",
                    referrer: a.config.request.referrer,
                    strings: {
                        email: "Email address",
                        fullName: "Name (optional)",
                        nothanks: "No thanks",
                        submit: "Submit"
                    }
                }), e.modal = !0, e.logo = !1, e.preventBackgroundClose = !0, e.noblur = t.noblur, e
            }
        };
        return fh(s, ".vp-email-capture-form-button--cancel", function() {
            l()
        }), fh(s, ".vp-email-capture-form-button--reset", function() {
            a.events.fire(ds.playButtonPressed)
        }), fh(s, ".vp-email-capture-form-button--submit", function() {
            this.form.classList.add("vp-email-capture-form-submitted"), this.form.setAttribute("data-bubble", "yes"), c()
        }), il(s).on("submit", ".vp-email-capture-form", function() {
            return a.events.fire(ds.emailCaptureSubmitted), t(this), !1
        }).on(["focus", "input"], ".vp-email-capture-form-input[type=email]", function() {
            c({
                showBubble: !1
            })
        }), i
    }

    function av(c, t, n) {
        var i, r, o, e, a = n.querySelector(".vp-outro"),
            s = null,
            u = !1,
            l = !1,
            d = !1,
            f = !1,
            h = !1,
            v = Zh(E, 250);

        function p(e, t) {
            return -1 !== t.indexOf(e)
        }

        function m() {
            return p(c.config.embed.outro, ["vod"]) ? (s = g(o = "vod"), !0 === f && b(), I.resolve(s)) : (h = !0, Ds("https://" + c.config.player_url + "/video/" + c.config.video.id + "/outro?on_site=" + c.config.embed.on_site + "&type=" + c.config.embed.outro + "&email=" + (c.config.embed.email ? 1 : 0), {
                withCredentials: !0
            }).then(function(e) {
                return JSON.parse(e)
            }).then(function(e) {
                return o = e.type, (s = g(o, e.data)) && (s.bgimage && Sc(s.bgimage), s.contexts && s.contexts.forEach(function(e) {
                    e.videos.forEach(function(e) {
                        Sc(e.thumbnail)
                    })
                })), s
            }))
        }

        function g(e) {
            var n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
                t = wc(c.element.clientWidth * Oi.devicePixelRatio, c.element.clientHeight * Oi.devicePixelRatio),
                i = t.width,
                r = t.height;
            if (n.img_base && (n.bgimage = Ec({
                    width: i,
                    height: r,
                    baseUrl: n.img_base,
                    webpSupport: c.config.request.flags.webp
                })), p(e, ["vod"])) {
                var o = void 0 !== c.config.video.vod.is_preorder ? c.config.video.vod.is_preorder : !!c.config.video.vod.date_available,
                    a = c.config.video.vod.is_coming_soon,
                    s = c.config.video.vod.date_available_formatted_datetime || c.config.video.vod.date_available,
                    u = "Coming soon to Vimeo On Demand.";
                a && s && (u = "Coming soon to Vimeo On Demand on " + s + "."), o && (u = "Pre-order now. Watch on " + s + "."), n = {
                    purchased: c.config.user.purchased,
                    title: c.config.video.vod.feature_title,
                    url: c.config.video.vod.url,
                    currency: c.config.request.currency,
                    countries: c.config.video.vod.countries,
                    country: c.config.request.country,
                    buttons: c.config.video.vod.purchase_options,
                    translationMap: c.config.request.dynamic_translation_map,
                    isPreorder: o,
                    isComingSoon: a,
                    releaseDate: s,
                    strings: {
                        watch: o ? "Watch on " + s : "Watch Now",
                        preRelease: u
                    }
                }
            }
            return p(e, ["videos", "threevideos", "promoted"]) && (c.config.user.following = n.following, (n = {
                contexts: Array.isArray(n) ? n : [n],
                owner: c.config.video.owner.id,
                bgimage: n.bgimage,
                following: n.following
            }).contexts && n.contexts.forEach(function(t) {
                t.videos.forEach(function(e) {
                    e.fullTitle = e.title, e.byline = "", e.owner.id !== n.owner && (e.fullTitle = e.title + " from " + e.owner.name, e.byline = "from " + e.owner.name), e.thumbnail_base && (e.thumbnail = Ec({
                        width: Math.round(i / t.videos.length),
                        height: Math.round(r / t.videos.length),
                        baseUrl: e.thumbnail_base,
                        webpSupport: c.config.request.flags.webp,
                        crop: !0
                    }))
                })
            })), p(e, ["link"]) && (n.url = Bu(n.url), n.url2 = Bu(n.url2)), p(e, ["share"]) && (n.strings = {
                back: "Back"
            }), n
        }

        function y(e) {
            a.classList.toggle("vp-outro--link-medium", e)
        }

        function _(e) {
            a.classList.toggle("vp-outro--link-large", e)
        }

        function b() {
            if (u = !0, p(o, ["beginning"])) return a.innerHTML = "", void c.events.fire(cs.reset);
            if (null !== s || h) {
                if (p(o, ["videos", "threevideos", "promoted"])) {
                    if (0 === s.contexts.reduce(function(e, t) {
                            return e + t.videos.length
                        }, 0)) return;
                    s.showFollowButton = !c.config.user.owner && c.config.user.logged_in, s.strings = {
                        follow: "Follow",
                        following: "Following",
                        unfollow: "Unfollow"
                    }
                }
                s && (s.target = !c.config.embed.on_site);
                var e = o;
                p(o, ["threevideos", "promoted"]) && (e = "videos"), a.innerHTML = Sf.render("outro_" + e, s), a.setAttribute("data-type", e), n.classList.remove("hidden"), n.removeAttribute("hidden"), l = !0, p(o, ["videos", "threevideos"]) ? function() {
                    var e = document.querySelector(".js-outro-followWrap");
                    if (e) {
                        var t = window.getComputedStyle(e),
                            n = parseFloat(t.fontSize);
                        e.style.width = e.clientWidth / n + "em"
                    }
                }() : p(o, ["link"]) ? (t.watch("ui.outro.isLinkTitleVisible", y), t.watch("ui.outro.isLinkDescriptionVisible", _), y(t.get("ui.outro.isLinkTitleVisible")), _(t.get("ui.outro.isLinkDescriptionVisible"))) : p(o, ["share"]) ? function() {
                    var e = n.querySelector(".js-outro-content"),
                        t = i.getShareData();
                    e.innerHTML = t.template, i.setup()
                }() : p(o, ["email"]) && function() {
                    var e = n.querySelector(".js-outro-content"),
                        t = r.getData({}, s);
                    e.innerHTML = t.template
                }(), window.requestAnimationFrame(function() {
                    window.requestAnimationFrame(function() {
                        n.classList.add("in"), E()
                    })
                })
            } else m().then(function() {
                return b()
            }).catch(function() {})
        }

        function w() {
            if (l) return i.destroy(), l = d = u = !1, void window.requestAnimationFrame(function() {
                n.classList.remove("in"), c.events.fire(ds.outroHidden), S()
            });
            u && (u = !1, c.events.fire(ds.outroHidden))
        }

        function E() {
            if (!d && n.clientWidth) {
                il(window).off("resize", v), d = !0;
                var i = [];
                s && s.contexts && s.contexts.forEach(function(e) {
                    e.videos && e.videos.forEach(function(e) {
                        var t = e.id,
                            n = a.querySelector('[data-video-id="' + t + '"]');
                        n && 0 < n.clientWidth && i.push(t)
                    })
                }), c.events.fire(ds.outroDisplayed, i)
            }
        }

        function S() {
            il(window).off("resize", v), il(window).on("resize", v)
        }
        return c.events.on(Pe.TIME_UPDATE, function(e) {
            var t = e.currentTime,
                n = e.duration;
            e.timeProgress, f = !1, !h && null === s && n - 10 <= t && m().catch(function() {})
        }), c.events.on(gn.PLAY_INITIATED, function() {
            p(c.config.embed.outro, ["nothing", "beginning"]) && (o = c.config.embed.outro, s = !1)
        }), c.events.on(ds.ended, function() {
            e = setTimeout(function() {
                c.events.fire(cs.showOutro)
            }, 250)
        }), c.events.on(ds.loadVideo, function() {
            clearTimeout(e)
        }), c.events.on(cs.showOutro, function(e, t) {
            c.performDelegateAction(ls.showOutro, function() {
                e && (o = e, s = null, h = !1), t && t.data && (s = g(e, t.data)), f = !0, b()
            })
        }), c.events.on(cs.hideOutro, function() {
            w()
        }), il(n).on("click", ".js-videoLink", function(e) {
            c.events.fire(ds.outroVideoPressed, parseInt(this.getAttribute("data-video-id"), 10))
        }), il(n).on("click", ".js-cta", function(e) {
            c.events.fire(ds.outroCtaPressed, this.href)
        }), il(n).on("click", ".js-link", function(e) {
            c.events.fire(ds.outroLinkPressed, this.href)
        }), il(n).on("click", ".js-imageLink", function(e) {
            c.events.fire(ds.outroImagePressed, this.href)
        }), il(n).on("transitionend", function(e) {
            n.classList.contains("in") || (n.classList.add("hidden"), n.setAttribute("hidden", ""))
        }, !1), c.events.on([Pe.PLAY, Pe.SEEKED, ds.scrubbingStarted], w), c.events.on(ds.outroDisplayed, function() {
            c.element.classList.add("player-outroVisible")
        }).on(ds.outroHidden, function() {
            c.element.classList.remove("player-outroVisible")
        }), fh(n, ".js-outro-follow", function() {
            c.events.fire(ds.followButtonPressed)
        }), il(n).on("mouseleave", ".js-outro-follow", function(e) {
            var t = document.querySelector(".js-outro-follow");
            t && t.classList.remove("vp-outro-follow--activated")
        }), c.events.on(ds.followed, function() {
            var e = document.querySelector(".js-outro-follow");
            e && (e.setAttribute("aria-pressed", !0), e.classList.add("vp-outro-follow--activated"))
        }), c.events.on(ds.unfollowed, function() {
            var e = document.querySelector(".js-outro-follow");
            e && e.setAttribute("aria-pressed", !1)
        }), c.events.on(cs.showOverlay, function() {
            setTimeout(function() {
                n.classList.add("hidden")
            }, 150)
        }), c.events.on(ds.overlayClosed, function() {
            n.classList.contains("in") && n.classList.remove("hidden")
        }), c.events.on(cs.reset, function() {
            s = null, h = !1
        }), fh(n, ".js-vod-button", function() {
            var e = this.getAttribute("data-product-id");
            return c.events.fire(ds.vodButtonPressed, e), !1
        }), fh(n, ".js-vod-watch", function() {
            if (!("date_available" in c.config.video.vod)) return w(), c.events.fire(ds.vodButtonPressed), !1
        }), a && ((i = new rv(c, a)).events.on(ds.embedViewShown, function() {
            c.config.embed.settings.share.embed_only || (n.querySelector(".js-back").classList.remove("cloaked"), n.classList.add("embed-active"))
        }).on(ds.shareViewShown, function() {
            n.classList.remove("embed-active")
        }), fh(n, ".js-back", function() {
            return i.showShareView(), !1
        }), i.events.on(ds.shareViewEnd, function() {
            n.querySelector(".js-back").classList.add("cloaked")
        })), a && (r = new ov(c, a)), S(), {}
    }

    function sv(c, e, o) {
        var n, i, r, a = o.querySelector(".vp-overlay-cell"),
            s = o.querySelector(".vp-overlay"),
            u = o.querySelector(".vp-overlay-icon-wrapper"),
            l = u.querySelector(".vp-overlay-icon"),
            d = o.querySelector(".vp-overlay-logo"),
            f = !1,
            h = null,
            v = null,
            p = new rv(c, s),
            m = new ov(c, s),
            g = !1,
            t = !1;

        function y() {
            var e = Ls(o),
                t = Ls(s),
                n = Ls(d),
                i = t.bottom + (e.height - t.bottom) / 2;
            return e.height - i - n.height / 2 + "px"
        }

        function _() {
            var e = Ls(o),
                t = Ls(s),
                n = Ls(u),
                i = e.height / 2,
                r = t.bottom + (e.height - t.bottom) / 2;
            return {
                top: i - n.height / 2 + "px",
                transform: "translateY(" + (r - i) + "px)"
            }
        }

        function b(e, t) {
            o.setAttribute("data-name", e), s.innerHTML = t.template, Oi.iOS && dh.element && (c.events.fire(ds.willExitFullscreen), dh.exit()), t.noblur || xs(r = document.activeElement), t.modal && (o.classList.add("modal"), o.setAttribute("data-modal", "true")), t.preventBackgroundClose && o.setAttribute("data-background-close", "false"), t.wrapperClass && o.classList.add(t.wrapperClass), t.icon.type && (t.logo && (d.classList.remove("hidden"), u.classList.add("cloaked"), window.requestAnimationFrame(function() {
                d.innerHTML = Sf.render("logo"), d.style.bottom = y()
            })), u.classList.remove("hidden"), l.innerHTML = t.icon.html, window.requestAnimationFrame(function() {
                var e = _();
                u.style.top = e.top, u.style[Oi.transformProperty] = e.transform
            }), o.setAttribute("data-icon", t.icon.type), u.setAttribute("data-icon", t.icon.type), l.setAttribute("data-icon", t.icon.type), "private-unlocked" === e && l.classList.add("open")), o.classList.add("invisible"), o.classList.remove("hidden"), o.removeAttribute("hidden"), o.classList.add("in"), v = t, h = e, f = !0, c.events.fire(ds.overlayOpened, e), c.element.classList.add("player-overlayVisible"), -1 < ["share", "hd-not-allowed"].indexOf(e) && Ns(o), window.requestAnimationFrame(function() {
                o.classList.remove("invisible"), window.requestAnimationFrame(function() {
                    s.classList.add("in"), a.classList.add("in")
                })
            })
        }

        function w() {
            s.classList.remove("in"), s.classList.add("out")
        }

        function E(e) {
            if ("true" !== o.getAttribute("data-modal") && f) {
                o.removeAttribute("data-background-close"), a.classList.remove("in"), a.classList.add("out"), w(), o.classList.remove("in"), o.classList.add("out"), clearTimeout(n), n = setTimeout(S, 200), e && e.preventDefault && e.preventDefault();
                var t = o.querySelector(".js-back");
                t && t.classList.add("cloaked"), p.destroy(), c.events.fire(ds.overlayClosed, h), c.element.classList.remove("player-overlayVisible"), f = !1, v = h = null, window.requestAnimationFrame(function() {
                    r && (! function() {
                        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : document.activeElement,
                            t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null;
                        try {
                            e.focus()
                        } catch (e) {
                            t && t(e)
                        }
                    }(r), r = null)
                })
            }
        }

        function S() {
            o.setAttribute("hidden", ""), o.removeAttribute("data-name"), o.removeAttribute("data-icon"), o.classList.add("hidden"), o.classList.remove("out"), o.classList.remove("embed-active"), o.classList.remove("modal"), o.classList.remove("embed-only"), a.classList.remove("out"), a.classList.remove("in"), u.removeAttribute("data-icon"), u.classList.add("hidden"), u.classList.remove("animate"), l.removeAttribute("data-icon"), l.innerHTML = "", d.classList.add("hidden"), s.classList.remove("out"), s.innerHTML = "", c.events.fire(ds.overlayCleared)
        }

        function k() {
            o.setAttribute("data-modal", "false")
        }

        function T(e) {
            if ("yes" === e.form.getAttribute("data-bubble")) {
                e.form.setAttribute("data-bubble", "no");
                var t = o.querySelector(".vp-validation-bubble");
                t.querySelector(".vp-validation-bubble-message").innerHTML = e.validationMessage || "There is an error with this input.";
                var n = Ls(e),
                    i = Ls(e.form);
                t.style.left = n.left - i.left + "px", t.style.top = n.height + 1 + "px", t.classList.remove("hidden"), e.focus(), window.requestAnimationFrame(function() {
                    t.classList.add("vp-validation-bubble-animate")
                }), A()
            }
        }

        function A(e) {
            var t = o.querySelector(".vp-validation-bubble");
            if (t) {
                if (e) return clearTimeout(i), void t.classList.remove("vp-validation-bubble-animate");
                clearTimeout(i), i = setTimeout(function() {
                    t.classList.remove("vp-validation-bubble-animate")
                }, 5e3)
            }
        }

        function P(e) {
            var t = o.querySelector("input[type=password]");
            return t.form.classList.contains("submitted") ? (t.setAttribute("aria-invalid", "false"), t.setCustomValidity(""), t.checkValidity && !t.checkValidity() ? (t.setAttribute("aria-invalid", "true"), t.validity.valueMissing && t.setCustomValidity("Please enter the password."), e || T(t), !1) : (A(!0), !0)) : null
        }

        function C() {
            x(), u.classList.remove("cloaked"), u.classList.add("animate"), window.requestAnimationFrame(function() {
                u.style[Oi.transformProperty] = "translateY(-10px)"
            }), k(), w()
        }

        function x() {
            d.classList.add("animate")
        }

        function L() {
            l.classList.add("open")
        }

        function O() {
            l.classList.add("pulled-back")
        }

        function R(e) {
            !e && f && "email-capture" === h ? (t = f, k(), E()) : e && t && (t = !1, c.events.fire(cs.showOverlay, "email-capture"))
        }

        function I() {
            var e = c.config.embed.email || {};
            if (c.telecine) {
                var t = e.timecode || 0;
                g = c.telecine.currentTime > t
            }
            e && "before" === e.position && !g && M()
        }

        function M() {
            e.get("ui.overlay.isEmailCaptureVisible") ? c.events.fire(cs.showOverlay, "email-capture") : t = !0
        }

        function D(e) {
            var t = e.currentTime,
                n = void 0 === t ? 0 : t,
                i = c.config.embed.email || {};
            i && "during" === i.position && (n < i.timecode && (g = !1), n >= i.timecode && !g && (g = !0, M()))
        }

        function N() {
            k(), E()
        }
        return c.events.on(cs.hideOverlay, function() {
                (0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}).unmakeModal && k(), E()
            }), c.events.on(cs.showOverlay, function(t) {
                var n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
                    e = function() {
                        var e = {
                            modal: !1,
                            template: null,
                            logo: !1,
                            icon: {
                                type: null,
                                html: null
                            }
                        };
                        switch (t) {
                            case "share":
                                return b(t, p.getShareData(e, n)), void p.setup();
                            case "private-locked":
                                return void b(t, function(e) {
                                    return e.icon = {
                                        type: "lock",
                                        html: Sf.render("icon_lock")
                                    }, e.modal = !0, e.logo = !0, e.template = Sf.render("private_locked", {
                                        action: "https://" + c.config.vimeo_url + "/log_in",
                                        strings: {
                                            title: "Private Video",
                                            subtitle: "Log in to watch (if you have permission)",
                                            logIn: "Log in",
                                            logInLabel: "Log in (opens in a new window)"
                                        }
                                    }), e
                                }(e));
                            case "password":
                                return void b(t, function(e) {
                                    return e.icon = {
                                        type: "lock",
                                        html: Sf.render("icon_lock")
                                    }, e.template = Sf.render("password", {
                                        action: "https://" + c.config.player_url + "/video/" + c.config.video.id + "/check-password?referrer=" + c.config.request.referrer,
                                        strings: {
                                            title: "Password Required",
                                            subtitle: "If youve got it, enter it below.",
                                            password: "Password",
                                            watch: "Watch Video"
                                        }
                                    }), e.modal = !0, e.logo = !!c.config.embed.settings.branding, e
                                }(e));
                            case "private-unlocked":
                                return void b(t, function(e) {
                                    return e.icon = {
                                        type: "lock",
                                        html: Sf.render("icon_lock")
                                    }, e.template = Sf.render("private_unlocked", {
                                        strings: {
                                            title: "Private Video",
                                            subtitle: "You are logged in and have permission to watch (congrats).",
                                            watch: "Watch Video"
                                        }
                                    }), e
                                }(e));
                            case "error":
                                return void b(t, function(e, t) {
                                    return e.template = Sf.render("error", {
                                        title: t.title,
                                        message: t.message
                                    }), e.modal = !!t.modal, e.logo = !!t.logo, t.icon && "lock" === t.icon && (e.icon = {
                                        type: "lock",
                                        html: Sf.render("icon_lock")
                                    }), e
                                }(e, n));
                            case "help":
                                return void b(t, function(e) {
                                    return e.template = Sf.render("help", {
                                        onSite: c.config.embed.on_site,
                                        strings: {
                                            title: "Keyboard Shortcuts",
                                            volumeUp: "Volume up",
                                            volumeDown: "Volume down",
                                            scrubForward: "Scrub forward",
                                            scrubBackwards: "Scrub backwards",
                                            like: "Like",
                                            share: "Share",
                                            watchLater: "Watch Later",
                                            captions: "Toggle Captions",
                                            prefs: "Toggle Preferences Menu",
                                            fullscreen: "Toggle fullscreen",
                                            viewOnVimeo: "View on Vimeo"
                                        }
                                    }), e
                                }(e));
                            case "email-capture":
                                return void b(t, m.getData(e, n));
                            case "app-redirect":
                                return void b(t, function(e) {
                                    var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
                                        n = t.redirectUrl,
                                        i = t.title,
                                        r = t.buttonText,
                                        o = t.ignoreText,
                                        a = t.bottomText,
                                        s = t.newWindow,
                                        u = Bs(c.config.video.privacy, [ss.PRIVACY_HIDE_FROM_VIMEO, ss.PRIVACY_UNLISTED]);
                                    return e.template = Sf.render("app_redirect", {
                                        hideRedirectButton: u,
                                        redirectUrl: n,
                                        newWindow: s,
                                        strings: {
                                            title: i,
                                            buttonText: r,
                                            ignoreText: o,
                                            bottomText: a
                                        }
                                    }), e.modal = !1, e.logo = !1, e.preventBackgroundClose = !0, e
                                }(e, n))
                        }
                    };
                if (f && !n.nohide) return ("share" !== h && "help" !== h && "hd-not-allowed" !== h || h !== t) && (c.events.once(ds.overlayCleared, e), k()), void E();
                e()
            }), il(o).on("input", "input", function() {
                this.form.classList.add("interacted")
            }).on(["focus", "blur"], "input", function() {
                A(!0)
            }).on("transitionend", ".vp-validation-bubble", function(e) {
                "opacity" === e.propertyName && "0" === window.getComputedStyle(this, "").opacity && this.classList.add("hidden")
            }), c.events.on([ds.overlayCloseButtonPressed, Pe.PLAY], E), c.events.on(ds.privateUnlocked, function() {
                "private-locked" === h && (k(), E())
            }), c.events.on(ds.configChanged, function() {
                "share" === h && (v = p.getShareData({
                    modal: !1,
                    template: null,
                    logo: !1,
                    icon: {
                        type: null,
                        html: null
                    }
                }), s.innerHTML = v.template, p.setup())
            }), il(window).on("resize", function() {
                if (f) {
                    d.style.bottom = y();
                    var e = _();
                    u.style.top = e.top, u.style[Oi.transformProperty] = e.transform
                }
            }), il(o).on("transitionend", ".vp-overlay-logo", function(e) {
                "opacity" === e.propertyName && this.classList.contains("animate") && (d.classList.add("hidden"), d.classList.remove("animate"))
            }), il(o).on("transitionend", ".vp-overlay-icon-wrapper", function(e) {
                -1 < e.propertyName.indexOf("transform") && ("" === this.style[Oi.transformProperty] ? (this.classList.remove("centered"), "lock" !== this.getAttribute("data-icon") || l.classList.contains("open") || l.querySelector("canvas") ? O() : setTimeout(L, 100)) : "translateY(-10px)" === this.style[Oi.transformProperty] && (u.classList.add("centered"), u.style[Oi.transformProperty] = ""))
            }), il(o).on("transitionend", ".vp-overlay-icon", function(e) {
                -1 < e.propertyName.indexOf("transform") && (this.classList.contains("out") ? (k(), E()) : this.classList.contains("pulled-back") ? (l.classList.add("out"), l.classList.remove("pulled-back")) : this.classList.contains("open") && O())
            }), e.watch("ui.overlay.isEmailCaptureVisible", R), c.events.on(ds.ready, I), c.events.on(ds.configChanged, I), c.events.on(Pe.TIME_UPDATE, D), m.events.on(ds.emailCaptureEnd, N), p.events.on(ds.embedViewShown, function() {
                c.config.embed.settings.share.embed_only || (o.querySelector(".js-back").classList.remove("cloaked"), o.classList.add("embed-active"))
            }).on(ds.shareViewShown, function() {
                o.classList.remove("embed-active")
            }), fh(o, ".js-back", function() {
                return p.showShareView(), !1
            }), p.events.on(ds.shareViewEnd, function() {
                o.querySelector(".js-back").classList.add("cloaked")
            }), c.events.on(ds.stereoscopicButtonPressed, function() {
                c.events.fire(cs.showOverlay, "app-redirect", {
                    redirectUrl: c.doNotTrackEnabled ? "https://play.google.com/store/apps/details?id=com.vimeo.android.videoapp&hl=en" : tl(c.config.video.id, "player-spatial-redirect"),
                    title: "Headset viewing isnt currently supported in mobile browsers.",
                    buttonText: "Watch in the Vimeo app",
                    ignoreText: null,
                    bottomText: null,
                    newWindow: !c.config.embed.on_site
                })
            }), il(s).on("click", ".app-redirect-ignore", function() {
                E()
            }), il(s).on("click", "[data-new-window]", function(e) {
                return window.open(document.querySelector(".app-redirect-button").getAttribute("href")), !1
            }), il(s).on("click", ".popup", function() {
                return c.events.fire(cs.openPopup, "login-private-locked"), !1
            }),
            function() {
                function e(e) {
                    if (!P()) return !1;
                    var t = e.querySelector("input[type=password]"),
                        n = e.querySelector("input[type=submit]");

                    function i(e) {
                        n.classList.remove("loading"), t.setCustomValidity("Uh oh. There was a problem. Please try again."), t.setAttribute("aria-invalid", "true"), T(t)
                    }
                    n.classList.add("loading"),
                        function(e, t, n) {
                            Ns(o);
                            var i = ke(e.querySelectorAll("input")).map(function(e) {
                                    return e.name ? encodeURIComponent(e.name) + "=" + encodeURIComponent(e.value) : encodeURIComponent(e.value)
                                }).join("&"),
                                r = new XMLHttpRequest;
                            r.open(e.method, e.action + window.location.search, !0), r.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), r.withCredentials = !0, r.timeout = 3e3, r.onload = function() {
                                var e;
                                try {
                                    e = JSON.parse(r.responseText)
                                } catch (e) {}
                                t(e, r)
                            }, r.onerror = function(e) {
                                n(e)
                            }, r.send(i)
                        }(e, function(e, t) {
                            if (!1 !== e) {
                                if (c.events.fire(ds.passwordUnlocked, e), "icon-hidden" === window.getComputedStyle(a, ":after").content) return k(), void E();
                                C()
                            } else i(t.status)
                        }, i)
                }
                il(s).on("click", ".password input[type=submit]", function() {
                    this.form.classList.add("submitted"), this.form.setAttribute("data-bubble", "yes"), P(!0)
                }).on("submit", ".password form", function() {
                    return e(this), !1
                }).on(["focus", "input"], [".password input[type=email]", ".password input[type=password]"], function() {
                    P()
                })
            }(), fh(s, ".unlocked button", function() {
                0 === Ls(l).width ? (x(), k(), E()) : C(), Oi.iPad || Oi.iPhone || c.events.once(ds.overlayCleared, function() {
                    c.events.fire(ds.playButtonPressed)
                })
            }),
            function() {
                var i = void 0;
                c.events.on(ds.error, function(e) {
                    var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {
                        modal: !0,
                        final: !0
                    };
                    if (!1 !== t.final) {
                        i = e;
                        var n = {
                            modal: !1,
                            template: null,
                            logo: !1,
                            icon: {
                                type: null,
                                html: null
                            }
                        };
                        if (n.modal = t.modal, n.template = Sf.render("error", {
                                title: t.title,
                                message: t.message
                            }), f) return E(), void c.events.once(ds.overlayCleared, function() {
                            return b(e, n)
                        });
                        b(e, n)
                    }
                }), il(s).on("click", ".error", function(e) {
                    c.events.fire(ds.errorLinkPressed, e.target.href, i)
                })
            }(), c.events.on(ds.configChanged, function() {
                window.requestAnimationFrame(function() {
                    k(), E()
                })
            }), fh(o, ".js-close", function() {
                c.events.fire(ds.overlayCloseButtonPressed)
            }), il(o).on(["click", "touchend"], [".vp-overlay-content", ".js-share", ".vp-overlay-logo"], function(e) {
                e.stopPropagation()
            }).on(["click", "touchend"], [".vp-overlay-cell", "nav"], function() {
                return "false" === o.getAttribute("data-background-close") || (c.events.fire(ds.overlayCloseButtonPressed), !1)
            }), c.events.on(cs.showOutro, function() {
                o.classList.add("hidden")
            }), c.events.on(ds.outroHidden, function() {
                o.classList.contains("in") && o.classList.remove("hidden")
            }), c.events.fire(ds.overlayModuleReady), {}
    }
    var uv = [".vp-title a"],
        cv = [".vp-title a:hover"],
        lv = ["a", ".button-link", ".vp-overlay-wrapper .footnote.share a:hover", ".vp-title h1", ".vp-title span.user", ".menu li:hover", ".menu li.active", ".vp-outro-link:hover", ".vp-outro-videosTitle a:hover", "li.vp-panel-item:hover", "li.vp-panel-item-on", ".vp-share-footnote a:hover", ".card-link span", ".vp-panel-collapsible .vp-panel-button:hover"],
        dv = ["a:hover", ".button-link:hover"],
        fv = [".vp-overlay-wrapper .close:hover .fill", ".vp-overlay-wrapper .back:hover .fill", ".stats-debug-close:hover .fill", ".stats-debug-copy:hover", ".card-link:hover .fill"],
        hv = [".play-bar .on .fill", ".play-bar a:hover .fill", ".play-bar button:not(.toggle):hover .fill", ".tiny-bars .fill", ".vp-sidedock .on .fill", ".controls-outro a:hover .fill", ".card-link .fill", ".vp-panel-collapsible .vp-panel-button:hover .fill"],
        vv = [".vp-controls .play-bar .vp-cast-button"],
        pv = [".vp-sidedock .on:hover .fill"],
        mv = [".play-bar .on .stroke", ".vp-sidedock .on .stroke"],
        gv = [".vp-sidedock .on:hover .stroke"],
        yv = [".vp-sidedock button:hover", ".vp-sidedock button.selected", "&.touch-support .vp-sidedock button:active", ".vp-controls .play:hover", ".vp-controls .play-bar .played", "&.no-playbar .play-bar button:not(.toggle):hover", ".vp-controls.tiny .play-bar button:not(.toggle):hover", ".vp-controls .volume div", ".vp-overlay .buttons li", ".vp-overlay .vp-overlay-content button", '.vp-overlay .vp-overlay-content input[type="submit"]', '.vp-overlay .vp-overlay-content a[role="button"]', "li.vp-panel-item-on:before", ".vp-controls .replay:hover", ".vp-share-buttons li", "button.vp-share-embedCopy", ".vp-outro-button", "a.vp-outro-vodButton", ".vp-email-capture-form-button--submit", ".vp-email-capture-checkIconWrapper"],
        _v = ["li.vp-panel-item-on:before"],
        bv = [".vp-overlay .vp-overlay-content button", '.vp-overlay .vp-overlay-content input[type="submit"]', '.vp-overlay .vp-overlay-content a[role="button"]', ".vp-sidedock button:hover", ".vp-sidedock button.selected", ".vp-sidedock button:hover .vod-label", ".vp-sidedock button.selected .vod-label", ".play:hover", ".vp-share-footnote--embed a", ".vp-outro-button", ".vp-outro-button:hover", ".vp-outro-wrapper .vp-outro-link:hover", "button.vp-share-embedCopy", ".vp-outro-vodWrapper a.vp-outro-vodButton", ".vp-outro-vodWrapper a.vp-outro-vodButton:hover", "li.vp-panel-item:hover", "li.vp-panel-item-on", ".vp-panel-collapsible .vp-panel-button:hover"],
        wv = [".vp-controls .play:hover .fill", ".vp-sidedock button:hover .fill", ".vp-sidedock button.selected .fill", ".play-bar a:hover .fill", ".play-bar button:not(.toggle):hover .fill", "&.no-playbar .play-bar button:not(.toggle):hover .fill", ".vp-controls.tiny .play-bar button:not(.toggle):hover .fill", ".vp-sidedock .on .fill", '.vp-share-wrapper a[role="button"] .fill', ".vp-outro-vodButton .fill", ".vp-email-capture-checkIconWrapper .fill", ".vp-panel-collapsible .vp-panel-button:hover .fill"],
        Ev = [".vp-controls .play:hover .stroke", ".vp-sidedock button:hover .stroke", ".vp-sidedock button.selected .stroke", ".vp-sidedock .on .stroke"],
        Sv = ["li.vp-panel-item-on:before"],
        kv = ["li.vp-panel-item-on:before"],
        Tv = ['.vp-overlay-wrapper .vp-overlay a[role="button"]', ".vp-sidedock button:hover", ".vp-sidedock button.selected", ".play:hover", "button.vp-share-embedCopy", ".vp-outro-button", ".vp-outro-button:hover", ".vp-outro-vodWrapper a.vp-outro-vodButton", ".vp-outro-vodWrapper a.vp-outro-vodButton:hover", "input.vp-email-capture-form-button--submit"],
        Av = [".vp-controls .play:hover .fill", ".vp-sidedock button:hover .fill", ".vp-sidedock button.selected .fill", ".vp-controls .play-bar .fullscreen.tiny:hover .fill", ".vp-share-button .fill", ".vp-outro-vodButton .fill"],
        Pv = [".vp-sidedock button:hover .stroke", ".vp-sidedock button.selected .stroke"],
        Cv = ["li.vp-panel-item-on:before"],
        xv = ['.vp-overlay .vp-overlay-content input[type="submit"]:active', ".vp-overlay .embed-copy.zeroclipboard-is-active", '.vp-overlay a[role="button"]:active', ".vp-sidedock button:active", ".vp-outro-vodWrapper a.vp-outro-vodButton:active"];

    function Lv(i, e) {
        var o = e.uuid,
            a = e.id,
            s = e.isMobileDevice,
            u = null;

        function c(e, t) {
            var n = ".player-" + o + " ",
                i = n + e.join("," + n);
            if (t) {
                var r = a + " ";
                i += "," + r + e.join("," + r)
            }
            return s && (i = i.replace(/:hover/g, ":active")), i = i.replace(/ &/g, "")
        }

        function l() {
            u ? function() {
                for (; 0 < u.cssRules.length;) u.deleteRule(0)
            }() : function() {
                var e = document.createElement("style");
                e.setAttribute("data-player", o), document.querySelector("head").appendChild(e), u = e.sheet
            }()
        }
        return i.events.on(cs.changeColor, function(e) {
            var t;
            try {
                t = new sh(e)
            } catch (e) {
                t = new sh("00adef")
            }
            var n = function(e) {
                l();
                var t = e.complement,
                    n = new sh(23, 35, 34, .75),
                    i = new sh(0, 0, 0, .15).overlayOn(e);
                n.contrast(t).ratio < 3 && t.lighten(5, 3, n);
                var r, o = e.lightness < 40 ? e.clone().lighten(15, 3, e) : e.clone().darken(15, 3, e);
                return Cs(c(uv, !0), "color:" + e.hex + " !important", u), Cs(c(cv, !0), "color:" + t.hex + " !important", u), Cs(c(lv), "color:" + e.hex, u), Cs(c(hv), "fill:" + e.hex, u), Cs(c(vv), "--connected-color:" + e.hex, u), Cs(c(mv), "stroke:" + e.hex, u), Cs(c(yv), "background-color:" + e.hex, u), Cs(c(_v), "border-color:" + e.hex, u), Cs(c(dv), "color:" + t.hex, u), Cs(c(fv), "fill:" + t.hex, u), Cs(c(pv), "fill:" + o.hex, u), Cs(c(gv), "stroke:" + o.hex, u), Cs(c(Cv), "border-color:" + i.hex, u), Cs(c(xv), "background-color:" + i.hex, u), .95 < e.luminance && (t = e.clone().darken(15, 3, e), Cs(c(bv), "color:" + t.hex, u), Cs(c(wv), "fill:" + t.hex, u), Cs(c(Ev), "stroke:" + t.hex, u), Cs(c(Sv), "background-color:" + t.hex, u), Cs(c(kv), "border-color:" + t.hex, u), o = t.clone().darken(15, 3, t), Cs(c(pv), "fill:" + o.hex, u), Cs(c(gv), "stroke:" + o.hex, u)), 175 < e.yiq && e.luminance < .95 && (r = o.clone().darken(15, 3, o), Cs(c(pv), "fill:" + r.hex, u), Cs(c(gv), "stroke:" + r.hex, u), Cs(c(Tv), "color:" + o.hex, u), Cs(c(Av), "fill:" + o.hex, u), Cs(c(Pv), "stroke:" + o.hex, u)), {
                    main: e.hex,
                    selected: o.hex,
                    sidedockHover: r ? o.hex : .95 < e.luminance ? t.hex : sh.white.hex,
                    sidedockSelected: .95 < e.luminance ? t.hex : e.hex,
                    sidedockSelectedHover: r ? r.hex : o.hex
                }
            }(t);
            i.config._colors = n, i.config.embed.color = n.main.replace("#", ""), i.events.fire(ds.colorChanged, i.config.embed.color)
        }), i.events.fire(cs.changeColor, i.config.embed.color), {}
    }

    function Ov(o) {
        var a = null;
        return o.events.on(cs.openPopup, function(e, t) {
            var n = "https://" + o.config.player_url,
                i = n + "/video/" + o.config.video.id;
            switch (e) {
                case "login-like":
                    a = Ms(i + "/login/like", "login", {
                        width: 670,
                        height: 545
                    }), o.events.fire(ds.popupOpened, e);
                    break;
                case "login-watch-later":
                    a = Ms(i + "/login/watch-later", "login", {
                        width: 670,
                        height: 545
                    }), o.events.fire(ds.popupOpened, e);
                    break;
                case "login-private-locked":
                    a = Ms(i + "/login/private", "login", {
                        width: 670,
                        height: 545
                    }), o.events.fire(ds.popupOpened, e);
                    break;
                case "purchase":
                    var r = n + "/video/" + (o.config.video.vod.feature_id || o.config.video.id) + "/purchase/vod";
                    t && t.productId && (r += "/" + t.productId), r += "?referrer=" + encodeURIComponent(o.config.request.referrer), a = Ms(r, "purchase", {
                        width: 790,
                        height: 670
                    }), o.events.fire(ds.popupOpened, e)
            }
        }), window.closePopup = function(e) {
            if (a) {
                try {
                    a.close(), o.events.fire(ds.popupClosed, e)
                } catch (e) {}
                a = null
            }
        }, o.config.embed.on_site || (window.confirmPurchase = function(e, t, n) {
            t ? o.loadVideo(e) : n && o.events.fire(ds.playButtonPressed)
        }), o.config.embed.on_site || (window.confirmLoginAction = function(e, t) {
            o.events.fire(ds.userLogIn, t)
        }), {}
    }

    function Rv(e, t, n, i) {
        var r = i[t];
        return r ? (r = Iv(r = Dv(e, r), n, i.prices), i.expires_in_duration_str && (r = r.replace("{TIME}", i.expires_in_duration_str)), i.available_on_formatted && (r = r.replace("{DATE}", i.available_on_formatted)), r) : null
    }

    function Iv(e, t, n) {
        var i = n.USD;
        return t in n && (i = n[t]), -1 !== e.indexOf("${price}") ? e.replace("${price}", i) : -1 !== e.indexOf("{PRICE}") ? e.replace("{PRICE}", i) : e
    }

    function Mv(e, t) {
        return !e || 0 === e.length || -1 !== e.indexOf(t)
    }

    function Dv(e, t) {
        return void 0 !== e && void 0 !== e[t] ? e[t] : t
    }
    var Nv = Object.freeze({
        formatVodLabel: Rv,
        getDisplayPrice: Iv,
        isAvailableInCountry: Mv,
        translateFromRequest: Dv
    });

    function Fv(c, l) {
        var d, f, h, v, p, m, g, y, _, b = !1,
            e = !1,
            n = !1,
            t = !1,
            i = !1,
            r = !1,
            o = !1,
            a = !1,
            w = [],
            E = [],
            s = null,
            u = !1,
            S = !1,
            k = null,
            T = c.config.embed.autoplay && c.config.request.flags.autohide_controls;

        function A() {
            return t || o || a
        }

        function P() {
            b && (S || (e && u || A() || T) && (n || (!i && !r || A()) && (b = !1, c.events.fire(ds.sidedockVisibilityChanged, b), (k || l).classList.add("invisible"))))
        }

        function C() {
            if (!b && !A()) {
                var e = k || l;
                e.classList.add("invisible"), e.classList.remove("hidden"), e.removeAttribute("hidden"), l.classList.remove("hidden"), l.removeAttribute("hidden"), l.classList.contains("vod") && l.classList.remove("vod"), setTimeout(function() {
                    b = !0, c.events.fire(ds.sidedockVisibilityChanged, b), e.classList.remove("invisible")
                }, 0)
            }
        }

        function x(e, t, n) {
            var i = "data-label-" + n,
                r = "add" !== n || c.config.user.logged_in ? i : "data-label-add-logged-out";
            e.setAttribute("aria-label", e.getAttribute(r)), t.classList.add("hidden"), t.setAttribute("hidden", ""), t.firstChild.innerHTML = e.getAttribute(i)
        }

        function L() {
            var n = w.indexOf(this);
            E.forEach(function(e, t) {
                t !== n && e && e.classList.add("invisible")
            }), 0 <= n && E[n] && (E[n].classList.add("invisible"), E[n].classList.remove("hidden"), E[n].removeAttribute("hidden", ""), s = window.requestAnimationFrame(function() {
                s = window.requestAnimationFrame(function() {
                    E[n].classList.remove("invisible"), E[n].classList.add("visible")
                })
            }))
        }

        function O() {
            var e = "BUTTON" === this.tagName ? this : this.querySelector("button"),
                t = w.indexOf(e);
            0 <= t && E[t] && (s && (window.cancelAnimationFrame(s), s = null), E[t].classList.add("invisible"))
        }

        function R() {
            if (d) {
                var e = d.parentElement;
                k.insertBefore(e, k.firstChild)
            }
        }

        function I() {
            if (c.config.view === bs.main || c.config.view === bs.privateUnlocked) {
                var e = c.config.embed.settings,
                    t = c.config.video.vod && "purchase_options" in c.config.video.vod && c.config.video.vod.purchase_options.length,
                    n = t && c.config.video.vod.is_coming_soon,
                    i = "ondemand.main" === c.config.embed.context,
                    r = c.config.video.vod && c.config.user.purchased ? 1 : 0,
                    o = t && e.vod && Mv(c.config.video.vod.countries, c.config.request.country);
                o && n && i && (o = !1);
                var a = t && c.config.video.vod.purchase_options[0],
                    s = null;
                a && (s = Rv(c.config.request.dynamic_translation_map, "label_string", c.config.request.currency, a)), l.innerHTML = Sf.render("sidedock", {
                    loggedIn: !!c.config.user.logged_in,
                    vodButton: o,
                    purchased: r,
                    vodPurchaseInfo: a,
                    vodDisplayLabel: s,
                    likeButton: e.like,
                    liked: c.config.user.liked,
                    watchLaterButton: e.watch_later,
                    addedToWatchLater: c.config.user.watch_later,
                    collectionsButton: e.collections,
                    shareButton: e.share,
                    strings: {
                        like: "Like",
                        likeLoggedOut: "Like (opens in a new window)",
                        unlike: "Unlike",
                        watchLaterAdd: "Add to Watch Later",
                        watchLaterAddLoggedOut: "Add to Watch Later (opens in a new window)",
                        watchLaterRemove: "Remove from Watch Later",
                        collections: "Add to collections",
                        share: e.share && e.share.embed_only ? "Embed" : "Share"
                    }
                }), d = l.querySelector(".vod-button"), o && (k = l.querySelector(".sidedock-inner"), r && R());
                var u = k || l;
                t && o && !c.config.embed.settings.instant_sidedock ? l.classList.add("vod") : Oi.touch && (b = !0, c.events.fire(ds.sidedockVisibilityChanged, b), u.classList.remove("hidden"), u.removeAttribute("hidden"), u.classList.remove("invisible")), f = l.querySelector(".like-button"), h = l.querySelector(".like-label"), v = l.querySelector(".watch-later-button"), p = l.querySelector(".watch-later-label"), m = l.querySelector(".collections-button"), g = l.querySelector(".collections-label"), y = l.querySelector(".share-button"), _ = l.querySelector(".share-label"), w = [d, f, v, y, m], E = [null, h, p, _, g]
            }
        }
        return I(),
            function() {
                var e = c.config.embed.settings.instant_sidedock,
                    t = c.config.video.vod,
                    n = t && "purchase_options" in t && t.purchase_options.length,
                    i = t && Mv(c.config.video.vod.countries, c.config.request.country);
                (e || n && i) && (T || C())
            }(), fh(l, ".vod-button", function() {
                var e = d.getAttribute("data-product-id");
                c.events.fire(ds.vodButtonPressed, e)
            }, O), c.events.on(ds.outroDisplayed, function() {
                R(), l.classList.add("sidedock-outro"), "share" === c.config.embed.outro && (c.config.embed.settings.share = 0, I())
            }), c.events.on(ds.outroHidden, function() {
                ! function() {
                    if (d) {
                        var e = d.parentElement;
                        l.insertBefore(e, k)
                    }
                }(), l.classList.remove("sidedock-outro"), "share" === c.config.embed.outro && (c.config.embed.settings.share = 1, I())
            }), fh(l, ".like-button", function() {
                c.events.fire(ds.likeButtonPressed)
            }, O), c.events.on(ds.liked, function() {
                f && (f.classList.add("on"), x(f, h, "remove"))
            }), c.events.on(ds.unliked, function() {
                f && (f.classList.remove("on"), x(f, h, "add"))
            }), fh(l, ".watch-later-button", function() {
                c.events.fire(ds.watchLaterButtonPressed)
            }, O), c.events.on(ds.addedToWatchLater, function() {
                v && (v.classList.add("on"), x(v, p, "remove"))
            }), c.events.on(ds.removedFromWatchLater, function() {
                v && (v.classList.remove("on"), x(v, p, "add"))
            }), fh(l, ".collections-button", function() {
                c.events.fire(ds.collectionsButtonPressed)
            }, O), fh(l, ".share-button", function() {
                return c.events.fire(c.config.embed.settings.share.embed_only ? ds.embedButtonPressed : ds.shareButtonPressed), !1
            }, O), il(l).on("blur", "button", O).on("mouseleave", ".box", O).on(["focus", "pointerdown", "touchstart", "mouseenter"], "button", L).on("transitionend", "label", function(e) {
                "opacity" === e.propertyName && e.target.classList.contains("invisible") && (e.target.classList.add("hidden"), e.target.setAttribute("hidden", ""), e.target.classList.remove("visible"))
            }), fh(l, "label", function() {
                var e = E.indexOf(this);
                0 <= e && w[e].click()
            }), c.events.on([ds.mousedOut, ds.mouseTimeout], P).on(ds.mousedOver, C).on(ds.targetTimeReached, function() {
                u = !0, P()
            }).on(Pe.PLAY, function() {
                e = !0
            }), il(l).on(["pointerenter", "pointerleave", "mouseenter", "mouseleave"], function(e) {
                "pointerType" in e ? "mouse" !== e.pointerType && e.pointerType !== e.MSPOINTER_TYPE_MOUSE || (n = "pointerenter" === e.type || "MSPointerEnter" === e.type) : n = "mouseover" === e.type
            }), il(l).on("transitionend", function(e) {
                var t = k || l;
                "opacity" === e.propertyName && t.classList.contains("invisible") && (t.classList.add("hidden"), t.setAttribute("hidden", ""), d && t.contains(d) && (l.classList.add("hidden"), l.setAttribute("hidden", "")))
            }), c.events.on(ds.willEnterFullscreen, function() {
                n = !1, P()
            }).on(ds.didExitFullscreen, function(e) {
                e || (S = !0)
            }), c.events.on([ds.airPlayActivated], function() {
                i = !0, C()
            }).on([ds.airPlayDeactivated], function() {
                i = !1
            }), c.events.on(gn.PICTURE_IN_PICTURE_ACTIVATED, function() {
                r = !0, C()
            }).on(gn.PICTURE_IN_PICTURE_DEACTIVATED, function() {
                r = !1
            }), c.events.on(ds.overlayOpened, function() {
                n = !(t = !0), P()
            }).on(ds.overlayClosed, function() {
                t = !1, C()
            }), c.events.on(ds.alertVisibilityChanged, function(e) {
                (o = e) && P()
            }), c.events.on([ds.menuCentered, ds.menuVisibilityChanged], function(e, t) {
                t.isCentered() && t.isVisible() && (n = !(a = !0), P()), t.isCentered() && t.isVisible() || (a = !1, C())
            }), c.events.on(ds.configChanged, function() {
                I()
            }), c.events.on(cs.reset, function() {
                u = n = !1, P(), S = n = e = !1
            }), c.events.fire(ds.sidedockModuleReady), {}
    }

    function Bv(d, f) {
        var e = !0,
            n = !1,
            t = !1,
            i = !1,
            r = !1,
            o = !1,
            a = !1,
            s = !0,
            u = !1,
            c = !1,
            l = !1;

        function h() {
            e = !1, f.classList.add("invisible")
        }

        function v() {
            f.classList.remove("hidden"), f.removeAttribute("hidden"), setTimeout(function() {
                e = !0, f.classList.remove("invisible")
            }, 0)
        }

        function p() {
            return t || i || r
        }

        function m() {
            e && (p() ? h() : u ? h() : o || a && (s && n || h()))
        }

        function g() {
            e || (!o || p() ? s && !c && (u || (a || p() ? d.config.embed && d.config.embed.settings.info_on_pause && s && !p() && v() : v())) : v())
        }

        function y() {
            if (d.config.view === bs.main || d.config.view === bs.privateUnlocked) {
                var e = !!d.config.embed.settings.byline,
                    t = null !== d.config.video.owner.url,
                    n = d.config.video.owner.url,
                    i = 0 === d.config.embed.on_site,
                    r = d.config.embed.settings.spatial_label,
                    o = void 0 !== d.config.video.file_codecs,
                    a = {
                        linkToOwner: t,
                        ownerLink: n,
                        targetBlank: i,
                        showPortrait: !!d.config.embed.settings.portrait,
                        portraitImg: d.config.video.owner[1 < Oi.devicePixelRatio ? "img_2x" : "img"],
                        showByline: e,
                        showTitle: !!d.config.embed.settings.title,
                        showTitleLink: null !== d.config.video.url,
                        titleLink: d.config.video.url,
                        title: d.config.video.title,
                        is360: d.config.video.spatial && r,
                        hasHDR: o && 0 < d.config.video.file_codecs.hevc.hdr.length,
                        strings: {}
                    };
                if (d.config.embed.settings.byline) {
                    var s = d.config.embed.settings.byline_badge,
                        u = "";
                    s && s.type && (u = Sf.render("title_byline_badge", {
                        targetBlank: i,
                        cssClass: s.type,
                        link: s.url || !1,
                        displayBadge: !d.config.video.live_event
                    })), a.strings.byline = "from " + Sf.render("title_owner_byline", {
                        linkToOwner: t,
                        ownerLink: n,
                        targetBlank: i,
                        owner: d.config.video.owner.name
                    }) + u
                }
                var c = d.config.embed.settings.badge;
                if (c) {
                    var l = 1 < Oi.devicePixelRatio ? "img_2x" : "img";
                    Oi.svg && c.svg && (l = "svg"), a.showPortrait = !1, a.badge = {
                        link: c.link,
                        img: c[l],
                        offset: c.offset || !1,
                        width: c.width,
                        height: c.height,
                        name: c.name,
                        shadow: c.shadow || !1
                    }
                }
                d.config.embed.autoplay && (f.classList.add("hidden"), f.setAttribute("hidden", "")), f.innerHTML = Sf.render("title", a)
            }
        }
        return y(), d.events.on([ds.mousedOut, ds.mouseTimeout], m).on(ds.mousedOver, g).on(gn.PLAY_INITIATED, function() {
            s = !(a = !0), m()
        }).on([ds.playButtonPressed, Pe.PLAY], function() {
            c = s = !1, m()
        }).on(ds.paused, function(e, t) {
            t || (s = !0, g())
        }).on(ds.ended, function() {
            u = !0, m()
        }).on(ds.scrubbingStarted, function() {
            l = s, c = !0
        }).on(ds.scrubbingEnded, function() {
            l && (c = !1)
        }).on(ds.willEnterFullscreen, function() {
            m()
        }).on(ds.didExitFullscreen, function(e) {
            e || g()
        }), il(f).on(["pointerenter", "pointerleave", "mouseenter", "mouseleave"], function(e) {
            "pointerType" in e ? "mouse" !== e.pointerType && e.pointerType !== e.MSPOINTER_TYPE_MOUSE || (n = "pointerenter" === e.type || "MSPointerEnter" === e.type) : n = "mouseover" === e.type
        }), il(f).on("transitionend", function(e) {
            "opacity" === e.propertyName && f.classList.contains("invisible") && (f.classList.add("hidden"), f.setAttribute("hidden", ""))
        }, !1), d.events.on(ds.ended, function(e) {
            m()
        }), d.events.on([ds.airPlayActivated], function() {
            o = !0, g()
        }).on([ds.airPlayDeactivated], function() {
            o = !1, m()
        }), d.events.on(ds.overlayOpened, function(e) {
            "not-supported" !== e && "private-unlocked" !== e && "help" !== e && (n = !(t = !0), m())
        }).on(ds.overlayClosed, function() {
            n = t = !1, setTimeout(g, 0)
        }), d.events.on(ds.outroDisplayed, function(e) {
            n = !(i = !0), m()
        }).on(ds.outroHidden, function() {
            n = i = !1, setTimeout(g, 0)
        }), d.events.on([ds.menuCentered, ds.menuVisibilityChanged], function(e, t) {
            t.isCentered() && t.isVisible() && (n = !(r = !0), m()), t.isCentered() && t.isVisible() || (n = r = !1, g())
        }), fh(f, ".badge", function() {
            d.events.fire(ds.badgePressed, d.config.embed.settings.badge.id)
        }), d.events.on(ds.configChanged, function() {
            y(), d.config.view === bs.privateUnlocked && g()
        }), d.events.on(cs.reset, function() {
            c = u = !(s = !(a = !1)), g()
        }), d.events.fire(ds.titleModuleReady), {}
    }
    var qv = function() {
            function r(e) {
                var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
                O(this, r);
                var n = parseInt(76 * Oi.devicePixelRatio, 10),
                    i = parseFloat(t.timecode);
                if (isNaN(i)) throw new TypeError("Time must be a number.");
                if (i < 0) throw new TypeError("Time must be a positive number.");
                this.time = i, this.data = t, this.id = t.id, this.displayTime = t.display_time || 6, t.url && (this.data.url = Bu(t.url)), t.image_url && (t.image = Ec({
                    width: n,
                    height: n,
                    baseUrl: Bu(t.image_url),
                    webpSupport: e.config.request.flags.webp,
                    crop: !0
                })), this.renderTemplate()
            }
            return R(r, [{
                key: "renderTemplate",
                value: function() {
                    var t = this,
                        e = document.createElement("div");
                    e.innerHTML = Sf.render("card", this.data), this.element = e.children[0], this.data.image && Sc(this.data.image).catch(function(e) {
                        t.element.querySelector(".js-cardImageWrap").style.display = "none"
                    })
                }
            }, {
                key: "isActive",
                value: function(e) {
                    return e >= this.time && e < this.end
                }
            }, {
                key: "end",
                get: function() {
                    return this.time + this.displayTime
                }
            }]), r
        }(),
        Uv = function() {
            function t() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : function(e, t) {
                    return e < t
                };
                O(this, t), this._data = {}, this._sortedKeys = [], this._sort = e
            }
            return R(t, [{
                key: "_insert",
                value: function(e) {
                    var t = this._sortedKeys.length;
                    if (0 === t) this._sortedKeys.push(e);
                    else {
                        for (var n = 0; n < t; n++)
                            if (this._sort(e, this._sortedKeys[n])) {
                                this._sortedKeys[n - 1] !== e && this._sortedKeys.splice(n, 0, e);
                                break
                            }
                        n === t && this._sortedKeys[n - 1] !== e && this._sortedKeys.splice(n, 0, e)
                    }
                }
            }, {
                key: "_binarySearch",
                value: function(e, t, n, i) {
                    if (i < n) return -1;
                    var r = parseInt(n + (i - n) / 2, 10);
                    return e[r] > t ? this._binarySearch(e, t, n, r - 1) : e[r] < t ? this._binarySearch(e, t, r + 1, i) : r
                }
            }, {
                key: "delete",
                value: function(e) {
                    var t = this._binarySearch(this._sortedKeys, e, 0, this._sortedKeys.length);
                    if (-1 === t) throw new Error("key does not exist");
                    this._sortedKeys.splice(t, 1), delete this._data[e]
                }
            }, {
                key: "set",
                value: function(e, t) {
                    return this._data[e] = t, this._insert(e), this
                }
            }, {
                key: "get",
                value: function(e) {
                    return this._data[e]
                }
            }, {
                key: "keys",
                value: function() {
                    return this._sortedKeys.slice()
                }
            }, {
                key: "values",
                value: function() {
                    var t = this;
                    return this.keys().map(function(e) {
                        return t._data[e]
                    })
                }
            }, {
                key: "forEach",
                value: function(e) {
                    for (var t = this._sortedKeys.length, n = 0; n < t && !1 !== e(this._data[this._sortedKeys[n]], this._sortedKeys[n], this); n++);
                }
            }, {
                key: "size",
                get: function() {
                    return this._sortedKeys.length
                }
            }]), t
        }();

    function jv(o, a, t) {
        var s = t.querySelector(".vp-cards"),
            u = new Uv,
            n = void 0,
            i = void 0,
            r = !1,
            e = function(e) {
                return function() {
                    0 < u.size && e.apply(void 0, arguments)
                }
            };

        function c() {
            if (g(), u.forEach(function(e, t) {
                    e.element.parentNode.removeChild(e.element)
                }), u = new Uv, Array.isArray(o.config.embed.cards) && o.config.embed.cards.length) {
                if (o.config.video.title && o.config.embed.settings.title) l(-1, {
                    className: "card--contentInfo",
                    timecode: 0,
                    headline: o.config.video.title,
                    teaser: o.config.embed.settings.byline ? o.config.video.owner.name : "",
                    image: o.config.video.owner[1 < Oi.devicePixelRatio ? "img_2x" : "img"],
                    id: "title-card"
                });
                o.config.embed.cards.forEach(function(e) {
                    l(e.timecode, e)
                })
            }
        }

        function l(e, t) {
            var n = u.get(e),
                i = new qv(o, t);
            if (u.set(e, i), n) return s.replaceChild(i.element, n.element), i;
            var r = u.keys().indexOf(e);
            return s.insertBefore(i.element, s.children[r]), a.dispatch(sf(u.size)), i
        }

        function d(e) {
            o.element.classList.toggle("player-withCards", 0 < e)
        }

        function f(e) {
            t.classList.toggle("cards-wrapper--withThumbnails", e)
        }

        function h(e) {
            o.element.classList.toggle("player-cardsCarousel", e), o.element.classList.toggle("player-cardsCorner", !e), n.destroy(), e && n.setUp()
        }

        function v(e) {
            var t = function(t) {
                var e = u.values().filter(function(e) {
                    return e.isActive(t)
                }).slice(-1)[0];
                if (e) return e;
                if (a.get("ui.cards.isCarouselVisible")) {
                    var n = u.values().slice(-1)[0];
                    if (n && t > n.end) return n
                }
                return null
            }(e.currentTime);
            t !== i && (!t && r || (r = !1, g(), (i = t) && "title-card" === i.id ? a.get("ui.cards.isCarouselVisible") && p(i, !0) : p(i, !0)))
        }

        function p(e, t) {
            e && (t ? e.element.classList.add("card-animating") : e.element.classList.remove("card-animating"), e.element.classList.add("card-active"), il(e.element.childNodes[1]).on("mouseover", function() {
                r = !0
            }), il(e.element.childNodes[1]).on("mouseout", function() {
                r = !1
            }), n.show(e.element), o.events.fire(ds.cardDisplayed, e.id, e.data))
        }

        function m(e) {
            r || e.classList.remove("card-active")
        }

        function g() {
            ke(t.querySelectorAll(".card-active")).forEach(m)
        }

        function y(e) {
            var t = u.values()[e];
            t.data.url && "title-card" !== t.id && (o.events.fire(ds.cardPressed, t.id, t.data), o.telecine.paused || o.events.fire(ds.pauseButtonPressed), window.open(t.data.url))
        }

        function _(e) {
            e.preventDefault();
            var t = Us(e.target, s.children),
                n = u.values()[t];
            n.data.url && "title-card" !== n.id && (o.events.fire(ds.cardPressed, n.id, n.data), o.telecine.paused || o.events.fire(ds.pauseButtonPressed), window.open(n.data.url))
        }

        function b(e) {
            var t = u.values()[e];
            "title-card" !== t.id && o.events.fire(ds.cardDisplayed, t.id, t.data), o.events.fire(cs.setTime, t.time)
        }

        function w(e) {
            var t = l(e.timecode, e);
            g(), p(t)
        }

        function E(e) {
            g();
            var t = u.get(e.timecode).element;
            t.parentNode.removeChild(t), u.delete(e.timecode)
        }
        return n = new vh(s), a.watch("ui.cards.size", d), a.watch("ui.cards.isCarouselVisible", h), a.watch("ui.cards.isCardsThumbVisible", f), h(a.get("ui.cards.isCarouselVisible")), o.events.on(ds.configChanged, c), o.events.on(cs.addCard, w), o.events.on(cs.removeCard, E), n.on("slide", e(b)), n.on("tap", e(y)), o.events.on(Pe.TIME_UPDATE, e(v)), o.events.on(ds.ended, e(g)), fh(document, ".player-cardsCorner .card", e(_)), c(), {}
    }
    var Vv = .05,
        Hv = {
            16: "shift",
            27: "esc",
            32: "space",
            37: "left",
            38: "up",
            39: "right",
            40: "down"
        };

    function Wv(r, o, e) {
        var i, t = !!r.config.embed.on_site,
            a = e.querySelector(".volume"),
            s = !1,
            u = !1,
            c = r.config.video.fps / 5,
            l = Math.max(c, .618 * r.config.video.duration),
            d = 100,
            f = c,
            h = 0,
            v = !1,
            p = Zh(w, 80);

        function m() {
            return !t && (r.config.view === bs.main || r.config.view === bs.privateUnlocked)
        }

        function g() {
            s && "help" === i && r.events.fire(ds.overlayCloseButtonPressed)
        }

        function y(e) {
            return "number" != typeof e.which && (e.which = e.keyCode), e
        }

        function _(e) {
            if ("keypress" === e.type) {
                var t = String.fromCharCode(e.which);
                return e.shiftKey || (t = t.toLowerCase()), t
            }
            return e.which in Hv ? Hv[e.which] : String.fromCharCode(e.which).toLowerCase()
        }

        function b(e) {
            if (r.config.embed.settings.background) return !0;
            var t = e.target || e.srcElement;
            return "INPUT" === t.tagName || "SELECT" === t.tagName || "TEXTAREA" === t.tagName || t.isContentEditable
        }

        function w(e, t) {
            if (!o.get(Vc)) {
                if (!v) {
                    t && !r.telecine.paused && r.events.fire(ds.pauseButtonPressed);
                    r.events.fire(ds.scrubbingStarted, !0), v = !0
                }! function(e) {
                    var t = e,
                        n = Math.ceil(c),
                        i = Math.ceil(l - c);
                    f = function(e, t, n, i) {
                        return e /= i, n * (--e * e * e + 1) + t
                    }(t, n, i, d)
                }(h), 1 === ++h && (f = r.config.video.fps);
                var n = t ? 1 : f,
                    i = "right" === e ? n : -n;
                ! function(e) {
                    var t = e / r.config.video.fps;
                    r.events.fire(cs.seek, null, t)
                }(Math["right" === e ? "ceil" : "floor"](r.telecine.currentTime * r.config.video.fps) + i)
            }
        }

        function E(e) {
            var t = u.getTabindexItems(),
                n = t.indexOf(document.activeElement),
                i = "up" === e ? n - 1 : n + 1,
                r = null;
            return !(r = i >= t.length ? t[0] : i < 0 ? t[t.length - 1] : t[i]) || (r.focus(), !1)
        }

        function S() {
            return !!u || (!(!o.get(Vc) || o.get(zc)) || (document.activeElement && document.activeElement !== document.body ? void 0 : (r.events.fire(ds[r.telecine.paused ? "playButtonPressed" : "pauseButtonPressed"]), g(), !1)))
        }

        function k() {
            return u ? (u.element.contains(document.activeElement) && u.button.focus(), u.hide(), !1) : document.activeElement && e.contains(document.activeElement) ? (xs(), !0) : s ? (r.events.fire(ds.overlayCloseButtonPressed), !1) : void 0
        }

        function T() {
            if (u) return !u.element.contains(document.activeElement) || E("up");
            if (Oi.spatialPlayback && r.config.video.spatial) return r.telecine.getEffectByName("ThreeSixtyEffect").keyPress("up"), !1;
            if (r.config.embed.on_site && document.activeElement && !e.contains(document.activeElement)) return !0;
            g();
            return r.events.fire(cs.changeVolume, Vv, !1, !0), !1
        }

        function A() {
            if (u) return !u.element.contains(document.activeElement) || E("down");
            if (Oi.spatialPlayback && r.config.video.spatial) return r.telecine.getEffectByName("ThreeSixtyEffect").keyPress("down"), !1;
            if (r.config.embed.on_site && document.activeElement && !e.contains(document.activeElement)) return !0;
            g();
            return r.events.fire(cs.changeVolume, -Vv, !1, !0), !1
        }

        function P(e, t) {
            if (u) return !u.element.contains(document.activeElement) || E("left" === t ? "up" : "down");
            if (g(), Oi.spatialPlayback && r.config.video.spatial) return r.telecine.getEffectByName("ThreeSixtyEffect").keyPress(t), !1;
            if (document.activeElement && document.activeElement === a) {
                var n = "left" === t ? -Vv : Vv;
                return r.events.fire(cs.changeVolume, n, !1, !0), !1
            }
            e.shiftKey || 0 === h ? w(t, e.shiftKey) : p(t, e.shiftKey)
        }
        return r.events.on(ds.overlayOpened, function(e) {
                s = !0, "not-supported" === (i = e) && (t = !0)
            }), r.events.on(ds.overlayClosed, function() {
                s = !1, i = null
            }), r.events.on(ds.menuVisibilityChanged, function(e, t) {
                u = !!e && t
            }), r.events.on(ds.configChanged, function(e) {
                e && (t = !1)
            }),
            function() {
                var n = {
                    l: ds.likeButtonPressed,
                    w: ds.watchLaterButtonPressed,
                    s: ds.shareButtonPressed,
                    c: [ds.ccButtonPressed, !0],
                    h: [ds.prefsButtonPressed, !0],
                    f: ds.fullscreenButtonPressed,
                    d: ds.debugButtonPressed,
                    space: S,
                    up: T,
                    down: A,
                    left: P,
                    right: P,
                    esc: k,
                    "?": [cs.showOverlay, "help"]
                };

                function e(e) {
                    if (y(e), function(e) {
                            return !(e.ctrlKey || e.metaKey || e.altKey) && (e.which in Hv ? "keydown" === e.type : "keypress" === e.type)
                        }(e) && !b(e) && m()) {
                        var t = _(e);
                        if (t in n) {
                            if ("function" == typeof n[t]) return void(!1 === n[t](e, t) && (e.preventDefault(), e.stopPropagation()));
                            !1 === function(e) {
                                if (e = Array.isArray(e) ? e : [e], s && "help" === i) {
                                    if (r.events.fire(ds.overlayCloseButtonPressed), e[0] === cs.showOverlay && "help" === e[1]) return !1;
                                    if (e[0] !== cs.openVimeo) return setTimeout(function() {
                                        r.events.fire.apply(null, e)
                                    }, 250), !1
                                }
                                return r.events.fire.apply(null, e), !1
                            }(n[t]) && (e.preventDefault(), e.stopPropagation())
                        }
                    }
                }
                r.config.embed.on_site || (n.v = cs.openVimeo), document.addEventListener("keydown", e, !1), document.addEventListener("keypress", e, !1), document.addEventListener("keyup", function(e) {
                    if (y(e), !b(e) && m()) {
                        var t = _(e);
                        !Oi.spatialPlayback || !r.config.video.spatial || "left" !== t && "right" !== t && "up" !== t && "down" !== t ? o.get(Vc) || "left" !== t && "right" !== t || function(e) {
                            f = c, h = 0;
                            var t = e.shiftKey;
                            r.events.fire(ds.scrubbingEnded, t), v = !1
                        }(e) : r.telecine.getEffectByName("ThreeSixtyEffect").keyUp(t)
                    }
                }, !1)
            }(), r.events.on(ds.becameActive, function() {
                t = !1
            }).on(ds.becameInactive, function() {
                t = !0
            }), r.config.embed.on_site && document.querySelector(".player") === e && (t = !1),
            function() {
                var t = void 0,
                    n = !1;
                document.body.addEventListener("keydown", function(e) {
                    9 !== e.which || document.body.classList.contains("showfocus") ? 27 === e.which ? document.body.classList.remove("showfocus") : 32 !== e.which && 13 !== e.which || (n = !0, clearTimeout(t), t = setTimeout(function() {
                        n = !1
                    }, 200)) : document.body.classList.add("showfocus")
                }), document.body.addEventListener("click", function(e) {
                    n || document.body.classList.remove("showfocus")
                })
            }(), {
                pause: function() {
                    t = !0
                },
                unpause: function() {
                    t = !1
                }
            }
    }
    var zv = function() {
            function s(e) {
                var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
                    n = t.displayTimeout,
                    i = void 0 === n ? 0 : n,
                    r = t.label,
                    o = void 0 === r ? "Alert" : r;
                O(this, s), qo(this), this._container = e, this._visible = !1, this._message = null, this._alert = null, this._alertLabel = o;
                var a = Math.round(i / 1e3);
                0 !== a && (this._alertLabel = o + " Will be dismissed in " + a + " seconds"), this._displayTimer = null, this._displayTimeout = i, this._renderTemplate(), this._attachEvents()
            }
            return R(s, [{
                key: "show",
                value: function(e) {
                    var t = this;
                    !0 !== this._visible && (clearTimeout(this._displayTimer), this._alert.classList.remove("hidden"), this._alert.removeAttribute("hidden"), window.requestAnimationFrame(function() {
                        t._alert.classList.add("in")
                    }), (this._alert.querySelector("[data-alert-autofocus]") || this._alert).focus(), this._visible = !0, this.fire("show", e), 0 !== this._displayTimeout && (this._displayTimer = setTimeout(function() {
                        t.hide("timeout")
                    }, this._displayTimeout)))
                }
            }, {
                key: "hide",
                value: function(e) {
                    var t = this;
                    !1 !== this._visible && (clearTimeout(this._displayTimer), this._alert.classList.add("leaving"), window.requestAnimationFrame(function() {
                        var n = t;
                        t._setHideAttributes(), il(t._alert).on("transitionend", function e(t) {
                            "opacity" === t.propertyName && (n._alert.classList.remove("leaving"), n._alert.classList.add("hidden"), n._alert.setAttribute("hidden", ""), il(n._alert).off("transitionend", e))
                        })
                    }), this._visible = !1, this.fire("hide", e))
                }
            }, {
                key: "_setHideAttributes",
                value: function() {
                    this._alert.classList.remove("in")
                }
            }, {
                key: "_renderTemplate",
                value: function() {
                    this._alert || (this._alert = document.createElement("div"), this._alert.setAttribute("role", "alertdialog"), this._alert.setAttribute("aria-label", this._alertLabel), this._alert.setAttribute("aria-atomic", "true"), this._alert.classList.add("player-alert"), this._alert.classList.add("hidden"), this._alert.setAttribute("hidden", ""), this._container.appendChild(this._alert), this._setHideAttributes()), this._message instanceof HTMLElement ? (this._alert.innerHTML = "", this._alert.appendChild(this._message)) : (this._alert.textContent = this._message, this._alert.innerHTML = this._message);
                    var e = document.createElement("button");
                    e.setAttribute("data-close", ""), e.setAttribute("aria-label", "Close alert"), e.classList.add("close"), e.innerHTML = Sf.render("icon_close"), this._alert.appendChild(e)
                }
            }, {
                key: "_attachEvents",
                value: function() {
                    var t = this;
                    il(this._alert).on("click", "[data-close]", function(e) {
                        t.hide(e)
                    })
                }
            }, {
                key: "visible",
                get: function() {
                    return this._visible
                }
            }, {
                key: "message",
                get: function() {
                    return this._message
                },
                set: function(e) {
                    e instanceof HTMLElement && this._message && e.textContent === this._message.textContent || e !== this._message && (this._message = e, this._renderTemplate())
                }
            }]), s
        }(),
        Gv = function() {
            function i(e, t, n) {
                O(this, i), this.player = e, this.telecine = t, this.isBufferingTooLong = !1, this.isBufferingTooFrequent = !1, this.autoAlertWasDismissed = !1, this.bufferCount = -1, this.badPlaybackTimer = null, this._setUpAlertUI(n), this._attachEventHandlers()
            }
            return R(i, [{
                key: "handleBufferStarted",
                value: function() {
                    this.bufferCount += 1, this._startBadPlaybackTimer()
                }
            }, {
                key: "handleBufferEnded",
                value: function() {
                    clearTimeout(this.badPlaybackTimer), this.badPlaybackTimer = null, this.isBufferingTooLong = !1
                }
            }, {
                key: "_attachEventHandlers",
                value: function() {
                    var t = this;
                    this.player.events.on(os.spatialUnsupported, function(e) {
                        t._showSpatialUnsupportedAlert(e)
                    }), this.player.events.on(os.spatialFailure, function(e) {
                        t._showSpatialFailureAlert(e)
                    }), this.player.events.on(os.bufferStarted, this.handleBufferStarted.bind(this)), this.player.events.on(gn.BUFFER_ENDED, this.handleBufferEnded.bind(this)), this.player.events.on(os.badPlayback, function() {
                        t.autoAlertWasDismissed || (t.showAlert("stream_studder"), Ou.captureBreadcrumb("Alert shown", {
                            message: "stream_studder"
                        }, "video"))
                    }), this.player.events.on(ds.qualityChanged, function(e) {
                        "auto" === e && t.alertUI.hide("qualitymenuauto")
                    })
                }
            }, {
                key: "_showSpatialUnsupportedAlert",
                value: function(e) {
                    if (!e) {
                        this.showAlert("warning_alert", {
                            strings: {
                                text: 'See a <a href="https://help.vimeo.com/hc/en-us/articles/115001878167#browsers" target="_blank" rel="noopener">list of browsers</a> that support 360 viewing.'
                            }
                        })
                    }
                }
            }, {
                key: "_showSpatialFailureAlert",
                value: function(e) {
                    if (!e) {
                        this.showAlert("warning_alert", {
                            strings: {
                                text: 'Looking to watch a 360 video? See <a href="https://help.vimeo.com/hc/en-us/articles/115001878167#browsers" target="_blank" rel="noopener">supported browsers and settings</a>.'
                            }
                        })
                    }
                }
            }, {
                key: "showAlert",
                value: function(e) {
                    var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null;
                    this.alertUI && !this.player.config.embed.settings.background && (this.alertUI.message = Sf.render(e, t), this.alertUI.show())
                }
            }, {
                key: "_setUpAlertUI",
                value: function(e) {
                    var i = this;
                    this.alertUI = new zv(e), this.alertUI.on("show", function(e) {
                        i.player.events.fire(ds.alertVisibilityChanged, !0, e)
                    }), this.alertUI.on("hide", function(e) {
                        var t = e.target,
                            n = t && "function" == typeof t.getAttribute;
                        if (n) switch (t.getAttribute("data-context")) {
                            case "suggestion":
                                i.player.events.fire(cs.changeQuality, "auto"), e = "suggestion";
                                break;
                            default:
                                e = "close"
                        }(n || "qualitymenuauto" === e) && (i.autoAlertWasDismissed = !0), i.player.events.fire(ds.alertVisibilityChanged, !1, e)
                    })
                }
            }, {
                key: "_startBadPlaybackTimer",
                value: function() {
                    var e = this;
                    null === this.badPlaybackTimer && 0 !== this.bufferCount && (this.badPlaybackTimer = setTimeout(function() {
                        e.isBufferingTooLong = !0, e._notifyBadPlayback()
                    }, as))
                }
            }, {
                key: "_notifyBadPlayback",
                value: function() {
                    "MediaSourceScanner" === this.telecine.currentScanner && (this.isBufferingTooLong || this.isBufferingTooFrequent) && (this.telecine.video.currentFile.restrictedStreamIndexes.length <= 0 || (this.isBufferingTooLong, this.isBufferingTooFrequent, this.player.events.fire(os.badPlayback), this.bufferCount = 0, this.badPlaybackTimer = null, this.isBufferingTooFrequent = !1, this.isBufferingTooLong = !1))
                }
            }]), i
        }();

    function Yv(e) {
        return e = parseFloat(e), isNaN(e) || e < 0 ? "0" : e < 1e3 ? e.toString() : 1e3 <= e && e < 1e6 ? Math.floor(e / 1e3) + "." + Math.round(e % 1e3 / 100) + "k" : Math.floor(e / 1e6) + "." + Math.round(e % 1e6 / 1e5) + "m"
    }
    var Kv = function() {
        function n(e, t) {
            O(this, n), this.player = e, this.store = t, this._failedRequests = 0, this._setUpEvents()
        }
        return R(n, [{
            key: "_setUpUI",
            value: function() {
                this.store.get(zc) && null === this.player.element.querySelector(".vp-live-viewer-status-wrapper") && (this._wrap = document.createElement("div"), this._wrap.classList.add("vp-live-viewer-status-wrapper", "invisible"), this._wrap.innerHTML = Sf.render("live_status"), this._wrap.querySelector(".vp-live-status-circle").classList.remove("offline"), this.player.config.video.live_event.show_viewer_count && (this._wrap.innerHTML += Sf.render("live_viewer_count"), this.player.element.querySelector(".vp-live-viewer-count").style.display = "block"), this.player.element.querySelector(".vp-controls-wrapper").appendChild(this._wrap))
            }
        }, {
            key: "_removeUI",
            value: function() {
                var e = this.player.element.querySelector(".vp-live-viewer-status-wrapper");
                null !== e && this.player.element.querySelector(".vp-controls-wrapper").removeChild(e)
            }
        }, {
            key: "_setUpEvents",
            value: function() {
                var t = this;
                this.player.events.on(ds.configChanged, function() {
                    t.player.config.video.live_event ? t._setUpUI() : t._removeUI()
                }), this.player.events.on(xe.STREAM_ONLINE, function() {
                    t._setUpUI(), t._getViewerCount()
                }), this.player.events.on(ds.controlBarVisibilityChanged, function(e) {
                    void 0 !== t._wrap && t._wrap.classList.toggle("invisible", e)
                })
            }
        }, {
            key: "_getViewerCount",
            value: function() {
                var n = this;
                if (this.store.get(zc) && this.player.config.video.live_event.show_viewer_count) {
                    var i = setTimeout(function() {
                            n._getViewerCount()
                        }, 3e4),
                        e = "" + this.player.config.video.id;
                    "unlisted" === this.player.config.video.privacy && (e += ":" + this.player.config.video.unlisted_hash);
                    var t = "https://" + this.player.config.vimeo_api_url + "/videos/" + e + "/stats/live";
                    "password" !== this.player.config.video.privacy && "disable" !== this.player.config.video.privacy || (t += "?auth=" + this.player.config.user.vimeo_live_auth_token), Ds(t, {
                        withCredentials: !1,
                        jwt: this.player.config.user.logged_in ? this.player.config.user.vimeo_api_client_token : this.player.config.user.vimeo_live_client_token
                    }).then(function(e) {
                        var t = JSON.parse(e);
                        t.viewers && t.viewers.current ? (n._failedRequests = 0, n._updateViewerCount(t.viewers.current)) : (n._failedRequests++, n._updateViewerCount(0))
                    }).catch(function(e) {
                        if (n._failedRequests++, 3 < n._failedRequests) {
                            clearTimeout(i), n._viewerCountDisplays = ke(n.player.element.querySelectorAll(".vp-live-viewer-count"));
                            for (var t = 0; t < n._viewerCountDisplays.length; t++) n._viewerCountDisplays[t].classList.add("hidden")
                        }
                    })
                }
            }
        }, {
            key: "_updateViewerCount",
            value: function(e) {
                this._viewerCountDisplays = ke(this.player.element.querySelectorAll(".vp-live-viewer-count-value"));
                for (var t = 0; t < this._viewerCountDisplays.length; t++) this._viewerCountDisplays[t].innerHTML = Yv(e)
            }
        }]), n
    }();
    return window.BigScreen = dh,
        function(l, e, t, d) {
            Sf.helpers = Nv;
            var n = function(n) {
                    if (!0 === n) return I.resolve(null);
                    var i = !1;
                    return new I(function(t, e) {
                        n.link.addEventListener("load", function() {
                            if (!i) {
                                i = !0;
                                var e = (new Date).getTime() - n.startTime;
                                setTimeout(function() {
                                    return t(e)
                                }, 100)
                            }
                        }, !1)
                    })
                }(t),
                f = new lh({
                    element: l,
                    delegate: d,
                    cssLoadedPromise: n
                }),
                i = f.store;
            l.classList.add("js-player-fullscreen");
            var r = f.expose,
                o = null,
                a = null,
                s = null,
                u = null,
                c = null,
                h = null,
                v = l.querySelector(".vp-controls"),
                p = l.querySelector(".vp-sidedock"),
                m = l.querySelector(".vp-title"),
                g = l.querySelector(".vp-cards-wrapper"),
                y = Oi.mobileAndroid || Oi.iPhone || Oi.windowsPhone || Oi.browser.bb10,
                _ = {
                    tiny: ds.enteredTinyMode,
                    mini: ds.enteredMiniMode,
                    normal: ds.enteredNormalMode,
                    none: ds.enteredNormalMode
                };

            function b(e) {
                e && void 0 !== _[e] && (f.events.fire(_[e]), l.classList.toggle("player-normal", "normal" === e), l.classList.toggle("player-mini", "mini" === e), l.classList.toggle("player-tiny", "tiny" === e))
            }

            function w(t) {
                Object.keys(Fd).forEach(function(e) {
                    return l.classList.toggle("player-" + e, t === e)
                })
            }

            function E() {
                var e = (f.config.view === bs.main || f.config.view === bs.privateUnlocked) && f.config.embed.settings && !f.config.embed.settings.playbar;
                l.classList.toggle("no-playbar", e), l.classList.toggle("with-fullscreen", !!f.config.embed.settings.fullscreen);
                var t = f.config.embed.settings.custom_logo;
                l.classList.toggle("with-custom-logo", !!t), l.classList.toggle("with-sticky-custom-logo", t && t.sticky), l.classList.toggle("background-mode", !!f.config.embed.settings.background), l.classList.toggle("touch-support", Oi.touch)
            }

            function S(e) {
                var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : f.config.video.url;
                if (!(!t || e && e.metaKey)) {
                    if (-1 === t.indexOf("#") && 0 < f.telecine.currentTime && f.telecine.currentTime < f.config.video.duration - 30 && !f.telecine.paused && (t += "#at=" + Math.floor(f.telecine.currentTime)), !f.config.embed.on_site) return window.open(t),
                        function(e) {
                            if (e && 0 < e.detail) try {
                                document.activeElement.blur()
                            } catch (e) {}
                        }(e), f.events.fire(ds.pauseButtonPressed), !1;
                    window.location = t
                }
            }

            function k() {
                u = new I(function(t, e) {
                    var n = null,
                        i = function e() {
                            clearTimeout(n), 0 < window.innerWidth && 0 < window.innerHeight ? t() : n = setTimeout(e, 250)
                        };
                    f.events.once(ds.ready, i), f.events.once(ds.error, i)
                })
            }

            function T() {
                function e() {
                    u.then(function() {
                        var e = function() {
                            var e = Ls(l),
                                t = e.width,
                                n = e.height;
                            return y ? n <= 200 ? "10px" : t < 450 ? "12px" : t <= 1024 ? "11px" : "10px" : "10px"
                        }();
                        return v.style.fontSize = e, p.style.fontSize = e, m.style.fontSize = e, !0
                    }).catch(function() {})
                }
                f.events.on(ds.didEnterFullscreen, e), f.events.on(ds.didExitFullscreen, e), window.addEventListener("orientationchange", e), y && (l.classList.add("mobile"), e())
            }

            function A() {
                function n() {
                    var e = l;
                    if (d && d.getFullscreenElement && "function" == typeof d.getFullscreenElement) {
                        var t = d.getFullscreenElement();
                        t && t instanceof HTMLElement && t.contains(l) && t.classList.contains("js-player-fullscreen") && (e = t)
                    }
                    return e
                }
                f.config.embed.fullscreen = !0, Oi.iPad && l.classList.add("no-fullscreen-api-support");
                var e = f.config.embed.playsinline && 10 <= Oi.iOS,
                    t = Oi.iPad || e;
                dh.enabled || t || (l.classList.add("no-fullscreen-support"), Oi.iOS || (f.config.embed.fullscreen = !1));
                var i = !1,
                    r = !1,
                    o = !1;
                f.events.on([gn.PICTURE_IN_PICTURE_ACTIVATED, gn.PICTURE_IN_PICTURE_DEACTIVATED], function() {
                    o = !0
                }), f.events.on(cs.forceFullscreen, function() {
                    dh.enabled || dh.videoEnabled(l) ? (f.events.fire(ds.willEnterFullscreen), r = !1, dh.request(n())) : f.events.fire(cs.toggleNativeControls, !0)
                }), f.events.on(ds.fullscreenButtonPressed, function() {
                    "picture-in-picture" === f.telecine.presentationMode && f.events.fire(cs.deactivatePictureInPicture), dh.element ? (f.events.fire(ds.willExitFullscreen), dh.exit()) : (f.events.fire(ds.willEnterFullscreen), r = !0, dh.request(n()))
                });
                var a = dh.onenter,
                    s = dh.onexit;
                if (dh.onenter = function(e) {
                        i || (n().contains(e) ? function(e, t) {
                            o ? o = !1 : i || (i = !0, f.events.fire(ds.didEnterFullscreen, n() === e, r))
                        }(e) : "function" == typeof a && a(e))
                    }, dh.onexit = function() {
                        i ? o ? o = !1 : i && (i = !1, f.events.fire(ds.didExitFullscreen, r), r || f.events.fire(cs.toggleNativeControls, !1), r = !1) : "function" == typeof s && s()
                    }, il(l).on("click", "a", function(e) {
                        dh.element === n() && dh.exit()
                    }), il(l).on("gestureend", function(e) {
                        1 < e.scale && f.events.fire(ds.fullscreenButtonPressed)
                    }), "undefined" != typeof MSGesture) {
                    var u = 1,
                        c = new MSGesture;
                    c.target = l, il(l).on("pointerdown", function(e) {
                        c.addPointer(e.pointerId)
                    }).on(["MSGestureChange"], function(e) {
                        u *= e.scale
                    }).on(["MSGestureEnd"], function() {
                        (!i && 2 <= u || i && u < 1) && f.events.fire(ds.fullscreenButtonPressed), u = 1
                    })
                }
            }

            function P() {
                if (!f.config.video.live_event) return c && (c.hide(), c = null), void(h && (h = null));
                i.get(Gc) || i.get(Kc) || (c = new Jh(l, f, i), h = new Kv(f, i))
            }

            function C() {
                E(), k(),
                    function() {
                        var e = function(o, a) {
                                return f.verifyConfig().then(function() {
                                    var e = f.config.request,
                                        t = e.signature,
                                        n = e.session,
                                        i = e.timestamp,
                                        r = e.expires;
                                    return Ds("https://" + f.config.player_url + "/video/" + f.config.video.id + "/" + o + "?signature=" + t + "&session=" + n + "&time=" + i + "&expires=" + r, {
                                        method: a
                                    })
                                }).catch(function(e) {
                                    Ou.captureException(e, {
                                        extra: {
                                            action: o,
                                            method: a
                                        }
                                    })
                                })
                            },
                            t = function(r, o) {
                                return f.updatePhpTokens().then(function() {
                                    var e = "following" === r ? f.config.video.owner.id : f.config.video.id,
                                        t = f.config.user.vimeo_api_interaction_tokens,
                                        n = "";
                                    if (t) switch (n = "?auth=", r) {
                                        case ps:
                                            n += t.likes;
                                            break;
                                        case ms:
                                            n += t.watch_later;
                                            break;
                                        case gs:
                                            n += t.following
                                    }
                                    var i = f.config.video.unlisted_hash && "following" !== r ? ":" + f.config.video.unlisted_hash : "";
                                    return Ds("https://" + f.config.vimeo_api_url + "/users/" + f.config.user.id + "/" + r + "/" + e + i + n, {
                                        method: o,
                                        withCredentials: !1,
                                        jwt: f.config.user.vimeo_api_client_token
                                    }).catch(function(e) {
                                        Ou.captureException(e, {
                                            extra: {
                                                action: r,
                                                method: o
                                            }
                                        })
                                    })
                                }).catch(function(e) {
                                    Ou.captureException(e)
                                })
                            };
                        f.events.on(ds.vodButtonPressed, function(e) {
                            if (f.config.user.purchased) {
                                if (!f.config.video.vod.is_feature && f.config.video.vod.feature_id) return void f.loadVideo(f.config.video.vod.feature_id).then(function() {
                                    return f.events.fire(ds.playButtonPressed), f.config.video.vod.feature_id
                                }).catch(function(e) {
                                    Ou.captureException(e), f.events.fire(cs.showOverlay, "error", {
                                        title: "Sorry",
                                        message: "There was a problem. Please try again."
                                    })
                                });
                                if (f.config.video.vod && f.config.video.vod.is_coming_soon) return;
                                f.events.fire(ds.playButtonPressed)
                            } else f.performDelegateAction(ls.purchase, function() {
                                f.events.fire(cs.openPopup, "purchase", {
                                    productId: e
                                })
                            }, e)
                        }), f.events.on(ds.likeButtonPressed, function() {
                            f.config.user.logged_in ? f.config.user.id !== f.config.video.owner.id && (f.config.user.liked ? f.performDelegateAction(ls.unlike, function() {
                                f.config.video.privacy !== ss.PRIVACY_HIDE_FROM_VIMEO ? t("likes", "DELETE") : e("like", "DELETE"), f.config.user.liked = !1, f.events.fire(ds.unliked)
                            }) : f.performDelegateAction(ls.like, function() {
                                f.config.video.privacy !== ss.PRIVACY_HIDE_FROM_VIMEO ? t("likes", "PUT") : e("like", "PUT"), f.config.user.liked = !0, f.events.fire(ds.liked)
                            })) : f.performDelegateAction(ls.loginForm, function() {
                                f.events.fire(cs.openPopup, "login-like")
                            }, "like")
                        }), f.events.on(ds.watchLaterButtonPressed, function() {
                            (f.config.video.url || f.config.video.privacy === ss.PRIVACY_UNLISTED) && (f.config.user.logged_in ? f.config.user.watch_later ? f.performDelegateAction(ls.removeFromWatchLater, function() {
                                t("watchlater", "DELETE"), f.config.user.watch_later = !1, f.events.fire(ds.removedFromWatchLater)
                            }) : f.performDelegateAction(ls.addToWatchLater, function() {
                                t("watchlater", "PUT"), f.config.user.watch_later = !0, f.events.fire(ds.addedToWatchLater)
                            }) : f.performDelegateAction(ls.loginForm, function() {
                                f.events.fire(cs.openPopup, "login-watch-later")
                            }, "watch-later"))
                        }), f.events.on(ds.collectionsButtonPressed, function() {
                            f.performDelegateAction(ls.collectionsOverlay, function() {
                                f.config.video.vod && f.config.video.vod.url ? S(null, f.config.video.vod.url + "#collections") : f.config.video.url && S(null, f.config.video.url + "#collections")
                            })
                        }), f.events.on(ds.shareButtonPressed, function() {
                            var e = f.config.embed.settings.share && f.config.embed.settings.share.embed_only,
                                t = function() {
                                    f.events.fire(cs.showOverlay, "share", e)
                                };
                            dh.element ? t() : f.performDelegateAction(ls.shareOverlay, t)
                        }), f.events.on(ds.embedButtonPressed, function() {
                            f.config.embed.settings.share.embed_only && f.performDelegateAction(ls.shareOverlay, function() {
                                f.events.fire(cs.showOverlay, "share", !0)
                            })
                        }), f.events.on(ds.followButtonPressed, function() {
                            if (f.config.user.logged_in && f.config.user.id !== f.config.video.owner.id) {
                                if (f.config.user.following) return t("following", "DELETE"), f.config.user.following = !1, void f.events.fire(ds.unfollowed);
                                t("following", "PUT"), f.config.user.following = !0, f.events.fire(ds.followed)
                            }
                        })
                    }(), T(), i.watch("ui.player.mode", b), i.watch("ui.player.breakpoint", w), A(), fh(l, "a[data-clip-link]", S), f.events.on(cs.openVimeo, S), P(), f.events.on(ds.configChanged, function() {
                        E(), P()
                    })
            }

            function x() {
                o || (o = new sv(f, i, l.querySelector(".vp-overlay-wrapper")))
            }

            function L() {
                a || (a = new Lv(f, {
                    uuid: f.uuid,
                    id: l.id,
                    isMobileDevice: !1
                }))
            }

            function O() {
                s || (s = new Ov(f))
            }
            var R = {
                initializationHandler: function() {
                    return function() {
                        x(), L(), O(), new Eh(f, i, v), new Ah(f, i, l);
                        var e = new Wv(f, i, l);
                        new Qh(f, l.querySelector(".notification-wrapper")), new av(f, i, l.querySelector(".vp-outro-wrapper")), new Fv(f, p), new Bv(f, m), Object.defineProperties(r, {
                            pauseKeyboard: {
                                enumerable: !0,
                                value: e.pause
                            },
                            unpauseKeyboard: {
                                enumerable: !0,
                                value: e.unpause
                            }
                        })
                    }(), C(), I.resolve()
                },
                postInitializationHandler: function() {
                    return f.telecine && (new Xh(l.querySelector(".vp-stats-debug"), f), new jv(f, i, g), new Gv(f, f.telecine, l.querySelector(".vp-player-inner"))), I.resolve()
                },
                authorizationHandler: function(e) {
                    e(), x(), L();
                    var t = "Error",
                        n = "Unhandled video privacy";
                    switch (f.config.view) {
                        case bs.privatePassword:
                            return new I(function(t, e) {
                                f.events.fire(cs.showOverlay, "password"), f.events.once(ds.passwordUnlocked, function(e) {
                                    t(e)
                                })
                            });
                        case bs.privateLocked:
                            O();
                            var i = "private-locked",
                                r = null;
                            return f.config.user.logged_in && (i = "error", r = {
                                title: "Private Video",
                                message: "Sorry, you dont have permission to watch.",
                                modal: !0,
                                logo: !!f.config.embed.settings.branding,
                                icon: "lock"
                            }), f.events.fire(cs.showOverlay, i, r), I.reject();
                        case bs.error:
                            t = f.config.title, n = f.config.message
                    }
                    return f.events.fire(cs.showOverlay, "error", {
                        title: t,
                        message: n,
                        modal: !0
                    }), I.reject()
                }
            };
            return f.init(e, R).then(function() {
                return f.config.view !== bs.privateUnlocked || f.config.embed.autoplay || f.events.fire(cs.showOverlay, "private-unlocked"), !0
            }).catch(function(e) {
                Ou.captureException(e), x(), L(), l.classList.remove("loading"), f.events.fire(ds.error, Jc.id, Jc)
            }), r
        }
}();